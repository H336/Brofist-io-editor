!function r(i,o,s){function a(e,t){if(!o[e]){if(!i[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(u)return u(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}n=o[e]={exports:{}},i[e][0].call(n.exports,function(t){return a(i[e][1][t]||t)},n,n.exports,r,i,o,s)}return o[e].exports}for(var u="function"==typeof require&&require,t=0;t<s.length;t++)a(s[t]);return a}({1:[function(t,e,n){var z=t("../client"),Y=t("keyboardjs"),K=t("pixi.js"),$=(t("p2"),t("../gp")),Z=t("../gf"),J=t("../physics"),Q=t("shifty"),r=t("../modules/mapUtil"),tt=new Object,et=[],nt=[{x:-108.25296640396118,y:120.99732160568237,angle:0,mass:0,id:"",shapes:[{x:0,y:0,width:30,height:100,angle:0,radius:15,alpha:0,id:"spawn",collision:!1,color:"0x000000",fontSize:"",text:"",make:3,type:1},{x:-.0011563301086446977,y:-34.99881625175476,width:30,height:30,angle:0,radius:15,alpha:1,id:"",collision:!1,color:"0x000000",fontSize:"",text:"",make:3,type:2},{x:.00014305114746130851,y:17.50001311302185,width:30,height:65,angle:0,radius:15,alpha:1,id:"",collision:!1,color:"0x000000",fontSize:"",text:"",make:3,type:1},{x:40052799915312834e-31,y:65.41118621826172,width:29,height:20,angle:0,radius:14.5,alpha:1,id:"",collision:!1,color:"0x000000",fontSize:18,text:"Bro",make:3,type:3},{x:43767584608122885e-31,y:-71.47789001464844,width:149,height:20,angle:0,radius:74.5,alpha:1,id:"",collision:!1,color:"0x000000",fontSize:18,text:"Let's play brofist.io",make:3,type:3}]},{x:-97.33495712280273,y:378.9975166320801,angle:0,mass:0,id:"",shapes:[{x:0,y:0,width:1e3,height:100,angle:0,radius:50,alpha:1,id:"",collision:!0,color:"0x000000",fontSize:"",text:"",make:1,type:1}]}];window.init=function(){z.init(),z.start(),z.offline=!0,tt.loadMap(nt)},tt.loadMap=function(t){$.unload($),r.isValid(t)||(console.log("Corrupt map data, loading default map"),alert("Invalid Map, loading default map, PLEASE DOWN VOTE THIS MAP"),t=nt),$.list=$.load(t,$),tt.defineBehaviours($.list)},tt.defineBehaviours=function(t){function e(t,e){for(var n=[],r=0;r<t.length;r++)-1!=t[r].id.search(e)&&(n[n.length]=t[r]);return n}function n(t,e){for(var n=[],r=0;r<t.length;r++)for(var i=0;i<t[r].shapes.length;i++)-1!=t[r].shapes[i].id.split(":")[0].search(e)&&(n[n.length]=t[r].shapes[i]);return n}function r(t){for(var e=[{x:0,y:0,angle:0,mass:1,id:"",shapes:[{x:0,y:0,width:30,height:100,angle:0,radius:50,alpha:.5000000000000001,id:"player",collision:!0,color:"0x000000",fontSize:"",text:"",make:1,type:1},{x:-.0011563301086425781,y:-34.99881625175476,width:null,height:null,angle:0,radius:15,alpha:1,id:"",collision:!0,color:"0x000000",fontSize:"",text:"",make:3,type:2},{x:.0001430511474609375,y:17.50001311302185,width:30,height:65,angle:0,radius:50,alpha:1,id:"",collision:!0,color:"0x000000",fontSize:"",text:"",make:3,type:1},{x:40052799943866846e-31,y:65.41118621826172,width:28.999999999999996,height:20,angle:0,radius:50,alpha:1,id:"name",collision:!0,color:"0x000000",fontSize:18,text:"Bro",make:3,type:3},{x:4376758535678124e-30,y:-71.47789001464844,width:149,height:20,angle:0,radius:50,alpha:1,id:"chat",collision:!0,color:"0x000000",fontSize:18,text:"Let's play brofist.io",make:3,type:3}]}],n=$.load(e=void 0!==t?[{x:0,y:0,angle:0,mass:1,id:"",shapes:[{x:0,y:0,width:30,height:100,angle:0,radius:50,alpha:.5000000000000001,id:"player",collision:!0,color:"0x000000",fontSize:"",text:"",make:1,type:1},{x:-.0011563301086425781,y:-34.99881625175476,width:null,height:null,angle:0,radius:15,alpha:1,id:"",collision:!0,color:"0x0101ff",fontSize:"",text:"",make:3,type:2},{x:.0001430511474609375,y:17.50001311302185,width:30,height:65,angle:0,radius:50,alpha:1,id:"",collision:!0,color:"0x0101ff",fontSize:"",text:"",make:3,type:1},{x:40052799943866846e-31,y:65.41118621826172,width:28.999999999999996,height:20,angle:0,radius:50,alpha:1,id:"name",collision:!0,color:"0x000000",fontSize:18,text:"Bro",make:3,type:3},{x:4376758535678124e-30,y:-71.47789001464844,width:149,height:20,angle:0,radius:50,alpha:1,id:"chat",collision:!0,color:"0x000000",fontSize:18,text:"Let's play brofist.io",make:3,type:3}]}]:e,$)[0],r=0;r<n.shapes.length;r++)"chat"==n.shapes[r].id&&(n.chat=n.shapes[r],n.chat.g.style.fill="black",n.chat.g.style.stroke="white",n.chat.g.style.strokeThickness=3,n.chat.setText("")),"name"==n.shapes[r].id&&(n.name=n.shapes[r],n.name.g.style.fill="white",n.name.g.style.stroke="black",n.name.g.style.strokeThickness=3),"player"==n.shapes[r].id&&(n.shapes[r].p.collisionGroup=Math.pow(2,1),n.shapes[r].p.collisionMask=5,n.shapes[r].setAlpha(0),n.playerShape=n.shapes[r],n.iAmPlayer=!0);return n.ray=J.createRay(),n.ray.collisionGroup=Math.pow(2,1),n.ray.collisionMask=Math.pow(2,0),n.p.fixedRotation=!0,n.p.damping=.9,J.updateMass(n.p,1),n}$.gWorld.down=new K.Container,$.gWorld.mid=new K.Container,$.gWorld.up=new K.Container;for(var i=0;i<t.length;i++)$.gWorld.removeChild(t[i].g),$.gWorld.down.addChild(t[i].g);$.gWorld.addChild($.gWorld.down),$.gWorld.addChild($.gWorld.mid),$.gWorld.addChild($.gWorld.up);for(var o=t,s=0;s<o.length;s++)for(var a=0;a<o[s].shapes.length;a++)"player"!=o[s].shapes[a].id&&null!=o[s].shapes[a].p&&(o[s].shapes[a].p.collisionMask=Math.pow(2,0)|Math.pow(2,1));var u=n(t,"spawn")[0],l=(void 0!==u&&u.refP.setAlpha(0),e(t,"door")[0]),c=(void 0===l&&console.log("door is not present"),n(t,"playArea")[0]),h=(void 0===c?console.log("Seeker spawn is not present"):c.refP.setAlpha(0),-1);if(void 0!==l&&void 0!==u)console.log("it's two player adventure map"),h=0;else if(void 0!==c&&void 0!==u)console.log("it's hide and seek map"),h=1;else{if(void 0===u)return console.log("it's invalid map"),alert("Invalid Map, loading default map, PLEASE DOWN VOTE THIS MAP"),tt.loadMap(nt),void(h=-1);console.log("it's sandbox map"),h=2}for(var l=e(t,"mapCredits")[0],p=(void 0!==l?(l.setAlpha(0),l.shapes[0].deleteMe(2),console.log("credits added successfully")):console.log("missing credits"),window.currentPlayer=0,window.player=new Object,!1),f=!1,d=!1,g=(player.gpData=r(),player.gpData.chatBuffer=[""],player.gpData.setX(u.refP.getX()),player.gpData.setY(u.refP.getY()),$.gWorld.removeChild(player.gpData.g),$.gWorld.mid.addChild(player.gpData.g),window.player1=new Object,!1),y=!1,m=!1,v=(0==h?(player1.gpData=r(),player1.gpData.chatBuffer=[""],player1.gpData.setX(u.refP.getX()),player1.gpData.setY(u.refP.getY()),$.gWorld.removeChild(player1.gpData.g),$.gWorld.mid.addChild(player1.gpData.g)):1==h?(player1.gpData=r(!0),player1.gpData.chatBuffer=[""],player1.gpData.setX(c.refP.getX()),player1.gpData.setY(c.refP.getY()),$.gWorld.removeChild(player1.gpData.g),$.gWorld.mid.addChild(player1.gpData.g)):player1=null,Y.bind("left",function(t){currentPlayer=0,p=!0,t.preventRepeat()},function(t){player.gpData.p.velocity[0]=0,p=!1}),Y.bind("up",function(t){currentPlayer=0,d=!0,t.preventRepeat()},function(t){d=!1}),Y.bind("right",function(t){currentPlayer=0,f=!0,t.preventRepeat()},function(t){player.gpData.p.velocity[0]=0,f=!1}),Y.bind("down",function(t){currentPlayer=0,moveDown=!0,t.preventRepeat()},function(t){moveDown=!1}),null!=player1&&(Y.bind("a",function(t){currentPlayer=1,g=!0,t.preventRepeat()},function(t){player1.gpData.p.velocity[0]=0,g=!1}),Y.bind("w",function(t){currentPlayer=1,m=!0,t.preventRepeat()},function(t){m=!1}),Y.bind("d",function(t){currentPlayer=1,y=!0,t.preventRepeat()},function(t){player1.gpData.p.velocity[0]=0,y=!1}),Y.bind("s",function(t){currentPlayer=1,moveDown1=!0,t.preventRepeat()},function(t){moveDown1=!1})),z.addLoopFunction(function(t){if(f&&(player.gpData.p.velocity[0]=3),p&&(player.gpData.p.velocity[0]=-3),d)for(var e=player.gpData.getX(),n=player.gpData.getY(),r=player.gpData.playerShape.getWidth(),r=(player.gpData.playerShape.getHeight(),+r),i=e-r/2,o=r/11,s=0;s<12;s++){player.gpData.ray.from=[J.xAxis(i+s*o,0),J.yAxis(n+45,0)],player.gpData.ray.to=[J.xAxis(i+s*o,0),J.yAxis(100+n+45,0)];if(player.gpData.ray.update(),player.gpData.ray.result.reset(),player.gpData.ray.hitPoint=[1/0,1/0],$.pWorld.raycast(player.gpData.ray.result,player.gpData.ray)){player.gpData.ray.result.getHitPoint(player.gpData.ray.hitPoint,player.gpData.ray);var a=player.gpData.ray.result.getHitDistance(player.gpData.ray);if(player.gpData.ray.result.shape.ref.getCollision()&&a<.05){player.gpData.p.velocity[1]=8;break}}}}),null!=player1&&z.addLoopFunction(function(t){if(y&&(player1.gpData.p.velocity[0]=3),g&&(player1.gpData.p.velocity[0]=-3),m)for(var e=player1.gpData.getX(),n=player1.gpData.getY(),r=player1.gpData.playerShape.getWidth(),r=(player1.gpData.playerShape.getHeight(),+r),i=e-r/2,o=r/11,s=0;s<12;s++){player1.gpData.ray.from=[J.xAxis(i+s*o,0),J.yAxis(n+45,0)],player1.gpData.ray.to=[J.xAxis(i+s*o,0),J.yAxis(100+n+45,0)];if(player1.gpData.ray.update(),player1.gpData.ray.result.reset(),player1.gpData.ray.hitPoint=[1/0,1/0],$.pWorld.raycast(player1.gpData.ray.result,player1.gpData.ray)){player1.gpData.ray.result.getHitPoint(player1.gpData.ray.hitPoint,player1.gpData.ray);var a=player1.gpData.ray.result.getHitDistance(player1.gpData.ray);if(player1.gpData.ray.result.shape.ref.getCollision()&&a<.05){player1.gpData.p.velocity[1]=8;break}}}}),z.addLoopFunction(function(){var t={x:0,y:0},t=0==currentPlayer?{x:player.gpData.g.x,y:player.gpData.g.y}:{x:player1.gpData.g.x,y:player1.gpData.g.y},e=$.gWorld,n={x:z.renderer.view.width/2,y:z.renderer.view.height/2},r=window.innerWidth/1700;e.scale.x=e.scale.y=r,n.x=n.x/r,n.y=n.y/r,e.x=(n.x-t.x)*r,e.y=(n.y-t.y)*r}),e(t,"rotator")),i=0;i<v.length;i++){for(var _=v[i].id.indexOf("rotator:"),L=(_+="rotator:".length,"");;){if(void 0===v[i].id[_]||"|"==v[i].id[_])break;L+=v[i].id[_],_++}v[i].syncRotatorData=function(){return Z.roundUpto(this.getAngle())},v[i].applyRotatorData=function(t){this.setAngle(t)},v[i].p.angularVelocity=parseFloat(L)}for(var b=n(t,"poision"),i=0;i<b.length;i++)null!=b[i].p&&(b[i].p.sensor=!0,b[i].p.onTouchStart=function(t){void 0!==t.ref.refP.iAmPlayer&&(console.log(this.ref.refP.getAlpha()),0!=this.ref.refP.getAlpha())&&(void 0!==t.ref.refP.lastCheckPoint?(t.ref.refP.setX(t.ref.refP.lastCheckPoint[0]),t.ref.refP.setY(t.ref.refP.lastCheckPoint[1]-60)):(t.ref.refP.setX(u.refP.getX()),t.ref.refP.setY(u.refP.getY())))});function F(t){var e,n;(t=$.createShape({x:t[0]-3,y:t[1]-40,shapes:[{type:3,text:"🗹 checked"}]},$)).shapes[0].setFontSize(20),t.shapes[0].removePhysics(),e=t.shapes[0],(n=$.createShape({shapes:[{type:3}]},$)).shapes[0].removePhysics(),n.shapes[0].setFontSize(e.getFontSize()),n.shapes[0].g.style.fill="black",n.shapes[0].g.style.stroke="white",n.shapes[0].g.style.strokeThickness=3,n.shapes[0].setText(e.getText()),n.setX(e.refP.getX()-.001392189551552292),n.setY(e.refP.getY()-45.53205370903015),$.gWorld.removeChild(n.g),$.gWorld.mid.addChild(n.g),et[et.length]=n,(new Q.Tweenable).tween({from:{y:n.getY(),alpha:1,index:et.length-1},to:{y:n.getY()-100,alpha:0,index:et.length-1},duration:5e3,easing:"easeOutQuad",step:function(t){et[t.index].setY(t.y),et[t.index].setAlpha(t.alpha),0==t.alpha&&($.deleteShape(et[t.index]),$.gWorld.mid.removeChild(et[t.index].g),et[t.index]=null)}}),t.shapes[0].setText("")}for(var N=n(t,"checkpoint"),i=0;i<N.length;i++)N[i].p.onTouchStart=function(t){void 0!==t.ref.refP.iAmPlayer&&(void 0===t.ref.refP.lastCheckPoint&&(t.ref.refP.lastCheckPoint=[null,null]),t.ref.refP.lastCheckPoint[0]!=this.ref.refP.getX()||t.ref.refP.lastCheckPoint[1]!=this.ref.refP.getY())&&(t.ref.refP.lastCheckPoint=[this.ref.refP.getX(),this.ref.refP.getY()],F(t.ref.refP.lastCheckPoint))};for(var x=n(t,"button"),w=e(t,"gate"),i=0;i<w.length;i++){w[i].activeButtons=0,w[i].infoOfGate={id:"",ref:null,action:"0"},w[i].syncGateData=function(){return this.getCollision()},w[i].applyGateData=function(t){this.setCollision(t),t?this.setAlpha(1):this.setAlpha(0)};for(var _=w[i].id.indexOf("gate"),j="";;){if(":"==w[i].id[_])break;j+=w[i].id[_],_++}_++,w[i].infoOfGate={id:j,ref:w[i],action:w[i].id[_]},"0"==w[i].infoOfGate.action?(w[i].setCollision(!0),w[i].setAlpha(1)):(w[i].setCollision(!1),w[i].setAlpha(0))}for(i=0;i<x.length;i++){x[i].gates=[],x[i].pplOnButton=0,x[i].gateIdList=x[i].id.split(":")[1].split(","),x[i].redButtonShape=null;for(var T=0;T<x[i].refP.shapes.length;T++)"0xff0000"==x[i].refP.shapes[T].getColor()&&(x[i].redButtonShape=x[i].refP.shapes[T]);for(T=0;T<w.length;T++)-1!=x[i].gateIdList.indexOf(w[T].infoOfGate.id)&&x[i].gates.push(w[T]);x[i].syncButtonData=function(){return this.pplOnButton},x[i].applyButtonData=function(t){0<t?this.redButtonShape.setAlpha(0):this.redButtonShape.setAlpha(1)},x[i].p.onTouchStart=function(t){if(void 0!==t.ref.refP.iAmPlayer){this.ref.pplOnButton++,this.ref.redButtonShape.setAlpha(0);for(var e=0;e<this.ref.gates.length;e++)"0"==this.ref.gates[e].infoOfGate.action?(this.ref.gates[e].setCollision(!1),this.ref.gates[e].setAlpha(0)):(this.ref.gates[e].setCollision(!0),this.ref.gates[e].setAlpha(1)),1==this.ref.pplOnButton&&this.ref.gates[e].activeButtons++}},x[i].p.onTouchEnd=function(t){if(void 0!==t.ref.refP.iAmPlayer&&(this.ref.pplOnButton--,0==this.ref.pplOnButton)){this.ref.redButtonShape.setAlpha(1);for(var e=0;e<this.ref.gates.length;e++)this.ref.gates[e].activeButtons--,0==this.ref.gates[e].activeButtons&&(0==this.ref.gates[e].infoOfGate.action?(this.ref.gates[e].setCollision(!0),this.ref.gates[e].setAlpha(1)):(this.ref.gates[e].setCollision(!1),this.ref.gates[e].setAlpha(0)))}}}for(var E=n(t,"leaver"),S=e(t,"platform"),i=0;i<S.length;i++){S[i].syncPlatformData=function(){return[Math.roundUpto(this.p.getX()),Math.roundUpto(this.p.getY()),Math.roundUpto(this.p.velocity[0]),Math.roundUpto(this.p.velocity[1])]},S[i].applyPlatformData=function(t){this.setX(t[0]),this.setY(t[1]),this.p.velocity=[t[2],t[3]]};for(var _=S[i].id.indexOf("platform"),C="";;){if("|"==S[i].id[_]||void 0===S[i].id[_])break;C+=S[i].id[_],_++}var j=C.split(":")[0],L=parseFloat(C.split(":")[1].split(",")[0]),A=parseFloat(C.split(":")[1].split(",")[1]),P=parseFloat(C.split(":")[1].split(",")[2]),M=0==(M=parseInt(C.split(":")[1].split(",")[3]))?1/0:M,A=(S[i].tripCounter=0,S[i].info={id:j,ref:S[i],speed:L,toX:A,toY:P,xAxis:S[i].getX(),yAxis:S[i].getY(),tripCount:M},$.xAxis(S[i].info.toX,0)),P=$.yAxis(S[i].info.toY,0),M=$.xAxis(S[i].getX(),0),O=$.yAxis(S[i].getY(),0),R=S[i].info.speed,I=Math.atan2(P-O,A-M),U=R*Math.cos(I),R=R*Math.sin(I),I=$.createShape({x:S[i].getX(),y:S[i].getY(),id:S[i].info.id,shapes:[{type:2,radius:50,color:"0xcccccc"}]},$),I=(I.setAlpha(0),I.setMass(1),I.setCollision(!1),I.platformRef=S[i],J.lockTwoBodies($.pWorld,S[i].p,I.p,0),S[i].p.velocity=[U,R],Math.sqrt(Math.pow(A-M,2)+Math.pow(P-O,2))),q=$.xAxis(M+(A-M)/I*-1,1),G=$.yAxis(O+(P-O)/I*-1,1);S[i].sensor1=$.createShape({x:q,y:G,id:S[i].info.id,shapes:[{type:2,radius:50,color:"0x4caf50"}]},$),S[i].sensor1.setAlpha(0),S[i].sensor1.directionalVelocity=[U,R],S[i].sensor1.shapes[0].p.onTouchStart=function(t){this.ref.refP.getId()==t.ref.refP.getId()&&((t=t.ref.refP.platformRef).p.velocity=[this.ref.refP.directionalVelocity[0],this.ref.refP.directionalVelocity[1]],t.setX(t.info.xAxis),t.setY(t.info.yAxis),0!=t.tripCounter)&&(t.tripCounter++,t.tripCounter>=t.info.tripCount)&&(t.p.velocity=[0,0],t.sensor1.directionalVelocity=[0,0],t.sensor2.directionalVelocity=[0,0])},q=$.xAxis(A+(A-M)/I*1,1),G=$.yAxis(P+(P-O)/I*1,1),S[i].sensor2=$.createShape({x:q,y:G,id:S[i].info.id,shapes:[{type:2,radius:50,color:"0x4caf50"}]},$),S[i].sensor2.setAlpha(0),S[i].sensor2.directionalVelocity=[-U,-R],S[i].sensor2.shapes[0].p.onTouchStart=function(t){this.ref.refP.getId()==t.ref.refP.getId()&&((t=t.ref.refP.platformRef).p.velocity=[this.ref.refP.directionalVelocity[0],this.ref.refP.directionalVelocity[1]],t.setX(t.info.toX),t.setY(t.info.toY),t.tripCounter++,t.tripCounter>=t.info.tripCount)&&(t.p.velocity=[0,0],t.sensor1.directionalVelocity=[0,0],t.sensor2.directionalVelocity=[0,0])}}for(i=0;i<E.length;i++){E[i].platforms=[],E[i].platformsIdList=E[i].id.split(":")[1].split(","),E[i].leftStick=E[i].rightStick=E[i].leftBall=E[i].rightBall=null,E[i].left=!0;for(T=0;T<E[i].refP.shapes.length;T++)"leftStick"==E[i].refP.shapes[T].id&&(E[i].leftStick=E[i].refP.shapes[T]),"leftBall"==E[i].refP.shapes[T].id&&(E[i].leftBall=E[i].refP.shapes[T]),"rightStick"==E[i].refP.shapes[T].id&&(E[i].rightStick=E[i].refP.shapes[T]),"rightBall"==E[i].refP.shapes[T].id&&(E[i].rightBall=E[i].refP.shapes[T]);for(T=0;T<S.length;T++)-1!=E[i].platformsIdList.indexOf(S[T].info.id)&&(E[i].platforms.push(S[T]),void 0===S[T].sensor1Velocity)&&(S[T].sensor1Velocity=[S[T].sensor1.directionalVelocity[0],S[T].sensor1.directionalVelocity[1]],S[T].sensor2Velocity=[S[T].sensor2.directionalVelocity[0],S[T].sensor2.directionalVelocity[1]],S[T].p.velocity=[0,0],S[T].sensor1.directionalVelocity=[0,0],S[T].sensor2.directionalVelocity=[0,0],S[T].currentSensorVelocity=2);E[i].moveLeft=function(){for(var t=0;t<this.platforms.length;t++)if(0!=this.platforms[t].p.velocity[0]||0!=this.platforms[t].p.velocity[1])return;this.leftStick.setAlpha(1),this.leftBall.setAlpha(1),this.rightStick.setAlpha(0),this.rightBall.setAlpha(0),this.left=!0;for(t=0;t<this.platforms.length;t++)2==this.platforms[t].currentSensorVelocity?(this.platforms[t].currentSensorVelocity=1,this.platforms[t].p.velocity=this.platforms[t].sensor1Velocity):(this.platforms[t].currentSensorVelocity=2,this.platforms[t].p.velocity=this.platforms[t].sensor2Velocity)},E[i].moveRight=function(){for(var t=0;t<this.platforms.length;t++)if(0!=this.platforms[t].p.velocity[0]||0!=this.platforms[t].p.velocity[1])return;this.leftStick.setAlpha(0),this.leftBall.setAlpha(0),this.rightStick.setAlpha(1),this.rightBall.setAlpha(1),this.left=!1;for(t=0;t<this.platforms.length;t++)2==this.platforms[t].currentSensorVelocity?(this.platforms[t].currentSensorVelocity=1,this.platforms[t].p.velocity=this.platforms[t].sensor1Velocity):(this.platforms[t].currentSensorVelocity=2,this.platforms[t].p.velocity=this.platforms[t].sensor2Velocity)},E[i].syncLeaversData=function(){return this.left},E[i].applyLeaversData=function(t){t?(this.leftStick.setAlpha(1),this.leftBall.setAlpha(1),this.rightStick.setAlpha(0),this.rightBall.setAlpha(0)):(this.leftStick.setAlpha(0),this.leftBall.setAlpha(0),this.rightStick.setAlpha(1),this.rightBall.setAlpha(1))},E[i].p.onTouchStart=function(t){void 0!==t.ref.refP.iAmPlayer&&(this.ref.left?this.ref.moveRight():this.ref.moveLeft())}}for(var B=e(t,"cover"),D=0;D<B.length;D++){for(C="",T=_=B[D].id.indexOf("cover");T<B[D].id.length&&"|"!=B[D].id[T];T++)C+=B[D].id[T];for(var W,H,X=parseFloat(C.split(":")[1].split(",")[0]),V=parseFloat(C.split(":")[1].split(",")[1]),k=B[D].shapes,i=(k[0],0);i<k.length;i++)-1==$.gWorld.up.children.indexOf(k[i].refP.g)&&($.gWorld.removeChild(k[i].refP.g),$.gWorld.up.addChild(k[i].refP.g)),null!=k[i].p&&(W=X,H=V,et[et.length]=k[i],k[i].refP.tweenIndex=et.length-1,k[i].p.body.touchCount=0,k[i].p.ref.refP.op=W,k[i].p.ref.refP.du=H,k[i].p.onTouchStart=function(t){void 0!==t.ref.refP.chatBuffer&&(void 0===this.body.touchCount&&(this.body.touchCount=0),void 0!==this.ref.refP.myTweenable&&0==this.body.touchCount&&this.ref.refP.myTweenable.dispose(),this.body.touchCount++,1==this.body.touchCount)&&(this.ref.refP.myTweenable=new Q.Tweenable,this.ref.refP.myTweenable.tween({from:{alpha:this.ref.refP.getAlpha(),index:this.ref.refP.tweenIndex},to:{alpha:this.ref.refP.op,index:this.ref.refP.tweenIndex},duration:this.ref.refP.du,easing:"easeOutQuad",step:function(t){et[t.index].refP.setAlpha(t.alpha)}}))},k[i].p.onTouchEnd=function(t){void 0!==t.ref.refP.chatBuffer&&(this.body.touchCount--,0==this.body.touchCount)&&(this.ref.refP.myTweenable.dispose(),this.ref.refP.myTweenable=new Q.Tweenable,this.ref.refP.myTweenable.tween({from:{alpha:this.ref.refP.getAlpha(),index:this.ref.refP.tweenIndex},to:{alpha:1,index:this.ref.refP.tweenIndex},duration:this.ref.refP.du,easing:"easeOutQuad",step:function(t){et[t.index].refP.setAlpha(t.alpha)}}))})}},e.exports=window.GPlayer=tt},{"../client":2,"../gf":4,"../gp":5,"../modules/mapUtil":8,"../physics":304,keyboardjs:43,p2:83,"pixi.js":244,shifty:291}],2:[function(t,e,n){var b=t("./network"),r=(t("p2"),t("./graphics")),i=(t("./physics"),t("./gp")),s=t("./gf"),o=t("./timer_hack"),l=t("./config"),a=t("mainloop.js"),x=new Object;x.onReady=function(){x.start()},x.init=function(){x.loopFunctions=[],x.timeSince1stUpdate=0,x.cSkin=0,x.runPhysics=!0,x.modeName="",x.name=s.generateNameId(),x.avatar="0",x.chatColor="white",x.token=null,x.renderer=r.createRenderer(window.innerWidth,window.innerHeight,16777215),x.renderer.view.style.display="none";var t=i.createWorld();i.gWorld=t.gWorld,i.pWorld=t.pWorld,window.addEventListener("resize",r.handleResize),r.handleResize(),s.addWindowNotActiveTrigger(),x.initAvatar(),o.init(x)},x.initAvatar=function(){b.getMyBio(function(t){x.name=t.name,x.avatar=t.avatar,x.whatBro=t.whatBro,x.chatColor=t.chatColor})},x.update=function(t){if(x.runPhysics){i.sync(),x.timeSince1stUpdate+=t,i.pWorld.step(t/1e3);for(var e=0;e<x.loopFunctions.length;e++){var n=x.loopFunctions[e];n.exeCountCounter<n.exeCount?(n.exeCountCounter++,Math.round(x.timeSince1stUpdate-n.lastUpdateTime)>=n.timeOut&&(n.fun(n.par),n.lastUpdateTime=x.timeSince1stUpdate)):x.removeLoopFunction(n)}}},x.addLoopFunction=function(t,e,n,r){void 0===t&&(func=function(t){console.log("Empty loop function! with parameter: "+t)}),x.loopFunctions[x.loopFunctions.length]={fun:t,par:e=void 0===e?null:e,exeCount:r=void 0===r?1/0:r,timeOut:n=void 0===n?0:n,lastUpdateTime:0,exeCountCounter:0}},x.removeLoopFunction=function(t){t=x.loopFunctions.indexOf(t);-1<t&&x.loopFunctions.splice(t,1)},x.draw=function(){x.renderer.render(i.gWorld)},x.start=function(){b.clientReady(),a.setUpdate(x.update),a.setDraw(x.draw),a.start(),x.renderer.view.style.display="inherit",document.body.style.overflow="hidden",delete x,delete PIXI},x.loadRooms=function(e){x.getGamingServersInfo(x.modeName,currentLanguage,!1,!1,function(t){e(t)})},x.sendPlayingInfo=function(t,e){t=parseInt(t);for(var n=0;n<b.dataCenters.length;n++)for(var r=0;r<b.dataCenters[n].length;r++){var i=b.dataCenters[n][r][0],o=(b.dataCenters[n][r][1],b.dataCenters[n][r][2],b.dataCenters[n][r][3],b.dataCenters[n][r][4]);o==t&&b.setPlayingData({modeName:x.modeName,roomNum:o+" "+i+"-"+currentLanguage},function(){e()})}},x.findUntilFound=function(t,e,n){b.gsip=t,b.gsrn=e,b.getSID(function(t){b.sid=t,b.connectToGs(b.gsip,function(){console.log("connected to gs"),x.verifyIsHuman(function(){b.registerSidOnGs(function(t){console.log("verified on gs server",t),"dublicateSession"==t?(alert("You are already playing game in other tab of browser"),location.reload(),n(2)):b.joinRoom(b.gsrn,function(t){if(1==t)x.sendPlayingInfo(x.roomId,function(){x.onReady(),n(1)});else{for(console.log("else"),b.gsSocket.disconnect();x.rIndex++,void 0===b.dataCenters[x.dcIndex][x.rIndex]&&(x.dcIndex++,void(x.rIndex=0)===b.dataCenters[x.dcIndex])&&(alert("seem's like all servers are full, REFRESH YOUR PAGE AND TRY AGAIN"),location.reload()),b.dataCenters[x.dcIndex][x.rIndex][2]==x.modeInfo.mp;);var t=b.dataCenters[x.dcIndex][x.rIndex][1],e=b.dataCenters[x.dcIndex][x.rIndex][3];x.roomId=b.dataCenters[x.dcIndex][x.rIndex][4],x.findUntilFound(t,e,n)}})})})})})},x.getGamingServersInfo=function(g,y,m,v,_){b.getGamingServersInfo(function(t){for(var e=[],n=0;n<t.length;n++)t[n].mode==g&&t[n].lan==y&&t[n].mode==x.modeName&&(e[e.length]=t[n]);var r=[];b.dataCenters=[];for(var i=0;i<e.length;i++){var o=e[i].location,s=-1==r.indexOf(o)?r.length:r.indexOf(o);r[s]=o,void 0===b.dataCenters[s]&&(b.dataCenters[s]=[]),b.dataCenters[s].push(e[i])}for(var a=1,i=0;i<b.dataCenters.length;i++){for(var u=b.dataCenters[i],l=[],c=0;c<u.length;c++)for(var h=u[c],p=0;p<h.rooms.length;p++){var f=h.rooms[p];l[l.length]=[h.location,h.ip,f,p,a],a++}b.dataCenters[i]=l}if(v)for(i=0;i<b.dataCenters.length;i++)b.dataCenters[i].sort(function(t,e){return e[2]-t[2]});if(m)for(i=0;i<b.dataCenters.length;i++){var d=b.dataCenters[i][b.dataCenters[i].length-1][1],d=b.ajaxGetReq(d+"/ping",function(t,e){200==e?(b.dataCenters[this.dataCenterId].ping=Date.now()-this.pingT,b.pingCheckCount++,b.pingCheckCount===b.dataCenters.length&&(b.dataCenters.sort(function(t,e){return t.ping-e.ping}),_(b.dataCenters))):(b.dataCenters[this.dataCenterId].ping=1/0,b.pingCheckCount++,b.pingCheckCount===b.dataCenters.length&&(b.dataCenters.sort(function(t,e){return t.ping-e.ping}),_(b.dataCenters)))});d.dataCenterId=i,d.pingT=Date.now()}else _(b.dataCenters)})},x.verifyIsHuman=function(t){b.isHumanOnGs(x.token,t)},x.autoConnect=function(u){x.getGamingServersInfo(x.modeName,currentLanguage,!0,!0,function(t){for(var e=0;e<l.modes.length;e++)if(x.modeName==l.modes[e].nm){x.modeInfo=l.modes[e];break}for(var n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++){var i=t[n][r][1],o=t[n][r][2],s=t[n][r][3],a=t[n][r][4];if(o<x.modeInfo.mp)return x.dcIndex=n,x.rIndex=r,x.roomId=a,void x.findUntilFound(i,s,u)}alert("Seem's like all servers are full, REFRESH YOUR PAGE AND TRY AGAIN-"),location.reload()})},x.manualConnect=function(t,e){if(s.isDefined(t)){var n,t=t.getAttribute("id").split("|"),r=(t[1],t[2]),i=(t[0],t[3]),r=parseInt(r);x.roomId=i,b.gsrn=parseInt(t[0]),b.gsip=t[1];for(var o=0;o<l.modes.length;o++)if(x.modeName==l.modes[o].nm){n=l.modes[o];break}r<n.mp?b.getSID(function(t){b.sid=t,b.connectToGs(b.gsip,function(){x.verifyIsHuman(function(){b.registerSidOnGs(function(t){"dublicateSession"==t?(alert("You are already playing game in other tab of browser"),location.reload(),e(2)):b.joinRoom(b.gsrn,function(t){1==t?x.sendPlayingInfo(x.roomId,function(){x.onReady(),e(1)}):(b.gsSocket.disconnect(),alert("Room is Full. Try to join another room OR Hit Play button to AUTO connect"),e(2))})})})})}):(alert("Room is Full. Try to join another room OR Hit Play button to AUTO connect"),e(2))}},e.exports=window.client=x},{"./config":3,"./gf":4,"./gp":5,"./graphics":6,"./network":10,"./physics":304,"./timer_hack":316,"mainloop.js":49,p2:83}],3:[function(t,e,n){var r,i=new Object;i.version="1.0.4",i.online=!0,i.ads=!1,i.test=!1,i.modes=[{rc:5,mp:12,nm:"twoPlayer"},{rc:3,mp:20,nm:"hideAndSeek"},{rc:1,mp:60,nm:"sandbox"}],i.onlineRpsPort=80,i.onlineServersPort=80,i.onlineDbPort=80,i.onlineRpsIp="http://172.104.138.121",i.onlineRpsTestIp="http://test_rps.brofist.io",i.onlineDbIp="http://db.brofist.io",i.onlineSessionDomain=["http://brofist.io","http://www.brofist.io","https://api.xsolla.com"],i.onlineServersList=[{location:"Frankfurt",ip:"http://85.90.245.227",mode:"twoPlayer",lan:"ru",rooms:[],connected:!1,uptime:0,socketsCount:0},{location:"Frankfurt",ip:"http://172.104.233.227",mode:"hideAndSeek",lan:"ru",rooms:[],connected:!1,uptime:0,socketsCount:0},{location:"Frankfurt",ip:"http://172.104.237.103",mode:"sandbox",lan:"ru",rooms:[],connected:!1,uptime:0,socketsCount:0},{location:"Frankfurt",ip:"http://172.104.129.50",mode:"sandbox",lan:"ru",rooms:[],connected:!1,uptime:0,socketsCount:0},{location:"Georgia",ip:"http://74.207.237.182",mode:"twoPlayer",lan:"en",rooms:[],connected:!1,uptime:0,socketsCount:0},{location:"Georgia",ip:"http://45.33.98.242",mode:"hideAndSeek",lan:"en",rooms:[],connected:!1,uptime:0,socketsCount:0},{location:"Texas",ip:"http://45.79.23.186",mode:"sandbox",lan:"en",rooms:[],connected:!1,uptime:0,socketsCount:0},{location:"Texas",ip:"http://test_gs.brofist.io",mode:"sandbox",lan:"en",rooms:[],connected:!1,uptime:0,socketsCount:0}],i.offlineRpsPort=3e3,i.offlineServerPort=3001,i.offlineDbPort=4e3,i.offlineRpsIp="http://127.0.0.1:"+i.offlineRpsPort,i.offlineDbIp="http://127.0.0.1:4000",i.offlineSessionDomain=["http://localhost:"+i.offlineRpsPort,"http://www.localhost:"+i.offlineRpsPort],i.offlineServersList=[{location:"Georgia",ip:"http://127.0.0.1:"+i.offlineServerPort,mode:"sandbox",lan:"en",rooms:[],connected:!1,uptime:0,socketsCount:0}],i.test?(r=[],i.onlineServersList.forEach(function(t){-1!=t.ip.indexOf("test_gs.brofist.io")&&r.push(t)}),i.rpsIp=i.onlineRpsTestIp,i.serversList=r,i.dbIp=i.onlineDbIp,i.rpsPort=i.onlineRpsPort,i.serverPort=i.onlineServersPort,i.dbPort=i.onlineDbPort,i.sessionDomain=i.onlineSessionDomain):i.online?(i.rpsIp=i.onlineRpsIp,i.serversList=i.onlineServersList,i.dbIp=i.onlineDbIp,i.rpsPort=i.onlineRpsPort,i.serverPort=i.onlineServersPort,i.dbPort=i.onlineDbPort,i.sessionDomain=i.onlineSessionDomain):(i.rpsIp=i.offlineRpsIp,i.serversList=i.offlineServersList,i.dbIp=i.offlineDbIp,i.rpsPort=i.offlineRpsPort,i.serverPort=i.offlineServerPort,i.dbPort=i.offlineDbPort,i.sessionDomain=i.offlineSessionDomain),e.exports=i},{}],4:[function(t,e,n){var h=t("lodash"),u=new Object;u.getRandomColor=function(){for(var t="0x",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},u.isValidPassword=function(t){var e="Password should";return t.length<4?e+" have minimum length of 4 characters":32<t.length?e+" have length less than 33 characters":h.isString(t)?"":e+" be of type String"},u.isValidEmail=function(t){return void 0!==t&&t.constructor==String&&!(320<t.length||!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t))},u.convertToAlphaNumeric=function(t){for(var e="",n=0;n<t.length;n++)"a"<=t[n]&&t[n]<="z"||"A"<=t[n]&&t[n]<="Z"||"0"<=t[n]&&t[n]<="9"||"-"==t[n]||"_"==t[n]||"."==t[n]?e+=t[n]:e+=".";return e},u.isValidName=function(t){var e="Username should",n="display:inline; color:blue",r="<p style='"+n+"'>0</p>",i="<p style='"+n+"'>9</p>",o="<p style='"+n+"'>a</p>",s="<p style='"+n+"'>z</p>",a="<p style='"+n+"'>A</p>",u="<p style='"+n+"'>Z</p>";if(!h.isString(t))return e+" be of type String";if(!(2<=t.length&&t.length<=30))return e+" have length 2 to 30 characters";if(!("a"<=t[0]&&t[0]<="z"||"A"<=t[0]&&t[0]<="Z"||"0"<=t[0]&&t[0]<="9"))return e+" start with number("+r+"-"+i+") or letter("+o+"-"+s+", "+a+"-"+u+")";if(!("a"<=t[t.length-1]&&t[t.length-1]<="z"||"A"<=t[t.length-1]&&t[t.length-1]<="Z"||"0"<=t[t.length-1]&&t[t.length-1]<="9"))return e+" end with number("+r+"-"+i+") or letter("+o+"-"+s+", "+a+"-"+u+")";for(var l=0;l<t.length;l++)if(!("a"<=t[l]&&t[l]<="z"||"A"<=t[l]&&t[l]<="Z"||"0"<=t[l]&&t[l]<="9"||"-"==t[l]||"_"==t[l]||"."==t[l]))return e+" contain only  numbers("+r+"-"+i+") or letters("+o+"-"+s+", "+a+"-"+u+") or <p style='display:inline; color:blue'>-</p> or <p style='display:inline; color:blue'>.</p> or <p style='display:inline; color:blue'>_</p> ";return""},u.generateNameId=function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<2;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return"Bro_"+t},u.getRandomString=function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},u.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},u.shuffleArray=function(t){for(var e,n,r=t.length;0!==r;)n=Math.floor(Math.random()*r),e=t[--r],t[r]=t[n],t[n]=e;return t},u.per=function(t,e){return t/100*e},u.splitString=function(t,e){e=new RegExp(".{1,"+e+"}","g");return t.match(e)},u.intersection=function(t,e){for(var n=0,r=0,i=[];n<t.length&&r<e.length;)t[n]<e[r]?n++:(t[n]>e[r]||(i.push(t[n]),n++),r++);return i},u.difference=function(t,e){return t.filter(function(t){return e.indexOf(t)<0})},u.ajaxGetReq=function(t,e){var n=new XMLHttpRequest;n.withCredentials=!0,n.evtHandler=e,n.onreadystatechange=function(){4==this.readyState&&200==this.status&&this.evtHandler(n.responseText)},n.open("GET",t,!0),n.send()},u.syncAjaxGetReq=function(t){console.log(">>",t);var e=new XMLHttpRequest;if(e.withCredentials=!0,e.open("GET",t,!1),e.send(),200==e.status)return e.responseText},u.getRandomNumber=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},u.isStorageSupported=function(){var t="testing";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}},u.isItemStored=function(t){t=localStorage.getItem(t);return null!=t&&void 0!==t},u.setItem=function(t,e){localStorage.setItem(t,e)},u.getItem=function(t){return localStorage.getItem(t)},u.deleteFromArray=function(t,e){return t.splice(e,1)},u.isOnce=function(t){return t.isOnce=!u.isDefined(t.isOnce)},u.copyArray=function(t){for(var e=new Array,n=0;n<t.length;n++)e[e.length]=t[n];return e},u.abs=function(t){return Math.abs(abs)},u.c=function(t){},u.isDefined=function(t){return void 0!==t},u.toInt=function(t){return parseInt(t)},u.round=function(t){return Math.round(t)},u.roundUpto=function(t){return parseFloat(t.toFixed(2))},u.msToDate=function(t){t=new Date(parseInt(t));return{date:t.getDate(),month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],year:t.getFullYear()}},u.hmm=function(t){1==t.moving&&(t.position[0]+=t.directionX*t.speed,t.position[1]+=t.directionY*t.speed,Math.sqrt(Math.pow(t.position[0]-t.startX,2)+Math.pow(t.position[1]-t.startY,2))>=t.distance)&&(t.position[0]=t.endX,t.position[1]=t.endY,t.moving=!1)},u.abs=function(t){return Math.abs(t)},u.getPoint=function(t,e,n,r,i){u.distanceBetweenPoints(t,e,n,r);var r=u.getSlopeGivenTwoPoints(t,e,n,r),o=t+i/Math.sqrt(1+Math.pow(r,2)),s=r*(o-t)+e,a=t-i/Math.sqrt(1+Math.pow(r,2));return 0==t&&0==n?[0,e+i]:t<=o&&o<=n?[o,s]:[a,r*(a-t)+e]},u.distanceBetweenPoints=function(t,e,n,r){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))},u.getSlopeGivenTwoPoints=function(t,e,n,r){return(e-r)/(t-n)},u.pointBetweenTwoPointsGivenXorYvalue=function(t,e,n,r,i,o){return null==i&&null!=o?i=(o-e)/((r-e)/(n-t))+t:null==o&&null!=i?o=(r-e)/(n-t)*(i-t)+e:c("both can't be null"),[i,o]},u.getPointAtDistanceGivenTwoPoints=function(t,e,n){t[0],e[0],e[0];return[t[1]-e[1]<0?e[1]-n:e[1]+n,0]},u.isServer=function(){return"undefined"==typeof window},u.msToHMS=function(t){var t=t/1e3,e=parseInt(t/3600);return t%=3600,e+":"+parseInt(t/60)+":"+(t%=60)+":"},u.msToHMS_v1=function(t){var t=t/1e3,e=parseInt(t/3600),n=(t%=3600,parseInt(t/60));return t%=60,{hours:parseInt(e),minutes:parseInt(n),seconds:parseInt(t)}},u.getParameterFromUrl=function(t,e){e=e||window.location.href,t=t.replace(/[\[\]]/g,"\\$&");t=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null},u.addWindowNotActiveTrigger=function(){},u.isServer()||(window.g=u),e.exports=u},{lodash:48}],5:[function(t,e,n){var f=t("p2"),d=t("./graphics"),g=t("./physics"),i=t("./lib/lzma_worker.min.js"),y=(t("./modules/mapUtil"),new Object);y.online=!0,y.list=[],y.deleteCounter=0,y.createWorld=function(t){var e=null,n=null;return 1==(t=void 0===t?1:t)?(n=d.createWorld(),e=g.createWorld()):2==t?e=g.createWorld():3==t&&(n=d.createWorld()),{pWorld:e,gWorld:n}},y.length=function(t,e){return 0==e?t/100:100*t},y.xAxis=function(t,e){return g.length(t,e)},y.yAxis=function(t,e){return-1*g.length(t,e)},y.add=function(t,e){void 0===e?y.list[y.list.length]=t:y.list[e]=t},y.swap=function(t,e){var n=y.list[t];y.list[t]=y.list[e],y.list[e]=n},y.createShape=function(t,e){var n={x:0,y:0,angle:0,mass:0,shapes:[],id:""};n.x=(t=void 0!==t&&null!=t?t:n).x||n.x,n.y=t.y||n.y,n.angle=t.angle*(Math.PI/180)||n.angle,n.mass=t.mass||n.mass,n.id=t.id||n.id,void 0===t.shapes&&(t.shapes=[{x:0,y:0,angle:0,type:1,width:100,height:100,radius:50,alpha:1,color:"0x000000",collision:!0,id:"",text:"",fontSize:26,make:1}]);for(var r=0;r<t.shapes.length;r++)void 0===n.shapes[r]&&(n.shapes[r]={x:0,y:0,angle:0,type:1,width:100,height:100,radius:50,alpha:1,color:"0x000000",collision:!0,id:"",text:"",fontSize:26,make:1}),n.shapes[r].type=t.shapes[r].type||n.shapes[r].type,n.shapes[r].x=t.shapes[r].x||n.shapes[r].x,n.shapes[r].y=t.shapes[r].y||n.shapes[r].y,n.shapes[r].angle=t.shapes[r].angle*(Math.PI/180)||n.shapes[r].angle,n.shapes[r].width=t.shapes[r].width||n.shapes[r].width,n.shapes[r].height=t.shapes[r].height||n.shapes[r].height,n.shapes[r].radius=t.shapes[r].radius||n.shapes[r].radius,n.shapes[r].color=t.shapes[r].color||n.shapes[r].color,n.shapes[r].id=t.shapes[r].id||n.shapes[r].id,n.shapes[r].text=t.shapes[r].text||n.shapes[r].text,n.shapes[r].fontSize=t.shapes[r].fontSize||n.shapes[r].fontSize,n.shapes[r].make=t.shapes[r].make||n.shapes[r].make,n.shapes[r].alpha=(void 0!==t.shapes[r].alpha?t:n).shapes[r].alpha,n.shapes[r].collision=(void 0!==t.shapes[r].collision?t:n).shapes[r].collision;for(var i=null,o=null,s=(null!=e.gWorld&&(i=d.createContainer({x:n.x,y:n.y,angle:-n.angle})),null!=e.pWorld&&(o=g.createBody({position:[y.xAxis(n.x,0),y.yAxis(n.y,0)],mass:n.mass,angle:n.angle})),[]),r=0;r<n.shapes.length;r++){var a,u=null,l=null,c=n.shapes[r],h=(1==c.make&&(null!=e.gWorld&&(u=d.createShape({x:0,y:0,type:c.type,width:c.width,height:c.height,radius:c.radius,color:c.color,alpha:c.alpha,text:c.text,fontSize:c.fontSize}),2!=c.type&&(u.pivot.x=u.width/2,u.pivot.y=u.height/2),i.addChild(u),u.x=c.x,u.y=c.y,u.rotation=-c.angle,3==c.type)&&(c.width=u.width,c.height=u.height),null!=e.pWorld)&&(1==c.type?a=f.Shape.BOX:2==c.type?a=f.Shape.CIRCLE:3==c.type&&(a=f.Shape.BOX),l=g.createShape({position:[y.xAxis(c.x,0),y.yAxis(c.y,0)],type:a,width:y.length(c.width,0),height:y.length(c.height,0),radius:y.length(c.radius,0)}),o.addShape(l),l.position[0]=y.xAxis(c.x,0),l.position[1]=y.yAxis(c.y,0),l.angle=c.angle,l.radius=y.length(c.radius,0),l.sensor=0==c.collision),3==c.make&&null!=e.gWorld&&(u=d.createShape({x:0,y:0,type:c.type,width:c.width,height:c.height,radius:c.radius,color:c.color,alpha:c.alpha,text:c.text,fontSize:c.fontSize}),2!=c.type&&(u.pivot.x=u.width/2,u.pivot.y=u.height/2),i.addChild(u),u.x=c.x,u.y=c.y,u.rotation=-c.angle),2==c.make&&null!=e.pWorld&&(1==c.type?a=f.Shape.BOX:2==c.type?a=f.Shape.CIRCLE:3==c.type&&(a=f.Shape.BOX,c.width=u.width,c.height=u.height),l=g.createShape({position:[y.xAxis(c.x,0),y.yAxis(c.y,0)],type:a,width:y.length(c.width,0),height:y.length(c.height,0),radius:y.length(c.radius,0)}),o.addShape(l),l.position[0]=y.xAxis(c.x,0),l.position[1]=y.yAxis(c.y,0),l.angle=c.angle,l.radius=y.length(c.radius,0),l.sensor=0==c.collision),{g:u,p:l,id:c.id,type:c.type,make:c.make});1!=c.make&&3!=c.make||null!=u&&(u.ref=h),1!=c.make&&2!=c.make||null!=l&&(l.ref=h),(s[s.length]=h).setX=function(t){null!=this.g&&(this.g.x=t),null!=this.p&&(this.p.position[0]=y.xAxis(t,0))},h.setY=function(t){null!=this.g&&(this.g.y=t),null!=this.p&&(this.p.position[1]=y.yAxis(t,0))},h.setWidth=function(t){null!=this.g&&(this.g.width=t),null!=this.p&&(this.p.width=y.length(t,0),this.p.vertices[0][0]=-this.p.width/2,this.p.vertices[0][1]=-this.p.height/2,this.p.vertices[1][0]=this.p.width/2,this.p.vertices[1][1]=-this.p.height/2,this.p.vertices[2][0]=this.p.width/2,this.p.vertices[2][1]=this.p.height/2,this.p.vertices[3][0]=-this.p.width/2,this.p.vertices[3][1]=this.p.height/2,this.p.updateArea(),this.p.updateBoundingRadius(),this.p.updateCenterOfMass(),this.p.updateTriangles())},h.setHeight=function(t){null!=this.g&&(this.g.height=t),null!=this.p&&(this.p.height=y.length(t,0),this.p.vertices[0][0]=-this.p.width/2,this.p.vertices[0][1]=-this.p.height/2,this.p.vertices[1][0]=this.p.width/2,this.p.vertices[1][1]=-this.p.height/2,this.p.vertices[2][0]=this.p.width/2,this.p.vertices[2][1]=this.p.height/2,this.p.vertices[3][0]=-this.p.width/2,this.p.vertices[3][1]=this.p.height/2,this.p.updateArea(),this.p.updateBoundingRadius(),this.p.updateCenterOfMass(),this.p.updateTriangles())},h.setRadius=function(t){null!=this.g&&(this.g.width=this.g.height=2*t),null!=this.p&&(this.p.radius=y.length(t,0))},h.setAlpha=function(t){null!=this.g&&(this.g.alpha=t)},h.setColor=function(t){null!=this.g&&(void 0===this.g.graphicsData?this.g.style.fill=t.replace("0x","#"):(this.g.graphicsData[0].fillColor=t,t=y.createShape(y.getShot(this.refP),y),y.deleteShape(this.refP),this.refP=t))},h.setAngle=function(t){t*=Math.PI/180,null!=this.p&&(this.p.angle=t),null!=this.g&&(this.g.rotation=-t)},h.setZIndex=function(t){if(null!=this.g)for(var e=this.g.parent.children.indexOf(this.g),n=t<e?-1:1,r=Math.abs(t-e);0<r;){var i=this.g.parent.children[e],i=(this.g.parent.children[e]=this.g.parent.children[e+n],this.g.parent.children[e+n]=i,this.refP.shapes[e]);this.refP.shapes[e]=this.refP.shapes[e+n],this.refP.shapes[e+n]=i,e+=n,r--}},h.setId=function(t){this.id=t},h.setCollision=function(t){null!=this.p&&(this.p.sensor=!t)},h.setFontSize=function(t){var e;null!=this.g&&(this.g.style.fontSize=t,t=this.g.width,e=this.g.height,this.g.pivot.x=t/2,this.g.pivot.y=e/2,null!=this.p)&&(this.p.width=y.length(t,0),this.p.height=y.length(e,0),this.p.vertices[0][0]=-this.p.width/2,this.p.vertices[0][1]=-this.p.height/2,this.p.vertices[1][0]=this.p.width/2,this.p.vertices[1][1]=-this.p.height/2,this.p.vertices[2][0]=this.p.width/2,this.p.vertices[2][1]=this.p.height/2,this.p.vertices[3][0]=-this.p.width/2,this.p.vertices[3][1]=this.p.height/2,this.p.updateArea(),this.p.updateBoundingRadius(),this.p.updateCenterOfMass(),this.p.updateTriangles())},h.setText=function(t){var e;null!=this.g&&(this.g.text=t,t=this.g.width,e=this.g.height,this.g.pivot.x=t/2,this.g.pivot.y=e/2,null!=this.p)&&(this.p.width=y.length(t,0),this.p.height=y.length(e,0),this.p.vertices[0][0]=-this.p.width/2,this.p.vertices[0][1]=-this.p.height/2,this.p.vertices[1][0]=this.p.width/2,this.p.vertices[1][1]=-this.p.height/2,this.p.vertices[2][0]=this.p.width/2,this.p.vertices[2][1]=this.p.height/2,this.p.vertices[3][0]=-this.p.width/2,this.p.vertices[3][1]=this.p.height/2,this.p.updateArea(),this.p.updateBoundingRadius(),this.p.updateCenterOfMass(),this.p.updateTriangles())},h.setMake=function(t){this.make=t},h.removePhysics=function(){this.refP.p.removeShape(this.p),this.p=null},h.deleteMe=function(t){var e=this.refP;if(1==(t=void 0===t?1:t)){null!=this.g&&e.g.removeChild(this.g),null!=this.p&&e.p.removeShape(this.p),e.shapes[e.shapes.indexOf(this)]=null;for(var n=[],r=0;r<e.shapes.length;r++)null!=e.shapes[r]&&(n[n.length]=e.shapes[r]);e.shapes=n}else 2==t?(null!=this.p&&e.p.removeShape(this.p),this.p=null,this.setMake(3)):3==t&&(null!=this.g&&e.g.removeChild(this.g),this.g=null,this.setMake(2))},h.getX=function(){return null!=this.p?y.xAxis(this.p.position[0],1):null!=this.g?this.g.x:void 0},h.getY=function(){return null!=this.p?y.yAxis(this.p.position[1],1):null!=this.g?this.g.y:void 0},h.getWidth=function(){return null!=this.p?y.length(this.p.width,1):null!=this.g?this.g.width:void 0},h.getHeight=function(){return null!=this.p?y.length(this.p.height,1):null!=this.g?this.g.height:void 0},h.getRadius=function(){return null!=this.p?y.length(this.p.radius,1):null!=this.g?this.g.width/2:void 0},h.getType=function(){return this.type},h.getAlpha=function(){if(null!=this.g)return this.g.alpha},h.getColor=function(){if(null!=this.g)return void 0===this.g.graphicsData?-1==this.g.style.fill.search("#")?this.g.style.fill:this.g.style.fill.replace("#","0x"):this.g.graphicsData[0].fillColor},h.getAngle=function(){return null!=this.p?this.p.angle*(180/Math.PI):null!=this.g?-this.g.rotation*(180/Math.PI):void 0},h.getZIndex=function(){if(null!=this.g)return this.g.parent.children.indexOf(this.g)},h.getCollision=function(){return null!=this.p&&!this.p.sensor},h.getId=function(){return this.id},h.getFontSize=function(){if(null!=this.g)return void 0===this.g.style?"":this.g.style.fontSize},h.getText=function(){if(null!=this.g)return void 0===this.g.style?"":this.g.text},h.getMake=function(){return this.make},h.getGlobalPosition=function(){var t={},e=(null!=this.p?t=this.p:(t.position=[y.xAxis(this.g.x,0),y.yAxis(this.g.y,0)],t.angle=-this.g.rotation,t.body={position:[y.xAxis(this.g.parent.x,0),y.yAxis(this.g.parent.y,0)],angle:-this.g.parent.rotation}),Math.atan2(t.position[1],t.position[0])),n=Math.sqrt(Math.pow(t.position[0],2)+Math.pow(t.position[1],2)),e=e+t.body.angle,r=n*Math.cos(e),n=n*Math.sin(e);return{x:t.body.position[0]+r,y:t.body.position[1]+n,angle:t.angle+t.body.angle}},h.getLocalPosition=function(t){var e={},t=(null!=t.p?e=t.p:(e.position=[y.xAxis(t.g.x,0),y.yAxis(t.g.y,0)],e.angle=-t.g.rotation),this.getGlobalPosition()),n=t.x-e.position[0],r=t.y-e.position[1],i=Math.atan2(r,n)-e.angle,n=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));return{x:n*Math.cos(i),y:n*Math.sin(i),angle:t.angle-e.angle}}}null!=e.gWorld&&e.gWorld.addChild(i),null!=e.pWorld&&(0<o.shapes.length||0==o.shapes.length&&""!=n.id)&&e.pWorld.addBody(o);h={p:o,g:i,id:n.id,shapes:s};null!=i&&(i.ref=h),null!=o&&(o.ref=h),y.add(h);for(var p=0;p<h.shapes.length;p++)h.shapes[p].refP=h;return h.setMass=function(t){null!=this.p&&g.updateMass(this.p,t)},h.setId=function(t){this.id=t},h.setX=function(t){null!=this.p&&(this.p.position[0]=y.xAxis(t,0)),null!=this.g&&(this.g.x=t)},h.setY=function(t){null!=this.p&&(this.p.position[1]=y.yAxis(t,0)),null!=this.g&&(this.g.y=t)},h.setAngle=function(t){t*=Math.PI/180,null!=this.p&&(this.p.angle=t),null!=this.g&&(this.g.rotation=-t)},h.setZIndex=function(t){if(null!=this.g)for(var e=this.g.parent.children.indexOf(this.g),n=t<e?-1:1,r=Math.abs(t-e);0<r&&void 0!==y.gWorld.children[e+n];){var i=y.gWorld.children[e];y.gWorld.children[e]=y.gWorld.children[e+n],y.gWorld.children[e+n]=i,y.swap(e,e+n),e+=n,r--}},h.setAlpha=function(t){null!=this.g&&(this.g.alpha=t)},h.setCollision=function(t){if(null!=this.p)for(var e=0;e<this.p.shapes.length;e++)this.p.shapes[e].sensor=!t},h.getMass=function(){if(null!=this.p)return 1e3<this.p.mass?0:this.p.mass},h.getId=function(){return this.id},h.getX=function(){return null!=this.p?y.xAxis(this.p.position[0],1):null!=this.g?this.g.x:void 0},h.getY=function(){return null!=this.p?y.yAxis(this.p.position[1],1):null!=this.g?this.g.y:void 0},h.getAngle=function(){return null!=this.p?this.p.angle*(180/Math.PI):null!=this.g?-this.g.rotation*(180/Math.PI):void 0},h.getZIndex=function(){if(null!=this.g)return this.g.parent.children.indexOf(this.g)},h.getAlpha=function(){if(null!=this.g)return this.g.alpha},h.getCollision=function(){if(null==this.p)return!1;for(var t=0;t<this.p.shapes.length;t++)if(this.p.shapes[t].sensor)return!1;return!0},h.getAlpha=function(){if(null!=this.g)return this.g.alpha},h.getAABB=function(){var t;return null!=this.p&&0<this.p.shapes.length?(t=this.p.getAABB(),[[y.xAxis(t.lowerBound[0],1),y.yAxis(t.lowerBound[1],1)],[y.xAxis(t.upperBound[0],1),y.yAxis(t.upperBound[1],1)]]):null!=this.g?[[this.g.x-this.g.width/2,this.g.y+this.g.height/2],[this.g.x+this.g.width/2,this.g.y-this.g.height/2]]:void 0},h},y.getShot=function(t){for(var e={x:t.getX(),y:t.getY(),angle:t.getAngle(),mass:t.getMass(),id:t.getId(),shapes:[]},n=0;n<t.shapes.length;n++){var r={x:t.shapes[n].getX(),y:t.shapes[n].getY(),width:t.shapes[n].getWidth(),height:t.shapes[n].getHeight(),angle:t.shapes[n].getAngle(),radius:t.shapes[n].getRadius(),alpha:t.shapes[n].getAlpha(),id:t.shapes[n].getId(),collision:t.shapes[n].getCollision(),color:t.shapes[n].getColor(),fontSize:t.shapes[n].getFontSize(),text:t.shapes[n].getText(),make:t.shapes[n].getMake(),type:t.shapes[n].getType()};e.shapes[n]=r}return e},y.mergeShape=function(t,e){for(var n=0;n<e.shapes.length;n++){var r=e.shapes[n],i=r.getLocalPosition(t);null!=r.p&&e.p.removeShape(r.p),null!=r.g&&e.g.removeChild(r.g),null!=r.p&&t.p.addShape(r.p),null!=r.g&&t.g.addChild(r.g),null!=r.g&&(r.setX(y.xAxis(i.x,1)),r.setY(y.yAxis(i.y,1)),r.g.rotation=-i.angle),null!=r.p&&(r.p.angle=i.angle),(r.refP=t).shapes[t.shapes.length]=r}y.deleteShape(e)},y.deleteShape=function(t,e){if(y.gWorld.removeChild(t.g),y.pWorld.removeBody(t.p),y.list[y.list.indexOf(t)]=null,y.deleteCounter++,100<y.deleteCounter){for(var n=[],r=y.deleteCounter=0;r<y.list.length;r++)null!=y.list[r]&&(n[n.length]=y.list[r]);y.list=n}},y.load=function(t,e){var n=[];if(0!=t.length){"number"==typeof(t="string"==typeof t?JSON.parse(t):t)[0]&&(t=JSON.parse(i.decompress(t)));for(var r=0;r<t.length;r++)n[n.length]=y.createShape(t[r],e)}return n},y.unload=function(t){var e;null!=t.pWorld&&null!=t.gWorld?e=y.createWorld(1):null==t.gWorld?e=y.createWorld(2):null==t.pWorld&&(e=y.createWorld(3)),t.gWorld=e.gWorld,t.pWorld=e.pWorld,y.list=[]},y.x=function(t){null!=t.p&&null!=t.g&&(t.g.x=g.xAxis(t.p.position[0],1))},y.y=function(t){null!=t.p&&null!=t.g&&(t.g.y=g.yAxis(t.p.position[1],1))},y.angle=function(t){null!=t.p&&null!=t.g&&(t.g.rotation=-t.p.angle)},y.sync=function(t){for(var e=0;e<y.list.length;e++)null!=y.list[e]&&(y.x(y.list[e]),y.y(y.list[e]),y.angle(y.list[e]))},"undefined"!=typeof window&&(window.gp=y),e.exports=y},{"./graphics":6,"./lib/lzma_worker.min.js":7,"./modules/mapUtil":8,"./physics":304,p2:83}],6:[function(t,e,n){var s=null,r=t("./gf"),o=new Object,i=null;r.isServer()||((s=t("pixi.js")).utils.skipHello(),window.pixi=s),o.createRenderer=function(t,e,n){return(i=s.autoDetectRenderer(t,e)).backgroundColor=n,i.view.style.marginLeft="0px",i.view.style.marginTop="0px",i.resize(t,e),document.body.appendChild(i.view),i},o.handleResize=function(){var t=window.innerWidth<window.outerWidth?window.innerWidth:window.outerWidth,e=window.innerHeight<window.outerHeight?window.innerHeight:window.outerHeight;i.resize(t,e)},o.createWorld=function(){return new s.Container},o.createContainer=function(t){var e=new s.Container;return e.x=t.x||0,e.y=t.y||0,e},o.createShape=function(t){var e=null;if(1==t.type)(e=new s.Graphics).beginFill(t.color),e.alpha=t.alpha,e.drawRect(t.x,t.y,t.width,t.height);else if(2==t.type)(e=new s.Graphics).beginFill(t.color),e.alpha=t.alpha,e.drawCircle(t.x,t.y,t.radius);else if(3==t.type)(e=new s.Text(t.text,t.fontSize)).style.fontSize=t.fontSize,e.style.fill=t.color,e.alpha=t.alpha;else if(4==t.type){for(var n=[],r=t.points[0],i=t.points[1],o=0;o<t.points.length;o+=2)n[o]=t.points[o]-r,n[o+1]=t.points[o+1]-i;(e=new s.Graphics).beginFill(t.color),e.alpha=t.alpha,e.drawPolygon(n),e.x=t.x,e.y=t.y}return e.type=t.type,e},"undefined"!=typeof window&&(window.spr=!1),o.createLine=function(t){t.alpha=1;var e=new s.Graphics;return e.lineStyle(t.width,t.color,t.alpha),e.moveTo(t.from.x,t.from.y),e.lineTo(t.to.x,t.to.y),e},o.makeSpriteFromImageUrl=function(t){for(var e=new s.BaseTexture.fromImage(t.imageUrl),n=(void 0===e._objArr&&(e._objArr=[]),!1),r=0;r<e._objArr.length;r++)if(e._objArr[r]==t){n=!0;break}if(n||e._objArr.push(t),e.hasLoaded){for(var i=[],r=0;r<e._objArr.length;r++)e._objArr[r]!=t&&i.push(e._objArr[r]);e._objArr=i,t.sprite=new s.Sprite.from(e),t.evtHandler(t)}else e.on("loaded",function(t){o.makeSpriteFromImageUrl(t._objArr[0])}),e.on("error",function(t){s.BaseTexture.removeFromCache(t),t.obj.evtHandler(t.obj)}),e.on("dispose",function(t){}),e.on("update",function(t){})},e.exports=o},{"./gf":4,"pixi.js":244}],7:[function(t,e,n){!function(t){!function(){var kt=function(){"use strict";var n=3,c="function"==typeof t?t:setTimeout,i=4294967296,d=[4294967295,-i],O=[0,-0x8000000000000000],y=[0,0],R=[1,0];function I(t,e){postMessage({action:n,cbn:e,result:t})}function g(t){var e=[];return e[t-1]=void 0,e}function m(t,e){return D(t[0]+e[0],t[1]+e[1])}function B(t,e){var n=~~Math.max(Math.min(t[1]/i,2147483647),-2147483648)&~~Math.max(Math.min(e[1]/i,2147483647),-2147483648),t=b(t)&b(e);return(t=t)<0&&(t+=i),[t,n*i]}function v(t,e){var n,r;return t[0]==e[0]&&t[1]==e[1]?0:(n=t[1]<0,r=e[1]<0,n&&!r||(n||!r)&&N(t,e)[1]<0?-1:1)}function D(t,e){var n,r;for(t%=0x10000000000000000,e=(e%=0x10000000000000000)-(n=e%i)+(r=Math.floor(t/i)*i),t=t-r+n;t<0;)t+=i,e-=i;for(;4294967295<t;)t-=i,e+=i;for(e%=0x10000000000000000;0x7fffffff00000000<e;)e-=0x10000000000000000;for(;e<-0x8000000000000000;)e+=0x10000000000000000;return[t,e]}function k(t,e){return t[0]==e[0]&&t[1]==e[1]}function _(t){return 0<=t?[t,0]:[t+i,-i]}function b(t){return 2147483648<=t[0]?~~Math.max(Math.min(t[0]-i,2147483647),-2147483648):~~Math.max(Math.min(t[0],2147483647),-2147483648)}function r(t){return t<=30?1<<t:r(30)*r(t-30)}function L(t,e){var n;if(e&=63,k(t,O))return e?y:t;if(t[1]<0)throw new Error("Neg");return e=r(e),n=t[1]*e%0x10000000000000000,0x8000000000000000<=(n+=e=(t=t[0]*e)-t%i)&&(n-=0x10000000000000000),[t-=e,n]}function F(t,e){e=r(e&=63);return D(Math.floor(t[0]/e),t[1]/e)}function N(t,e){return D(t[0]-e[0],t[1]-e[1])}function j(t,e){return t.buf=e,t.pos=0,t.count=e.length,t}function l(t){return t.pos>=t.count?-1:255&t.buf[t.pos++]}function U(t){return t.buf=g(32),t.count=0,t}function h(t){var e=t.buf;return e.length=t.count,e}function q(t,e){t.buf[t.count++]=e<<24>>24}function G(t,e,n,r){W(e,n,t.buf,t.count,r),t.count+=r}function W(t,e,n,r,i){for(var o=0;o<i;++o)n[r+o]=t[e+o]}function H(t,e,n,r,i){var o;if(v(r,d)<0)throw new Error("invalid length "+r);t.length_0=r;var s=function(t){var e;for(t._repDistances=g(4),t._optimum=[],t._rangeEncoder={},t._isMatch=g(192),t._isRep=g(12),t._isRepG0=g(12),t._isRepG1=g(12),t._isRepG2=g(12),t._isRep0Long=g(192),t._posSlotEncoder=[],t._posEncoders=g(114),t._posAlignEncoder=E({},4),t._lenEncoder=Et({}),t._repMatchLenEncoder=Et({}),t._literalEncoder={},t._matchDistances=[],t._posSlotPrices=[],t._distancesPrices=[],t._alignPrices=g(16),t.reps=g(4),t.repLens=g(4),t.processedInSize=[y],t.processedOutSize=[y],t.finished=[0],t.properties=g(5),t.tempPrices=g(128),t._longestMatchLength=0,t._matchFinderType=1,t._numDistancePairs=0,t._numFastBytesPrev=-1,t.backRes=0,e=0;e<4096;++e)t._optimum[e]={};for(e=0;e<4;++e)t._posSlotEncoder[e]=E({},6);return t}({}),a=s,u=a,l=1<<i.s;u._dictionarySize=l;for(var c,h=0;1<<h<l;++h);u._distTableSize=2*h,a._numFastBytes=i.f,u=a,i=i.m,c=u._matchFinderType,u._matchFinderType=i,u._matchFinder&&c!=u._matchFinderType&&(u._dictionarySizePrev=-1,u._matchFinder=null),a._numLiteralPosStateBits=0,a._numLiteralContextBits=3,a._posStateBits=2,a._posStateMask=3,s._writeEndMark=void 0===kt.disableEndMark;var p=s,i=n;p.properties[0]=9*(5*p._posStateBits+p._numLiteralPosStateBits)+p._numLiteralContextBits<<24>>24;for(var f=0;f<4;++f)p.properties[1+f]=p._dictionarySize>>8*f<<24>>24;for(G(i,p.properties,0,5),o=0;o<64;o+=8)q(n,255&b(F(r,o)));t.chunker=(s._needReleaseMFStream=0,s._inStream=e,s._finished=0,function(t){t._matchFinder||(c={},l=4,t._matchFinderType||(l=2),function(t,e){t.HASH_ARRAY=2<e,t.HASH_ARRAY?(t.kNumHashDirectBytes=0,t.kMinMatchCheck=4,t.kFixHashSize=66560):(t.kNumHashDirectBytes=2,t.kMinMatchCheck=3,t.kFixHashSize=0)}(c,l),t._matchFinder=c);var e,n,r,i,o,s,a,u=t._literalEncoder,l=t._numLiteralPosStateBits,c=t._numLiteralContextBits;if(null==u.m_Coders||u.m_NumPrevBits!=c||u.m_NumPosBits!=l)for(u.m_NumPosBits=l,u.m_PosMask=(1<<l)-1,u.m_NumPrevBits=c,a=1<<u.m_NumPrevBits+u.m_NumPosBits,u.m_Coders=g(a),s=0;s<a;++s)u.m_Coders[s]=function(t){return t.m_Encoders=g(768),t}({});t._dictionarySize==t._dictionarySizePrev&&t._numFastBytesPrev==t._numFastBytes||(e=t._matchFinder,n=t._dictionarySize,r=4096,i=t._numFastBytes,o=274,n<1073741567&&(e._cutValue=16+(i>>1),function(t,e,n,r){t._keepSizeBefore=e,t._keepSizeAfter=n,e=e+n+r,null!=t._bufferBase&&t._blockSize==e||(t._bufferBase=null,t._blockSize=e,t._bufferBase=g(t._blockSize));t._pointerToLastSafePosition=t._blockSize-n}(e,n+r,i+o,256+~~((n+r+i+o)/2)),e._matchMaxLen=i,r=n+1,e._cyclicBufferSize!=r&&(e._son=g(2*(e._cyclicBufferSize=r))),o=65536,e.HASH_ARRAY&&(o=n-1,16777216<(o=(o=(o=(o=(o|=o>>1)|o>>2)|o>>4)|o>>8)>>1|65535)&&(o>>=1),e._hashMask=o,++o,o+=e.kFixHashSize),o!=e._hashSizeSum)&&(e._hash=g(e._hashSizeSum=o)),t._dictionarySizePrev=t._dictionarySize,t._numFastBytesPrev=t._numFastBytes)}(s),s._rangeEncoder.Stream=n,function(t){(function(t){t._state=0;for(var e=t._previousByte=0;e<4;++e)t._repDistances[e]=0})(t),function(t){t._position=y,t.Low=y,t.Range=-1,t._cacheSize=1,t._cache=0}(t._rangeEncoder),A(t._isMatch),A(t._isRep0Long),A(t._isRep),A(t._isRepG0),A(t._isRepG1),A(t._isRepG2),A(t._posEncoders),function(t){var e,n=1<<t.m_NumPrevBits+t.m_NumPosBits;for(e=0;e<n;++e)A(t.m_Coders[e].m_Encoders)}(t._literalEncoder);for(var e=0;e<4;++e)A(t._posSlotEncoder[e].Models);xt(t._lenEncoder,1<<t._posStateBits),xt(t._repMatchLenEncoder,1<<t._posStateBits),A(t._posAlignEncoder.Models),t._longestMatchWasFound=0,t._optimumEndIndex=0,t._optimumCurrentIndex=0,t._additionalOffset=0}(s),dt(s),ft(s),s._lenEncoder._tableSize=s._numFastBytes+1-2,St(s._lenEncoder,1<<s._posStateBits),s._repMatchLenEncoder._tableSize=s._numFastBytes+1-2,St(s._repMatchLenEncoder,1<<s._posStateBits),s.nowPos64=y,c=s,(u={}).encoder=c,u.decoder=null,u.alive=1,u)}function tt(t,e,n){return t.output=U({}),H(t,j({},e),t.output,_(e.length),n),t}function et(t,e,n){for(var r,i,o,s="",a=[],u=0;u<5;++u){if(-1==(r=l(e)))throw new Error("truncated input");a[u]=r<<24>>24}if(!function(t,e){var n,r,i,o,s;if(e.length<5)return;for(s=255&e[0],i=s%9,o=(s=~~(s/9))%5,s=~~(s/5),r=n=0;r<4;++r)n+=(255&e[1+r])<<8*r;if(99999999<n||!function(t,e,n,r){if(8<e||4<n||4<r)return;!function(t,e,n){var r,i;if(null==t.m_Coders||t.m_NumPrevBits!=n||t.m_NumPosBits!=e)for(t.m_NumPosBits=e,t.m_PosMask=(1<<e)-1,t.m_NumPrevBits=n,i=1<<t.m_NumPrevBits+t.m_NumPosBits,t.m_Coders=g(i),r=0;r<i;++r)t.m_Coders[r]=function(t){return t.m_Decoders=g(768),t}({})}(t.m_LiteralDecoder,n,e);n=1<<r;return ut(t.m_LenDecoder,n),ut(t.m_RepLenDecoder,n),t.m_PosStateMask=n-1,1}(t,i,o,s))return;return function(t,e){if(e<0)return;t.m_DictionarySize!=e&&(t.m_DictionarySize=e,t.m_DictionarySizeCheck=Math.max(t.m_DictionarySize,1),function(t,e){null!=t._buffer&&t._windowSize==e||(t._buffer=g(e));t._windowSize=e,t._pos=0,t._streamPos=0}(t.m_OutWindow,Math.max(t.m_DictionarySizeCheck,4096)));return 1}(t,n)}(o=function(t){t.m_OutWindow={},t.m_RangeDecoder={},t.m_IsMatchDecoders=g(192),t.m_IsRepDecoders=g(12),t.m_IsRepG0Decoders=g(12),t.m_IsRepG1Decoders=g(12),t.m_IsRepG2Decoders=g(12),t.m_IsRep0LongDecoders=g(192),t.m_PosSlotDecoder=g(4),t.m_PosDecoders=g(114),t.m_PosAlignDecoder=f({},4),t.m_LenDecoder=ct({}),t.m_RepLenDecoder=ct({}),t.m_LiteralDecoder={};for(var e=0;e<4;++e)t.m_PosSlotDecoder[e]=f({},6);return t}({}),a))throw new Error("corrupted input");for(u=0;u<64;u+=8){if(-1==(r=l(e)))throw new Error("truncated input");s=(r=1==(r=r.toString(16)).length?"0"+r:r)+""+s}/^0+$|^f+$/i.test(s)?t.length_0=d:(i=parseInt(s,16),t.length_0=4294967295<i?d:_(i)),t.chunker=(i=o,o=n,n=t.length_0,i.m_RangeDecoder.Stream=e,at(i.m_OutWindow),i.m_OutWindow._stream=o,function(t){t.m_OutWindow._streamPos=0,t.m_OutWindow._pos=0,A(t.m_IsMatchDecoders),A(t.m_IsRep0LongDecoders),A(t.m_IsRepDecoders),A(t.m_IsRepG0Decoders),A(t.m_IsRepG1Decoders),A(t.m_IsRepG2Decoders),A(t.m_PosDecoders),function(t){var e,n;for(n=1<<t.m_NumPrevBits+t.m_NumPosBits,e=0;e<n;++e)A(t.m_Coders[e].m_Decoders)}(t.m_LiteralDecoder);for(var e=0;e<4;++e)A(t.m_PosSlotDecoder[e].Models);ht(t.m_LenDecoder),ht(t.m_RepLenDecoder),A(t.m_PosAlignDecoder.Models),function(t){t.Code=0,t.Range=-1;for(var e=0;e<5;++e)t.Code=t.Code<<8|l(t.Stream)}(t.m_RangeDecoder)}(i),i.state=0,i.rep0=0,i.rep1=0,i.rep2=0,i.rep3=0,i.outSize=n,i.nowPos64=y,i.prevByte=0,function(t,e){return t.decoder=e,t.encoder=null,t.alive=1,t}({},i))}function nt(t,e){return t.output=U({}),et(t,j({},e),t.output),t}function X(t,e){return t._bufferBase[t._bufferOffset+t._pos+e]}function V(t,e,n,r){var i,o;for(t._streamEndWasReached&&t._pos+e+r>t._streamPos&&(r=t._streamPos-(t._pos+e)),++n,o=t._bufferOffset+t._pos+e,i=0;i<r&&t._bufferBase[o+i]==t._bufferBase[o+i-n];++i);return i}function z(t){return t._streamPos-t._pos}function rt(t){var e,n,r,i;if(!t._streamEndWasReached)for(;;){if(!(i=-t._bufferOffset+t._blockSize-t._streamPos))return;if(e=t._stream,n=t._bufferBase,r=t._bufferOffset+t._streamPos,i=i,-1==(n=e.pos>=e.count?-1:(i=Math.min(i,e.count-e.pos),W(e.buf,e.pos,n,r,i),e.pos+=i,i)))return t._posLimit=t._streamPos,t._bufferOffset+t._posLimit>t._pointerToLastSafePosition&&(t._posLimit=t._pointerToLastSafePosition-t._bufferOffset),void(t._streamEndWasReached=1);t._streamPos+=n,t._streamPos>=t._pos+t._keepSizeAfter&&(t._posLimit=t._streamPos-t._keepSizeAfter)}}function it(t,e){t._bufferOffset+=e,t._posLimit-=e,t._pos-=e,t._streamPos-=e}var w=function(){for(var t,e,n=[],r=0;r<256;++r){for(e=r,t=0;t<8;++t)0!=(1&e)?e=e>>>1^-306674912:e>>>=1;n[r]=e}return n}();function T(t){++t._cyclicBufferPos>=t._cyclicBufferSize&&(t._cyclicBufferPos=0);var e=t;if(++e._pos,e._pos>e._posLimit){if(e._bufferOffset+e._pos>e._pointerToLastSafePosition){var n,r,i=e,o=i._bufferOffset+i._pos-i._keepSizeBefore;for(0<o&&--o,r=i._bufferOffset+i._streamPos-o,n=0;n<r;++n)i._bufferBase[n]=i._bufferBase[o+n];i._bufferOffset-=o}rt(e)}1073741823==t._pos&&(e=t._pos-t._cyclicBufferSize,ot(t._son,2*t._cyclicBufferSize,e),ot(t._hash,t._hashSizeSum,e),it(t,e))}function ot(t,e,n){for(var r,i=0;i<e;++i)(r=t[i]||0)<=n?r=0:r-=n,t[i]=r}function o(t){var e=t._pos-t._streamPos;e&&(G(t._stream,t._buffer,t._streamPos,e),t._pos>=t._windowSize&&(t._pos=0),t._streamPos=t._pos)}function st(t,e){e=t._pos-e-1;return e<0&&(e+=t._windowSize),t._buffer[e]}function at(t){o(t),t._stream=null}function x(t){return(t-=2)<4?t:3}function Y(t){return t<4?0:t<10?t-3:t-6}function p(t){if(!t.alive)throw new Error("bad state");if(t.encoder){if(function(t,e,n,r){var i,o,s,a,u,l,c,h,p,f,d,g;e[0]=y,n[0]=y,r[0]=1,t._inStream&&(t._matchFinder._stream=t._inStream,function(t){t._bufferOffset=0,t._pos=0,t._streamPos=0,t._streamEndWasReached=0,rt(t),t._cyclicBufferPos=0,it(t,-1)}(t._matchFinder),t._needReleaseMFStream=1,t._inStream=null);if(!t._finished){if(t._finished=1,d=t.nowPos64,k(t.nowPos64,y)){if(!z(t._matchFinder))return gt(t,b(t.nowPos64));vt(t),f=b(t.nowPos64)&t._posStateMask,P(t._rangeEncoder,t._isMatch,(t._state<<4)+f,0),t._state=Y(t._state),o=X(t._matchFinder,-t._additionalOffset),Ct(Z(t._literalEncoder,b(t.nowPos64),t._previousByte),t._rangeEncoder,o),t._previousByte=o,--t._additionalOffset,t.nowPos64=m(t.nowPos64,R)}if(z(t._matchFinder))for(;;){if(l=function(t,e){var n,r,L,i,o,s,F,a,u,l,c,h,p,f,N,d,g,y,j,U,m,v,q,_,b,x,w,T,E,S,C,A,P,G,M,W,O,R,H,I,B,D,k;if(t._optimumEndIndex!=t._optimumCurrentIndex)return h=t._optimum[t._optimumCurrentIndex].PosPrev-t._optimumCurrentIndex,t.backRes=t._optimum[t._optimumCurrentIndex].BackPrev,t._optimumCurrentIndex=t._optimum[t._optimumCurrentIndex].PosPrev,h;t._optimumCurrentIndex=t._optimumEndIndex=0,t._longestMatchWasFound?(c=t._longestMatchLength,t._longestMatchWasFound=0):c=vt(t);if(x=t._numDistancePairs,(_=z(t._matchFinder)+1)<2)return t.backRes=-1,1;273<_&&(_=273);for(a=R=0;a<4;++a)t.reps[a]=t._repDistances[a],t.repLens[a]=V(t._matchFinder,-1,t.reps[a],273),t.repLens[a]>t.repLens[R]&&(R=a);if(t.repLens[R]>=t._numFastBytes)return t.backRes=R,h=t.repLens[R],mt(t,h-1),h;if(c>=t._numFastBytes)return t.backRes=t._matchDistances[x-1]+4,mt(t,c-1),c;if(s=X(t._matchFinder,-1),d=X(t._matchFinder,-t._repDistances[0]-1-1),c<2&&s!=d&&t.repLens[R]<2)return t.backRes=-1,1;t._optimum[0].State=t._state,A=e&t._posStateMask,t._optimum[1].Price=Q[t._isMatch[(t._state<<4)+A]>>>2]+J(Z(t._literalEncoder,e,t._previousByte),7<=t._state,d,s),At(t._optimum[1]),g=Q[2048-t._isMatch[(t._state<<4)+A]>>>2],O=g+Q[2048-t._isRep[t._state]>>>2],d!=s||(H=O+function(t,e,n){return Q[t._isRepG0[e]>>>2]+Q[t._isRep0Long[(e<<4)+n]>>>2]}(t,t._state,A))<t._optimum[1].Price&&(t._optimum[1].Price=H,function(t){t.BackPrev=0,t.Prev1IsChar=0}(t._optimum[1]));if((l=c>=t.repLens[R]?c:t.repLens[R])<2)return t.backRes=t._optimum[1].BackPrev,1;t._optimum[1].PosPrev=0,t._optimum[0].Backs0=t.reps[0],t._optimum[0].Backs1=t.reps[1],t._optimum[0].Backs2=t.reps[2],t._optimum[0].Backs3=t.reps[3],u=l;for(;t._optimum[u--].Price=268435455,2<=u;);for(a=0;a<4;++a)if(!((W=t.repLens[a])<2))for(G=O+K(t,a,t._state,A);i=G+$(t._repMatchLenEncoder,W-2,A),E=t._optimum[W],i<E.Price&&(E.Price=i,E.PosPrev=0,E.BackPrev=a,E.Prev1IsChar=0),2<=--W;);if(q=g+Q[t._isRep[t._state]>>>2],(u=2<=t.repLens[0]?t.repLens[0]+1:2)<=c){for(w=0;u>t._matchDistances[w];)w+=2;for(;F=t._matchDistances[w+1],i=q+yt(t,F,u,A),E=t._optimum[u],i<E.Price&&(E.Price=i,E.PosPrev=0,E.BackPrev=F+4,E.Prev1IsChar=0),u!=t._matchDistances[w]||(w+=2)!=x;++u);}n=0;for(;;){if(++n==l)return pt(t,n);if(y=vt(t),x=t._numDistancePairs,y>=t._numFastBytes)return t._longestMatchLength=y,t._longestMatchWasFound=1,pt(t,n);if(++e,C=t._optimum[n].PosPrev,B=t._optimum[n].Prev1IsChar?(--C,Y(B=t._optimum[n].Prev2?(B=t._optimum[t._optimum[n].PosPrev2].State,t._optimum[n].BackPrev2<4?B<7?8:11:B<7?7:10):t._optimum[C].State)):t._optimum[C].State,C==n-1?B=t._optimum[n].BackPrev?Y(B):B<7?9:11:(B=t._optimum[n].Prev1IsChar&&t._optimum[n].Prev2?(C=t._optimum[n].PosPrev2,S=t._optimum[n].BackPrev2,B<7?8:11):(S=t._optimum[n].BackPrev)<4?B<7?8:11:B<7?7:10,C=t._optimum[C],S<4?S?1==S?(t.reps[0]=C.Backs1,t.reps[1]=C.Backs0,t.reps[2]=C.Backs2,t.reps[3]=C.Backs3):2==S?(t.reps[0]=C.Backs2,t.reps[1]=C.Backs0,t.reps[2]=C.Backs1,t.reps[3]=C.Backs3):(t.reps[0]=C.Backs3,t.reps[1]=C.Backs0,t.reps[2]=C.Backs1,t.reps[3]=C.Backs2):(t.reps[0]=C.Backs0,t.reps[1]=C.Backs1,t.reps[2]=C.Backs2,t.reps[3]=C.Backs3):(t.reps[0]=S-4,t.reps[1]=C.Backs0,t.reps[2]=C.Backs1,t.reps[3]=C.Backs2)),t._optimum[n].State=B,t._optimum[n].Backs0=t.reps[0],t._optimum[n].Backs1=t.reps[1],t._optimum[n].Backs2=t.reps[2],t._optimum[n].Backs3=t.reps[3],C=t._optimum[n].Price,s=X(t._matchFinder,-1),d=X(t._matchFinder,-t.reps[0]-1-1),A=e&t._posStateMask,r=C+Q[t._isMatch[(B<<4)+A]>>>2]+J(Z(t._literalEncoder,e,X(t._matchFinder,-2)),7<=B,d,s),m=t._optimum[n+1],j=0,r<m.Price&&(m.Price=r,m.PosPrev=n,m.BackPrev=-1,m.Prev1IsChar=0,j=1),g=C+Q[2048-t._isMatch[(B<<4)+A]>>>2],O=g+Q[2048-t._isRep[B]>>>2],d!=s||m.PosPrev<n&&!m.BackPrev||(H=O+(Q[t._isRepG0[B]>>>2]+Q[t._isRep0Long[(B<<4)+A]>>>2]))<=m.Price&&(m.Price=H,m.PosPrev=n,m.BackPrev=0,m.Prev1IsChar=0,j=1),b=z(t._matchFinder)+1,!((_=b=4095-n<b?4095-n:b)<2)){if(_>t._numFastBytes&&(_=t._numFastBytes),!j&&d!=s&&(k=Math.min(b-1,t._numFastBytes),2<=(f=V(t._matchFinder,0,t.reps[0],k)))){for(D=Y(B),P=e+1&t._posStateMask,v=r+Q[2048-t._isMatch[(D<<4)+P]>>>2]+Q[2048-t._isRep[D]>>>2],T=n+1+f;l<T;)t._optimum[++l].Price=268435455;i=v+($(t._repMatchLenEncoder,f-2,P)+K(t,0,D,P)),E=t._optimum[T],i<E.Price&&(E.Price=i,E.PosPrev=n+1,E.BackPrev=0,E.Prev1IsChar=1,E.Prev2=0)}for(I=2,M=0;M<4;++M)if(!((p=V(t._matchFinder,-1,t.reps[M],_))<2)){N=p;do{for(;l<n+p;)t._optimum[++l].Price=268435455}while(i=O+($(t._repMatchLenEncoder,p-2,A)+K(t,M,B,A)),E=t._optimum[n+p],i<E.Price&&(E.Price=i,E.PosPrev=n,E.BackPrev=M,E.Prev1IsChar=0),2<=--p);if(p=N,M||(I=p+1),p<b&&(k=Math.min(b-1-p,t._numFastBytes),2<=(f=V(t._matchFinder,p,t.reps[M],k)))){for(D=B<7?8:11,P=e+p&t._posStateMask,L=O+($(t._repMatchLenEncoder,p-2,A)+K(t,M,B,A))+Q[t._isMatch[(D<<4)+P]>>>2]+J(Z(t._literalEncoder,e+p,X(t._matchFinder,p-1-1)),1,X(t._matchFinder,p-1-(t.reps[M]+1)),X(t._matchFinder,p-1)),D=Y(D),P=e+p+1&t._posStateMask,U=L+Q[2048-t._isMatch[(D<<4)+P]>>>2],v=U+Q[2048-t._isRep[D]>>>2],T=p+1+f;l<n+T;)t._optimum[++l].Price=268435455;i=v+($(t._repMatchLenEncoder,f-2,P)+K(t,0,D,P)),E=t._optimum[n+T],i<E.Price&&(E.Price=i,E.PosPrev=n+p+1,E.BackPrev=0,E.Prev1IsChar=1,E.Prev2=1,E.PosPrev2=n,E.BackPrev2=M)}}if(_<y){for(y=_,x=0;y>t._matchDistances[x];x+=2);t._matchDistances[x]=y,x+=2}if(I<=y){for(q=g+Q[t._isRep[B]>>>2];l<n+y;)t._optimum[++l].Price=268435455;for(w=0;I>t._matchDistances[w];)w+=2;for(p=I;;++p)if(o=t._matchDistances[w+1],i=q+yt(t,o,p,A),E=t._optimum[n+p],i<E.Price&&(E.Price=i,E.PosPrev=n,E.BackPrev=o+4,E.Prev1IsChar=0),p==t._matchDistances[w]){if(p<b&&(k=Math.min(b-1-p,t._numFastBytes),2<=(f=V(t._matchFinder,p,o,k)))){for(D=B<7?7:10,P=e+p&t._posStateMask,L=i+Q[t._isMatch[(D<<4)+P]>>>2]+J(Z(t._literalEncoder,e+p,X(t._matchFinder,p-1-1)),1,X(t._matchFinder,p-(o+1)-1),X(t._matchFinder,p-1)),D=Y(D),P=e+p+1&t._posStateMask,U=L+Q[2048-t._isMatch[(D<<4)+P]>>>2],v=U+Q[2048-t._isRep[D]>>>2],T=p+1+f;l<n+T;)t._optimum[++l].Price=268435455;i=v+($(t._repMatchLenEncoder,f-2,P)+K(t,0,D,P)),E=t._optimum[n+T],i<E.Price&&(E.Price=i,E.PosPrev=n+p+1,E.BackPrev=0,E.Prev1IsChar=1,E.Prev2=1,E.PosPrev2=n,E.BackPrev2=o+4)}if((w+=2)==x)break}}}}}(t,b(t.nowPos64)),h=t.backRes,f=b(t.nowPos64)&t._posStateMask,a=(t._state<<4)+f,1==l&&-1==h)P(t._rangeEncoder,t._isMatch,a,0),o=X(t._matchFinder,-t._additionalOffset),g=Z(t._literalEncoder,b(t.nowPos64),t._previousByte),t._state<7?Ct(g,t._rangeEncoder,o):(c=X(t._matchFinder,-t._repDistances[0]-1-t._additionalOffset),function(t,e,n,r){var i,o,s,a,u=1,l=1;for(o=7;0<=o;--o)i=r>>o&1,a=l,u&&(a+=1+(s=n>>o&1)<<8,u=s==i),P(e,t.m_Encoders,a,i),l=l<<1|i}(g,t._rangeEncoder,c,o)),t._previousByte=o,t._state=Y(t._state);else{if(P(t._rangeEncoder,t._isMatch,a,1),h<4){if(P(t._rangeEncoder,t._isRep,t._state,1),h?(P(t._rangeEncoder,t._isRepG0,t._state,1),1==h?P(t._rangeEncoder,t._isRepG1,t._state,0):(P(t._rangeEncoder,t._isRepG1,t._state,1),P(t._rangeEncoder,t._isRepG2,t._state,h-2))):(P(t._rangeEncoder,t._isRepG0,t._state,0),P(t._rangeEncoder,t._isRep0Long,a,1==l?0:1)),1==l?t._state=t._state<7?9:11:(Tt(t._repMatchLenEncoder,t._rangeEncoder,l-2,f),t._state=t._state<7?8:11),s=t._repDistances[h],0!=h){for(u=h;1<=u;--u)t._repDistances[u]=t._repDistances[u-1];t._repDistances[0]=s}}else{for(P(t._rangeEncoder,t._isRep,t._state,0),t._state=t._state<7?7:10,Tt(t._lenEncoder,t._rangeEncoder,l-2,f),g=bt(h-=4),c=x(l),S(t._posSlotEncoder[c],t._rangeEncoder,g),4<=g&&(p=h-(i=(2|1&g)<<(a=(g>>1)-1)),g<14?function(t,e,n,r,i){var o,s,a=1;for(s=0;s<r;++s)P(n,t,e+a,o=1&i),a=a<<1|o,i>>=1}(t._posEncoders,i-g-1,t._rangeEncoder,a,p):(Mt(t._rangeEncoder,p>>4,a-4),Pt(t._posAlignEncoder,t._rangeEncoder,15&p),++t._alignPriceCount)),s=h,u=3;1<=u;--u)t._repDistances[u]=t._repDistances[u-1];t._repDistances[0]=s,++t._matchPriceCount}t._previousByte=X(t._matchFinder,l-1-t._additionalOffset)}if(t._additionalOffset-=l,t.nowPos64=m(t.nowPos64,_(l)),!t._additionalOffset){if(128<=t._matchPriceCount&&dt(t),16<=t._alignPriceCount&&ft(t),e[0]=t.nowPos64,n[0]=function(t){return m(m(_(t._cacheSize),t._position),[4,0])}(t._rangeEncoder),!z(t._matchFinder))return gt(t,b(t.nowPos64));if(0<=v(N(t.nowPos64,d),[4096,0]))return t._finished=0,r[0]=0}}else gt(t,b(t.nowPos64))}}((n=t).encoder,n.encoder.processedInSize,n.encoder.processedOutSize,n.encoder.finished),n.inBytesProcessed=n.encoder.processedInSize[0],n.encoder.finished[0]){var e=n.encoder;_t(e),e._rangeEncoder.Stream=null,n.alive=0}}else{e=t,n=function(t){var e,n,r;if(r=b(t.nowPos64)&t.m_PosStateMask,u(t.m_RangeDecoder,t.m_IsMatchDecoders,(t.state<<4)+r)){if(u(t.m_RangeDecoder,t.m_IsRepDecoders,t.state))e=0,u(t.m_RangeDecoder,t.m_IsRepG0Decoders,t.state)?(u(t.m_RangeDecoder,t.m_IsRepG1Decoders,t.state)?(u(t.m_RangeDecoder,t.m_IsRepG2Decoders,t.state)?(n=t.rep3,t.rep3=t.rep2):n=t.rep2,t.rep2=t.rep1):n=t.rep1,t.rep1=t.rep0,t.rep0=n):u(t.m_RangeDecoder,t.m_IsRep0LongDecoders,(t.state<<4)+r)||(t.state=t.state<7?9:11,e=1),e||(e=lt(t.m_RepLenDecoder,t.m_RangeDecoder,r)+2,t.state=t.state<7?8:11);else if(t.rep3=t.rep2,t.rep2=t.rep1,t.rep1=t.rep0,e=2+lt(t.m_LenDecoder,t.m_RangeDecoder,r),t.state=t.state<7?7:10,4<=(n=a(t.m_PosSlotDecoder[x(e)],t.m_RangeDecoder))){if(r=(n>>1)-1,t.rep0=(2|1&n)<<r,n<14)t.rep0+=function(t,e,n,r){var i,o,s=1,a=0;for(o=0;o<r;++o)i=u(n,t,e+s),s=(s<<1)+i,a|=i<<o;return a}(t.m_PosDecoders,t.rep0-n-1,t.m_RangeDecoder,r);else if(t.rep0+=function(t,e){var n,r,i=0;for(n=e;0!=n;--n)t.Range>>>=1,r=t.Code-t.Range>>>31,t.Code-=t.Range&r-1,i=i<<1|1-r,-16777216&t.Range||(t.Code=t.Code<<8|l(t.Stream),t.Range<<=8);return i}(t.m_RangeDecoder,r-4)<<4,t.rep0+=function(t,e){var n,r,i=1,o=0;for(r=0;r<t.NumBitLevels;++r)n=u(e,t.Models,i),i=(i<<1)+n,o|=n<<r;return o}(t.m_PosAlignDecoder,t.m_RangeDecoder),t.rep0<0)return-1==t.rep0?1:-1}else t.rep0=n;if(0<=v(_(t.rep0),t.nowPos64)||t.rep0>=t.m_DictionarySizeCheck)return-1;!function(t,e,n){var r=t._pos-e-1;for(r<0&&(r+=t._windowSize);0!=n;--n)r>=t._windowSize&&(r=0),t._buffer[t._pos++]=t._buffer[r++],t._pos>=t._windowSize&&o(t)}(t.m_OutWindow,t.rep0,e),t.nowPos64=m(t.nowPos64,_(e)),t.prevByte=st(t.m_OutWindow,0)}else r=function(t,e,n){return t.m_Coders[((e&t.m_PosMask)<<t.m_NumPrevBits)+((255&n)>>>8-t.m_NumPrevBits)]}(t.m_LiteralDecoder,b(t.nowPos64),t.prevByte),t.state<7?t.prevByte=function(t,e){var n=1;for(;n=n<<1|u(e,t.m_Decoders,n),n<256;);return n<<24>>24}(r,t.m_RangeDecoder):t.prevByte=function(t,e,n){var r,i,o=1;do{if(i=n>>7&1,n<<=1,r=u(e,t.m_Decoders,(1+i<<8)+o),o=o<<1|r,i!=r){for(;o<256;)o=o<<1|u(e,t.m_Decoders,o);break}}while(o<256);return o<<24>>24}(r,t.m_RangeDecoder,st(t.m_OutWindow,t.rep0)),function(t,e){t._buffer[t._pos++]=e,t._pos>=t._windowSize&&o(t)}(t.m_OutWindow,t.prevByte),t.state=Y(t.state),t.nowPos64=m(t.nowPos64,R);return 0}(e.decoder);if(-1==n)throw new Error("corrupted input");e.inBytesProcessed=d,e.outBytesProcessed=e.decoder.nowPos64,(n||0<=v(e.decoder.outSize,y)&&0<=v(e.decoder.nowPos64,e.decoder.outSize))&&(o(e.decoder.m_OutWindow),at(e.decoder.m_OutWindow),e.decoder.m_RangeDecoder.Stream=null,e.alive=0)}var n;return t.alive}function ut(t,e){for(;t.m_NumPosStates<e;++t.m_NumPosStates)t.m_LowCoder[t.m_NumPosStates]=f({},3),t.m_MidCoder[t.m_NumPosStates]=f({},3)}function lt(t,e,n){var r;return u(e,t.m_Choice,0)?(r=8,u(e,t.m_Choice,1)?r+=8+a(t.m_HighCoder,e):r+=a(t.m_MidCoder[n],e),r):a(t.m_LowCoder[n],e)}function ct(t){return t.m_Choice=g(2),t.m_LowCoder=g(16),t.m_MidCoder=g(16),t.m_HighCoder=f({},8),t.m_NumPosStates=0,t}function ht(t){A(t.m_Choice);for(var e=0;e<t.m_NumPosStates;++e)A(t.m_LowCoder[e].Models),A(t.m_MidCoder[e].Models);A(t.m_HighCoder.Models)}var s=function(){for(var t,e,n=2,r=[0,1],i=2;i<22;++i)for(e=1<<(i>>1)-1,t=0;t<e;++t,++n)r[n]=i<<24>>24;return r}();function pt(t,e){var n,r,i,o;for(t._optimumEndIndex=e,i=t._optimum[e].PosPrev,r=t._optimum[e].BackPrev;t._optimum[e].Prev1IsChar&&(At(t._optimum[i]),t._optimum[i].PosPrev=i-1,t._optimum[e].Prev2)&&(t._optimum[i-1].Prev1IsChar=0,t._optimum[i-1].PosPrev=t._optimum[e].PosPrev2,t._optimum[i-1].BackPrev=t._optimum[e].BackPrev2),o=i,n=r,r=t._optimum[o].BackPrev,i=t._optimum[o].PosPrev,t._optimum[o].BackPrev=n,t._optimum[o].PosPrev=e,0<(e=o););return t.backRes=t._optimum[0].BackPrev,t._optimumCurrentIndex=t._optimum[0].PosPrev,t._optimumCurrentIndex}function ft(t){for(var e=0;e<16;++e)t._alignPrices[e]=function(t,e){var n,r,i=1,o=0;for(r=t.NumBitLevels;0!=r;--r)n=1&e,e>>>=1,o+=M(t.Models[i],n),i=i<<1|n;return o}(t._posAlignEncoder,e);t._alignPriceCount=0}function dt(t){for(var e,n,r,i,o,s,a,u=4;u<128;++u)o=bt(u),t.tempPrices[u]=function(t,e,n,r){var i,o,s=1,a=0;for(o=n;0!=o;--o)i=1&r,r>>>=1,a+=Q[(2047&(t[e+s]-i^-i))>>>2],s=s<<1|i;return a}(t._posEncoders,(e=(2|1&o)<<(r=(o>>1)-1))-o-1,r,u-e);for(i=0;i<4;++i){for(n=t._posSlotEncoder[i],s=i<<6,o=0;o<t._distTableSize;++o)t._posSlotPrices[s+o]=C(n,o);for(o=14;o<t._distTableSize;++o)t._posSlotPrices[s+o]+=(o>>1)-1-4<<6;for(a=128*i,u=0;u<4;++u)t._distancesPrices[a+u]=t._posSlotPrices[s+u];for(;u<128;++u)t._distancesPrices[a+u]=t._posSlotPrices[s+bt(u)]+t.tempPrices[u]}t._matchPriceCount=0}function gt(t,e){var n;_t(t),n=e&(e=t)._posStateMask,e._writeEndMark&&(P(e._rangeEncoder,e._isMatch,(e._state<<4)+n,1),P(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,Tt(e._lenEncoder,e._rangeEncoder,0,n),n=x(2),S(e._posSlotEncoder[n],e._rangeEncoder,63),Mt(e._rangeEncoder,67108863,26),Pt(e._posAlignEncoder,e._rangeEncoder,15));for(var r=0;r<5;++r)Ot(t._rangeEncoder)}function yt(t,e,n,r){var i=x(n),i=e<128?t._distancesPrices[128*i+e]:t._posSlotPrices[(i<<6)+function(t){if(t<131072)return s[t>>6]+12;if(t<134217728)return s[t>>16]+32;return s[t>>26]+52}(e)]+t._alignPrices[15&e];return i+$(t._lenEncoder,n-2,r)}function K(t,e,n,r){var i;return e?(i=Q[2048-t._isRepG0[n]>>>2],1==e?i+=Q[t._isRepG1[n]>>>2]:i=(i+=Q[2048-t._isRepG1[n]>>>2])+M(t._isRepG2[n],e-2)):(i=Q[t._isRepG0[n]>>>2],i+=Q[2048-t._isRep0Long[(n<<4)+r]>>>2]),i}function mt(t,e){if(0<e){var n,r,i,o,s,a,u,l,c,h,p,f,d,g=t._matchFinder,y=e;do{if(g._pos+g._matchMaxLen<=g._streamPos)l=g._matchMaxLen;else if((l=g._streamPos-g._pos)<g.kMinMatchCheck){T(g);continue}for(c=g._pos>g._cyclicBufferSize?g._pos-g._cyclicBufferSize:0,r=g._bufferOffset+g._pos,d=g.HASH_ARRAY?(d=w[255&g._bufferBase[r]]^255&g._bufferBase[r+1],g._hash[1023&d]=g._pos,d^=(255&g._bufferBase[r+2])<<8,g._hash[1024+(65535&d)]=g._pos,(d^w[255&g._bufferBase[r+3]]<<5)&g._hashMask):255&g._bufferBase[r]^(255&g._bufferBase[r+1])<<8,i=g._hash[g.kFixHashSize+d],g._hash[g.kFixHashSize+d]=g._pos,p=1+(g._cyclicBufferPos<<1),f=g._cyclicBufferPos<<1,a=u=g.kNumHashDirectBytes,n=g._cutValue;;){if(i<=c||0==n--){g._son[p]=g._son[f]=0;break}if(o=((o=g._pos-i)<=g._cyclicBufferPos?g._cyclicBufferPos-o:g._cyclicBufferPos-o+g._cyclicBufferSize)<<1,h=g._bufferOffset+i,g._bufferBase[h+(s=a<u?a:u)]==g._bufferBase[r+s]){for(;++s!=l&&g._bufferBase[h+s]==g._bufferBase[r+s];);if(s==l){g._son[f]=g._son[o],g._son[p]=g._son[1+o];break}}(255&g._bufferBase[h+s])<(255&g._bufferBase[r+s])?(g._son[f]=i,i=g._son[f=1+o],u=s):(g._son[p]=i,i=g._son[p=o],a=s)}T(g)}while(0!=--y);t._additionalOffset+=e}}function vt(t){var e=0;return t._numDistancePairs=function(t,e){var n,r,i,o,s,a,u,l,c,h,p,f,d,g,y,m,v,_,b,x;if(t._pos+t._matchMaxLen<=t._streamPos)d=t._matchMaxLen;else if((d=t._streamPos-t._pos)<t.kMinMatchCheck)return T(t),0;for(g=t._pos>t._cyclicBufferSize?t._pos-t._cyclicBufferSize:0,r=t._bufferOffset+t._pos,y=1,c=l=m=0,x=t.HASH_ARRAY?(l=1023&(x=w[255&t._bufferBase[r]]^255&t._bufferBase[r+1]),c=65535&(x^=(255&t._bufferBase[r+2])<<8),(x^w[255&t._bufferBase[r+3]]<<5)&t._hashMask):255&t._bufferBase[r]^(255&t._bufferBase[r+1])<<8,i=t._hash[t.kFixHashSize+x]||0,t.HASH_ARRAY&&(o=t._hash[l]||0,s=t._hash[1024+c]||0,t._hash[l]=t._pos,t._hash[1024+c]=t._pos,g<o&&t._bufferBase[t._bufferOffset+o]==t._bufferBase[r]&&(e[m++]=y=2,e[m++]=t._pos-o-1),g<s&&t._bufferBase[t._bufferOffset+s]==t._bufferBase[r]&&(s==o&&(m-=2),e[m++]=y=3,e[m++]=t._pos-s-1,o=s),0!=m)&&o==i&&(m-=2,y=1),t._hash[t.kFixHashSize+x]=t._pos,_=1+(t._cyclicBufferPos<<1),b=t._cyclicBufferPos<<1,p=f=t.kNumHashDirectBytes,0!=t.kNumHashDirectBytes&&g<i&&t._bufferBase[t._bufferOffset+i+t.kNumHashDirectBytes]!=t._bufferBase[r+t.kNumHashDirectBytes]&&(e[m++]=y=t.kNumHashDirectBytes,e[m++]=t._pos-i-1),n=t._cutValue;;){if(i<=g||0==n--){t._son[_]=t._son[b]=0;break}if(a=((u=t._pos-i)<=t._cyclicBufferPos?t._cyclicBufferPos-u:t._cyclicBufferPos-u+t._cyclicBufferSize)<<1,v=t._bufferOffset+i,t._bufferBase[v+(h=p<f?p:f)]==t._bufferBase[r+h]){for(;++h!=d&&t._bufferBase[v+h]==t._bufferBase[r+h];);if(y<h&&(e[m++]=y=h,e[m++]=u-1,h==d)){t._son[b]=t._son[a],t._son[_]=t._son[1+a];break}}(255&t._bufferBase[v+h])<(255&t._bufferBase[r+h])?(t._son[b]=i,i=t._son[b=1+a],f=h):(t._son[_]=i,i=t._son[_=a],p=h)}return T(t),m}(t._matchFinder,t._matchDistances),0<t._numDistancePairs&&(e=t._matchDistances[t._numDistancePairs-2])==t._numFastBytes&&(e+=V(t._matchFinder,e-1,t._matchDistances[t._numDistancePairs-1],273-e)),++t._additionalOffset,e}function _t(t){t._matchFinder&&t._needReleaseMFStream&&(t._matchFinder._stream=null,t._needReleaseMFStream=0)}function bt(t){return t<2048?s[t]:t<2097152?s[t>>10]+20:s[t>>20]+40}function xt(t,e){A(t._choice);for(var n=0;n<e;++n)A(t._lowCoder[n].Models),A(t._midCoder[n].Models);A(t._highCoder.Models)}function wt(t,e,n,r,i){var o=Q[t._choice[0]>>>2],s=Q[2048-t._choice[0]>>>2],a=s+Q[t._choice[1]>>>2],u=s+Q[2048-t._choice[1]>>>2],l=0;for(l=0;l<8;++l){if(n<=l)return;r[i+l]=o+C(t._lowCoder[e],l)}for(;l<16;++l){if(n<=l)return;r[i+l]=a+C(t._midCoder[e],l-8)}for(;l<n;++l)r[i+l]=u+C(t._highCoder,l-8-8)}function Tt(t,e,n,r){var i,o;i=t,e=e,o=r,(n=n)<8?(P(e,i._choice,0,0),S(i._lowCoder[o],e,n)):(n-=8,P(e,i._choice,0,1),n<8?(P(e,i._choice,1,0),S(i._midCoder[o],e,n)):(P(e,i._choice,1,1),S(i._highCoder,e,n-8))),0==--t._counters[r]&&(wt(t,r,t._tableSize,t._prices,272*r),t._counters[r]=t._tableSize)}function Et(t){var e=t;e._choice=g(2),e._lowCoder=g(16),e._midCoder=g(16),e._highCoder=E({},8);for(var n=0;n<16;++n)e._lowCoder[n]=E({},3),e._midCoder[n]=E({},3);return t._prices=[],t._counters=[],t}function $(t,e,n){return t._prices[272*n+e]}function St(t,e){for(var n=0;n<e;++n)wt(t,n,t._tableSize,t._prices,272*n),t._counters[n]=t._tableSize}function Z(t,e,n){return t.m_Coders[((e&t.m_PosMask)<<t.m_NumPrevBits)+((255&n)>>>8-t.m_NumPrevBits)]}function Ct(t,e,n){for(var r,i=1,o=7;0<=o;--o)P(e,t.m_Encoders,i,r=n>>o&1),i=i<<1|r}function J(t,e,n,r){var i,o,s=1,a=7,u=0;if(e)for(;0<=a;--a)if(u+=M(t.m_Encoders[(1+(o=n>>a&1)<<8)+s],i=r>>a&1),s=s<<1|i,o!=i){--a;break}for(;0<=a;--a)u+=M(t.m_Encoders[s],i=r>>a&1),s=s<<1|i;return u}function At(t){t.BackPrev=-1,t.Prev1IsChar=0}function f(t,e){return t.NumBitLevels=e,t.Models=g(1<<e),t}function a(t,e){for(var n=1,r=t.NumBitLevels;0!=r;--r)n=(n<<1)+u(e,t.Models,n);return n-(1<<t.NumBitLevels)}function E(t,e){return t.NumBitLevels=e,t.Models=g(1<<e),t}function S(t,e,n){for(var r,i=1,o=t.NumBitLevels;0!=o;)P(e,t.Models,i,r=n>>>--o&1),i=i<<1|r}function C(t,e){for(var n,r=1,i=0,o=t.NumBitLevels;0!=o;)i+=M(t.Models[r],n=e>>>--o&1),r=(r<<1)+n;return i}function Pt(t,e,n){for(var r,i=1,o=0;o<t.NumBitLevels;++o)P(e,t.Models,i,r=1&n),i=i<<1|r,n>>=1}function u(t,e,n){var r=e[n],i=(t.Range>>>11)*r;return(-2147483648^t.Code)<(-2147483648^i)?(t.Range=i,e[n]=r+(2048-r>>>5)<<16>>16,-16777216&t.Range||(t.Code=t.Code<<8|l(t.Stream),t.Range<<=8),0):(t.Range-=i,t.Code-=i,e[n]=r-(r>>>5)<<16>>16,-16777216&t.Range||(t.Code=t.Code<<8|l(t.Stream),t.Range<<=8),1)}function A(t){for(var e=t.length-1;0<=e;--e)t[e]=1024}var Q=function(){for(var t,e,n=[],r=8;0<=r;--r)for(t=1<<9-r,e=1<<9-r-1;e<t;++e)n[e]=(r<<6)+(t-e<<6>>>9-r-1);return n}();function P(t,e,n,r){var i=e[n],o=(t.Range>>>11)*i;r?(t.Low=m(t.Low,B(_(o),[4294967295,0])),t.Range-=o,e[n]=i-(i>>>5)<<16>>16):(t.Range=o,e[n]=i+(2048-i>>>5)<<16>>16),-16777216&t.Range||(t.Range<<=8,Ot(t))}function Mt(t,e,n){for(var r=n-1;0<=r;--r)t.Range>>>=1,1==(e>>>r&1)&&(t.Low=m(t.Low,_(t.Range))),-16777216&t.Range||(t.Range<<=8,Ot(t))}function Ot(t){var e,n,r,i,o=b((n=t.Low,r=32,i=F(n,r&=63),i=n[1]<0?m(i,L([2,0],63-r)):i));if(0!=o||v(t.Low,[4278190080,0])<0){for(t._position=m(t._position,_(t._cacheSize)),e=t._cache;q(t.Stream,e+o),e=255,0!=--t._cacheSize;);t._cache=b(t.Low)>>>24}++t._cacheSize,t.Low=L(B(t.Low,[16777215,0]),8)}function M(t,e){return Q[(2047&(t-e^-e))>>>2]}function Rt(t){for(var e,n,r,i=0,o=0,s=t.length,a=[],u=[];i<s;++i,++o){if(128&(e=255&t[i]))if(192==(224&e)){if(s<=i+1)return t;if(128!=(192&(n=255&t[++i])))return t;u[o]=(31&e)<<6|63&n}else{if(224!=(240&e))return t;if(s<=i+2)return t;if(128!=(192&(n=255&t[++i])))return t;if(128!=(192&(r=255&t[++i])))return t;u[o]=(15&e)<<12|(63&n)<<6|63&r}else{if(!e)return t;u[o]=e}16383==o&&(a.push(String.fromCharCode.apply(String,u)),o=-1)}return 0<o&&(u.length=o,a.push(String.fromCharCode.apply(String,u))),a.join("")}function It(t){var e,n,r,i=[],o=0,s=t.length;if("object"==typeof t)return t;for(var a=t,u=s,l=i,c=0,h=0;h<u;++h)l[c++]=a.charCodeAt(h);for(r=0;r<s;++r)1<=(e=i[r])&&e<=127?++o:o+=!e||128<=e&&e<=2047?2:3;for(n=[],r=o=0;r<s;++r)1<=(e=i[r])&&e<=127?n[o++]=e<<24>>24:(!e||128<=e&&e<=2047?n[o++]=(192|e>>6&31)<<24>>24:(n[o++]=(224|e>>12&15)<<24>>24,n[o++]=(128|e>>6&63)<<24>>24),n[o++]=(128|63&e)<<24>>24);return n}function Bt(t){return t[1]+t[0]}e=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}];var e,Dt=function(t){return e[t-1]||e[6]};return"undefined"==typeof onmessage||"undefined"!=typeof window&&void 0!==window.document||(onmessage=function(t){t&&t.data&&(2==t.data.action?kt.decompress(t.data.data,t.data.cbn):1==t.data.action&&kt.compress(t.data.data,t.data.mode,t.data.cbn))}),{compress:function(t,e,r,i){var o,n,s={},a=void 0===r&&void 0===i;if("function"!=typeof r&&(n=r,r=i=0),i=i||function(t){if(void 0!==n)return I(t,n)},r=r||function(t,e){if(void 0!==n)return postMessage({action:1,cbn:n,result:t,error:e})},a){for(s.c=tt({},It(t),Dt(e));p(s.c.chunker););return h(s.c.output)}try{s.c=tt({},It(t),Dt(e)),i(0)}catch(t){return r(null,t)}c(function t(){try{for(var e,n=(new Date).getTime();p(s.c.chunker);)if(o=Bt(s.c.chunker.inBytesProcessed)/Bt(s.c.length_0),200<(new Date).getTime()-n)return i(o),c(t,0),0;i(1),e=h(s.c.output),c(r.bind(null,e),0)}catch(t){r(null,t)}},0)},decompress:function(t,i,o){var s,n,a,u,l={},e=void 0===i&&void 0===o;if("function"!=typeof i&&(n=i,i=o=0),o=o||function(t){if(void 0!==n)return I(a?t:-1,n)},i=i||function(t,e){if(void 0!==n)return postMessage({action:2,cbn:n,result:t,error:e})},e){for(l.d=nt({},t);p(l.d.chunker););return Rt(h(l.d.output))}try{l.d=nt({},t),u=Bt(l.d.length_0),a=-1<u,o(0)}catch(t){return i(null,t)}c(function t(){try{for(var e,n=0,r=(new Date).getTime();p(l.d.chunker);)if(++n%1e3==0&&200<(new Date).getTime()-r)return a&&(s=Bt(l.d.chunker.decoder.nowPos64)/u,o(s)),c(t,0),0;o(1),e=Rt(h(l.d.output)),c(i.bind(null,e),0)}catch(t){i(null,t)}},0)}}}();e.exports=this.LZMA=this.LZMA_WORKER=kt}.call(this)}.call(this,t("timers").setImmediate)},{timers:327}],8:[function(t,e,n){var r=t("../lib/lzma_worker.min.js"),i={isValid:function(t){if("undefiend"==typeof t||null==t)return!1;if(t.constructor!=String&&t.constructor!=Array)return!1;if(t.constructor==String)try{return t=JSON.parse(t),i.isValid(t)}catch(t){return!1}if(0!=t.length){if(t[0].constructor==Number)try{return t=r.decompress(t),i.isValid(t)}catch(t){return!1}for(var e=0;e<t.length;e++){if(null==t[e]||"undefiend"==typeof t[e]||t[e].constructor!=Object)return!1;if(null==t[e].shapes||"undefiend"==typeof t[e].shapes||t[e].shapes.constructor!=Array)return!1;for(var n=0;n<t[e].shapes.length;n++)if(null==t[e].shapes[n]||"undefiend"==typeof t[e].shapes[n]||t[e].shapes[n].constructor!=Object)return!1}}return!0},sanitize:function(t){return t.constructor==String?(t=JSON.parse(t),i.sanitize(t)):t[0].constructor==Number?(t=r.decompress(t),i.sanitize(t)):t},getStats:function(t){var e={objectsCount:0,compressSize:0,uncompressSize:0};t=i.sanitize(t);for(var n=0;n<t.length;n++)e.objectsCount+=t[n].shapes.length;return t=JSON.stringify(t),e.uncompressSize=t.length/1024,e.compressSize=(r.compress(t).toString().length+2)/1024,e}};e.exports=i},{"../lib/lzma_worker.min.js":7}],9:[function(t,e,n){e.exports=function(t){this.name=t,this.fire=function(t,e){void 0===e?t.emit(this.name):t.emit(this.name,e)},this.onFire=function(t,e){t.on(this.name,e)}}},{}],10:[function(t,e,n){var r=new Object,i=t("socket.io-client"),o=t("./gf"),s=t("jquery"),a=t("./config"),u=t("./remoteFunctions/connect"),l=t("./remoteFunctions/connect_error"),c=t("./remoteFunctions/sv"),h=t("./remoteFunctions/roomNum"),p=(t("./remoteFunctions/statz"),t("./remoteFunctions/disconnect"),t("./remoteFunctions/serversInfo"),t("./remoteFunctions/clientReady")),f=t("./remoteFunctions/kickPlayer"),d=t("./remoteFunctions/ddos"),g=t("./remoteFunctions/humanVerification");r.rpsSocket=null,r.gsSocket=null,r.dataCenters=[],r.pingCheckCount=0,r.gsip=null,r.gsrn=null,r.sid=null,r.connectToRps=function(t,e){null!=this.rpsSocket&&this.rpsSocket.disconnect(),this.rpsSocket=i.connect(t),u.onFire(this.rpsSocket,e),l.onFire(this.rpsSocket,function(){o.c("could not connect to root server")})},r.connectToGs=function(t,e){this.gsSocket=i(t),u.onFire(this.gsSocket,e),l.onFire(this.gsSocket,function(){o.c("could not connect to gaming server!")}),h.onFire(this.gsSocket,function(t){-1==t?o.c("Can't join the room, cuz it's full OR given room number not exist"):2==t&&o.c("Already in room"),this.evtHandler(t)})},r.ajaxGetReq=function(t,e){var n=new XMLHttpRequest;return n.withCredentials=!0,n.evtHandler=e,n.onreadystatechange=function(){4==this.readyState&&this.evtHandler(n.responseText,this.status)},n.open("GET",t,!0),n.send(),n},r.registerSidOnGs=function(t){c.fire(this.gsSocket,r.sid),c.onFire(this.gsSocket,t)},r.isHumanOnGs=function(t,e){g.fire(this.gsSocket,t),g.onFire(this.gsSocket,e)},r.getGamingServersInfo=function(t){s.ajax({url:a.rpsIp+"/getGamingServersInfo",data:null,method:"GET",success:t})},r.clientReady=function(){null!=this.gsSocket&&p.fire(this.gsSocket)},r.joinRoom=function(t,e){null==this.gsSocket?o.c("gsSocket not initialized"):(this.gsSocket.evtHandler=e,h.fire(this.gsSocket,t))},r.kickPlayer=function(t){f.fire(this.gsSocket,t)},r.ddos=function(t){d.fire(this.gsSocket,t)},r.getCaptcha=function(t){s.ajax({url:a.dbIp+"/getCaptcha",data:null,method:"GET",xhrFields:{withCredentials:!0},success:t})},r.getBioBySid=function(t,e){s.ajax({url:a.dbIp+"/getBioBySid",data:{sid:t},method:"GET",xhrFields:{withCredentials:!0},success:e})},r.getMyBio=function(t){s.ajax({url:a.dbIp+"/getMyBio",data:null,method:"GET",xhrFields:{withCredentials:!0},success:t})},r.getMyOldMapsLink=function(t){s.ajax({url:a.dbIp+"/getMyOldMapsLink",data:null,method:"GET",xhrFields:{withCredentials:!0},success:t})},r.setMyBio=function(t,e,n,r){s.ajax({url:a.dbIp+"/setMyBio",data:{name:t,avatar:e,chatColor:n},method:"POST",xhrFields:{withCredentials:!0},success:r})},r.getAllSupporters=function(t){s.ajax({url:a.dbIp+"/getAllSupporters",method:"GET",xhrFields:{withCredentials:!0},success:t})},r.buyStoreItem=function(t,e){s.ajax({url:a.dbIp+"/buyStoreItem",data:{id:t},method:"POST",xhrFields:{withCredentials:!0},success:e})},r.verifySID=function(t,e){s.ajax({url:a.dbIp+"/verifySID",data:{sid:t},method:"GET",xhrFields:{withCredentials:!0},success:e})},r.signIn=function(t,e,n,r,i){s.ajax({url:a.dbIp+"/signIn",data:s.param({name:t,password:e,captcha:n,guest:r}),method:"POST",xhrFields:{withCredentials:!0},success:i})},r.signUp=function(t,e,n,r,i){s.ajax({url:a.dbIp+"/signUp",data:s.param({name:t,password:e,email:n,captcha:r}),method:"POST",xhrFields:{withCredentials:!0},success:i})},r.forgotPassword=function(t,e,n){s.ajax({url:a.dbIp+"/forgotPassword",data:s.param({email:t,captcha:e}),method:"POST",xhrFields:{withCredentials:!0},success:n})},r.removeMap=function(t,e){s.ajax({url:a.dbIp+"/removeMap",data:s.param({mapName:t}),method:"POST",xhrFields:{withCredentials:!0},success:e})},r.removeSkin=function(t,e){s.ajax({url:a.dbIp+"/removeSkin",data:s.param({skinName:t}),method:"POST",xhrFields:{withCredentials:!0},success:e})},r.uploadMap=function(t,e,n,r,i){s.ajax({url:a.dbIp+"/uploadMap",data:s.param({mapName:t,mapType:e,mapData:n,mapOverwrite:r}),method:"POST",xhrFields:{withCredentials:!0},success:i})},r.uploadVote=function(t,e,n,r){s.ajax({url:a.dbIp+"/uploadVote",data:s.param({mapName:t,author:e,vote:n}),method:"POST",xhrFields:{withCredentials:!0},success:r})},r.uploadSkinVote=function(t,e,n,r){s.ajax({url:a.dbIp+"/uploadSkinVote",data:s.param({skinName:t,author:e,vote:n}),method:"POST",xhrFields:{withCredentials:!0},success:r})},r.getPaymentToken=function(t,e){s.ajax({url:a.dbIp+"/getPaymentToken",data:s.param({amount:t}),method:"POST",xhrFields:{withCredentials:!0},success:e})},r.getCoinsFromTransactionId=function(t,e){s.ajax({url:a.dbIp+"/getCoinsFromTransactionId",data:s.param({transactionId:t}),method:"POST",xhrFields:{withCredentials:!0},success:e})},r.searchUser=function(t,e){s.ajax({url:a.dbIp+"/searchUser",data:s.param({name:t}),method:"GET",xhrFields:{withCredentials:!0},success:e})},r.friendRequest=function(t,e){s.ajax({url:a.dbIp+"/friendRequest",data:s.param({name:t}),method:"POST",xhrFields:{withCredentials:!0},success:e})},r.myRelations=function(t,e){s.ajax({url:a.dbIp+"/myRelations",data:s.param({name:t}),method:"GET",xhrFields:{withCredentials:!0},success:e})},r.unfriend=function(t,e){s.ajax({url:a.dbIp+"/unfriend",data:s.param({name:t}),method:"POST",xhrFields:{withCredentials:!0},success:e})},r.getAvatar=function(t,e){s.ajax({url:a.dbIp+"/getAvatar",data:s.param({name:t}),method:"GET",xhrFields:{withCredentials:!0},success:e})},r.getStoreCosmetics=function(t,e){s.ajax({url:a.dbIp+"/getStoreCosmetics",data:s.param({page:t}),method:"GET",xhrFields:{withCredentials:!0},success:e})},r.getJoinDate=function(t,e){s.ajax({url:a.dbIp+"/getJoinDate",data:s.param({name:t}),method:"GET",xhrFields:{withCredentials:!0},success:e})},r.getCoins=function(t,e){s.ajax({url:a.dbIp+"/getCoins",data:s.param({name:t}),method:"GET",xhrFields:{withCredentials:!0},success:e})},r.getMapData=function(t,e,n){s.ajax({url:a.dbIp+"/getMapData",data:s.param({author:t,mapName:e}),method:"GET",xhrFields:{withCredentials:!0},success:n})},r.getMaps=function(t,e,n,r,i,o){s.ajax({url:a.dbIp+"/getMaps",data:s.param({mapType:t,author:e,sortBy:n,page:r,mapsManagerMaps:i}),method:"GET",xhrFields:{withCredentials:!0},success:o})},r.getSkins=function(t,e,n,r,i){s.ajax({url:a.dbIp+"/getSkins",data:s.param({author:t,skinName:e,sortBy:n,page:r}),method:"GET",xhrFields:{withCredentials:!0},success:i})},r.getMyRelation=function(t,e){s.ajax({url:a.dbIp+"/getMyRelation",data:s.param({name:t}),method:"GET",xhrFields:{withCredentials:!0},success:e})},r.getRelation=function(t,e){s.ajax({url:a.dbIp+"/getRelation",data:s.param({name:t}),method:"GET",xhrFields:{withCredentials:!0},success:e})},r.getFriendsList=function(t,e,n,r){s.ajax({url:a.dbIp+"/getFriendsList",data:s.param({name:t,type:e,page:n}),method:"GET",xhrFields:{withCredentials:!0},success:r})},r.getMySettings=function(t){s.ajax({url:a.dbIp+"/getMySettings",data:null,method:"GET",xhrFields:{withCredentials:!0},success:t})},r.setMySettings=function(t,e,n){s.ajax({url:a.dbIp+"/setMySettings",data:s.param({email:t,password:e}),method:"POST",xhrFields:{withCredentials:!0},success:n})},r.setMyNewPassword=function(t,e,n){s.ajax({url:a.dbIp+"/setNewPassword",data:s.param({token:t,newPassword:e}),method:"POST",xhrFields:{withCredentials:!0},success:n})},r.setPlayingData=function(t,e){s.ajax({url:a.dbIp+"/setPlayingData",data:s.param({modeName:t.modeName,roomNum:t.roomNum}),method:"POST",xhrFields:{withCredentials:!0},success:e})},r.setAboutMe=function(t,e){s.ajax({url:a.dbIp+"/setAboutMe",data:s.param({aboutMe:t.aboutMe}),method:"POST",xhrFields:{withCredentials:!0},success:e})},r.reportUser=function(t,e){s.ajax({url:a.dbIp+"/reportUser",data:s.param(t),method:"POST",xhrFields:{withCredentials:!0},success:e})},r.cancelFriendRequest=function(t,e){s.ajax({url:a.dbIp+"/cancelFriendRequest",data:s.param({name:t}),method:"POST",xhrFields:{withCredentials:!0},success:e})},r.acceptFriendRequest=function(t,e){s.ajax({url:a.dbIp+"/acceptFriendRequest",data:s.param({name:t}),method:"POST",xhrFields:{withCredentials:!0},success:e})},r.iSigned=function(t){s.ajax({url:a.dbIp+"/iSigned",data:null,method:"GET",xhrFields:{withCredentials:!0},success:t})},r.amISigned=function(t){s.ajax({url:a.dbIp+"/amISigned",data:null,method:"GET",xhrFields:{withCredentials:!0},success:t})},r.logOut=function(t){s.ajax({url:a.dbIp+"/logOut",data:null,method:"GET",xhrFields:{withCredentials:!0},success:t})},r.getMyName=function(t){s.ajax({url:a.dbIp+"/getMyName",data:null,method:"GET",xhrFields:{withCredentials:!0},success:t})},r.getMyAssets=function(t,e){s.ajax({url:a.dbIp+"/getMyAssets",data:s.param({page:t}),method:"GET",xhrFields:{withCredentials:!0},success:e})},r.getAboutMe=function(t,e){s.ajax({url:a.dbIp+"/getAboutMe",method:"GET",data:s.param({name:t}),xhrFields:{withCredentials:!0},success:e})},r.getSID=function(t){s.ajax({url:a.dbIp+"/getSID",data:null,method:"GET",xhrFields:{withCredentials:!0},success:t})},e.exports=r},{"./config":3,"./gf":4,"./remoteFunctions/clientReady":305,"./remoteFunctions/connect":306,"./remoteFunctions/connect_error":307,"./remoteFunctions/ddos":308,"./remoteFunctions/disconnect":309,"./remoteFunctions/humanVerification":310,"./remoteFunctions/kickPlayer":311,"./remoteFunctions/roomNum":312,"./remoteFunctions/serversInfo":313,"./remoteFunctions/statz":314,"./remoteFunctions/sv":315,jquery:42,"socket.io-client":292}],11:[function(t,e,n){function s(){}e.exports=function(t,n,r){var i=!1;return r=r||s,0===(o.count=t)?n():o;function o(t,e){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,n(t),n=r):0!==o.count||i||n(null,e)}}},{}],12:[function(t,e,n){e.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),r<n&&(n=r),r<=e||n<=e||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(t),o=new Uint8Array(n-e),s=e,a=0;s<n;s++,a++)o[a]=i[s];return o.buffer}},{}],13:[function(t,e,n){function r(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=0<t.jitter&&t.jitter<=1?t.jitter:0,this.attempts=0}(e.exports=r).prototype.duration=function(){var t,e,n=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(t=Math.random(),e=Math.floor(t*this.jitter*n),n=0==(1&Math.floor(10*t))?n-e:n+e),0|Math.min(n,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(t){this.ms=t},r.prototype.setMax=function(t){this.max=t},r.prototype.setJitter=function(t){this.jitter=t}},{}],14:[function(t,e,n){!function(c){"use strict";n.encode=function(t){for(var e=new Uint8Array(t),n=e.length,r="",i=0;i<n;i+=3)r=(r=(r=(r+=c[e[i]>>2])+c[(3&e[i])<<4|e[i+1]>>4])+c[(15&e[i+1])<<2|e[i+2]>>6])+c[63&e[i+2]];return n%3==2?r=r.substring(0,r.length-1)+"=":n%3==1&&(r=r.substring(0,r.length-2)+"=="),r},n.decode=function(t){for(var e,n,r,i,o=.75*t.length,s=t.length,a=0,o=("="===t[t.length-1]&&(o--,"="===t[t.length-2])&&o--,new ArrayBuffer(o)),u=new Uint8Array(o),l=0;l<s;l+=4)e=c.indexOf(t[l]),n=c.indexOf(t[l+1]),r=c.indexOf(t[l+2]),i=c.indexOf(t[l+3]),u[a++]=e<<2|n>>4,u[a++]=(15&n)<<4|r>>2,u[a++]=(3&r)<<6|63&i;return o}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],15:[function(t,e,n){"use strict";function r(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&--e,e}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-1<<31,n.sign=function(t){return(0<t)-(t<0)},n.abs=function(t){var e=t>>31;return(t^e)-e},n.min=function(t,e){return e^(t^e)&-(t<e)},n.max=function(t,e){return t^(t^e)&-(t<e)},n.isPow2=function(t){return!(t&t-1||!t)},n.log2=function(t){var e,n=(65535<t)<<4;return(n=(n|=e=(255<(t>>>=n))<<3)|(e=(15<(t>>>=e))<<2)|(e=(3<(t>>>=e))<<1))|(t>>>=e)>>1},n.log10=function(t){return 1e9<=t?9:1e8<=t?8:1e7<=t?7:1e6<=t?6:1e5<=t?5:1e4<=t?4:1e3<=t?3:100<=t?2:10<=t?1:0},n.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(t){return t+=0===t,--t,(t=(t=(t=(t=(t|=t>>>1)|t>>>2)|t>>>4)|t>>>8)|t>>>16)+1},n.prevPow2=function(t){return(t=(t=(t=(t=(t|=t>>>1)|t>>>2)|t>>>4)|t>>>8)|t>>>16)-(t>>>1)},n.parity=function(t){return 27030>>>(t=((t=(t^=t>>>16)^t>>>8)^t>>>4)&15)&1};for(var i=new Array(256),o=i,s=0;s<256;++s){var a=s,u=s,l=7;for(a>>>=1;a;a>>>=1)u=u<<1|1&a,--l;o[s]=u<<l&255}n.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},n.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},n.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},n.interleave3=function(t,e,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},n.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},n.nextCombination=function(t){var e=t|t-1;return 1+e|(~e&-~e)-1>>>r(t)+1}},{}],16:[function(t,e,n){var r="undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,i=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),o=i&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),s=r&&r.prototype.append&&r.prototype.getBlob;function a(t){return t.map(function(t){var e,n;return t.buffer instanceof ArrayBuffer?(e=t.buffer,t.byteLength!==e.byteLength&&((n=new Uint8Array(t.byteLength)).set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=n.buffer),e):t})}function u(t,e){e=e||{};var n=new r;return a(t).forEach(function(t){n.append(t)}),e.type?n.getBlob(e.type):n.getBlob()}function l(t,e){return new Blob(a(t),e||{})}"undefined"!=typeof Blob&&(u.prototype=Blob.prototype,l.prototype=Blob.prototype),e.exports=i?o?Blob:l:s?u:void 0},{}],17:[function(t,e,n){var r=[].slice;e.exports=function(t,e){if("function"!=typeof(e="string"==typeof e?t[e]:e))throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},{}],18:[function(t,e,n){function r(t){if(t){var e,n=t;for(e in r.prototype)n[e]=r.prototype[e];return n}}void 0!==e&&(e.exports=r),r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)this._callbacks={};else{var n=this._callbacks["$"+t];if(n)if(1==arguments.length)delete this._callbacks["$"+t];else{for(var r,i=0;i<n.length;i++)if((r=n[i])===e||r.fn===e){n.splice(i,1);break}0===n.length&&delete this._callbacks["$"+t]}}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e);return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],19:[function(t,e,n){e.exports=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],20:[function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,i,o,s,a,u=e&&e.length,l=u?e[0]*n:t.length,c=g(t,0,l,n,!0),h=[];if(c&&c.next!==c.prev){if(u&&(c=function(t,e,n,r){var i,o,s,a,u=[];for(i=0,o=e.length;i<o;i++)a=e[i]*r,s=i<o-1?e[i+1]*r:t.length,(a=g(t,a,s,r,!1))===a.next&&(a.steiner=!0),u.push(function(t){var e=t,n=t;for(;(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next,e!==t;);return n}(a));for(u.sort(y),i=0;i<u.length;i++)n=function(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&s<a&&(s=a,n=r.x<r.next.x?r:r.next,a===i))return n}}while(r=r.next,r!==e);if(!n)return null;var u,l=n,c=n.x,h=n.y,p=1/0;r=n;for(;i>=r.x&&r.x>=c&&i!==r.x&&P(o<h?i:s,o,c,h,o<h?s:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),I(r,t))&&(u<p||u===p&&(r.x>n.x||r.x===n.x&&function(t,e){return M(t.prev,t,e.prev)<0&&M(e.next,t,t.next)<0}(n,r)))&&(n=r,p=u),r=r.next,r!==l;);return n}(t,e);return n?(S(t=B(n,t),t.next),S(n,n.next)):e}(u[i],n);return n}(t,e,c,n)),t.length>80*n){for(var p=r=t[0],f=i=t[1],d=n;d<l;d+=n)(o=t[d])<p&&(p=o),(s=t[d+1])<f&&(f=s),r<o&&(r=o),i<s&&(i=s);a=0!==(a=Math.max(r-p,i-f))?32767/a:0}C(c,h,n,p,f,a,0)}return h}function g(t,e,n,r,i){var o,s;if(i===0<m(t,e,n,r))for(o=e;o<n;o+=r)s=a(o,t[o],t[o+1],s);else for(o=n-r;e<=o;o-=r)s=a(o,t[o],t[o+1],s);return s&&O(s,s.next)&&(D(s),s=s.next),s}function S(t,e){if(!t)return t;e=e||t;var n,r=t;do{if(n=!1,r.steiner||!O(r,r.next)&&0!==M(r.prev,r,r.next))r=r.next;else{if(D(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function C(t,e,n,r,i,o,s){if(t){if(!s&&o){for(var a=t,u=r,l=i,c=o,h=a;0===h.z&&(h.z=A(h.x,h.y,u,l,c)),h.prevZ=h.prev,h.nextZ=h.next,(h=h.next)!==a;);h.prevZ.nextZ=null,h.prevZ=null;var p,f,d,g,y,m,v,_,b=h,x=1;do{for(f=b,y=b=null,m=0;f;){for(m++,d=f,p=v=0;p<x&&(v++,d=d.nextZ);p++);for(_=x;0<v||0<_&&d;)0!==v&&(0===_||!d||f.z<=d.z)?(f=(g=f).nextZ,v--):(d=(g=d).nextZ,_--),y?y.nextZ=g:b=g,g.prevZ=y,y=g;f=d}}while(y.nextZ=null,x*=2,1<m)}for(var w,T,E=t;t.prev!==t.next;)if(w=t.prev,T=t.next,o?function(t,e,n,r){var i=t.prev,o=t,s=t.next;if(0<=M(i,o,s))return;var a=i.x,u=o.x,l=s.x,c=i.y,h=o.y,p=s.y,f=a<u?a<l?a:l:u<l?u:l,d=c<h?c<p?c:p:h<p?h:p,g=u<a?l<a?a:l:l<u?u:l,y=h<c?p<c?c:p:p<h?h:p,m=A(f,d,e,n,r),v=A(g,y,e,n,r),_=t.prevZ,b=t.nextZ;for(;_&&_.z>=m&&b&&b.z<=v;){if(_.x>=f&&_.x<=g&&_.y>=d&&_.y<=y&&_!==i&&_!==s&&P(a,c,u,h,l,p,_.x,_.y)&&0<=M(_.prev,_,_.next))return;if(_=_.prevZ,b.x>=f&&b.x<=g&&b.y>=d&&b.y<=y&&b!==i&&b!==s&&P(a,c,u,h,l,p,b.x,b.y)&&0<=M(b.prev,b,b.next))return;b=b.nextZ}for(;_&&_.z>=m;){if(_.x>=f&&_.x<=g&&_.y>=d&&_.y<=y&&_!==i&&_!==s&&P(a,c,u,h,l,p,_.x,_.y)&&0<=M(_.prev,_,_.next))return;_=_.prevZ}for(;b&&b.z<=v;){if(b.x>=f&&b.x<=g&&b.y>=d&&b.y<=y&&b!==i&&b!==s&&P(a,c,u,h,l,p,b.x,b.y)&&0<=M(b.prev,b,b.next))return;b=b.nextZ}return 1}(t,r,i,o):function(t){var e=t.prev,n=t,t=t.next;if(0<=M(e,n,t))return;var r=e.x,i=n.x,o=t.x,s=e.y,a=n.y,u=t.y,l=r<i?r<o?r:o:i<o?i:o,c=s<a?s<u?s:u:a<u?a:u,h=i<r?o<r?r:o:o<i?i:o,p=a<s?u<s?s:u:u<a?a:u,f=t.next;for(;f!==e;){if(f.x>=l&&f.x<=h&&f.y>=c&&f.y<=p&&P(r,s,i,a,o,u,f.x,f.y)&&0<=M(f.prev,f,f.next))return;f=f.next}return 1}(t))e.push(w.i/n|0),e.push(t.i/n|0),e.push(T.i/n|0),D(t),t=T.next,E=T.next;else if((t=T)===E){s?1===s?C(t=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next}while(!O(i,o)&&R(i,r,r.next,o)&&I(i,o)&&I(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),D(r),D(r.next),r=t=o),r=r.next,r!==t);return S(r)}(S(t),e,n),e,n,r,i,o,2):2===s&&function(t,e,n,r,i,o){var s=t;do{for(var a,u=s.next.next;u!==s.prev;){if(s.i!==u.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&R(n,n.next,t,e))return 1}while(n=n.next,n!==t);return}(t,e)&&(I(t,e)&&I(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;for(;n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next,n!==t;);return r}(t,e)&&(M(t.prev,t,e.prev)||M(t,e.prev,e))||O(t,e)&&0<M(t.prev,t,t.next)&&0<M(e.prev,e,e.next))}(s,u))return a=B(s,u),s=S(s,s.next),a=S(a,a.next),C(s,e,n,r,i,o,0),C(a,e,n,r,i,o,0);u=u.next}}while(s=s.next,s!==t)}(t,e,n,r,i,o):C(S(t),e,n,r,i,o,1);break}}}function y(t,e){return t.x-e.x}function A(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function P(t,e,n,r,i,o,s,a){return(t-s)*(o-a)<=(i-s)*(e-a)&&(n-s)*(e-a)<=(t-s)*(r-a)&&(i-s)*(r-a)<=(n-s)*(o-a)}function M(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function O(t,e){return t.x===e.x&&t.y===e.y}function R(t,e,n,r){var i=l(M(t,e,n)),o=l(M(t,e,r)),s=l(M(n,r,t)),a=l(M(n,r,e));return i!==o&&s!==a||0===i&&u(t,n,e)||0===o&&u(t,r,e)||0===s&&u(n,t,r)||!(0!==a||!u(n,e,r))}function u(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function l(t){return 0<t?1:t<0?-1:0}function I(t,e){return M(t.prev,t,t.next)<0?0<=M(t,e,t.next)&&0<=M(t,t.prev,e):M(t,e,t.prev)<0||M(t,t.next,e)<0}function B(t,e){var n=new s(t.i,t.x,t.y),r=new s(e.i,e.x,e.y),i=t.next,o=e.prev;return(t.next=e).prev=t,(n.next=i).prev=n,(r.next=n).prev=r,(o.next=r).prev=o,r}function a(t,e,n,r){t=new s(t,e,n);return r?(t.next=r.next,(t.prev=r).next.prev=t,r.next=t):(t.prev=t).next=t,t}function D(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function s(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function m(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}e.exports=r,(e.exports.default=r).deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(m(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,c=a<u-1?e[a+1]*n:t.length;s-=Math.abs(m(t,l,c,n))}for(var h=0,a=0;a<r.length;a+=3){var p=r[a]*n,f=r[a+1]*n,d=r[a+2]*n;h+=Math.abs((t[p]-t[d])*(t[1+f]-t[1+p])-(t[p]-t[f])*(t[1+d]-t[1+p]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);0<i&&(r+=t[i-1].length,n.holes.push(r))}return n}},{}],21:[function(t,e,n){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},{}],22:[function(t,e,n){e.exports=t("./socket"),e.exports.parser=t("engine.io-parser")},{"./socket":23,"engine.io-parser":33}],23:[function(t,e,n){var r=t("./transports/index"),i=t("component-emitter"),h=t("debug")("engine.io-client:socket"),o=t("indexof"),s=t("engine.io-parser"),a=t("parseuri"),u=t("parseqs");function p(t,e){if(!(this instanceof p))return new p(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=a(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=a(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=!1!==e.withCredentials,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||void 0,this.key=e.key||void 0,this.passphrase=e.passphrase||void 0,this.cert=e.cert||void 0,this.ca=e.ca||void 0,this.ciphers=e.ciphers||void 0,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(e.extraHeaders&&0<Object.keys(e.extraHeaders).length&&(this.extraHeaders=e.extraHeaders),e.localAddress)&&(this.localAddress=e.localAddress),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}(e.exports=p).priorWebsocketSuccess=!1,i(p.prototype),p.protocol=s.protocol,(p.Socket=p).Transport=t("./transport"),p.transports=t("./transports/index"),p.parser=t("engine.io-parser"),p.prototype.createTransport=function(t){h('creating transport "%s"',t);var e=function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(this.query),n=(e.EIO=s.protocol,e.transport=t,this.transportOptions[t]||{});return this.id&&(e.sid=this.id),new r[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},p.prototype.open=function(){var t,e;if(this.rememberUpgrade&&p.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return e=this,void setTimeout(function(){e.emit("error","No transports available")},0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},p.prototype.setTransport=function(t){h("setting transport %s",t.name);var e=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),(this.transport=t).on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},p.prototype.probe=function(n){h('probing transport "%s"',n);var r=this.createTransport(n,{probe:1}),e=!1,i=this;function t(){var t;i.onlyBinaryUpgrades&&(t=!this.supportsBinary&&i.transport.supportsBinary,e=e||t),e||(h('probe transport "%s" opened',n),r.send([{type:"ping",data:"probe"}]),r.once("packet",function(t){e||("pong"===t.type&&"probe"===t.data?(h('probe transport "%s" pong',n),i.upgrading=!0,i.emit("upgrading",r),r&&(p.priorWebsocketSuccess="websocket"===r.name,h('pausing current transport "%s"',i.transport.name),i.transport.pause(function(){e||"closed"!==i.readyState&&(h("changing transport and sending upgrade packet"),c(),i.setTransport(r),r.send([{type:"upgrade"}]),i.emit("upgrade",r),r=null,i.upgrading=!1,i.flush())}))):(h('probe transport "%s" failed',n),(t=new Error("probe error")).transport=r.name,i.emit("upgradeError",t)))}))}function o(){e||(e=!0,c(),r.close(),r=null)}function s(t){var e=new Error("probe error: "+t);e.transport=r.name,o(),h('probe transport "%s" failed because of error: %s',n,t),i.emit("upgradeError",e)}function a(){s("transport closed")}function u(){s("socket closed")}function l(t){r&&t.name!==r.name&&(h('"%s" works - aborting "%s"',t.name,r.name),o())}function c(){r.removeListener("open",t),r.removeListener("error",s),r.removeListener("close",a),i.removeListener("close",u),i.removeListener("upgrading",l)}p.priorWebsocketSuccess=!1,r.once("open",t),r.once("error",s),r.once("close",a),this.once("close",u),this.once("upgrading",l),r.open()},p.prototype.onOpen=function(){if(h("socket open"),this.readyState="open",p.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){h("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},p.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(h('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else h('packet received with socket readyState "%s"',this.readyState)},p.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},p.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},p.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){h("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},p.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},p.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emit("drain"):this.flush()},p.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},p.prototype.write=p.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},p.prototype.sendPacket=function(t,e,n,r){"function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((n=n||{}).compress=!1!==n.compress,this.emit("packetCreate",t={type:t,data:e,options:n}),this.writeBuffer.push(t),r&&this.once("flush",r),this.flush())},p.prototype.close=function(){var t;function e(){t.onClose("forced close"),h("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function r(){t.once("upgrade",n),t.once("upgradeError",n)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",(t=this).writeBuffer.length?this.once("drain",function(){(this.upgrading?r:e)()}):(this.upgrading?r:e)()),this},p.prototype.onError=function(t){h("socket error %j",t),p.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},p.prototype.onClose=function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(h('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)},p.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~o(this.transports,t[n])&&e.push(t[n]);return e}},{"./transport":24,"./transports/index":25,"component-emitter":18,debug:31,"engine.io-parser":33,indexof:39,parseqs:110,parseuri:111}],24:[function(t,e,n){var r=t("engine.io-parser");function i(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t("component-emitter")((e.exports=i).prototype),i.prototype.onError=function(t,e){t=new Error(t);return t.type="TransportError",t.description=e,this.emit("error",t),this},i.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(t){t=r.decodePacket(t,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(t){this.emit("packet",t)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":18,"engine.io-parser":33}],25:[function(t,e,n){var s=t("./xmlhttprequest"),a=t("./polling-xhr"),u=t("./polling-jsonp"),t=t("./websocket");n.polling=function(t){var e=!1,n=!1,r=!1!==t.jsonp;{var i,o;"undefined"!=typeof location&&(i="https:"===location.protocol,o=(o=location.port)||(i?443:80),e=t.hostname!==location.hostname||o!==t.port,n=t.secure!==i)}{if(t.xdomain=e,t.xscheme=n,"open"in new s(t)&&!t.forceJSONP)return new a(t);if(r)return new u(t);throw new Error("JSONP disabled")}},n.websocket=t},{"./polling-jsonp":26,"./polling-xhr":27,"./websocket":29,"./xmlhttprequest":30}],26:[function(t,e,n){var r,i=t("./polling"),o=t("component-inherit"),s=t("../globalThis"),l=(e.exports=u,/\n/g),c=/\\n/g;function a(){}function u(t){i.call(this,t),this.query=this.query||{},r=r||(s.___eio=s.___eio||[]),this.index=r.length;var e=this;r.push(function(t){e.onData(t)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){e.script&&(e.script.onerror=a)},!1)}o(u,i),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},u.prototype.doPoll=function(){var e=this,t=document.createElement("script"),n=(this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)},document.getElementsByTagName("script")[0]);n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},u.prototype.doWrite=function(t,e){var n,r,i,o,s=this;function a(){u(),e()}function u(){if(s.iframe)try{s.form.removeChild(s.iframe)}catch(t){s.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+s.iframeId+'">';o=document.createElement(t)}catch(t){(o=document.createElement("iframe")).name=s.iframeId,o.src="javascript:0"}o.id=s.iframeId,s.form.appendChild(o),s.iframe=o}this.form||(n=document.createElement("form"),r=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index,n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=i,n.method="POST",n.setAttribute("accept-charset","utf-8"),r.name="d",n.appendChild(r),document.body.appendChild(n),this.form=n,this.area=r),this.form.action=this.uri(),u(),t=t.replace(c,"\\\n"),this.area.value=t.replace(l,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===s.iframe.readyState&&a()}:this.iframe.onload=a}},{"../globalThis":21,"./polling":28,"component-inherit":19}],27:[function(t,e,n){var i=t("./xmlhttprequest"),r=t("./polling"),o=t("component-emitter"),s=t("component-inherit"),a=t("debug")("engine.io-client:polling-xhr"),t=t("../globalThis");function u(){}function l(t){var e,n;r.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!=typeof location&&(e="https:"===location.protocol,n=(n=location.port)||(e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e)}function c(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function h(){for(var t in c.requests)c.requests.hasOwnProperty(t)&&c.requests[t].abort()}e.exports=l,e.exports.Request=c,s(l,r),l.prototype.supportsBinary=!0,l.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new c(t)},l.prototype.doWrite=function(t,e){var t=this.request({method:"POST",data:t,isBinary:"string"!=typeof t&&void 0!==t}),n=this;t.on("success",e),t.on("error",function(t){n.onError("xhr post error",t)}),this.sendXhr=t},l.prototype.doPoll=function(){a("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},o(c.prototype),c.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR},e=(t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.xhr=new i(t)),n=this;try{a("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&e.setRequestHeader(r,this.extraHeaders[r])}catch(t){}if("POST"===this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&(e.responseType="arraybuffer")}catch(t){}4===e.readyState&&(200===e.status||1223===e.status?n.onLoad():setTimeout(function(){n.onError("number"==typeof e.status?e.status:0)},0))},a("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout(function(){n.onError(t)},0)}"undefined"!=typeof document&&(this.index=c.requestsCount++,c.requests[this.index]=this)},c.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},c.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},c.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},c.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete c.requests[this.index],this.xhr=null}},c.prototype.onLoad=function(){var t,e;try{try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t=("application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&this.xhr.response||this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},c.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},c.prototype.abort=function(){this.cleanup()},c.requestsCount=0,c.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",h):"function"==typeof addEventListener&&(e="onpagehide"in t?"pagehide":"unload",addEventListener(e,h,!1)))},{"../globalThis":21,"./polling":28,"./xmlhttprequest":30,"component-emitter":18,"component-inherit":19,debug:31}],28:[function(t,e,n){var r=t("../transport"),i=t("parseqs"),o=t("engine.io-parser"),s=t("component-inherit"),a=t("yeast"),u=t("debug")("engine.io-client:polling"),l=(e.exports=c,null!=new(t("./xmlhttprequest"))({xdomain:!1}).responseType);function c(t){var e=t&&t.forceBase64;l&&!e||(this.supportsBinary=!1),r.call(this,t)}s(c,r),c.prototype.name="polling",c.prototype.doOpen=function(){this.poll()},c.prototype.pause=function(t){var e,n=this;function r(){u("paused"),n.readyState="paused",t()}this.readyState="pausing",this.polling||!this.writable?(e=0,this.polling&&(u("we are currently polling - waiting to pause"),e++,this.once("pollComplete",function(){u("pre-pause polling complete"),--e||r()})),this.writable||(u("we are currently writing - waiting to pause"),e++,this.once("drain",function(){u("pre-pause writing complete"),--e||r()}))):r()},c.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},c.prototype.onData=function(t){var r=this;u("polling got data %s",t);o.decodePayload(t,this.socket.binaryType,function(t,e,n){if("opening"===r.readyState&&"open"===t.type&&r.onOpen(),"close"===t.type)return r.onClose(),!1;r.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},c.prototype.doClose=function(){var t=this;function e(){u("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(u("transport open - closing"),e()):(u("transport not open - deferring close"),this.once("open",e))},c.prototype.write=function(t){function e(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1;o.encodePayload(t,this.supportsBinary,function(t){n.doWrite(t,e)})},c.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=a()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"==e&&443!==Number(this.port)||"http"==e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},{"../transport":24,"./xmlhttprequest":30,"component-inherit":19,debug:31,"engine.io-parser":33,parseqs:110,yeast:303}],29:[function(h,p,t){!function(c){!function(){var e,n,r=h("../transport"),o=h("engine.io-parser"),i=h("parseqs"),t=h("component-inherit"),s=h("yeast"),a=h("debug")("engine.io-client:websocket");if("undefined"!=typeof WebSocket?e=WebSocket:"undefined"!=typeof self&&(e=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{n=h("ws")}catch(t){}var u=e||n;function l(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=e&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(u=n),r.call(this,t)}t(p.exports=l,r),l.prototype.name="websocket",l.prototype.supportsBinary=!0,l.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new u(t,e):new u(t):new u(t,e,n)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},l.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},l.prototype.write=function(t){for(var r=this,i=(this.writable=!1,t.length),e=0,n=i;e<n;e++)!function(n){o.encodePacket(n,r.supportsBinary,function(t){var e;r.usingBrowserWebSocket||(e={},n.options&&(e.compress=n.options.compress),r.perMessageDeflate&&("string"==typeof t?c.byteLength(t):t.length)<r.perMessageDeflate.threshold&&(e.compress=!1));try{r.usingBrowserWebSocket?r.ws.send(t):r.ws.send(t,e)}catch(t){a("websocket closed before onclose event")}--i||(r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0))})}(t[e])},l.prototype.onClose=function(){r.prototype.onClose.call(this)},l.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},l.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"==e&&443!==Number(this.port)||"ws"==e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=s()),this.supportsBinary||(t.b64=1),(t=i.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},l.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===l.prototype.name)}}.call(this)}.call(this,h("buffer").Buffer)},{"../transport":24,buffer:319,"component-inherit":19,debug:31,"engine.io-parser":33,parseqs:110,ws:318,yeast:303}],30:[function(t,e,n){var r=t("has-cors"),i=t("../globalThis");e.exports=function(t){var e=t.xdomain,n=t.xscheme,t=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||r))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!n&&t)return new XDomainRequest}catch(t){}if(!e)try{return new i[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(t){}}},{"../globalThis":21,"has-cors":38}],31:[function(n,r,i){!function(e){!function(){function t(){var t;try{t=i.storage.debug}catch(t){}return t=!t&&void 0!==e&&"env"in e?e.env.DEBUG:t}(i=r.exports=n("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(t){var e,n,r=this.useColors;t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+i.humanize(this.diff),r&&(r="color: "+this.color,t.splice(1,0,r,"color: inherit"),t[n=e=0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(e++,"%c"===t)&&(n=e)}),t.splice(n,0,r))},i.save=function(t){try{null==t?i.storage.removeItem("debug"):i.storage.debug=t}catch(t){}},i.load=t,i.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],i.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},i.enable(t())}.call(this)}.call(this,n("_process"))},{"./debug":32,_process:322}],32:[function(t,e,u){function n(t){var s;function a(){if(a.enabled){for(var r=a,t=+new Date,e=t-(s||t),i=(r.diff=e,r.prev=s,r.curr=t,s=t,new Array(arguments.length)),n=0;n<i.length;n++)i[n]=arguments[n];i[0]=u.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var o=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(t,e){var n;return"%%"!==t&&(o++,"function"==typeof(e=u.formatters[e]))&&(n=i[o],t=e.call(r,n),i.splice(o,1),o--),t}),u.formatArgs.call(r,i),(a.log||u.log||console.log.bind(console)).apply(r,i)}}return a.namespace=t,a.enabled=u.enabled(t),a.useColors=u.useColors(),a.color=function(t){var e,n=0;for(e in t)n=(n<<5)-n+t.charCodeAt(e),n|=0;return u.colors[Math.abs(n)%u.colors.length]}(t),a.destroy=r,"function"==typeof u.init&&u.init(a),u.instances.push(a),a}function r(){var t=u.instances.indexOf(this);return-1!==t&&(u.instances.splice(t,1),!0)}(u=e.exports=n.debug=n.default=n).coerce=function(t){return t instanceof Error?t.stack||t.message:t},u.disable=function(){u.enable("")},u.enable=function(t){u.save(t),u.names=[],u.skips=[];var e,n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length;for(e=0;e<r;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?u.skips.push(new RegExp("^"+t.substr(1)+"$")):u.names.push(new RegExp("^"+t+"$")));for(e=0;e<u.instances.length;e++){var i=u.instances[e];i.enabled=u.enabled(i.namespace)}},u.enabled=function(t){if("*"===t[t.length-1])return!0;var e,n;for(e=0,n=u.skips.length;e<n;e++)if(u.skips[e].test(t))return!1;for(e=0,n=u.names.length;e<n;e++)if(u.names[e].test(t))return!0;return!1},u.humanize=t("ms"),u.instances=[],u.names=[],u.skips=[],u.formatters={}},{ms:51}],33:[function(t,e,g){var i,n=t("./keys"),o=t("has-binary2"),p=t("arraybuffer.slice"),s=t("after"),y=t("./utf8"),r=("undefined"!=typeof ArrayBuffer&&(i=t("base64-arraybuffer")),"undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent)),a="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),m=r||a,v=(g.protocol=3,g.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6}),u=n(v),f={type:"error",data:"parser error"},_=t("blob");function l(t,e,n){for(var i=new Array(t.length),r=s(t.length,n),o=0;o<t.length;o++)!function(n,t,r){e(t,function(t,e){i[n]=e,r(t,i)})}(o,t[o],r)}g.encodePacket=function(t,e,n,r){"function"==typeof e&&(r=e,e=!1),"function"==typeof n&&(r=n,n=null);var i=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer){var o=t,s=r;if(!(a=e))return g.encodeBase64Packet(o,s);var a=o.data,u=new Uint8Array(a),l=new Uint8Array(1+a.byteLength);l[0]=v[o.type];for(var c=0;c<u.length;c++)l[c+1]=u[c];return s(l.buffer)}if(void 0!==_&&i instanceof _){var h,a=t,o=e,s=r;if(!o)return g.encodeBase64Packet(a,s);if(m){var p=a;var f=o;var d=s;return f?((h=new FileReader).onload=function(){g.encodePacket({type:p.type,data:h.result},f,!0,d)},h.readAsArrayBuffer(p.data)):g.encodeBase64Packet(p,d);return}return(o=new Uint8Array(1))[0]=v[a.type],o=new _([o.buffer,a.data]),s(o)}return i&&i.base64?(e=t,i=r,e="b"+g.packets[t.type]+t.data.data,i(e)):(i=v[t.type],void 0!==t.data&&(i+=n?y.encode(String(t.data),{strict:!1}):String(t.data)),r(""+i))},g.encodeBase64Packet=function(e,n){var r,i,o="b"+g.packets[e.type];if(void 0!==_&&e.data instanceof _)return(r=new FileReader).onload=function(){var t=r.result.split(",")[1];n(o+t)},r.readAsDataURL(e.data);try{i=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),a=new Array(s.length),u=0;u<s.length;u++)a[u]=s[u];i=String.fromCharCode.apply(null,a)}return o+=btoa(i),n(o)},g.decodePacket=function(t,e,n){var r;return void 0===t?f:"string"==typeof t?"b"===t.charAt(0)?g.decodeBase64Packet(t.substr(1),e):(!n||!1!==(t=function(t){try{t=y.decode(t,{strict:!1})}catch(t){return!1}return t}(t)))&&(r=t.charAt(0),Number(r)==r)&&u[r]?1<t.length?{type:u[r],data:t.substring(1)}:{type:u[r]}:f:(r=new Uint8Array(t)[0],n=p(t,1),_&&"blob"===e&&(n=new _([n])),{type:u[r],data:n})},g.decodeBase64Packet=function(t,e){var n,r=u[t.charAt(0)];return i?(n=i.decode(t.substr(1)),{type:r,data:n="blob"===e&&_?new _([n]):n}):{type:r,data:{base64:!0,data:t.substr(1)}}},g.encodePayload=function(t,n,r){"function"==typeof n&&(r=n,n=null);var i=o(t);return n&&i?_&&!m?g.encodePayloadAsBlob(t,r):g.encodePayloadAsArrayBuffer(t,r):t.length?void l(t,function(t,e){g.encodePacket(t,!!i&&n,!1,function(t){e(null,t.length+":"+t)})},function(t,e){return r(e.join(""))}):r("0:")},g.decodePayload=function(t,e,n){if("string"!=typeof t)return g.decodePayloadAsBinary(t,e,n);if("function"==typeof e&&(n=e,e=null),""===t)return n(f,0,1);for(var r,i="",o=0,s=t.length;o<s;o++){var a=t.charAt(o);if(":"!==a)i+=a;else{if(""===i||i!=(r=Number(i)))return n(f,0,1);if(i!=(a=t.substr(o+1,r)).length)return n(f,0,1);if(a.length){if(a=g.decodePacket(a,e,!1),f.type===a.type&&f.data===a.data)return n(f,0,1);if(!1===n(a,o+r,s))return}o+=r,i=""}}return""!==i?n(f,0,1):void 0},g.encodePayloadAsArrayBuffer=function(t,r){if(!t.length)return r(new ArrayBuffer(0));l(t,function(t,e){g.encodePacket(t,!0,!0,function(t){return e(null,t)})},function(t,e){var n=e.reduce(function(t,e){e="string"==typeof e?e.length:e.byteLength;return t+e.toString().length+e+2},0),s=new Uint8Array(n),a=0;return e.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);n=r.buffer}s[a++]=e?0:1;for(var o=n.byteLength.toString(),i=0;i<o.length;i++)s[a++]=parseInt(o[i]);s[a++]=255;for(r=new Uint8Array(n),i=0;i<r.length;i++)s[a++]=r[i]}),r(s.buffer)})},g.encodePayloadAsBlob=function(t,n){l(t,function(t,s){g.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);t=n.buffer,e[0]=0}for(var i=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),o=new Uint8Array(i.length+1),r=0;r<i.length;r++)o[r]=parseInt(i[r]);o[i.length]=255,_&&(e=new _([e.buffer,o.buffer,t]),s(null,e))})},function(t,e){return n(new _(e))})},g.decodePayloadAsBinary=function(t,n,r){"function"==typeof n&&(r=n,n=null);for(var e=t,i=[];0<e.byteLength;){for(var o=new Uint8Array(e),s=0===o[0],a="",u=1;255!==o[u];u++){if(310<a.length)return r(f,0,1);a+=o[u]}var e=p(e,2+a.length),a=parseInt(a),l=p(e,0,a);if(s)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(t){for(var c=new Uint8Array(l),l="",u=0;u<c.length;u++)l+=String.fromCharCode(c[u])}i.push(l),e=p(e,a)}var h=i.length;i.forEach(function(t,e){r(g.decodePacket(t,n,!0),e,h)})}},{"./keys":34,"./utf8":35,after:11,"arraybuffer.slice":12,"base64-arraybuffer":14,blob:16,"has-binary2":37}],34:[function(t,e,n){e.exports=Object.keys||function(t){var e,n=[],r=Object.prototype.hasOwnProperty;for(e in t)r.call(t,e)&&n.push(e);return n}},{}],35:[function(t,e,n){var c,h,p,f=String.fromCharCode;function d(t){for(var e,n,r=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function g(t,e){if(!(55296<=t&&t<=57343))return 1;if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function y(t,e){return f(t>>e&63|128)}function m(){if(h<=p)throw Error("Invalid byte index");var t=255&c[p];if(p++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}e.exports={version:"2.1.2",encode:function(t,e){for(var n,r,i,o=!1!==(e=e||{}).strict,s=d(t),a=s.length,u=-1,l="";++u<a;)n=s[u],l+=(r=o,i=void 0,0==(4294967168&(n=n))?f(n):(i="",0==(4294965248&n)?i=f(n>>6&31|192):0==(4294901760&n)?(g(n,r)||(n=65533),i=f(n>>12&15|224),i+=y(n,6)):0==(4292870144&n)&&(i=f(n>>18&7|240),i=(i+=y(n,12))+y(n,6)),i+f(63&n|128)));return l},decode:function(t,e){for(var n,r=!1!==(e=e||{}).strict,i=(c=d(t),h=c.length,p=0,[]);!1!==(n=function(t){var e,n;if(h<p)throw Error("Invalid byte index");if(p==h)return!1;if(e=255&c[p],p++,0==(128&e))return e;if(192==(224&e)){if(128<=(n=(31&e)<<6|m()))return n;throw Error("Invalid continuation byte")}if(224==(240&e)){if(2048<=(n=(15&e)<<12|m()<<6|m()))return g(n,t)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&65536<=(n=(7&e)<<18|m()<<12|m()<<6|m())&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}(r));)i.push(n);for(var o,s=i,a=s.length,u=-1,l="";++u<a;)65535<(o=s[u])&&(l+=f((o-=65536)>>>10&1023|55296),o=56320|1023&o),l+=f(o);return l}}},{}],36:[function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,f="~";function u(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(){this._events=new u,this._eventsCount=0}Object.create&&(u.prototype=Object.create(null),(new u).__proto__||(f=!1)),o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(f?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t,e){var t=f?f+t:t,n=this._events[t];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},o.prototype.emit=function(t,e,n,r,i,o){var s=f?f+t:t;if(!this._events[s])return!1;var a,u=this._events[s],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,r),!0;case 5:return u.fn.call(u.context,e,n,r,i),!0;case 6:return u.fn.call(u.context,e,n,r,i,o),!0}for(p=1,a=new Array(l-1);p<l;p++)a[p-1]=arguments[p];u.fn.apply(u.context,a)}else for(var c,h=u.length,p=0;p<h;p++)switch(u[p].once&&this.removeListener(t,u[p].fn,void 0,!0),l){case 1:u[p].fn.call(u[p].context);break;case 2:u[p].fn.call(u[p].context,e);break;case 3:u[p].fn.call(u[p].context,e,n);break;case 4:u[p].fn.call(u[p].context,e,n,r);break;default:if(!a)for(c=1,a=new Array(l-1);c<l;c++)a[c-1]=arguments[c];u[p].fn.apply(u[p].context,a)}return!0},o.prototype.on=function(t,e,n){e=new i(e,n||this),n=f?f+t:t;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],e]:this._events[n].push(e):(this._events[n]=e,this._eventsCount++),this},o.prototype.once=function(t,e,n){e=new i(e,n||this,!0),n=f?f+t:t;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],e]:this._events[n].push(e):(this._events[n]=e,this._eventsCount++),this},o.prototype.removeListener=function(t,e,n,r){t=f?f+t:t;if(this._events[t])if(e){var i=this._events[t];if(i.fn)i.fn!==e||r&&!i.once||n&&i.context!==n||(0==--this._eventsCount?this._events=new u:delete this._events[t]);else{for(var o=0,s=[],a=i.length;o<a;o++)(i[o].fn!==e||r&&!i[o].once||n&&i[o].context!==n)&&s.push(i[o]);s.length?this._events[t]=1===s.length?s[0]:s:0==--this._eventsCount?this._events=new u:delete this._events[t]}}else 0==--this._eventsCount?this._events=new u:delete this._events[t];return this},o.prototype.removeAllListeners=function(t){return t?(t=f?f+t:t,this._events[t]&&(0==--this._eventsCount?this._events=new u:delete this._events[t])):(this._events=new u,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=f,o.EventEmitter=o,void 0!==e&&(e.exports=o)},{}],37:[function(e,n,t){!function(u){!function(){var o=e("isarray"),t=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===t.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===t.call(File);n.exports=function t(e){if(!e||"object"!=typeof e)return!1;if(o(e)){for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return!0;return!1}if("function"==typeof u&&u.isBuffer&&u.isBuffer(e)||"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||s&&e instanceof Blob||a&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return!0;return!1}}.call(this)}.call(this,e("buffer").Buffer)},{buffer:319,isarray:40}],38:[function(t,e,n){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},{}],39:[function(t,e,n){var r=[].indexOf;e.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},{}],40:[function(t,e,n){var r={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},{}],41:[function(t,e,n){function r(t,e){return t.test(e)}function i(t){var t=t||("undefined"!=typeof navigator?navigator.userAgent:""),e=t.split("[FBAN"),e=(void 0!==(e=(t=void 0!==e[1]?e[0]:t).split("Twitter"))[1]&&(t=e[0]),{apple:{phone:r(s,t)&&!r(f,t),ipod:r(a,t),tablet:!r(s,t)&&r(u,t)&&!r(f,t),device:(r(s,t)||r(a,t)||r(u,t))&&!r(f,t)},amazon:{phone:r(h,t),tablet:!r(h,t)&&r(p,t),device:r(h,t)||r(p,t)},android:{phone:!r(f,t)&&r(h,t)||!r(f,t)&&r(l,t),tablet:!r(f,t)&&!r(h,t)&&!r(l,t)&&(r(p,t)||r(c,t)),device:!r(f,t)&&(r(h,t)||r(p,t)||r(l,t)||r(c,t))||r(/\bokhttp\b/i,t)},windows:{phone:r(f,t),tablet:r(d,t),device:r(f,t)||r(d,t)},other:{blackberry:r(g,t),blackberry10:r(y,t),opera:r(m,t),firefox:r(_,t),chrome:r(v,t),device:r(g,t)||r(y,t)||r(m,t)||r(_,t)||r(v,t)}});return e.any=e.apple.device||e.android.device||e.windows.device||e.other.device,e.phone=e.apple.phone||e.android.phone||e.windows.phone,e.tablet=e.apple.tablet||e.android.tablet||e.windows.tablet,e}var o,s,a,u,l,c,h,p,f,d,g,y,m,v,_;o=this,s=/iPhone/i,a=/iPod/i,u=/iPad/i,l=/\bAndroid(?:.+)Mobile\b/i,c=/Android/i,h=/\bAndroid(?:.+)SD4930UR\b/i,p=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,f=/Windows Phone/i,d=/\bWindows(?:.+)ARM\b/i,g=/BlackBerry/i,y=/BB10/i,m=/Opera Mini/i,v=/\b(CriOS|Chrome)(?:.+)Mobile/i,_=/Mobile(?:.+)Firefox\b/i,void 0!==e&&e.exports&&"undefined"==typeof window?e.exports=i:void 0!==e&&e.exports&&"undefined"!=typeof window?(e.exports=i(),e.exports.isMobile=i):"function"==typeof define&&define.amd?define([],o.isMobile=i()):o.isMobile=i()},{}],42:[function(t,n,e){!function(t,e){"use strict";"object"==typeof n&&"object"==typeof n.exports?n.exports=t.document?e(t,!0):function(t){if(t.document)return e(t);throw new Error("jQuery requires a window with a document")}:e(t)}("undefined"!=typeof window?window:this,function(x,L){"use strict";function v(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item}function g(t){return null!=t&&t===t.window}var e=[],F=Object.getPrototypeOf,a=e.slice,N=e.flat?function(t){return e.flat.call(t)}:function(t){return e.concat.apply([],t)},j=e.push,U=e.indexOf,q={},G=q.toString,W=q.hasOwnProperty,H=W.toString,X=H.call(Object),y={},w=x.document,V={type:!0,src:!0,nonce:!0,noModule:!0};function z(t,e,n){var r,i,o=(n=n||w).createElement("script");if(o.text=t,e)for(r in V)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function d(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?q[G.call(t)]||"object":typeof t}var T=function(t,e){return new T.fn.init(t,e)};function Y(t){var e=!!t&&"length"in t&&t.length,n=d(t);return!v(t)&&!g(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}T.fn=T.prototype={jquery:"3.6.0",constructor:T,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){t=T.merge(this.constructor(),t);return t.prevObject=this,t},each:function(t){return T.each(this,t)},map:function(n){return this.pushStack(T.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(T.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,t=+t+(t<0?e:0);return this.pushStack(0<=t&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:j,sort:e.sort,splice:e.splice},T.extend=T.fn.extend=function(){var t,e,n,r,i,o=arguments[0]||{},s=1,a=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"==typeof o||v(o)||(o={}),s===a&&(o=this,s--);s<a;s++)if(null!=(t=arguments[s]))for(e in t)n=t[e],"__proto__"!==e&&o!==n&&(u&&n&&(T.isPlainObject(n)||(r=Array.isArray(n)))?(i=o[e],i=r&&!Array.isArray(i)?[]:r||T.isPlainObject(i)?i:{},r=!1,o[e]=T.extend(u,i,n)):void 0!==n&&(o[e]=n));return o},T.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){return!(!t||"[object Object]"!==G.call(t)||(t=F(t))&&("function"!=typeof(t=W.call(t,"constructor")&&t.constructor)||H.call(t)!==X))},isEmptyObject:function(t){for(var e in t)return!1;return!0},globalEval:function(t,e,n){z(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(Y(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},makeArray:function(t,e){e=e||[];return null!=t&&(Y(Object(t))?T.merge(e,"string"==typeof t?[t]:t):j.call(e,t)),e},inArray:function(t,e,n){return null==e?-1:U.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,s=!n;i<o;i++)!e(t[i],i)!=s&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,s=[];if(Y(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&s.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&s.push(i);return N(s)},guid:1,support:y}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=e[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){q["[object "+e+"]"]=e.toLowerCase()});function r(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&T(t).is(n))break;r.push(t)}return r}function K(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}var t=function(L){function h(t,e){return t="0x"+t.slice(1)-65536,e||(t<0?String.fromCharCode(65536+t):String.fromCharCode(t>>10|55296,1023&t|56320))}function F(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}function N(){w()}var t,p,b,o,j,f,U,q,x,u,l,w,T,n,E,d,r,i,g,S="sizzle"+ +new Date,c=L.document,C=0,G=0,W=R(),H=R(),X=R(),y=R(),V=function(t,e){return t===e&&(l=!0),0},z={}.hasOwnProperty,e=[],Y=e.pop,K=e.push,A=e.push,$=e.slice,v=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",s="[\\x20\\t\\r\\n\\f]",a="(?:\\\\[\\da-fA-F]{1,6}"+s+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",J="\\["+s+"*("+a+")(?:"+s+"*([*^$|!~]?=)"+s+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+a+"))|)"+s+"*\\]",Q=":("+a+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+J+")*)|.*)\\)|)",tt=new RegExp(s+"+","g"),m=new RegExp("^"+s+"+|((?:^|[^\\\\])(?:\\\\.)*)"+s+"+$","g"),et=new RegExp("^"+s+"*,"+s+"*"),nt=new RegExp("^"+s+"*([>+~]|"+s+")"+s+"*"),rt=new RegExp(s+"|>"),it=new RegExp(Q),ot=new RegExp("^"+a+"$"),_={ID:new RegExp("^#("+a+")"),CLASS:new RegExp("^\\.("+a+")"),TAG:new RegExp("^("+a+"|[*])"),ATTR:new RegExp("^"+J),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+s+"*(even|odd|(([+-]|)(\\d*)n|)"+s+"*(?:([+-]|)"+s+"*(\\d+)|))"+s+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+s+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+s+"*((?:-\\d)?\\d*)"+s+"*\\)|)(?=[^-]|$)","i")},st=/HTML$/i,at=/^(?:input|select|textarea|button)$/i,ut=/^h\d$/i,P=/^[^{]+\{\s*\[native \w/,lt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ct=/[+~]/,M=new RegExp("\\\\[\\da-fA-F]{1,6}"+s+"?|\\\\([^\\r\\n\\f])","g"),ht=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,pt=vt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{A.apply(e=$.call(c.childNodes),c.childNodes),e[c.childNodes.length].nodeType}catch(t){A={apply:e.length?function(t,e){K.apply(t,$.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function O(e,t,n,r){var i,o,s,a,u,l,c=t&&t.ownerDocument,h=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return n;if(!r&&(w(t),t=t||T,E)){if(11!==h&&(a=lt.exec(e)))if(i=a[1]){if(9===h){if(!(l=t.getElementById(i)))return n;if(l.id===i)return n.push(l),n}else if(c&&(l=c.getElementById(i))&&g(t,l)&&l.id===i)return n.push(l),n}else{if(a[2])return A.apply(n,t.getElementsByTagName(e)),n;if((i=a[3])&&p.getElementsByClassName&&t.getElementsByClassName)return A.apply(n,t.getElementsByClassName(i)),n}if(p.qsa&&!y[e+" "]&&(!d||!d.test(e))&&(1!==h||"object"!==t.nodeName.toLowerCase())){if(l=e,c=t,1===h&&(rt.test(e)||nt.test(e))){for((c=ct.test(e)&&yt(t.parentNode)||t)===t&&p.scope||((s=t.getAttribute("id"))?s=s.replace(ht,F):t.setAttribute("id",s=S)),o=(u=f(e)).length;o--;)u[o]=(s?"#"+s:":scope")+" "+k(u[o]);l=u.join(",")}try{return A.apply(n,c.querySelectorAll(l)),n}catch(t){y(e,!0)}finally{s===S&&t.removeAttribute("id")}}}return q(e.replace(m,"$1"),t,n,r)}function R(){var n=[];function r(t,e){return n.push(t+" ")>b.cacheLength&&delete r[n.shift()],r[t+" "]=e}return r}function I(t){return t[S]=!0,t}function B(t){var e=T.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e)}}function ft(t,e){for(var n=t.split("|"),r=n.length;r--;)b.attrHandle[n[r]]=e}function dt(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function gt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&pt(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function D(s){return I(function(o){return o=+o,I(function(t,e){for(var n,r=s([],t.length,o),i=r.length;i--;)t[n=r[i]]&&(t[n]=!(e[n]=t[n]))})})}function yt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in p=O.support={},j=O.isXML=function(t){var e=t&&t.namespaceURI,t=t&&(t.ownerDocument||t).documentElement;return!st.test(e||t&&t.nodeName||"HTML")},w=O.setDocument=function(t){var t=t?t.ownerDocument||t:c;return t!=T&&9===t.nodeType&&t.documentElement&&(n=(T=t).documentElement,E=!j(T),c!=T&&(t=T.defaultView)&&t.top!==t&&(t.addEventListener?t.addEventListener("unload",N,!1):t.attachEvent&&t.attachEvent("onunload",N)),p.scope=B(function(t){return n.appendChild(t).appendChild(T.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),p.attributes=B(function(t){return t.className="i",!t.getAttribute("className")}),p.getElementsByTagName=B(function(t){return t.appendChild(T.createComment("")),!t.getElementsByTagName("*").length}),p.getElementsByClassName=P.test(T.getElementsByClassName),p.getById=B(function(t){return n.appendChild(t).id=S,!T.getElementsByName||!T.getElementsByName(S).length}),p.getById?(b.filter.ID=function(t){var e=t.replace(M,h);return function(t){return t.getAttribute("id")===e}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&E)return(e=e.getElementById(t))?[e]:[]}):(b.filter.ID=function(t){var e=t.replace(M,h);return function(t){t=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return t&&t.value===e}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&E){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),b.find.TAG=p.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):p.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"!==t)return o;for(;n=o[i++];)1===n.nodeType&&r.push(n);return r},b.find.CLASS=p.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&E)return e.getElementsByClassName(t)},r=[],d=[],(p.qsa=P.test(T.querySelectorAll))&&(B(function(t){var e;n.appendChild(t).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&d.push("[*^$]="+s+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||d.push("\\["+s+"*(?:value|"+Z+")"),t.querySelectorAll("[id~="+S+"-]").length||d.push("~="),(e=T.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||d.push("\\["+s+"*name"+s+"*="+s+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||d.push(":checked"),t.querySelectorAll("a#"+S+"+*").length||d.push(".#.+[+~]"),t.querySelectorAll("\\\f"),d.push("[\\r\\n\\f]")}),B(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=T.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&d.push("name"+s+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&d.push(":enabled",":disabled"),n.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),d.push(",.*:")})),(p.matchesSelector=P.test(i=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.oMatchesSelector||n.msMatchesSelector))&&B(function(t){p.disconnectedMatch=i.call(t,"*"),i.call(t,"[s!='']:x"),r.push("!=",Q)}),d=d.length&&new RegExp(d.join("|")),r=r.length&&new RegExp(r.join("|")),t=P.test(n.compareDocumentPosition),g=t||P.test(n.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,e=e&&e.parentNode;return t===e||!(!e||1!==e.nodeType||!(n.contains?n.contains(e):t.compareDocumentPosition&&16&t.compareDocumentPosition(e)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=t?function(t,e){var n;return t===e?(l=!0,0):(n=!t.compareDocumentPosition-!e.compareDocumentPosition)||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!p.sortDetached&&e.compareDocumentPosition(t)===n?t==T||t.ownerDocument==c&&g(c,t)?-1:e==T||e.ownerDocument==c&&g(c,e)?1:u?v(u,t)-v(u,e):0:4&n?-1:1)}:function(t,e){if(t===e)return l=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!i||!o)return t==T?-1:e==T?1:i?-1:o?1:u?v(u,t)-v(u,e):0;if(i===o)return dt(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?dt(s[r],a[r]):s[r]==c?-1:a[r]==c?1:0}),T},O.matches=function(t,e){return O(t,null,null,e)},O.matchesSelector=function(t,e){if(w(t),p.matchesSelector&&E&&!y[e+" "]&&(!r||!r.test(e))&&(!d||!d.test(e)))try{var n=i.call(t,e);if(n||p.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){y(e,!0)}return 0<O(e,T,null,[t]).length},O.contains=function(t,e){return(t.ownerDocument||t)!=T&&w(t),g(t,e)},O.attr=function(t,e){(t.ownerDocument||t)!=T&&w(t);var n=b.attrHandle[e.toLowerCase()],n=n&&z.call(b.attrHandle,e.toLowerCase())?n(t,e,!E):void 0;return void 0!==n?n:p.attributes||!E?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},O.escape=function(t){return(t+"").replace(ht,F)},O.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},O.uniqueSort=function(t){var e,n=[],r=0,i=0;if(l=!p.detectDuplicates,u=!p.sortStable&&t.slice(0),t.sort(V),l){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return u=null,t},o=O.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=o(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=o(e);return n},(b=O.selectors={cacheLength:50,createPseudo:I,match:_,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(M,h),t[3]=(t[3]||t[4]||t[5]||"").replace(M,h),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||O.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&O.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return _.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&it.test(n)&&(e=(e=f(n,!0))&&n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(M,h).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=W[t+" "];return e||(e=new RegExp("(^|"+s+")"+t+"("+s+"|$)"))&&W(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(t){t=O.attr(t,e);return null==t?"!="===n:!n||(t+="","="===n?t===r:"!="===n?t!==r:"^="===n?r&&0===t.indexOf(r):"*="===n?r&&-1<t.indexOf(r):"$="===n?r&&t.slice(-r.length)===r:"~="===n?-1<(" "+t.replace(tt," ")+" ").indexOf(r):"|="===n&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(d,t,e,g,y){var m="nth"!==d.slice(0,3),v="last"!==d.slice(-4),_="of-type"===t;return 1===g&&0===y?function(t){return!!t.parentNode}:function(t,e,n){var r,i,o,s,a,u,l=m!=v?"nextSibling":"previousSibling",c=t.parentNode,h=_&&t.nodeName.toLowerCase(),p=!n&&!_,f=!1;if(c){if(m){for(;l;){for(s=t;s=s[l];)if(_?s.nodeName.toLowerCase()===h:1===s.nodeType)return!1;u=l="only"===d&&!u&&"nextSibling"}return!0}if(u=[v?c.firstChild:c.lastChild],v&&p){for(f=(a=(r=(i=(o=(s=c)[S]||(s[S]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]||[])[0]===C&&r[1])&&r[2],s=a&&c.childNodes[a];s=++a&&s&&s[l]||(f=a=0,u.pop());)if(1===s.nodeType&&++f&&s===t){i[d]=[C,a,f];break}}else if(!1===(f=p?a=(r=(i=(o=(s=t)[S]||(s[S]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]||[])[0]===C&&r[1]:f))for(;(s=++a&&s&&s[l]||(f=a=0,u.pop()))&&((_?s.nodeName.toLowerCase()!==h:1!==s.nodeType)||!++f||(p&&((i=(o=s[S]||(s[S]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]=[C,f]),s!==t)););return(f-=y)===g||f%g==0&&0<=f/g}}},PSEUDO:function(t,o){var e,s=b.pseudos[t]||b.setFilters[t.toLowerCase()]||O.error("unsupported pseudo: "+t);return s[S]?s(o):1<s.length?(e=[t,t,"",o],b.setFilters.hasOwnProperty(t.toLowerCase())?I(function(t,e){for(var n,r=s(t,o),i=r.length;i--;)t[n=v(t,r[i])]=!(e[n]=r[i])}):function(t){return s(t,0,e)}):s}},pseudos:{not:I(function(t){var r=[],i=[],a=U(t.replace(m,"$1"));return a[S]?I(function(t,e,n,r){for(var i,o=a(t,null,r,[]),s=t.length;s--;)(i=o[s])&&(t[s]=!(e[s]=i))}):function(t,e,n){return r[0]=t,a(r,null,n,i),r[0]=null,!i.pop()}}),has:I(function(e){return function(t){return 0<O(e,t).length}}),contains:I(function(e){return e=e.replace(M,h),function(t){return-1<(t.textContent||o(t)).indexOf(e)}}),lang:I(function(n){return ot.test(n||"")||O.error("unsupported lang: "+n),n=n.replace(M,h).toLowerCase(),function(t){var e;do{if(e=E?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=L.location&&L.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===n},focus:function(t){return t===T.activeElement&&(!T.hasFocus||T.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return ut.test(t.nodeName)},input:function(t){return at.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(t=t.getAttribute("type"))||"text"===t.toLowerCase())},first:D(function(){return[0]}),last:D(function(t,e){return[e-1]}),eq:D(function(t,e,n){return[n<0?n+e:n]}),even:D(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:D(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:D(function(t,e,n){for(var r=n<0?n+e:e<n?e:n;0<=--r;)t.push(r);return t}),gt:D(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[t]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(t);for(t in{submit:!0,reset:!0})b.pseudos[t]=function(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}(t);function mt(){}function k(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function vt(s,t,e){var a=t.dir,u=t.next,l=u||a,c=e&&"parentNode"===l,h=G++;return t.first?function(t,e,n){for(;t=t[a];)if(1===t.nodeType||c)return s(t,e,n);return!1}:function(t,e,n){var r,i,o=[C,h];if(n){for(;t=t[a];)if((1===t.nodeType||c)&&s(t,e,n))return!0}else for(;t=t[a];)if(1===t.nodeType||c)if(i=(i=t[S]||(t[S]={}))[t.uniqueID]||(i[t.uniqueID]={}),u&&u===t.nodeName.toLowerCase())t=t[a]||t;else{if((r=i[l])&&r[0]===C&&r[1]===h)return o[2]=r[2];if((i[l]=o)[2]=s(t,e,n))return!0}return!1}}function _t(i){return 1<i.length?function(t,e,n){for(var r=i.length;r--;)if(!i[r](t,e,n))return!1;return!0}:i[0]}function bt(t,e,n,r,i){for(var o,s=[],a=0,u=t.length,l=null!=e;a<u;a++)!(o=t[a])||n&&!n(o,r,i)||(s.push(o),l&&e.push(a));return s}function xt(f,d,g,y,m,t){return y&&!y[S]&&(y=xt(y)),m&&!m[S]&&(m=xt(m,t)),I(function(t,e,n,r){var i,o,s,a=[],u=[],l=e.length,c=t||function(t,e,n){for(var r=0,i=e.length;r<i;r++)O(t,e[r],n);return n}(d||"*",n.nodeType?[n]:n,[]),h=!f||!t&&d?c:bt(c,a,f,n,r),p=g?m||(t?f:l||y)?[]:e:h;if(g&&g(h,p,n,r),y)for(i=bt(p,u),y(i,[],n,r),o=i.length;o--;)(s=i[o])&&(p[u[o]]=!(h[u[o]]=s));if(t){if(m||f){if(m){for(i=[],o=p.length;o--;)(s=p[o])&&i.push(h[o]=s);m(null,p=[],i,r)}for(o=p.length;o--;)(s=p[o])&&-1<(i=m?v(t,s):a[o])&&(t[i]=!(e[i]=s))}}else p=bt(p===e?p.splice(l,p.length):p),m?m(null,e,p,r):A.apply(e,p)})}function wt(y,m){function t(t,e,n,r,i){var o,s,a,u=0,l="0",c=t&&[],h=[],p=x,f=t||_&&b.find.TAG("*",i),d=C+=null==p?1:Math.random()||.1,g=f.length;for(i&&(x=e==T||e||i);l!==g&&null!=(o=f[l]);l++){if(_&&o){for(s=0,e||o.ownerDocument==T||(w(o),n=!E);a=y[s++];)if(a(o,e||T,n)){r.push(o);break}i&&(C=d)}v&&((o=!a&&o)&&u--,t)&&c.push(o)}if(u+=l,v&&l!==u){for(s=0;a=m[s++];)a(c,h,e,n);if(t){if(0<u)for(;l--;)c[l]||h[l]||(h[l]=Y.call(r));h=bt(h)}A.apply(r,h),i&&!t&&0<h.length&&1<u+m.length&&O.uniqueSort(r)}return i&&(C=d,x=p),c}var v=0<m.length,_=0<y.length;return v?I(t):t}return mt.prototype=b.filters=b.pseudos,b.setFilters=new mt,f=O.tokenize=function(t,e){var n,r,i,o,s,a,u,l=H[t+" "];if(l)return e?0:l.slice(0);for(s=t,a=[],u=b.preFilter;s;){for(o in n&&!(r=et.exec(s))||(r&&(s=s.slice(r[0].length)||s),a.push(i=[])),n=!1,(r=nt.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(m," ")}),s=s.slice(n.length)),b.filter)!(r=_[o].exec(s))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return e?s.length:s?O.error(t):H(t,a).slice(0)},U=O.compile=function(t,e){var n,r=[],i=[],o=X[t+" "];if(!o){for(n=(e=e||f(t)).length;n--;)((o=function t(e){for(var r,n,i,o=e.length,s=b.relative[e[0].type],a=s||b.relative[" "],u=s?1:0,l=vt(function(t){return t===r},a,!0),c=vt(function(t){return-1<v(r,t)},a,!0),h=[function(t,e,n){return t=!s&&(n||e!==x)||((r=e).nodeType?l:c)(t,e,n),r=null,t}];u<o;u++)if(n=b.relative[e[u].type])h=[vt(_t(h),n)];else{if((n=b.filter[e[u].type].apply(null,e[u].matches))[S]){for(i=++u;i<o&&!b.relative[e[i].type];i++);return xt(1<u&&_t(h),1<u&&k(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(m,"$1"),n,u<i&&t(e.slice(u,i)),i<o&&t(e=e.slice(i)),i<o&&k(e))}h.push(n)}return _t(h)}(e[n]))[S]?r:i).push(o);(o=X(t,wt(i,r))).selector=t}return o},q=O.select=function(t,e,n,r){var i,o,s,a,u,l="function"==typeof t&&t,c=!r&&f(t=l.selector||t);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(s=o[0]).type&&9===e.nodeType&&E&&b.relative[o[1].type]){if(!(e=(b.find.ID(s.matches[0].replace(M,h),e)||[])[0]))return n;l&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=_.needsContext.test(t)?0:o.length;i--&&(s=o[i],!b.relative[a=s.type]);)if((u=b.find[a])&&(r=u(s.matches[0].replace(M,h),ct.test(o[0].type)&&yt(e.parentNode)||e))){if(o.splice(i,1),t=r.length&&k(o))break;return A.apply(n,r),n}}return(l||U(t,c))(r,e,!E,n,!e||ct.test(t)&&yt(e.parentNode)||e),n},p.sortStable=S.split("").sort(V).join("")===S,p.detectDuplicates=!!l,w(),p.sortDetached=B(function(t){return 1&t.compareDocumentPosition(T.createElement("fieldset"))}),B(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ft("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),p.attributes&&B(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ft("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),B(function(t){return null==t.getAttribute("disabled")})||ft(Z,function(t,e,n){if(!n)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),O}(x),$=(T.find=t,T.expr=t.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=t.uniqueSort,T.text=t.getText,T.isXMLDoc=t.isXML,T.contains=t.contains,T.escapeSelector=t.escape,T.expr.match.needsContext);function u(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var Z=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function J(t,n,r){return v(n)?T.grep(t,function(t,e){return!!n.call(t,e,t)!==r}):n.nodeType?T.grep(t,function(t){return t===n!==r}):"string"!=typeof n?T.grep(t,function(t){return-1<U.call(n,t)!==r}):T.filter(n,t,r)}T.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?T.find.matchesSelector(r,t)?[r]:[]:T.find.matches(t,T.grep(e,function(t){return 1===t.nodeType}))},T.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(T(t).filter(function(){for(e=0;e<r;e++)if(T.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)T.find(t,i[e],n);return 1<r?T.uniqueSort(n):n},filter:function(t){return this.pushStack(J(this,t||[],!1))},not:function(t){return this.pushStack(J(this,t||[],!0))},is:function(t){return!!J(this,"string"==typeof t&&$.test(t)?T(t):t||[],!1).length}});var Q,tt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,et=((T.fn.init=function(t,e,n){if(t){if(n=n||Q,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):v(t)?void 0!==n.ready?n.ready(t):t(T):T.makeArray(t,this);if(!(r="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:tt.exec(t))||!r[1]&&e)return(!e||e.jquery?e||n:this.constructor(e)).find(t);if(r[1]){if(e=e instanceof T?e[0]:e,T.merge(this,T.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:w,!0)),Z.test(r[1])&&T.isPlainObject(e))for(var r in e)v(this[r])?this[r](e[r]):this.attr(r,e[r])}else(n=w.getElementById(r[2]))&&(this[0]=n,this.length=1)}return this}).prototype=T.fn,Q=T(w),/^(?:parents|prev(?:Until|All))/),nt={children:!0,contents:!0,next:!0,prev:!0};function rt(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}T.fn.extend({has:function(t){var e=T(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(T.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,i=this.length,o=[],s="string"!=typeof t&&T(t);if(!$.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&T.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?T.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?U.call(T(t),this[0]):U.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),T.each({parent:function(t){t=t.parentNode;return t&&11!==t.nodeType?t:null},parents:function(t){return r(t,"parentNode")},parentsUntil:function(t,e,n){return r(t,"parentNode",n)},next:function(t){return rt(t,"nextSibling")},prev:function(t){return rt(t,"previousSibling")},nextAll:function(t){return r(t,"nextSibling")},prevAll:function(t){return r(t,"previousSibling")},nextUntil:function(t,e,n){return r(t,"nextSibling",n)},prevUntil:function(t,e,n){return r(t,"previousSibling",n)},siblings:function(t){return K((t.parentNode||{}).firstChild,t)},children:function(t){return K(t.firstChild)},contents:function(t){return null!=t.contentDocument&&F(t.contentDocument)?t.contentDocument:(u(t,"template")&&(t=t.content||t),T.merge([],t.childNodes))}},function(r,i){T.fn[r]=function(t,e){var n=T.map(this,i,t);return(e="Until"!==r.slice(-5)?t:e)&&"string"==typeof e&&(n=T.filter(e,n)),1<this.length&&(nt[r]||T.uniqueSort(n),et.test(r))&&n.reverse(),this.pushStack(n)}});var E=/[^\x20\t\r\n\f]+/g;function c(t){return t}function it(t){throw t}function ot(t,e,n,r){var i;try{t&&v(i=t.promise)?i.call(t).done(e).fail(n):t&&v(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}T.Callbacks=function(r){var t,n;r="string"==typeof r?(t=r,n={},T.each(t.match(E)||[],function(t,e){n[e]=!0}),n):T.extend({},r);function i(){for(a=a||r.once,s=o=!0;l.length;c=-1)for(e=l.shift();++c<u.length;)!1===u[c].apply(e[0],e[1])&&r.stopOnFalse&&(c=u.length,e=!1);r.memory||(e=!1),o=!1,a&&(u=e?[]:"")}var o,e,s,a,u=[],l=[],c=-1,h={add:function(){return u&&(e&&!o&&(c=u.length-1,l.push(e)),function n(t){T.each(t,function(t,e){v(e)?r.unique&&h.has(e)||u.push(e):e&&e.length&&"string"!==d(e)&&n(e)})}(arguments),e)&&!o&&i(),this},remove:function(){return T.each(arguments,function(t,e){for(var n;-1<(n=T.inArray(e,u,n));)u.splice(n,1),n<=c&&c--}),this},has:function(t){return t?-1<T.inArray(t,u):0<u.length},empty:function(){return u=u&&[],this},disable:function(){return a=l=[],u=e="",this},disabled:function(){return!u},lock:function(){return a=l=[],e||o||(u=e=""),this},locked:function(){return!!a},fireWith:function(t,e){return a||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),o)||i(),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!s}};return h},T.extend({Deferred:function(t){var o=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],i="pending",s={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var i=arguments;return T.Deferred(function(r){T.each(o,function(t,e){var n=v(i[e[4]])&&i[e[4]];a[e[1]](function(){var t=n&&n.apply(this,arguments);t&&v(t.promise)?t.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[e[0]+"With"](this,n?[t]:arguments)})}),i=null}).promise()},then:function(e,n,r){var u=0;function l(i,o,s,a){return function(){function t(){var t,e;if(!(i<u)){if((t=s.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,v(e)?a?e.call(t,l(u,o,c,a),l(u,o,it,a)):(u++,e.call(t,l(u,o,c,a),l(u,o,it,a),l(u,o,c,o.notifyWith))):(s!==c&&(n=void 0,r=[t]),(a||o.resolveWith)(n,r))}}var n=this,r=arguments,e=a?t:function(){try{t()}catch(t){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(t,e.stackTrace),u<=i+1&&(s!==it&&(n=void 0,r=[t]),o.rejectWith(n,r))}};i?e():(T.Deferred.getStackHook&&(e.stackTrace=T.Deferred.getStackHook()),x.setTimeout(e))}}return T.Deferred(function(t){o[0][3].add(l(0,t,v(r)?r:c,t.notifyWith)),o[1][3].add(l(0,t,v(e)?e:c)),o[2][3].add(l(0,t,v(n)?n:it))}).promise()},promise:function(t){return null!=t?T.extend(t,s):s}},a={};return T.each(o,function(t,e){var n=e[2],r=e[5];s[e[1]]=n.add,r&&n.add(function(){i=r},o[3-t][2].disable,o[3-t][3].disable,o[0][2].lock,o[0][3].lock),n.add(e[3].fire),a[e[0]]=function(){return a[e[0]+"With"](this===a?void 0:this,arguments),this},a[e[0]+"With"]=n.fireWith}),s.promise(a),t&&t.call(a,a),a},when:function(t){function e(e){return function(t){i[e]=this,o[e]=1<arguments.length?a.call(arguments):t,--n||s.resolveWith(i,o)}}var n=arguments.length,r=n,i=Array(r),o=a.call(arguments),s=T.Deferred();if(n<=1&&(ot(t,s.done(e(r)).resolve,s.reject,!n),"pending"===s.state()||v(o[r]&&o[r].then)))return s.then();for(;r--;)ot(o[r],e(r),s.reject);return s.promise()}});var st=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,at=(T.Deferred.exceptionHook=function(t,e){x.console&&x.console.warn&&t&&st.test(t.name)&&x.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},T.readyException=function(t){x.setTimeout(function(){throw t})},T.Deferred());function ut(){w.removeEventListener("DOMContentLoaded",ut),x.removeEventListener("load",ut),T.ready()}T.fn.ready=function(t){return at.then(t).catch(function(t){T.readyException(t)}),this},T.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--T.readyWait:T.isReady)||(T.isReady=!0)!==t&&0<--T.readyWait||at.resolveWith(w,[T])}}),T.ready.then=at.then,"complete"===w.readyState||"loading"!==w.readyState&&!w.documentElement.doScroll?x.setTimeout(T.ready):(w.addEventListener("DOMContentLoaded",ut),x.addEventListener("load",ut));function h(t,e,n,r,i,o,s){var a=0,u=t.length,l=null==n;if("object"===d(n))for(a in i=!0,n)h(t,e,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,v(r)||(s=!0),e=l?s?(e.call(t,r),null):(l=e,function(t,e,n){return l.call(T(t),n)}):e))for(;a<u;a++)e(t[a],n,s?r:r.call(t[a],a,e(t[a],n)));return i?t:l?e.call(t):u?e(t[0],n):o}var lt=/^-ms-/,ct=/-([a-z])/g;function ht(t,e){return e.toUpperCase()}function _(t){return t.replace(lt,"ms-").replace(ct,ht)}function m(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}function pt(){this.expando=T.expando+pt.uid++}pt.uid=1,pt.prototype={cache:function(t){var e=t[this.expando];return e||(e={},m(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[_(e)]=n;else for(r in e)i[_(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][_(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(_):(e=_(e))in r?[e]:e.match(E)||[]).length;for(;n--;)delete r[e[n]]}void 0!==e&&!T.isEmptyObject(r)||(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){t=t[this.expando];return void 0!==t&&!T.isEmptyObject(t)}};var b=new pt,l=new pt,ft=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,dt=/[A-Z]/g;function gt(t,e,n){var r,i;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(dt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:ft.test(i)?JSON.parse(i):i)}catch(t){}l.set(t,e,n)}else n=void 0;return n}T.extend({hasData:function(t){return l.hasData(t)||b.hasData(t)},data:function(t,e,n){return l.access(t,e,n)},removeData:function(t,e){l.remove(t,e)},_data:function(t,e,n){return b.access(t,e,n)},_removeData:function(t,e){b.remove(t,e)}}),T.fn.extend({data:function(n,t){var e,r,i,o=this[0],s=o&&o.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){l.set(this,n)}):h(this,function(t){var e;if(o&&void 0===t)return void 0!==(e=l.get(o,n))||void 0!==(e=gt(o,n))?e:void 0;this.each(function(){l.set(this,n,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(i=l.get(o),1===o.nodeType)&&!b.get(o,"hasDataAttrs")){for(e=s.length;e--;)s[e]&&0===(r=s[e].name).indexOf("data-")&&(r=_(r.slice(5)),gt(o,r,i[r]));b.set(o,"hasDataAttrs",!0)}return i},removeData:function(t){return this.each(function(){l.remove(this,t)})}}),T.extend({queue:function(t,e,n){var r;if(t)return r=b.get(t,e=(e||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=b.access(t,e,T.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=T.queue(t,e),r=n.length,i=n.shift(),o=T._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){T.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return b.get(t,n)||b.access(t,n,{empty:T.Callbacks("once memory").add(function(){b.remove(t,[e+"queue",n])})})}}),T.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?T.queue(this[0],e):void 0===n?this:this.each(function(){var t=T.queue(this,e,n);T._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&T.dequeue(this,e)})},dequeue:function(t){return this.each(function(){T.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function n(){--i||o.resolveWith(s,[s])}var r,i=1,o=T.Deferred(),s=this,a=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(r=b.get(s[a],t+"queueHooks"))&&r.empty&&(i++,r.empty.add(n));return n(),o.promise(e)}});function yt(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&C(t)&&"none"===T.css(t,"display")}var t=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,mt=new RegExp("^(?:([+-])=|)("+t+")([a-z%]*)$","i"),p=["Top","Right","Bottom","Left"],S=w.documentElement,C=function(t){return T.contains(t.ownerDocument,t)},vt={composed:!0};S.getRootNode&&(C=function(t){return T.contains(t.ownerDocument,t)||t.getRootNode(vt)===t.ownerDocument});function _t(t,e,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return T.css(t,e,"")},u=a(),l=n&&n[3]||(T.cssNumber[e]?"":"px"),c=t.nodeType&&(T.cssNumber[e]||"px"!==l&&+u)&&mt.exec(T.css(t,e));if(c&&c[3]!==l){for(l=l||c[3],c=+(u/=2)||1;s--;)T.style(t,e,c+l),(1-o)*(1-(o=a()/u||.5))<=0&&(s=0),c/=o;T.style(t,e,(c*=2)+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r)&&(r.unit=l,r.start=c,r.end=i),i}var bt={};function A(t,e){for(var n,r,i,o,s,a=[],u=0,l=t.length;u<l;u++)(r=t[u]).style&&(n=r.style.display,e?("none"===n&&(a[u]=b.get(r,"display")||null,a[u]||(r.style.display="")),""===r.style.display&&yt(r)&&(a[u]=(s=o=void 0,o=(i=r).ownerDocument,i=i.nodeName,(s=bt[i])||(o=o.body.appendChild(o.createElement(i)),s=T.css(o,"display"),o.parentNode.removeChild(o),bt[i]=s="none"===s?"block":s),s))):"none"!==n&&(a[u]="none",b.set(r,"display",n)));for(u=0;u<l;u++)null!=a[u]&&(t[u].style.display=a[u]);return t}T.fn.extend({show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){yt(this)?T(this).show():T(this).hide()})}});var xt=/^(?:checkbox|radio)$/i,wt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Tt=/^$|^module$|\/(?:java|ecma)script/i,P=(I=w.createDocumentFragment().appendChild(w.createElement("div")),(s=w.createElement("input")).setAttribute("type","radio"),s.setAttribute("checked","checked"),s.setAttribute("name","t"),I.appendChild(s),y.checkClone=I.cloneNode(!0).cloneNode(!0).lastChild.checked,I.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!I.cloneNode(!0).lastChild.defaultValue,I.innerHTML="<option></option>",y.option=!!I.lastChild,{thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]});function M(t,e){var n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&u(t,e)?T.merge([t],n):n}function Et(t,e){for(var n=0,r=t.length;n<r;n++)b.set(t[n],"globalEval",!e||b.get(e[n],"globalEval"))}P.tbody=P.tfoot=P.colgroup=P.caption=P.thead,P.th=P.td,y.option||(P.optgroup=P.option=[1,"<select multiple='multiple'>","</select>"]);var St=/<|&#?\w+;/;function Ct(t,e,n,r,i){for(var o,s,a,u,l,c=e.createDocumentFragment(),h=[],p=0,f=t.length;p<f;p++)if((o=t[p])||0===o)if("object"===d(o))T.merge(h,o.nodeType?[o]:o);else if(St.test(o)){for(s=s||c.appendChild(e.createElement("div")),a=(wt.exec(o)||["",""])[1].toLowerCase(),a=P[a]||P._default,s.innerHTML=a[1]+T.htmlPrefilter(o)+a[2],l=a[0];l--;)s=s.lastChild;T.merge(h,s.childNodes),(s=c.firstChild).textContent=""}else h.push(e.createTextNode(o));for(c.textContent="",p=0;o=h[p++];)if(r&&-1<T.inArray(o,r))i&&i.push(o);else if(u=C(o),s=M(c.appendChild(o),"script"),u&&Et(s),n)for(l=0;o=s[l++];)Tt.test(o.type||"")&&n.push(o);return c}var At=/^([^.]*)(?:\.(.+)|)/;function n(){return!0}function f(){return!1}function Pt(t,e){return t===function(){try{return w.activeElement}catch(t){}}()==("focus"===e)}function Mt(t,e,n,r,i,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(r=r||n,n=void 0),e)Mt(t,a,n,r,e[a],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=f;else if(!i)return t;return 1===o&&(s=i,(i=function(t){return T().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=T.guid++)),t.each(function(){T.event.add(this,e,i,r,n)})}function Ot(t,i,o){o?(b.set(t,i,!1),T.event.add(t,i,{namespace:!1,handler:function(t){var e,n,r=b.get(this,i);if(1&t.isTrigger&&this[i]){if(r.length)(T.event.special[i]||{}).delegateType&&t.stopPropagation();else if(r=a.call(arguments),b.set(this,i,r),e=o(this,i),this[i](),r!==(n=b.get(this,i))||e?b.set(this,i,!1):n={},r!==n)return t.stopImmediatePropagation(),t.preventDefault(),n&&n.value}else r.length&&(b.set(this,i,{value:T.event.trigger(T.extend(r[0],T.Event.prototype),r.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===b.get(t,i)&&T.event.add(t,i,n)}T.event={global:{},add:function(e,t,n,r,i){var o,s,a,u,l,c,h,p,f,d=b.get(e);if(m(e))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&T.find.matchesSelector(S,i),n.guid||(n.guid=T.guid++),a=(a=d.events)||(d.events=Object.create(null)),s=(s=d.handle)||(d.handle=function(t){return void 0!==T&&T.event.triggered!==t.type?T.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(E)||[""]).length;u--;)h=f=(p=At.exec(t[u])||[])[1],p=(p[2]||"").split(".").sort(),h&&(l=T.event.special[h]||{},h=(i?l.delegateType:l.bindType)||h,l=T.event.special[h]||{},f=T.extend({type:h,origType:f,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&T.expr.match.needsContext.test(i),namespace:p.join(".")},o),(c=a[h])||((c=a[h]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(e,r,p,s))||e.addEventListener&&e.addEventListener(h,s),l.add&&(l.add.call(e,f),f.handler.guid||(f.handler.guid=n.guid)),i?c.splice(c.delegateCount++,0,f):c.push(f),T.event.global[h]=!0)},remove:function(t,e,n,r,i){var o,s,a,u,l,c,h,p,f,d,g,y=b.hasData(t)&&b.get(t);if(y&&(u=y.events)){for(l=(e=(e||"").match(E)||[""]).length;l--;)if(f=g=(a=At.exec(e[l])||[])[1],d=(a[2]||"").split(".").sort(),f){for(h=T.event.special[f]||{},p=u[f=(r?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(t,c));s&&!p.length&&(h.teardown&&!1!==h.teardown.call(t,d,y.handle)||T.removeEvent(t,f,y.handle),delete u[f])}else for(f in u)T.event.remove(t,f+e[l],n,r,!0);T.isEmptyObject(u)&&b.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,s=new Array(arguments.length),a=T.event.fix(t),t=(b.get(this,"events")||Object.create(null))[a.type]||[],u=T.event.special[a.type]||{};for(s[0]=a,e=1;e<arguments.length;e++)s[e]=arguments[e];if(a.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,a)){for(o=T.event.handlers.call(this,a,t),e=0;(r=o[e++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,n=0;(i=r.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==i.namespace&&!a.rnamespace.test(i.namespace)||(a.handleObj=i,a.data=i.data,void 0!==(i=((T.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,s))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,r,i,o,s,a=[],u=e.delegateCount,l=t.target;if(u&&l.nodeType&&!("click"===t.type&&1<=t.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(o=[],s={},n=0;n<u;n++)void 0===s[i=(r=e[n]).selector+" "]&&(s[i]=r.needsContext?-1<T(i,this).index(l):T.find(i,this,null,[l]).length),s[i]&&o.push(r);o.length&&a.push({elem:l,handlers:o})}return l=this,u<e.length&&a.push({elem:l,handlers:e.slice(u)}),a},addProp:function(e,t){Object.defineProperty(T.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){t=this||t;return xt.test(t.type)&&t.click&&u(t,"input")&&Ot(t,"click",n),!1},trigger:function(t){t=this||t;return xt.test(t.type)&&t.click&&u(t,"input")&&Ot(t,"click"),!0},_default:function(t){t=t.target;return xt.test(t.type)&&t.click&&u(t,"input")&&b.get(t,"click")||u(t,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},T.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},T.Event=function(t,e){if(!(this instanceof T.Event))return new T.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?n:f,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&T.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=n,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=n,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=n,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},function(t,e){T.event.special[t]={setup:function(){return Ot(this,t,Pt),!1},trigger:function(){return Ot(this,t),!0},_default:function(){return!0},delegateType:e}}),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,i){T.event.special[t]={delegateType:i,bindType:i,handle:function(t){var e,n=t.relatedTarget,r=t.handleObj;return n&&(n===this||T.contains(this,n))||(t.type=r.origType,e=r.handler.apply(this,arguments),t.type=i),e}}}),T.fn.extend({on:function(t,e,n,r){return Mt(this,t,e,n,r)},one:function(t,e,n,r){return Mt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)r=t.handleObj,T(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler);else{if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=f),this.each(function(){T.event.remove(this,t,n,e)});for(i in t)this.off(i,e,t[i])}return this}});var Rt=/<script|<style|<link/i,It=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Dt(t,e){return u(t,"table")&&u(11!==e.nodeType?e:e.firstChild,"tr")&&T(t).children("tbody")[0]||t}function kt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Lt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ft(t,e){var n,r,i,o;if(1===e.nodeType){if(b.hasData(t)&&(o=b.get(t).events))for(i in b.remove(e,"handle events"),o)for(n=0,r=o[i].length;n<r;n++)T.event.add(e,i,o[i][n]);l.hasData(t)&&(t=l.access(t),t=T.extend({},t),l.set(e,t))}}function O(n,r,i,o){r=N(r);var t,e,s,a,u,l,c=0,h=n.length,p=h-1,f=r[0],d=v(f);if(d||1<h&&"string"==typeof f&&!y.checkClone&&It.test(f))return n.each(function(t){var e=n.eq(t);d&&(r[0]=f.call(this,t,e.html())),O(e,r,i,o)});if(h&&(e=(t=Ct(r,n[0].ownerDocument,!1,n,o)).firstChild,1===t.childNodes.length&&(t=e),e||o)){for(a=(s=T.map(M(t,"script"),kt)).length;c<h;c++)u=t,c!==p&&(u=T.clone(u,!0,!0),a)&&T.merge(s,M(u,"script")),i.call(n[c],u,c);if(a)for(l=s[s.length-1].ownerDocument,T.map(s,Lt),c=0;c<a;c++)u=s[c],Tt.test(u.type||"")&&!b.access(u,"globalEval")&&T.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?T._evalUrl&&!u.noModule&&T._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):z(u.textContent.replace(Bt,""),u,l))}return n}function Nt(t,e,n){for(var r,i=e?T.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||T.cleanData(M(r)),r.parentNode&&(n&&C(r)&&Et(M(r,"script")),r.parentNode.removeChild(r));return t}T.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,o,s,a,u,l,c=t.cloneNode(!0),h=C(t);if(!(y.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||T.isXMLDoc(t)))for(s=M(c),r=0,i=(o=M(t)).length;r<i;r++)a=o[r],u=s[r],l=void 0,"input"===(l=u.nodeName.toLowerCase())&&xt.test(a.type)?u.checked=a.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=a.defaultValue);if(e)if(n)for(o=o||M(t),s=s||M(c),r=0,i=o.length;r<i;r++)Ft(o[r],s[r]);else Ft(t,c);return 0<(s=M(c,"script")).length&&Et(s,!h&&M(t,"script")),c},cleanData:function(t){for(var e,n,r,i=T.event.special,o=0;void 0!==(n=t[o]);o++)if(m(n)){if(e=n[b.expando]){if(e.events)for(r in e.events)i[r]?T.event.remove(n,r):T.removeEvent(n,r,e.handle);n[b.expando]=void 0}n[l.expando]&&(n[l.expando]=void 0)}}}),T.fn.extend({detach:function(t){return Nt(this,t,!0)},remove:function(t){return Nt(this,t)},text:function(t){return h(this,function(t){return void 0===t?T.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return O(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Dt(this,t).appendChild(t)})},prepend:function(){return O(this,arguments,function(t){var e;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(e=Dt(this,t)).insertBefore(t,e.firstChild)})},before:function(){return O(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return O(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(T.cleanData(M(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return T.clone(this,t,e)})},html:function(t){return h(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Rt.test(t)&&!P[(wt.exec(t)||["",""])[1].toLowerCase()]){t=T.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(T.cleanData(M(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return O(this,arguments,function(t){var e=this.parentNode;T.inArray(this,n)<0&&(T.cleanData(M(this)),e)&&e.replaceChild(t,this)},n)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,s){T.fn[t]=function(t){for(var e,n=[],r=T(t),i=r.length-1,o=0;o<=i;o++)e=o===i?this:this.clone(!0),T(r[o])[s](e),j.apply(n,e.get());return this.pushStack(n)}});function jt(t){var e=t.ownerDocument.defaultView;return(e=e&&e.opener?e:x).getComputedStyle(t)}function Ut(t,e,n){var r,i={};for(r in e)i[r]=t.style[r],t.style[r]=e[r];for(r in n=n.call(t),e)t.style[r]=i[r];return n}var qt,Gt,Wt,Ht,Xt,Vt,zt,i,Yt=new RegExp("^("+t+")(?!px)[a-z%]+$","i"),Kt=new RegExp(p.join("|"),"i");function $t(){var t;i&&(zt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",i.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",S.appendChild(zt).appendChild(i),t=x.getComputedStyle(i),qt="1%"!==t.top,Vt=12===Zt(t.marginLeft),i.style.right="60%",Ht=36===Zt(t.right),Gt=36===Zt(t.width),i.style.position="absolute",Wt=12===Zt(i.offsetWidth/3),S.removeChild(zt),i=null)}function Zt(t){return Math.round(parseFloat(t))}function Jt(t,e,n){var r,i,o=t.style;return(n=n||jt(t))&&(""!==(i=n.getPropertyValue(e)||n[e])||C(t)||(i=T.style(t,e)),!y.pixelBoxStyles())&&Yt.test(i)&&Kt.test(e)&&(t=o.width,e=o.minWidth,r=o.maxWidth,o.minWidth=o.maxWidth=o.width=i,i=n.width,o.width=t,o.minWidth=e,o.maxWidth=r),void 0!==i?i+"":i}function Qt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}zt=w.createElement("div"),(i=w.createElement("div")).style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===i.style.backgroundClip,T.extend(y,{boxSizingReliable:function(){return $t(),Gt},pixelBoxStyles:function(){return $t(),Ht},pixelPosition:function(){return $t(),qt},reliableMarginLeft:function(){return $t(),Vt},scrollboxSize:function(){return $t(),Wt},reliableTrDimensions:function(){var t,e,n;return null==Xt&&(t=w.createElement("table"),e=w.createElement("tr"),n=w.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",S.appendChild(t).appendChild(e).appendChild(n),n=x.getComputedStyle(e),Xt=parseInt(n.height,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)===e.offsetHeight,S.removeChild(t)),Xt}}));var te=["Webkit","Moz","ms"],ee=w.createElement("div").style,ne={};function re(t){var e=T.cssProps[t]||ne[t];return e||(t in ee?t:ne[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=te.length;n--;)if((t=te[n]+e)in ee)return t}(t)||t)}var ie=/^(none|table(?!-c[ea]).+)/,oe=/^--/,se={position:"absolute",visibility:"hidden",display:"block"},ae={letterSpacing:"0",fontWeight:"400"};function ue(t,e,n){var r=mt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function le(t,e,n,r,i,o){var s="width"===e?1:0,a=0,u=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(u+=T.css(t,n+p[s],!0,i)),r?("content"===n&&(u-=T.css(t,"padding"+p[s],!0,i)),"margin"!==n&&(u-=T.css(t,"border"+p[s]+"Width",!0,i))):(u+=T.css(t,"padding"+p[s],!0,i),"padding"!==n?u+=T.css(t,"border"+p[s]+"Width",!0,i):a+=T.css(t,"border"+p[s]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-a-.5))||0),u}function ce(t,e,n){var r=jt(t),i=(!y.boxSizingReliable()||n)&&"border-box"===T.css(t,"boxSizing",!1,r),o=i,s=Jt(t,e,r),a="offset"+e[0].toUpperCase()+e.slice(1);if(Yt.test(s)){if(!n)return s;s="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&u(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===T.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===T.css(t,"boxSizing",!1,r),o=a in t)&&(s=t[a]),(s=parseFloat(s)||0)+le(t,e,n||(i?"border":"content"),o,r,s)+"px"}function o(t,e,n,r,i){return new o.prototype.init(t,e,n,r,i)}T.extend({cssHooks:{opacity:{get:function(t,e){if(e)return""===(e=Jt(t,"opacity"))?"1":e}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=_(e),u=oe.test(e),l=t.style;if(u||(e=re(a)),s=T.cssHooks[e]||T.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(t,!1,r))?i:l[e];"string"===(o=typeof n)&&(i=mt.exec(n))&&i[1]&&(n=_t(t,e,i),o="number"),null==n||n!=n||("number"!==o||u||(n+=i&&i[3]||(T.cssNumber[a]?"":"px")),y.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r)))||(u?l.setProperty(e,n):l[e]=n)}},css:function(t,e,n,r){var i,o=_(e);return oe.test(e)||(e=re(o)),"normal"===(i=void 0===(i=(o=T.cssHooks[e]||T.cssHooks[o])&&"get"in o?o.get(t,!0,n):i)?Jt(t,e,r):i)&&e in ae&&(i=ae[e]),(""===n||n)&&(o=parseFloat(i),!0===n||isFinite(o))?o||0:i}}),T.each(["height","width"],function(t,s){T.cssHooks[s]={get:function(t,e,n){if(e)return!ie.test(T.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ce(t,s,n):Ut(t,se,function(){return ce(t,s,n)})},set:function(t,e,n){var r=jt(t),i=!y.scrollboxSize()&&"absolute"===r.position,o=(i||n)&&"border-box"===T.css(t,"boxSizing",!1,r),n=n?le(t,s,n,o,r):0;return o&&i&&(n-=Math.ceil(t["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(r[s])-le(t,s,"border",!1,r)-.5)),n&&(o=mt.exec(e))&&"px"!==(o[3]||"px")&&(t.style[s]=e,e=T.css(t,s)),ue(0,e,n)}}}),T.cssHooks.marginLeft=Qt(y.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Jt(t,"marginLeft"))||t.getBoundingClientRect().left-Ut(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(i,o){T.cssHooks[i+o]={expand:function(t){for(var e=0,n={},r="string"==typeof t?t.split(" "):[t];e<4;e++)n[i+p[e]+o]=r[e]||r[e-2]||r[0];return n}},"margin"!==i&&(T.cssHooks[i+o].set=ue)}),T.fn.extend({css:function(t,e){return h(this,function(t,e,n){var r,i,o={},s=0;if(Array.isArray(e)){for(r=jt(t),i=e.length;s<i;s++)o[e[s]]=T.css(t,e[s],!1,r);return o}return void 0!==n?T.style(t,e,n):T.css(t,e)},t,e,1<arguments.length)}}),((T.Tween=o).prototype={constructor:o,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||T.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(T.cssNumber[n]?"":"px")},cur:function(){var t=o.propHooks[this.prop];return(t&&t.get?t:o.propHooks._default).get(this)},run:function(t){var e,n=o.propHooks[this.prop];return this.options.duration?this.pos=e=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(n&&n.set?n:o.propHooks._default).set(this),this}}).init.prototype=o.prototype,(o.propHooks={_default:{get:function(t){return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(t=T.css(t.elem,t.prop,""))&&"auto"!==t?t:0},set:function(t){T.fx.step[t.prop]?T.fx.step[t.prop](t):1!==t.elem.nodeType||!T.cssHooks[t.prop]&&null==t.elem.style[re(t.prop)]?t.elem[t.prop]=t.now:T.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=o.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},T.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},T.fx=o.prototype.init,T.fx.step={};var R,he,s,I,pe=/^(?:toggle|show|hide)$/,fe=/queueHooks$/;function de(){he&&(!1===w.hidden&&x.requestAnimationFrame?x.requestAnimationFrame(de):x.setTimeout(de,T.fx.interval),T.fx.tick())}function ge(){return x.setTimeout(function(){R=void 0}),R=Date.now()}function ye(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=p[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function me(t,e,n){for(var r,i=(B.tweeners[e]||[]).concat(B.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,e,t))return r}function B(i,t,e){var n,o,r,s,a,u,l,c=0,h=B.prefilters.length,p=T.Deferred().always(function(){delete f.elem}),f=function(){if(!o){for(var t=R||ge(),t=Math.max(0,d.startTime+d.duration-t),e=1-(t/d.duration||0),n=0,r=d.tweens.length;n<r;n++)d.tweens[n].run(e);if(p.notifyWith(i,[d,e,t]),e<1&&r)return t;r||p.notifyWith(i,[d,1,0]),p.resolveWith(i,[d])}return!1},d=p.promise({elem:i,props:T.extend({},t),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},e),originalProperties:t,originalOptions:e,startTime:R||ge(),duration:e.duration,tweens:[],createTween:function(t,e){e=T.Tween(i,d.opts,t,e,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(e),e},stop:function(t){var e=0,n=t?d.tweens.length:0;if(!o){for(o=!0;e<n;e++)d.tweens[e].run(1);t?(p.notifyWith(i,[d,1,0]),p.resolveWith(i,[d,t])):p.rejectWith(i,[d,t])}return this}}),g=d.props,y=g,m=d.opts.specialEasing;for(r in y)if(a=m[s=_(r)],u=y[r],Array.isArray(u)&&(a=u[1],u=y[r]=u[0]),r!==s&&(y[s]=u,delete y[r]),(l=T.cssHooks[s])&&"expand"in l)for(r in u=l.expand(u),delete y[s],u)r in y||(y[r]=u[r],m[r]=a);else m[s]=a;for(;c<h;c++)if(n=B.prefilters[c].call(d,i,g,d.opts))return v(n.stop)&&(T._queueHooks(d.elem,d.opts.queue).stop=n.stop.bind(n)),n;return T.map(g,me,d),v(d.opts.start)&&d.opts.start.call(i,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),T.fx.timer(T.extend(f,{elem:i,anim:d,queue:d.opts.queue})),d}T.Animation=T.extend(B,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return _t(n.elem,t,mt.exec(e),n),n}]},tweener:function(t,e){for(var n,r=0,i=(t=v(t)?(e=t,["*"]):t.match(E)).length;r<i;r++)n=t[r],B.tweeners[n]=B.tweeners[n]||[],B.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,s,a,u,l,c="width"in e||"height"in e,h=this,p={},f=t.style,d=t.nodeType&&yt(t),g=b.get(t,"fxshow");for(r in n.queue||(null==(s=T._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,T.queue(t,"fx").length||s.empty.fire()})})),e)if(i=e[r],pe.test(i)){if(delete e[r],o=o||"toggle"===i,i===(d?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;d=!0}p[r]=g&&g[r]||T.style(t,r)}if((u=!T.isEmptyObject(e))||!T.isEmptyObject(p))for(r in c&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(l=g&&g.display)&&(l=b.get(t,"display")),"none"===(c=T.css(t,"display"))&&(l?c=l:(A([t],!0),l=t.style.display||l,c=T.css(t,"display"),A([t]))),"inline"===c||"inline-block"===c&&null!=l)&&"none"===T.css(t,"float")&&(u||(h.done(function(){f.display=l}),null==l&&(c=f.display,l="none"===c?"":c)),f.display="inline-block"),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),u=!1,p)u||(g?"hidden"in g&&(d=g.hidden):g=b.access(t,"fxshow",{display:l}),o&&(g.hidden=!d),d&&A([t],!0),h.done(function(){for(r in d||A([t]),b.remove(t,"fxshow"),p)T.style(t,r,p[r])})),u=me(d?g[r]:0,r,h),r in g||(g[r]=u.start,d&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?B.prefilters.unshift(t):B.prefilters.push(t)}}),T.speed=function(t,e,n){var r=t&&"object"==typeof t?T.extend({},t):{complete:n||!n&&e||v(t)&&t,duration:t,easing:n&&e||e&&!v(e)&&e};return T.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in T.fx.speeds?r.duration=T.fx.speeds[r.duration]:r.duration=T.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&T.dequeue(this,r.queue)},r},T.fn.extend({fadeTo:function(t,e,n,r){return this.filter(yt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(e,t,n,r){function i(){var t=B(this,T.extend({},e),s);(o||b.get(this,"finish"))&&t.stop(!0)}var o=T.isEmptyObject(e),s=T.speed(t,n,r);return i.finish=i,o||!1===s.queue?this.each(i):this.queue(s.queue,i)},stop:function(i,t,o){function s(t){var e=t.stop;delete t.stop,e(o)}return"string"!=typeof i&&(o=t,t=i,i=void 0),t&&this.queue(i||"fx",[]),this.each(function(){var t=!0,e=null!=i&&i+"queueHooks",n=T.timers,r=b.get(this);if(e)r[e]&&r[e].stop&&s(r[e]);else for(e in r)r[e]&&r[e].stop&&fe.test(e)&&s(r[e]);for(e=n.length;e--;)n[e].elem!==this||null!=i&&n[e].queue!==i||(n[e].anim.stop(o),t=!1,n.splice(e,1));!t&&o||T.dequeue(this,i)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var t,e=b.get(this),n=e[s+"queue"],r=e[s+"queueHooks"],i=T.timers,o=n?n.length:0;for(e.finish=!0,T.queue(this,s,[]),r&&r.stop&&r.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===s&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),T.each(["toggle","show","hide"],function(t,r){var i=T.fn[r];T.fn[r]=function(t,e,n){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(ye(r,!0),t,e,n)}}),T.each({slideDown:ye("show"),slideUp:ye("hide"),slideToggle:ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,r){T.fn[t]=function(t,e,n){return this.animate(r,t,e,n)}}),T.timers=[],T.fx.tick=function(){var t,e=0,n=T.timers;for(R=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||T.fx.stop(),R=void 0},T.fx.timer=function(t){T.timers.push(t),T.fx.start()},T.fx.interval=13,T.fx.start=function(){he||(he=!0,de())},T.fx.stop=function(){he=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(r,t){return r=T.fx&&T.fx.speeds[r]||r,this.queue(t=t||"fx",function(t,e){var n=x.setTimeout(t,r);e.stop=function(){x.clearTimeout(n)}})},s=w.createElement("input"),I=w.createElement("select").appendChild(w.createElement("option")),s.type="checkbox",y.checkOn=""!==s.value,y.optSelected=I.selected,(s=w.createElement("input")).value="t",s.type="radio",y.radioValue="t"===s.value;var ve,_e=T.expr.attrHandle,be=(T.fn.extend({attr:function(t,e){return h(this,T.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){T.removeAttr(this,t)})}}),T.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?T.prop(t,e,n):(1===o&&T.isXMLDoc(t)||(i=T.attrHooks[e.toLowerCase()]||(T.expr.match.bool.test(e)?ve:void 0)),void 0!==n?null===n?void T.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):!(i&&"get"in i&&null!==(r=i.get(t,e)))&&null==(r=T.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){var n;if(!y.radioValue&&"radio"===e&&u(t,"input"))return n=t.value,t.setAttribute("type",e),n&&(t.value=n),e}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(E);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),ve={set:function(t,e,n){return!1===e?T.removeAttr(t,n):t.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),function(t,e){var s=_e[e]||T.find.attr;_e[e]=function(t,e,n){var r,i,o=e.toLowerCase();return n||(i=_e[o],_e[o]=r,r=null!=s(t,e,n)?o:null,_e[o]=i),r}}),/^(?:input|select|textarea|button)$/i),xe=/^(?:a|area)$/i;function D(t){return(t.match(E)||[]).join(" ")}function k(t){return t.getAttribute&&t.getAttribute("class")||""}function we(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(E)||[]}T.fn.extend({prop:function(t,e){return h(this,T.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[T.propFix[t]||t]})}}),T.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&T.isXMLDoc(t)||(e=T.propFix[e]||e,i=T.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=T.find.attr(t,"tabindex");return e?parseInt(e,10):be.test(t.nodeName)||xe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(T.propHooks.selected={get:function(t){t=t.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(t){t=t.parentNode;t&&(t.selectedIndex,t.parentNode)&&t.parentNode.selectedIndex}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this}),T.fn.extend({addClass:function(e){var t,n,r,i,o,s,a=0;if(v(e))return this.each(function(t){T(this).addClass(e.call(this,t,k(this)))});if((t=we(e)).length)for(;n=this[a++];)if(s=k(n),r=1===n.nodeType&&" "+D(s)+" "){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s!==(s=D(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,s,a=0;if(v(e))return this.each(function(t){T(this).removeClass(e.call(this,t,k(this)))});if(!arguments.length)return this.attr("class","");if((t=we(e)).length)for(;n=this[a++];)if(s=k(n),r=1===n.nodeType&&" "+D(s)+" "){for(o=0;i=t[o++];)for(;-1<r.indexOf(" "+i+" ");)r=r.replace(" "+i+" "," ");s!==(s=D(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,e){var o=typeof i,s="string"==o||Array.isArray(i);return"boolean"==typeof e&&s?e?this.addClass(i):this.removeClass(i):v(i)?this.each(function(t){T(this).toggleClass(i.call(this,t,k(this),e),e)}):this.each(function(){var t,e,n,r;if(s)for(e=0,n=T(this),r=we(i);t=r[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==i&&"boolean"!=o||((t=k(this))&&b.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",!t&&!1!==i&&b.get(this,"__className__")||""))})},hasClass:function(t){for(var e,n=0,r=" "+t+" ";e=this[n++];)if(1===e.nodeType&&-1<(" "+D(k(e))+" ").indexOf(r))return!0;return!1}});function Te(t){t.stopPropagation()}var Ee=/\r/g,Se=(T.fn.extend({val:function(e){var n,t,r,i=this[0];return arguments.length?(r=v(e),this.each(function(t){1!==this.nodeType||(null==(t=r?e.call(this,t,T(this).val()):e)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=T.map(t,function(t){return null==t?"":t+""})),(n=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,t,"value"))||(this.value=t)})):i?(n=T.valHooks[i.type]||T.valHooks[i.nodeName.toLowerCase()])&&"get"in n&&void 0!==(t=n.get(i,"value"))?t:"string"==typeof(t=i.value)?t.replace(Ee,""):null==t?"":t:void 0}}),T.extend({valHooks:{option:{get:function(t){var e=T.find.attr(t,"value");return null!=e?e:D(T.text(t))}},select:{get:function(t){for(var e,n=t.options,r=t.selectedIndex,i="select-one"===t.type,o=i?null:[],s=i?r+1:n.length,a=r<0?s:i?r:0;a<s;a++)if(((e=n[a]).selected||a===r)&&!e.disabled&&(!e.parentNode.disabled||!u(e.parentNode,"optgroup"))){if(e=T(e).val(),i)return e;o.push(e)}return o},set:function(t,e){for(var n,r,i=t.options,o=T.makeArray(e),s=i.length;s--;)((r=i[s]).selected=-1<T.inArray(T.valHooks.option.get(r),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<T.inArray(T(t).val(),e)}},y.checkOn||(T.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),y.focusin="onfocusin"in x,/^(?:focusinfocus|focusoutblur)$/),Ce=(T.extend(T.event,{trigger:function(t,e,n,r){var i,o,s,a,u,l,c,h=[n||w],p=W.call(t,"type")?t.type:t,f=W.call(t,"namespace")?t.namespace.split("."):[],d=c=o=n=n||w;if(3!==n.nodeType&&8!==n.nodeType&&!Se.test(p+T.event.triggered)&&(-1<p.indexOf(".")&&(p=(f=p.split(".")).shift(),f.sort()),a=p.indexOf(":")<0&&"on"+p,(t=t[T.expando]?t:new T.Event(p,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:T.makeArray(e,[t]),l=T.event.special[p]||{},r||!l.trigger||!1!==l.trigger.apply(n,e))){if(!r&&!l.noBubble&&!g(n)){for(s=l.delegateType||p,Se.test(s+p)||(d=d.parentNode);d;d=d.parentNode)h.push(d),o=d;o===(n.ownerDocument||w)&&h.push(o.defaultView||o.parentWindow||x)}for(i=0;(d=h[i++])&&!t.isPropagationStopped();)c=d,t.type=1<i?s:l.bindType||p,(u=(b.get(d,"events")||Object.create(null))[t.type]&&b.get(d,"handle"))&&u.apply(d,e),(u=a&&d[a])&&u.apply&&m(d)&&(t.result=u.apply(d,e),!1===t.result)&&t.preventDefault();return t.type=p,r||t.isDefaultPrevented()||l._default&&!1!==l._default.apply(h.pop(),e)||!m(n)||a&&v(n[p])&&!g(n)&&((o=n[a])&&(n[a]=null),T.event.triggered=p,t.isPropagationStopped()&&c.addEventListener(p,Te),n[p](),t.isPropagationStopped()&&c.removeEventListener(p,Te),T.event.triggered=void 0,o)&&(n[a]=o),t.result}},simulate:function(t,e,n){n=T.extend(new T.Event,n,{type:t,isSimulated:!0});T.event.trigger(n,null,e)}}),T.fn.extend({trigger:function(t,e){return this.each(function(){T.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return T.event.trigger(t,e,n,!0)}}),y.focusin||T.each({focus:"focusin",blur:"focusout"},function(n,r){function i(t){T.event.simulate(r,t.target,T.event.fix(t))}T.event.special[r]={setup:function(){var t=this.ownerDocument||this.document||this,e=b.access(t,r);e||t.addEventListener(n,i,!0),b.access(t,r,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this.document||this,e=b.access(t,r)-1;e?b.access(t,r,e):(t.removeEventListener(n,i,!0),b.remove(t,r))}}}),x.location),Ae={guid:Date.now()},Pe=/\?/,Me=(T.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new x.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||T.error("Invalid XML: "+(n?T.map(n.childNodes,function(t){return t.textContent}).join("\n"):t)),e},/\[\]$/),Oe=/\r?\n/g,Re=/^(?:submit|button|image|reset|file)$/i,Ie=/^(?:input|select|textarea|keygen)/i;T.param=function(t,e){function n(t,e){e=v(e)?e():e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==e?"":e)}var r,i=[];if(null==t)return"";if(Array.isArray(t)||t.jquery&&!T.isPlainObject(t))T.each(t,function(){n(this.name,this.value)});else for(r in t)!function n(r,t,i,o){if(Array.isArray(t))T.each(t,function(t,e){i||Me.test(r)?o(r,e):n(r+"["+("object"==typeof e&&null!=e?t:"")+"]",e,i,o)});else if(i||"object"!==d(t))o(r,t);else for(var e in t)n(r+"["+e+"]",t[e],i,o)}(r,t[r],e,n);return i.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=T.prop(this,"elements");return t?T.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!T(this).is(":disabled")&&Ie.test(this.nodeName)&&!Re.test(t)&&(this.checked||!xt.test(t))}).map(function(t,e){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,function(t){return{name:e.name,value:t.replace(Oe,"\r\n")}}):{name:e.name,value:n.replace(Oe,"\r\n")}}).get()}});var Be=/%20/g,De=/#.*$/,ke=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,Fe=/^(?:GET|HEAD)$/,Ne=/^\/\//,je={},Ue={},qe="*/".concat("*"),Ge=w.createElement("a");function We(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,r=0,i=t.toLowerCase().match(E)||[];if(v(e))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(e)):(o[n]=o[n]||[]).push(e)}}function He(e,r,i,o){var s={},a=e===Ue;function u(t){var n;return s[t]=!0,T.each(e[t]||[],function(t,e){e=e(r,i,o);return"string"!=typeof e||a||s[e]?a?!(n=e):void 0:(r.dataTypes.unshift(e),u(e),!1)}),n}return u(r.dataTypes[0])||!s["*"]&&u("*")}function Xe(t,e){var n,r,i=T.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r=r||{})[n]=e[n]);return r&&T.extend(!0,t,r),t}Ge.href=Ce.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ce.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ce.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Xe(Xe(t,T.ajaxSettings),e):Xe(T.ajaxSettings,t)},ajaxPrefilter:We(je),ajaxTransport:We(Ue),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0);var u,l,c,n,h,p,f,r,d=T.ajaxSetup({},e=e||{}),g=d.context||d,y=d.context&&(g.nodeType||g.jquery)?T(g):T.event,m=T.Deferred(),v=T.Callbacks("once memory"),_=d.statusCode||{},i={},o={},s="canceled",b={readyState:0,getResponseHeader:function(t){var e;if(p){if(!n)for(n={};e=Le.exec(c);)n[e[1].toLowerCase()+" "]=(n[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=n[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return p?c:null},setRequestHeader:function(t,e){return null==p&&(t=o[t.toLowerCase()]=o[t.toLowerCase()]||t,i[t]=e),this},overrideMimeType:function(t){return null==p&&(d.mimeType=t),this},statusCode:function(t){if(t)if(p)b.always(t[b.status]);else for(var e in t)_[e]=[_[e],t[e]];return this},abort:function(t){t=t||s;return u&&u.abort(t),a(0,t),this}};if(m.promise(b),d.url=((t||d.url||Ce.href)+"").replace(Ne,Ce.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(E)||[""],null==d.crossDomain){t=w.createElement("a");try{t.href=d.url,t.href=t.href,d.crossDomain=Ge.protocol+"//"+Ge.host!=t.protocol+"//"+t.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=T.param(d.data,d.traditional)),He(je,d,e,b),!p){for(r in(f=T.event&&d.global)&&0==T.active++&&T.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Fe.test(d.type),l=d.url.replace(De,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Be,"+")):(t=d.url.slice(l.length),d.data&&(d.processData||"string"==typeof d.data)&&(l+=(Pe.test(l)?"&":"?")+d.data,delete d.data),!1===d.cache&&(l=l.replace(ke,"$1"),t=(Pe.test(l)?"&":"?")+"_="+Ae.guid+++t),d.url=l+t),d.ifModified&&(T.lastModified[l]&&b.setRequestHeader("If-Modified-Since",T.lastModified[l]),T.etag[l])&&b.setRequestHeader("If-None-Match",T.etag[l]),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&b.setRequestHeader("Content-Type",d.contentType),b.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+qe+"; q=0.01":""):d.accepts["*"]),d.headers)b.setRequestHeader(r,d.headers[r]);if(d.beforeSend&&(!1===d.beforeSend.call(g,b,d)||p))return b.abort();if(s="abort",v.add(d.complete),b.done(d.success),b.fail(d.error),u=He(Ue,d,e,b)){if(b.readyState=1,f&&y.trigger("ajaxSend",[b,d]),p)return b;d.async&&0<d.timeout&&(h=x.setTimeout(function(){b.abort("timeout")},d.timeout));try{p=!1,u.send(i,a)}catch(t){if(p)throw t;a(-1,t)}}else a(-1,"No Transport")}return b;function a(t,e,n,r){var i,o,s,a=e;p||(p=!0,h&&x.clearTimeout(h),u=void 0,c=r||"",b.readyState=0<t?4:0,r=200<=t&&t<300||304===t,n&&(s=function(t,e,n){for(var r,i,o,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}s=s||i}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}(d,b,n)),!r&&-1<T.inArray("script",d.dataTypes)&&T.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),s=function(t,e,n,r){var i,o,s,a,u,l={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=l[u+" "+o]||l["* "+o]))for(i in l)if((a=i.split(" "))[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){!0===s?s=l[i]:!0!==l[i]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(d,s,b,r),r?(d.ifModified&&((n=b.getResponseHeader("Last-Modified"))&&(T.lastModified[l]=n),n=b.getResponseHeader("etag"))&&(T.etag[l]=n),204===t||"HEAD"===d.type?a="nocontent":304===t?a="notmodified":(a=s.state,i=s.data,r=!(o=s.error))):(o=a,!t&&a||(a="error",t<0&&(t=0))),b.status=t,b.statusText=(e||a)+"",r?m.resolveWith(g,[i,a,b]):m.rejectWith(g,[b,a,o]),b.statusCode(_),_=void 0,f&&y.trigger(r?"ajaxSuccess":"ajaxError",[b,d,r?i:o]),v.fireWith(g,[b,a]),f&&(y.trigger("ajaxComplete",[b,d]),--T.active||T.event.trigger("ajaxStop")))}},getJSON:function(t,e,n){return T.get(t,e,n,"json")},getScript:function(t,e){return T.get(t,void 0,e,"script")}}),T.each(["get","post"],function(t,i){T[i]=function(t,e,n,r){return v(e)&&(r=r||n,n=e,e=void 0),T.ajax(T.extend({url:t,type:i,dataType:r,data:e,success:n},T.isPlainObject(t)&&t))}}),T.ajaxPrefilter(function(t){for(var e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),T._evalUrl=function(t,e,n){return T.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){T.globalEval(t,e,n)}})},T.fn.extend({wrapAll:function(t){return this[0]&&(v(t)&&(t=t.call(this[0])),t=T(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return v(n)?this.each(function(t){T(this).wrapInner(n.call(this,t))}):this.each(function(){var t=T(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=v(e);return this.each(function(t){T(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(t){return!T.expr.pseudos.visible(t)},T.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new x.XMLHttpRequest}catch(t){}};var Ve={0:200,1223:204},ze=T.ajaxSettings.xhr(),Ye=(y.cors=!!ze&&"withCredentials"in ze,y.ajax=ze=!!ze,T.ajaxTransport(function(i){var o,s;if(y.cors||ze&&!i.crossDomain)return{send:function(t,e){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)r.setRequestHeader(n,t[n]);o=function(t){return function(){o&&(o=s=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===t?r.abort():"error"===t?"number"!=typeof r.status?e(0,"error"):e(r.status,r.statusText):e(Ve[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),s=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=s:r.onreadystatechange=function(){4===r.readyState&&x.setTimeout(function(){o&&s()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(t){if(o)throw t}},abort:function(){o&&o()}}}),T.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return T.globalEval(t),t}}}),T.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),T.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(t,e){r=T("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(t){r.remove(),i=null,t&&e("error"===t.type?404:200,t.type)}),w.head.appendChild(r[0])},abort:function(){i&&i()}}}),[]),Ke=/(=)\?(?=&|$)|\?\?/,$e=(T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ye.pop()||T.expando+"_"+Ae.guid++;return this[t]=!0,t}}),T.ajaxPrefilter("json jsonp",function(t,e,n){var r,i,o,s=!1!==t.jsonp&&(Ke.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ke.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=v(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ke,"$1"+r):!1!==t.jsonp&&(t.url+=(Pe.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||T.error(r+" was not called"),o[0]},t.dataTypes[0]="json",i=x[r],x[r]=function(){o=arguments},n.always(function(){void 0===i?T(x).removeProp(r):x[r]=i,t[r]&&(t.jsonpCallback=e.jsonpCallback,Ye.push(r)),o&&v(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((t=w.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===t.childNodes.length),T.parseHTML=function(t,e,n){var r;return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(y.createHTMLDocument?((r=(e=w.implementation.createHTMLDocument("")).createElement("base")).href=w.location.href,e.head.appendChild(r)):e=w),r=!n&&[],(n=Z.exec(t))?[e.createElement(n[1])]:(n=Ct([t],e,r),r&&r.length&&T(r).remove(),T.merge([],n.childNodes)))},T.fn.load=function(t,e,n){var r,i,o,s=this,a=t.indexOf(" ");return-1<a&&(r=D(t.slice(a)),t=t.slice(0,a)),v(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),0<s.length&&T.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(r?T("<div>").append(T.parseHTML(t)).find(r):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},T.expr.pseudos.animated=function(e){return T.grep(T.timers,function(t){return e===t.elem}).length},T.offset={setOffset:function(t,e,n){var r,i,o,s,a=T.css(t,"position"),u=T(t),l={};"static"===a&&(t.style.position="relative"),o=u.offset(),r=T.css(t,"top"),s=T.css(t,"left"),a=("absolute"===a||"fixed"===a)&&-1<(r+s).indexOf("auto")?(i=(a=u.position()).top,a.left):(i=parseFloat(r)||0,parseFloat(s)||0),null!=(e=v(e)?e.call(t,n,T.extend({},o)):e).top&&(l.top=e.top-o.top+i),null!=e.left&&(l.left=e.left-o.left+a),"using"in e?e.using.call(t,l):u.css(l)}},T.fn.extend({offset:function(e){var t,n;return arguments.length?void 0===e?this:this.each(function(t){T.offset.setOffset(this,e,t)}):(n=this[0])?n.getClientRects().length?(t=n.getBoundingClientRect(),n=n.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===T.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===T.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=T(t).offset()).top+=T.css(t,"borderTopWidth",!0),i.left+=T.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-T.css(r,"marginTop",!0),left:e.left-i.left-T.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===T.css(t,"position");)t=t.offsetParent;return t||S})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var o="pageYOffset"===i;T.fn[e]=function(t){return h(this,function(t,e,n){var r;if(g(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===n)return r?r[i]:t[e];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):t[e]=n},e,t,arguments.length)}}),T.each(["top","left"],function(t,n){T.cssHooks[n]=Qt(y.pixelPosition,function(t,e){if(e)return e=Jt(t,n),Yt.test(e)?T(t).position()[n]+"px":e})}),T.each({Height:"height",Width:"width"},function(s,a){T.each({padding:"inner"+s,content:a,"":"outer"+s},function(r,o){T.fn[o]=function(t,e){var n=arguments.length&&(r||"boolean"!=typeof t),i=r||(!0===t||!0===e?"margin":"border");return h(this,function(t,e,n){var r;return g(t)?0===o.indexOf("outer")?t["inner"+s]:t.document.documentElement["client"+s]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+s],r["scroll"+s],t.body["offset"+s],r["offset"+s],r["client"+s])):void 0===n?T.css(t,e,i):T.style(t,e,n,i)},a,n?t:void 0,n)}})}),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){T.fn[e]=function(t){return this.on(e,t)}}),T.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){T.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g),Ze=(T.proxy=function(t,e){var n,r;if("string"==typeof e&&(r=t[e],e=t,t=r),v(t))return n=a.call(arguments,2),(r=function(){return t.apply(e||this,n.concat(a.call(arguments)))}).guid=t.guid=t.guid||T.guid++,r},T.holdReady=function(t){t?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=u,T.isFunction=v,T.isWindow=g,T.camelCase=_,T.type=d,T.now=Date.now,T.isNumeric=function(t){var e=T.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},T.trim=function(t){return null==t?"":(t+"").replace($e,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return T}),x.jQuery),Je=x.$;return T.noConflict=function(t){return x.$===T&&(x.$=Je),t&&x.jQuery===T&&(x.jQuery=Ze),T},void 0===L&&(x.jQuery=x.$=T),T})},{}],43:[function(t,e,n){var r=t("./lib/keyboard"),i=t("./lib/locale"),o=t("./lib/key-combo"),s=new r;s.setLocale("us",t("./locales/us")),(n=e.exports=s).Keyboard=r,n.Locale=i,n.KeyCombo=o},{"./lib/key-combo":44,"./lib/keyboard":45,"./lib/locale":46,"./locales/us":47}],44:[function(t,e,n){function a(t){this.sourceStr=t,this.subCombos=a.parseComboStr(t),this.keyNames=this.subCombos.reduce(function(t,e){return t.concat(e)},[])}a.sequenceDeliminator=">>",a.comboDeliminator=">",a.keyDeliminator="+",a.parseComboStr=function(t){for(var e=a._splitStr(t,a.comboDeliminator),n=[],r=0;r<e.length;r+=1)n.push(a._splitStr(e[r],a.keyDeliminator));return n},a.prototype.check=function(t){for(var e=0,n=0;n<this.subCombos.length;n+=1)if(-1===(e=this._checkSubCombo(this.subCombos[n],e,t)))return!1;return!0},a.prototype.isEqual=function(t){if(!t||"string"!=typeof t&&"object"!=typeof t)return!1;if("string"==typeof t&&(t=new a(t)),this.subCombos.length!==t.subCombos.length)return!1;for(var e=0;e<this.subCombos.length;e+=1)if(this.subCombos[e].length!==t.subCombos[e].length)return!1;for(e=0;e<this.subCombos.length;e+=1){for(var n=this.subCombos[e],r=t.subCombos[e].slice(0),i=0;i<n.length;i+=1){var o=n[i],o=r.indexOf(o);-1<o&&r.splice(o,1)}if(0!==r.length)return!1}return!0},a._splitStr=function(t,e){for(var n=t,r=e,i="",o=[],s=0;s<n.length;s+=1)0<s&&n[s]===r&&"\\"!==n[s-1]&&(o.push(i.trim()),i="",s+=1),i+=n[s];return i&&o.push(i.trim()),o},a.prototype._checkSubCombo=function(t,e,n){t=t.slice(0),n=n.slice(e);for(var r=e,i=0;i<t.length;i+=1){var o=t[i],s=("\\"!==o[0]||(s=o.slice(1))!==a.comboDeliminator&&s!==a.keyDeliminator||(o=s),n.indexOf(o));if(-1<s&&(t.splice(i,1),--i,r<s&&(r=s),0===t.length))return r}return-1},e.exports=a},{}],45:[function(e,n,t){!function(a){!function(){var r=e("./locale"),c=e("./key-combo");function t(t,e,n,r){this._locale=null,this._currentContext=null,this._contexts={},this._listeners=[],this._appliedListeners=[],this._locales={},this._targetElement=null,this._targetWindow=null,this._targetPlatform="",this._targetUserAgent="",this._isModernBrowser=!1,this._targetKeyDownBinding=null,this._targetKeyUpBinding=null,this._targetResetBinding=null,this._paused=!1,this._callerHandler=null,this.setContext("global"),this.watch(t,e,n,r)}t.prototype.setLocale=function(t,e){var n=null;"string"==typeof t?e?e(n=new r(t),this._targetPlatform,this._targetUserAgent):n=this._locales[t]||null:t=(n=t)._localeName,this._locale=n,(this._locales[t]=n)&&(this._locale.pressedKeys=n.pressedKeys)},t.prototype.getLocale=function(t){return t=t||this._locale.localeName,this._locales[t]||null},t.prototype.addListener=t.prototype.bind=function(t,e,n,r){if(null!==t&&"function"!=typeof t||(r=n,n=e,e=t,t=null),t&&"object"==typeof t&&"number"==typeof t.length)for(var i=0;i<t.length;i+=1)this.bind(t[i],e,n);else this._listeners.push({keyCombo:t?new c(t):null,pressHandler:e||null,releaseHandler:n||null,preventRepeat:r||!1,preventRepeatByDefault:r||!1})},t.prototype.on=t.prototype.bind,t.prototype.removeListener=t.prototype.unbind=function(t,e,n){if(null!==t&&"function"!=typeof t||(n=e,e=t,t=null),t&&"object"==typeof t&&"number"==typeof t.length)for(var r=0;r<t.length;r+=1)this.unbind(t[r],e,n);else for(r=0;r<this._listeners.length;r+=1){var i=this._listeners[r],o=!t&&!i.keyCombo||i.keyCombo&&i.keyCombo.isEqual(t),s=!e&&!n||!e&&!i.pressHandler||e===i.pressHandler,i=!e&&!n||!n&&!i.releaseHandler||n===i.releaseHandler;o&&s&&i&&(this._listeners.splice(r,1),--r)}},t.prototype.off=t.prototype.unbind,t.prototype.setContext=function(t){this._locale&&this.releaseAllKeys(),this._contexts[t]||(this._contexts[t]=[]),this._listeners=this._contexts[t],this._currentContext=t},t.prototype.getContext=function(){return this._currentContext},t.prototype.withContext=function(t,e){var n=this.getContext();this.setContext(t),e(),this.setContext(n)},t.prototype.watch=function(t,e,n,r){var i=this;if(this.stop(),!t){if(!a.addEventListener&&!a.attachEvent)throw new Error("Cannot find global functions addEventListener or attachEvent.");t=a}if("number"==typeof t.nodeType&&(r=n,n=e,e=t,t=a),!t.addEventListener&&!t.attachEvent)throw new Error("Cannot find addEventListener or attachEvent methods on targetWindow.");this._isModernBrowser=!!t.addEventListener;var o=t.navigator&&t.navigator.userAgent||"",s=t.navigator&&t.navigator.platform||"";e&&null!==e||(e=t.document),n&&null!==n||(n=s),r&&null!==r||(r=o),this._targetKeyDownBinding=function(t){i.pressKey(t.keyCode,t),i._handleCommandBug(t,s)},this._targetKeyUpBinding=function(t){i.releaseKey(t.keyCode,t)},this._targetResetBinding=function(t){i.releaseAllKeys(t)},this._bindEvent(e,"keydown",this._targetKeyDownBinding),this._bindEvent(e,"keyup",this._targetKeyUpBinding),this._bindEvent(t,"focus",this._targetResetBinding),this._bindEvent(t,"blur",this._targetResetBinding),this._targetElement=e,this._targetWindow=t,this._targetPlatform=n,this._targetUserAgent=r},t.prototype.stop=function(){this._targetElement&&this._targetWindow&&(this._unbindEvent(this._targetElement,"keydown",this._targetKeyDownBinding),this._unbindEvent(this._targetElement,"keyup",this._targetKeyUpBinding),this._unbindEvent(this._targetWindow,"focus",this._targetResetBinding),this._unbindEvent(this._targetWindow,"blur",this._targetResetBinding),this._targetWindow=null,this._targetElement=null)},t.prototype.pressKey=function(t,e){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.pressKey(t),this._applyBindings(e)}},t.prototype.releaseKey=function(t,e){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.releaseKey(t),this._clearBindings(e)}},t.prototype.releaseAllKeys=function(t){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.pressedKeys.length=0,this._clearBindings(t)}},t.prototype.pause=function(){this._paused||(this._locale&&this.releaseAllKeys(),this._paused=!0)},t.prototype.resume=function(){this._paused=!1},t.prototype.reset=function(){this.releaseAllKeys(),this._listeners.length=0},t.prototype._bindEvent=function(t,e,n){return this._isModernBrowser?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},t.prototype._unbindEvent=function(t,e,n){return this._isModernBrowser?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},t.prototype._getGroupedListeners=function(){var r=[],i=[],t=this._listeners;return(t="global"!==this._currentContext?[].concat(t,this._contexts.global):t).sort(function(t,e){return(e.keyCombo?e.keyCombo.keyNames.length:0)-(t.keyCombo?t.keyCombo.keyNames.length:0)}).forEach(function(t){for(var e=-1,n=0;n<i.length;n+=1)(null===i[n]&&null===t.keyCombo||null!==i[n]&&i[n].isEqual(t.keyCombo))&&(e=n);-1===e&&(e=i.length,i.push(t.keyCombo)),r[e]||(r[e]=[]),r[e].push(t)}),r},t.prototype._applyBindings=function(t){for(var e=!1,n=((t=t||{}).preventRepeat=function(){e=!0},t.pressedKeys=this._locale.pressedKeys.slice(0),this._locale.pressedKeys.slice(0)),r=this._getGroupedListeners(),i=0;i<r.length;i+=1){var o=r[i],s=o[0].keyCombo;if(null===s||s.check(n)){for(var a=0;a<o.length;a+=1){var u=o[a];(u=null===s?{keyCombo:new c(n.join("+")),pressHandler:u.pressHandler,releaseHandler:u.releaseHandler,preventRepeat:u.preventRepeat,preventRepeatByDefault:u.preventRepeatByDefault}:u).pressHandler&&!u.preventRepeat&&(u.pressHandler.call(this,t),e)&&(u.preventRepeat=e,e=!1),u.releaseHandler&&-1===this._appliedListeners.indexOf(u)&&this._appliedListeners.push(u)}if(s)for(a=0;a<s.keyNames.length;a+=1){var l=n.indexOf(s.keyNames[a]);-1!==l&&(n.splice(l,1),--a)}}}},t.prototype._clearBindings=function(t){t=t||{};for(var e=0;e<this._appliedListeners.length;e+=1){var n=this._appliedListeners[e],r=n.keyCombo;null!==r&&r.check(this._locale.pressedKeys)||(this._callerHandler!==n.releaseHandler&&(r=this._callerHandler,this._callerHandler=n.releaseHandler,n.preventRepeat=n.preventRepeatByDefault,n.releaseHandler.call(this,t),this._callerHandler=r),this._appliedListeners.splice(e,1),--e)}},t.prototype._handleCommandBug=function(t,e){e.match("Mac")&&this._locale.pressedKeys.includes("command")&&!["shift","ctrl","alt","capslock","tab","command"].includes(this._locale.getKeyNames(t.keyCode)[0])&&this._targetKeyUpBinding(t)},n.exports=t}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./key-combo":44,"./locale":46}],46:[function(t,e,n){var r=t("./key-combo");function i(t){this.localeName=t,this.pressedKeys=[],this._appliedMacros=[],this._keyMap={},this._killKeyCodes=[],this._macros=[]}i.prototype.bindKeyCode=function(t,e){this._keyMap[t]=e="string"==typeof e?[e]:e},i.prototype.bindMacro=function(t,e){var n=null,t=("function"==typeof(e="string"==typeof e?[e]:e)&&(n=e,e=null),{keyCombo:new r(t),keyNames:e,handler:n});this._macros.push(t)},i.prototype.getKeyCodes=function(t){var e,n=[];for(e in this._keyMap)-1<this._keyMap[e].indexOf(t)&&n.push(0|e);return n},i.prototype.getKeyNames=function(t){return this._keyMap[t]||[]},i.prototype.setKillKey=function(t){if("string"==typeof t)for(var e=this.getKeyCodes(t),n=0;n<e.length;n+=1)this.setKillKey(e[n]);else this._killKeyCodes.push(t)},i.prototype.pressKey=function(t){if("string"==typeof t)for(var e=this.getKeyCodes(t),n=0;n<e.length;n+=1)this.pressKey(e[n]);else{for(var r=this.getKeyNames(t),n=0;n<r.length;n+=1)-1===this.pressedKeys.indexOf(r[n])&&this.pressedKeys.push(r[n]);this._applyMacros()}},i.prototype.releaseKey=function(t){if("string"==typeof t)for(var e=this.getKeyCodes(t),n=0;n<e.length;n+=1)this.releaseKey(e[n]);else{var r=this.getKeyNames(t);if(-1<this._killKeyCodes.indexOf(t))this.pressedKeys.length=0;else for(n=0;n<r.length;n+=1){var i=this.pressedKeys.indexOf(r[n]);-1<i&&this.pressedKeys.splice(i,1)}this._clearMacros()}},i.prototype._applyMacros=function(){for(var t=this._macros.slice(0),e=0;e<t.length;e+=1){var n=t[e];if(n.keyCombo.check(this.pressedKeys)){n.handler&&(n.keyNames=n.handler(this.pressedKeys));for(var r=0;r<n.keyNames.length;r+=1)-1===this.pressedKeys.indexOf(n.keyNames[r])&&this.pressedKeys.push(n.keyNames[r]);this._appliedMacros.push(n)}}},i.prototype._clearMacros=function(){for(var t=0;t<this._appliedMacros.length;t+=1){var e=this._appliedMacros[t];if(!e.keyCombo.check(this.pressedKeys)){for(var n=0;n<e.keyNames.length;n+=1){var r=this.pressedKeys.indexOf(e.keyNames[n]);-1<r&&this.pressedKeys.splice(r,1)}e.handler&&(e.keyNames=null),this._appliedMacros.splice(t,1),--t}}},e.exports=i},{"./key-combo":44}],47:[function(t,e,n){e.exports=function(t,e,n){t.bindKeyCode(3,["cancel"]),t.bindKeyCode(8,["backspace"]),t.bindKeyCode(9,["tab"]),t.bindKeyCode(12,["clear"]),t.bindKeyCode(13,["enter"]),t.bindKeyCode(16,["shift"]),t.bindKeyCode(17,["ctrl"]),t.bindKeyCode(18,["alt","menu"]),t.bindKeyCode(19,["pause","break"]),t.bindKeyCode(20,["capslock"]),t.bindKeyCode(27,["escape","esc"]),t.bindKeyCode(32,["space","spacebar"]),t.bindKeyCode(33,["pageup"]),t.bindKeyCode(34,["pagedown"]),t.bindKeyCode(35,["end"]),t.bindKeyCode(36,["home"]),t.bindKeyCode(37,["left"]),t.bindKeyCode(38,["up"]),t.bindKeyCode(39,["right"]),t.bindKeyCode(40,["down"]),t.bindKeyCode(41,["select"]),t.bindKeyCode(42,["printscreen"]),t.bindKeyCode(43,["execute"]),t.bindKeyCode(44,["snapshot"]),t.bindKeyCode(45,["insert","ins"]),t.bindKeyCode(46,["delete","del"]),t.bindKeyCode(47,["help"]),t.bindKeyCode(145,["scrolllock","scroll"]),t.bindKeyCode(187,["equal","equalsign","="]),t.bindKeyCode(188,["comma",","]),t.bindKeyCode(190,["period","."]),t.bindKeyCode(191,["slash","forwardslash","/"]),t.bindKeyCode(192,["graveaccent","`"]),t.bindKeyCode(219,["openbracket","["]),t.bindKeyCode(220,["backslash","\\"]),t.bindKeyCode(221,["closebracket","]"]),t.bindKeyCode(222,["apostrophe","'"]),t.bindKeyCode(48,["zero","0"]),t.bindKeyCode(49,["one","1"]),t.bindKeyCode(50,["two","2"]),t.bindKeyCode(51,["three","3"]),t.bindKeyCode(52,["four","4"]),t.bindKeyCode(53,["five","5"]),t.bindKeyCode(54,["six","6"]),t.bindKeyCode(55,["seven","7"]),t.bindKeyCode(56,["eight","8"]),t.bindKeyCode(57,["nine","9"]),t.bindKeyCode(96,["numzero","num0"]),t.bindKeyCode(97,["numone","num1"]),t.bindKeyCode(98,["numtwo","num2"]),t.bindKeyCode(99,["numthree","num3"]),t.bindKeyCode(100,["numfour","num4"]),t.bindKeyCode(101,["numfive","num5"]),t.bindKeyCode(102,["numsix","num6"]),t.bindKeyCode(103,["numseven","num7"]),t.bindKeyCode(104,["numeight","num8"]),t.bindKeyCode(105,["numnine","num9"]),t.bindKeyCode(106,["nummultiply","num*"]),t.bindKeyCode(107,["numadd","num+"]),t.bindKeyCode(108,["numenter"]),t.bindKeyCode(109,["numsubtract","num-"]),t.bindKeyCode(110,["numdecimal","num."]),t.bindKeyCode(111,["numdivide","num/"]),t.bindKeyCode(144,["numlock","num"]),t.bindKeyCode(112,["f1"]),t.bindKeyCode(113,["f2"]),t.bindKeyCode(114,["f3"]),t.bindKeyCode(115,["f4"]),t.bindKeyCode(116,["f5"]),t.bindKeyCode(117,["f6"]),t.bindKeyCode(118,["f7"]),t.bindKeyCode(119,["f8"]),t.bindKeyCode(120,["f9"]),t.bindKeyCode(121,["f10"]),t.bindKeyCode(122,["f11"]),t.bindKeyCode(123,["f12"]),t.bindMacro("shift + `",["tilde","~"]),t.bindMacro("shift + 1",["exclamation","exclamationpoint","!"]),t.bindMacro("shift + 2",["at","@"]),t.bindMacro("shift + 3",["number","#"]),t.bindMacro("shift + 4",["dollar","dollars","dollarsign","$"]),t.bindMacro("shift + 5",["percent","%"]),t.bindMacro("shift + 6",["caret","^"]),t.bindMacro("shift + 7",["ampersand","and","&"]),t.bindMacro("shift + 8",["asterisk","*"]),t.bindMacro("shift + 9",["openparen","("]),t.bindMacro("shift + 0",["closeparen",")"]),t.bindMacro("shift + -",["underscore","_"]),t.bindMacro("shift + =",["plus","+"]),t.bindMacro("shift + [",["opencurlybrace","opencurlybracket","{"]),t.bindMacro("shift + ]",["closecurlybrace","closecurlybracket","}"]),t.bindMacro("shift + \\",["verticalbar","|"]),t.bindMacro("shift + ;",["colon",":"]),t.bindMacro("shift + '",["quotationmark","'"]),t.bindMacro("shift + !,",["openanglebracket","<"]),t.bindMacro("shift + .",["closeanglebracket",">"]),t.bindMacro("shift + /",["questionmark","?"]),e.match("Mac")?t.bindMacro("command",["mod","modifier"]):t.bindMacro("ctrl",["mod","modifier"]);for(var r=65;r<=90;r+=1){var i=String.fromCharCode(r+32),o=String.fromCharCode(r);t.bindKeyCode(r,i),t.bindMacro("shift + "+i,o),t.bindMacro("capslock + "+i,o)}var s,a,u=n.match("Firefox")?59:186,l=n.match("Firefox")?173:189;e.match("Mac")&&(n.match("Safari")||n.match("Chrome"))?(s=91,a=93):e.match("Mac")&&n.match("Opera")?a=s=17:e.match("Mac")&&n.match("Firefox")&&(a=s=224),t.bindKeyCode(u,["semicolon",";"]),t.bindKeyCode(l,["dash","-"]),t.bindKeyCode(s,["command","windows","win","super","leftcommand","leftwindows","leftwin","leftsuper"]),t.bindKeyCode(a,["command","windows","win","super","rightcommand","rightwindows","rightwin","rightsuper"]),t.setKillKey("command")}},{}],48:[function(t,P,M){!function(A){!function(){!function(){var qo,Go="Expected a function",vs="__lodash_hash_undefined__",_s="__lodash_placeholder__",Wo=9007199254740991,bs=NaN,Ho=4294967295,xs=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Xo="[object Arguments]",ws="[object Array]",Vo="[object Boolean]",zo="[object Date]",Ts="[object Error]",Es="[object Function]",Ss="[object GeneratorFunction]",Yo="[object Map]",Ko="[object Number]",$o="[object Object]",Cs="[object Promise]",Zo="[object RegExp]",Jo="[object Set]",Qo="[object String]",As="[object Symbol]",ts="[object WeakMap]",es="[object ArrayBuffer]",ns="[object DataView]",Ps="[object Float32Array]",Ms="[object Float64Array]",Os="[object Int8Array]",Rs="[object Int16Array]",Is="[object Int32Array]",Bs="[object Uint8Array]",Ds="[object Uint8ClampedArray]",ks="[object Uint16Array]",Ls="[object Uint32Array]",Fs=/\b__p \+= '';/g,Ns=/\b(__p \+=) '' \+/g,js=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Us=/&(?:amp|lt|gt|quot|#39);/g,qs=/[&<>"']/g,Gs=RegExp(Us.source),Ws=RegExp(qs.source),Hs=/<%-([\s\S]+?)%>/g,Xs=/<%([\s\S]+?)%>/g,Vs=/<%=([\s\S]+?)%>/g,zs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ys=/^\w*$/,Ks=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$s=/[\\^$.*+?()[\]{}|]/g,Zs=RegExp($s.source),Js=/^\s+/,o=/\s/,Qs=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ta=/\{\n\/\* \[wrapped with (.+)\] \*/,ea=/,? & /,na=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ra=/[()=,{}\[\]\/\s]/,ia=/\\(\\)?/g,oa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sa=/\w*$/,aa=/^[-+]0x[0-9a-f]+$/i,ua=/^0b[01]+$/i,la=/^\[object .+?Constructor\]$/,ca=/^0o[0-7]+$/i,ha=/^(?:0|[1-9]\d*)$/,pa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fa=/($^)/,da=/['\n\r\u2028\u2029\\]/g,s="\\ud800-\\udfff",a="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",u="\\u2700-\\u27bf",t="a-z\\xdf-\\xf6\\xf8-\\xff",e="A-Z\\xc0-\\xd6\\xd8-\\xde",l="\\ufe0e\\ufe0f",c="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",n="["+s+"]",h="["+c+"]",p="["+a+"]",f="["+u+"]",d="["+t+"]",c="[^"+s+c+"\\d+"+u+t+e+"]",u="\\ud83c[\\udffb-\\udfff]",t="[^"+s+"]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",r="[\\ud800-\\udbff][\\udc00-\\udfff]",e="["+e+"]",y="(?:"+d+"|"+c+")",c="(?:"+e+"|"+c+")",m="(?:['’](?:d|ll|m|re|s|t|ve))?",v="(?:['’](?:D|LL|M|RE|S|T|VE))?",_="(?:"+p+"|"+u+")"+"?",b="["+l+"]?",b=b+_+("(?:\\u200d(?:"+[t,g,r].join("|")+")"+b+_+")*"),_="(?:"+[f,g,r].join("|")+")"+b,f="(?:"+[t+p+"?",p,g,r,n].join("|")+")",ga=RegExp("['’]","g"),ya=RegExp(p,"g"),x=RegExp(u+"(?="+u+")|"+f+b,"g"),ma=RegExp([e+"?"+d+"+"+m+"(?="+[h,e,"$"].join("|")+")",c+"+"+v+"(?="+[h,e+y,"$"].join("|")+")",e+"?"+y+"+"+m,e+"+"+v,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",_].join("|"),"g"),w=RegExp("[\\u200d"+s+a+l+"]"),va=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_a=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ba=-1,rs={},is=(rs[Ps]=rs[Ms]=rs[Os]=rs[Rs]=rs[Is]=rs[Bs]=rs[Ds]=rs[ks]=rs[Ls]=!0,rs[Xo]=rs[ws]=rs[es]=rs[Vo]=rs[ns]=rs[zo]=rs[Ts]=rs[Es]=rs[Yo]=rs[Ko]=rs[$o]=rs[Zo]=rs[Jo]=rs[Qo]=rs[ts]=!1,{}),T=(is[Xo]=is[ws]=is[es]=is[ns]=is[Vo]=is[zo]=is[Ps]=is[Ms]=is[Os]=is[Rs]=is[Is]=is[Yo]=is[Ko]=is[$o]=is[Zo]=is[Jo]=is[Qo]=is[As]=is[Bs]=is[Ds]=is[ks]=is[Ls]=!0,is[Ts]=is[Es]=is[ts]=!1,{"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"}),xa=parseFloat,wa=parseInt,t="object"==typeof A&&A&&A.Object===Object&&A,g="object"==typeof self&&self&&self.Object===Object&&self,os=t||g||Function("return this")(),r="object"==typeof M&&M&&!M.nodeType&&M,i=r&&"object"==typeof P&&P&&!P.nodeType&&P,Ta=i&&i.exports===r,E=Ta&&t.process,n=function(){try{var t=i&&i.require&&i.require("util").types;return t?t:E&&E.binding&&E.binding("util")}catch(t){}}(),Ea=n&&n.isArrayBuffer,Sa=n&&n.isDate,Ca=n&&n.isMap,Aa=n&&n.isRegExp,Pa=n&&n.isSet,Ma=n&&n.isTypedArray;function ss(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Oa(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function as(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ra(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ia(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function us(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Ba(t,e){return!!(null==t?0:t.length)&&-1<hs(t,e,0)}function Da(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function ls(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function cs(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function ka(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function La(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Fa(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var S=Wa("length");function Na(t,r,e){var i;return e(t,function(t,e,n){if(r(t,e,n))return i=e,!1}),i}function ja(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function hs(t,e,n){if(e!=e)return ja(t,qa,n);for(var r=t,i=e,o=n-1,s=r.length;++o<s;)if(r[o]===i)return o;return-1}function Ua(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function qa(t){return t!=t}function Ga(t,e){var n=null==t?0:t.length;return n?Xa(t,e)/n:bs}function Wa(e){return function(t){return null==t?qo:t[e]}}function C(e){return function(t){return null==e?qo:e[t]}}function Ha(t,r,i,o,e){return e(t,function(t,e,n){i=o?(o=!1,t):r(i,t,e,n)}),i}function Xa(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==qo&&(n=n===qo?o:n+o)}return n}function Va(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function za(t){return t&&t.slice(0,iu(t)+1).replace(Js,"")}function ps(e){return function(t){return e(t)}}function Ya(e,t){return ls(t,function(t){return e[t]})}function Ka(t,e){return t.has(e)}function $a(t,e){for(var n=-1,r=t.length;++n<r&&-1<hs(e,t[n],0););return n}function Za(t,e){for(var n=t.length;n--&&-1<hs(e,t[n],0););return n}var Ja=C({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Qa=C({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function tu(t){return"\\"+T[t]}function fs(t){return w.test(t)}function eu(t){var n=-1,r=Array(t.size);return t.forEach(function(t,e){r[++n]=[e,t]}),r}function nu(e,n){return function(t){return e(n(t))}}function ds(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==_s||(t[n]=_s,o[i++]=n)}return o}function ru(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function gs(t){return(fs(t)?function(t){var e=x.lastIndex=0;for(;x.test(t);)++e;return e}:S)(t)}function ys(t){return fs(t)?t.match(x)||[]:t.split("")}function iu(t){for(var e=t.length;e--&&o.test(t.charAt(e)););return e}var ou=C({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var ms=function i(t){var w=(t=null==t?os:ms.defaults(os.Object(),t,ms.pick(os,_a))).Array,o=t.Date,I=t.Error,B=t.Function,D=t.Math,g=t.Object,k=t.RegExp,G=t.String,T=t.TypeError,W=w.prototype,H=B.prototype,X=g.prototype,V=t["__core-js_shared__"],z=H.toString,L=X.hasOwnProperty,Y=0,K=(H=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"",$=X.toString,Z=z.call(g),J=os._,Q=k("^"+z.call(L).replace($s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=Ta?t.Buffer:qo,e=t.Symbol,tt=t.Uint8Array,et=H?H.allocUnsafe:qo,nt=nu(g.getPrototypeOf,g),rt=g.create,it=X.propertyIsEnumerable,ot=W.splice,st=e?e.isConcatSpreadable:qo,at=e?e.iterator:qo,ut=e?e.toStringTag:qo,lt=function(){try{var t=Jn(g,"defineProperty");return t({},"",{}),t}catch(t){}}(),ct=t.clearTimeout!==os.clearTimeout&&t.clearTimeout,ht=o&&o.now!==os.Date.now&&o.now,pt=t.setTimeout!==os.setTimeout&&t.setTimeout,ft=D.ceil,dt=D.floor,gt=g.getOwnPropertySymbols,H=H?H.isBuffer:qo,yt=t.isFinite,mt=W.join,vt=nu(g.keys,g),E=D.max,S=D.min,_t=o.now,bt=t.parseInt,xt=D.random,wt=W.reverse,o=Jn(t,"DataView"),Tt=Jn(t,"Map"),Et=Jn(t,"Promise"),St=Jn(t,"Set"),t=Jn(t,"WeakMap"),Ct=Jn(g,"create"),At=t&&new t,Pt={},Mt=Tr(o),Ot=Tr(Tt),Rt=Tr(Et),It=Tr(St),Bt=Tr(t),e=e?e.prototype:qo,Dt=e?e.valueOf:qo,kt=e?e.toString:qo;function d(t){if(q(t)&&!U(t)&&!(t instanceof m)){if(t instanceof y)return t;if(L.call(t,"__wrapped__"))return Er(t)}return new y(t)}var Lt=function(t){if(!x(t))return{};if(rt)return rt(t);Ft.prototype=t;t=new Ft;return Ft.prototype=qo,t};function Ft(){}function Nt(){}function y(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=qo}function m(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ho,this.__views__=[]}function jt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ut(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new qt;++e<n;)this.add(t[e])}function F(t){t=this.__data__=new Ut(t);this.size=t.size}function Wt(t,e){var n,r=U(t),i=!r&&mi(t),o=!r&&!i&&_i(t),s=!r&&!i&&!o&&Oi(t),a=r||i||o||s,u=a?Va(t.length,G):[],l=u.length;for(n in t)!e&&!L.call(t,n)||a&&("length"==n||o&&("offset"==n||"parent"==n)||s&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||ir(n,l))||u.push(n);return u}function Ht(t){var e=t.length;return e?t[Ne(0,e-1)]:qo}function Xt(t,e){return _r(C(t),te(e,0,t.length))}function Vt(t){return _r(C(t))}function zt(t,e,n){(n===qo||j(t[e],n))&&(n!==qo||e in t)||Jt(t,e,n)}function Yt(t,e,n){var r=t[e];L.call(t,e)&&j(r,n)&&(n!==qo||e in t)||Jt(t,e,n)}function Kt(t,e){for(var n=t.length;n--;)if(j(t[n][0],e))return n;return-1}function $t(t,r,i,o){return ie(t,function(t,e,n){r(o,t,i(t),n)}),o}function Zt(t,e){return t&&yn(e,M(e),t)}function Jt(t,e,n){"__proto__"==e&&lt?lt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Qt(t,e){for(var n=-1,r=e.length,i=w(r),o=null==t;++n<r;)i[n]=o?qo:Hi(t,e[n]);return i}function te(t,e,n){return t=t==t&&(n!==qo&&(t=t<=n?t:n),e!==qo)?e<=t?t:e:t}function v(n,r,i,t,e,o){var s,a=1&r,u=2&r,l=4&r;if((s=i?e?i(n,t,e,o):i(n):s)===qo){if(!x(n))return n;var c,t=U(n);if(t){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&L.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(n),!a)return C(n,s)}else{var h=N(n),p=h==Es||h==Ss;if(_i(n))return cn(n,a);if(h==$o||h==Xo||p&&!e){if(s=u||p?{}:nr(n),!a)return u?(f=p=n,f=(c=s)&&yn(f,O(f),c),yn(p,tr(p),f)):(p=Zt(s,c=n),yn(c,Qn(c),p))}else{if(!is[h])return e?n:{};s=function(t,e,n){var r=t.constructor;switch(e){case es:return hn(t);case Vo:case zo:return new r(+t);case ns:return function(t,e){e=e?hn(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,n);case Ps:case Ms:case Os:case Rs:case Is:case Bs:case Ds:case ks:case Ls:return pn(t,n);case Yo:return new r;case Ko:case Qo:return new r(t);case Zo:return function(t){var e=new t.constructor(t.source,sa.exec(t));return e.lastIndex=t.lastIndex,e}(t);case Jo:return new r;case As:return function(t){return Dt?g(Dt.call(t)):{}}(t)}}(n,h,a)}}var f=(o=o||new F).get(n);if(f)return f;o.set(n,s),Pi(n)?n.forEach(function(t){s.add(v(t,r,i,t,n,o))}):Ei(n)&&n.forEach(function(t,e){s.set(e,v(t,r,i,e,n,o))});var d=t?qo:(l?u?Vn:Xn:u?O:M)(n);as(d||n,function(t,e){d&&(t=n[e=t]),Yt(s,e,v(t,r,i,e,n,o))})}return s}function ee(t,e,n){var r=n.length;if(null==t)return!r;for(t=g(t);r--;){var i=n[r],o=e[i],s=t[i];if(s===qo&&!(i in t)||!o(s))return!1}return!0}function ne(t,e,n){if("function"!=typeof t)throw new T(Go);return gr(function(){t.apply(qo,n)},e)}function re(t,e,n,r){var i=-1,o=Ba,s=!0,a=t.length,u=[],l=e.length;if(a){n&&(e=ls(e,ps(n))),r?(o=Da,s=!1):200<=e.length&&(o=Ka,s=!1,e=new Gt(e));t:for(;++i<a;){var c=t[i],h=null==n?c:n(c),c=r||0!==c?c:0;if(s&&h==h){for(var p=l;p--;)if(e[p]===h)continue t;u.push(c)}else o(e,h,r)||u.push(c)}}return u}d.templateSettings={escape:Hs,evaluate:Xs,interpolate:Vs,variable:"",imports:{_:d}},(d.prototype=Nt.prototype).constructor=d,(y.prototype=Lt(Nt.prototype)).constructor=y,(m.prototype=Lt(Nt.prototype)).constructor=m,jt.prototype.clear=function(){this.__data__=Ct?Ct(null):{},this.size=0},jt.prototype.delete=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t},jt.prototype.get=function(t){var e,n=this.__data__;return Ct?(e=n[t])===vs?qo:e:L.call(n,t)?n[t]:qo},jt.prototype.has=function(t){var e=this.__data__;return Ct?e[t]!==qo:L.call(e,t)},jt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ct&&e===qo?vs:e,this},Ut.prototype.clear=function(){this.__data__=[],this.size=0},Ut.prototype.delete=function(t){var e=this.__data__;return!((t=Kt(e,t))<0||(t==e.length-1?e.pop():ot.call(e,t,1),--this.size,0))},Ut.prototype.get=function(t){var e=this.__data__;return(t=Kt(e,t))<0?qo:e[t][1]},Ut.prototype.has=function(t){return-1<Kt(this.__data__,t)},Ut.prototype.set=function(t,e){var n=this.__data__,r=Kt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},qt.prototype.clear=function(){this.size=0,this.__data__={hash:new jt,map:new(Tt||Ut),string:new jt}},qt.prototype.delete=function(t){return t=$n(this,t).delete(t),this.size-=t?1:0,t},qt.prototype.get=function(t){return $n(this,t).get(t)},qt.prototype.has=function(t){return $n(this,t).has(t)},qt.prototype.set=function(t,e){var n=$n(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Gt.prototype.add=Gt.prototype.push=function(t){return this.__data__.set(t,vs),this},Gt.prototype.has=function(t){return this.__data__.has(t)},F.prototype.clear=function(){this.__data__=new Ut,this.size=0},F.prototype.delete=function(t){var e=this.__data__,t=e.delete(t);return this.size=e.size,t},F.prototype.get=function(t){return this.__data__.get(t)},F.prototype.has=function(t){return this.__data__.has(t)},F.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Ut){var r=n.__data__;if(!Tt||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new qt(r)}return n.set(t,e),this.size=n.size,this};var ie=_n(he),oe=_n(pe,!0);function se(t,r){var i=!0;return ie(t,function(t,e,n){return i=!!r(t,e,n)}),i}function ae(t,e,n){for(var r=-1,i=t.length;++r<i;){var o,s,a=t[r],u=e(a);null!=u&&(o===qo?u==u&&!_(u):n(u,o))&&(o=u,s=a)}return s}function ue(t,r){var i=[];return ie(t,function(t,e,n){r(t,e,n)&&i.push(t)}),i}function u(t,e,n,r,i){var o=-1,s=t.length;for(n=n||rr,i=i||[];++o<s;){var a=t[o];0<e&&n(a)?1<e?u(a,e-1,n,r,i):cs(i,a):r||(i[i.length]=a)}return i}var le=bn(),ce=bn(!0);function he(t,e){return t&&le(t,e,M)}function pe(t,e){return t&&ce(t,e,M)}function fe(e,t){return us(t,function(t){return xi(e[t])})}function de(t,e){for(var n=0,r=(e=sn(e,t)).length;null!=t&&n<r;)t=t[wr(e[n++])];return n&&n==r?t:qo}function ge(t,e,n){e=e(t);return U(t)?e:cs(e,n(t))}function n(t){if(null==t)return t===qo?"[object Undefined]":"[object Null]";if(ut&&ut in g(t)){var e=t,n=L.call(e,ut),r=e[ut];try{e[ut]=qo;var i=!0}catch(t){}var o=$.call(e);return i&&(n?e[ut]=r:delete e[ut]),o}return $.call(t)}function ye(t,e){return e<t}function me(t,e){return null!=t&&L.call(t,e)}function ve(t,e){return null!=t&&e in g(t)}function _e(t,e,n){for(var r=n?Da:Ba,i=t[0].length,o=t.length,s=o,a=w(o),u=1/0,l=[];s--;){var c=t[s];s&&e&&(c=ls(c,ps(e))),u=S(c.length,u),a[s]=!n&&(e||120<=i&&120<=c.length)?new Gt(s&&c):qo}var c=t[0],h=-1,p=a[0];t:for(;++h<i&&l.length<u;){var f=c[h],d=e?e(f):f,f=n||0!==f?f:0;if(!(p?Ka(p,d):r(l,d,n))){for(s=o;--s;){var g=a[s];if(!(g?Ka(g,d):r(t[s],d,n)))continue t}p&&p.push(d),l.push(f)}}return l}function be(t,e,n){e=null==(t=pr(t,e=sn(e,t)))?t:t[wr(r(e))];return null==e?qo:ss(e,t,n)}function xe(t){return q(t)&&n(t)==Xo}function we(t,e,n,r,i){if(t===e)return!0;if(null==t||null==e||!q(t)&&!q(e))return t!=t&&e!=e;var o=we,s=U(t),a=U(e),u=s?ws:N(t),a=a?ws:N(e),l=(u=u==Xo?$o:u)==$o,c=(a=a==Xo?$o:a)==$o;if((a=u==a)&&_i(t)){if(!_i(e))return!1;l=!(s=!0)}if(a&&!l){i=i||new F;if(s||Oi(t))return Wn(t,e,n,r,o,i);else{var h=t;var p=e;var f=u;var d=n;var g=r;var y=o;var m=i;switch(f){case ns:if(h.byteLength!=p.byteLength||h.byteOffset!=p.byteOffset)return!1;h=h.buffer,p=p.buffer;case es:return h.byteLength==p.byteLength&&y(new tt(h),new tt(p))?!0:!1;case Vo:case zo:case Ko:return j(+h,+p);case Ts:return h.name==p.name&&h.message==p.message;case Zo:case Qo:return h==p+"";case Yo:var v=eu;case Jo:var _=1&d;if(v=v||ru,h.size!=p.size&&!_)return!1;_=m.get(h);if(_)return _==p;d|=2,m.set(h,p);_=Wn(v(h),v(p),d,g,y,m);return m.delete(h),_;case As:if(Dt)return Dt.call(h)==Dt.call(p)}return!1;return}}if(!(1&n)){s=l&&L.call(t,"__wrapped__"),u=c&&L.call(e,"__wrapped__");if(s||u)return l=s?t.value():t,c=u?e.value():e,i=i||new F,o(l,c,n,r,i)}if(a){i=i||new F;var b=t,x=e,w=n,T=r,E=o,S=i,C=1&w,A=Xn(b),P=A.length,s=Xn(x).length;if(P!=s&&!C)return!1;for(var M=P;M--;){var O=A[M];if(!(C?O in x:L.call(x,O)))return!1}s=S.get(b),u=S.get(x);if(s&&u)return s==x&&u==b;for(var R=!0,I=(S.set(b,x),S.set(x,b),C);++M<P;){O=A[M];var B,D=b[O],k=x[O];if(!((B=T?C?T(k,D,O,x,b,S):T(D,k,O,b,x,S):B)===qo?D===k||E(D,k,w,T,S):B)){R=!1;break}I=I||"constructor"==O}return R&&!I&&(s=b.constructor,u=x.constructor,s!=u)&&"constructor"in b&&"constructor"in x&&!("function"==typeof s&&s instanceof s&&"function"==typeof u&&u instanceof u)&&(R=!1),S.delete(b),S.delete(x),R}return!1}function Te(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=g(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var u=(a=n[i])[0],l=t[u],c=a[1];if(s&&a[2]){if(l===qo&&!(u in t))return!1}else{var h,p=new F;if(!((h=r?r(l,c,u,t,e,p):h)===qo?we(c,l,3,r,p):h))return!1}}return!0}function Ee(t){var e;return!(!x(t)||(e=t,K&&K in e))&&(xi(t)?Q:la).test(Tr(t))}function Se(t){return"function"==typeof t?t:null==t?R:"object"==typeof t?U(t)?Re(t[0],t[1]):Oe(t):Po(t)}function Ce(t){if(!ur(t))return vt(t);var e,n=[];for(e in g(t))L.call(t,e)&&"constructor"!=e&&n.push(e);return n}function Ae(t){if(!x(t)){var e=t,n=[];if(null!=e)for(var r in g(e))n.push(r);return n}var i,o=ur(t),s=[];for(i in t)("constructor"!=i||!o&&L.call(t,i))&&s.push(i);return s}function Pe(t,e){return t<e}function Me(t,r){var i=-1,o=c(t)?w(t.length):[];return ie(t,function(t,e,n){o[++i]=r(t,e,n)}),o}function Oe(e){var n=Zn(e);return 1==n.length&&n[0][2]?cr(n[0][0],n[0][1]):function(t){return t===e||Te(t,e,n)}}function Re(n,r){return or(n)&&lr(r)?cr(wr(n),r):function(t){var e=Hi(t,n);return e===qo&&e===r?Xi(t,n):we(r,e,3)}}function Ie(g,y,m,v,_){g!==y&&le(y,function(t,e){var n,r,i,o,s,a,u,l,c,h,p,f,d;_=_||new F,x(t)?(r=y,o=m,s=Ie,a=v,u=_,p=fr(n=g,i=e),f=fr(r,i),(d=u.get(f))?zt(n,i,d):(d=a?a(p,f,i+"",n,r,u):qo,(r=d===qo)&&(l=U(f),c=!l&&_i(f),h=!l&&!c&&Oi(f),d=f,l||c||h?d=U(p)?p:b(p)?C(p):c?cn(f,!(r=!1)):h?pn(f,!(r=!1)):[]:Ci(f)||mi(f)?mi(d=p)?d=Li(p):x(p)&&!xi(p)||(d=nr(f)):r=!1),r&&(u.set(f,d),s(d,f,o,a,u),u.delete(f)),zt(n,i,d))):(l=v?v(fr(g,e),t,e+"",g,y,_):qo,zt(g,e,l=l===qo?t:l))},O)}function Be(t,e){var n=t.length;if(n)return ir(e+=e<0?n:0,n)?t[e]:qo}function De(t,r,c){r=r.length?ls(r,function(e){return U(e)?function(t){return de(t,1===e.length?e[0]:e)}:e}):[R];var i=-1;r=ls(r,ps(h()));var e=Me(t,function(e,t,n){return{criteria:ls(r,function(t){return t(e)}),index:++i,value:e}}),t=function(t,e){for(var n=c,r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var u,l=fn(i[r],o[r]);if(l)return a<=r?l:(u=n[r],l*("desc"==u?-1:1))}return t.index-e.index},n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function ke(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=de(t,s);n(a,s)&&Ge(o,sn(s,t),a)}return o}function Le(t,e,n,r){var i=r?Ua:hs,o=-1,s=e.length,a=t;for(t===e&&(e=C(e)),n&&(a=ls(t,ps(n)));++o<s;)for(var u=0,l=e[o],c=n?n(l):l;-1<(u=i(a,c,u,r));)a!==t&&ot.call(a,u,1),ot.call(t,u,1);return t}function Fe(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i,o=e[n];n!=r&&o===i||(ir(i=o)?ot.call(t,o,1):Ze(t,o))}}function Ne(t,e){return t+dt(xt()*(e-t+1))}function je(t,e){var n="";if(!(!t||e<1||Wo<e))for(;e%2&&(n+=t),(e=dt(e/2))&&(t+=t),e;);return n}function s(t,e){return yr(hr(t,e,R),t+"")}function Ue(t){return Ht(no(t))}function qe(t,e){t=no(t);return _r(t,te(e,0,t.length))}function Ge(t,e,n,r){if(x(t))for(var i=-1,o=(e=sn(e,t)).length,s=o-1,a=t;null!=a&&++i<o;){var u,l=wr(e[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;Yt(a,l,c=i!=s&&(u=a[l],(c=r?r(u,l,a):qo)===qo)?x(u)?u:ir(e[i+1])?[]:{}:c),a=a[l]}return t}var We=At?function(t,e){return At.set(t,e),t}:R,e=lt?function(t,e){return lt(t,"toString",{configurable:!0,enumerable:!1,value:mo(e),writable:!0})}:R;function He(t){return _r(no(t))}function a(t,e,n){for(var r=-1,i=t.length,o=((n=i<n?i:n)<0&&(n+=i),i=n<(e=e<0?i<-e?0:i+e:e)?0:n-e>>>0,e>>>=0,w(i));++r<i;)o[r]=t[r+e];return o}function Xe(t,r){var i;return ie(t,function(t,e,n){return!(i=r(t,e,n))}),!!i}function Ve(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!_(s)&&(n?s<=e:s<e)?r=1+o:i=o}return i}return ze(t,e,R,n)}function ze(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=n(e))!=e,a=null===e,u=_(e),l=e===qo;i<o;){var c=dt((i+o)/2),h=n(t[c]),p=h!==qo,f=null===h,d=h==h,g=_(h),d=s?r||d:l?d&&(r||p):a?d&&p&&(r||!f):u?d&&p&&!f&&(r||!g):!f&&!g&&(r?h<=e:h<e);d?i=c+1:o=c}return S(o,4294967294)}function Ye(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s,a=t[n],u=e?e(a):a;n&&j(u,s)||(s=u,o[i++]=0===a?0:a)}return o}function Ke(t){return"number"==typeof t?t:_(t)?bs:+t}function l(t){var e;return"string"==typeof t?t:U(t)?ls(t,l)+"":_(t)?kt?kt.call(t):"":"0"==(e=t+"")&&1/t==-1/0?"-0":e}function $e(t,e,n){var r=-1,i=Ba,o=t.length,s=!0,a=[],u=a;if(n)s=!1,i=Da;else if(200<=o){var l=e?null:Fn(t);if(l)return ru(l);s=!1,i=Ka,u=new Gt}else u=e?[]:a;t:for(;++r<o;){var c=t[r],h=e?e(c):c,c=n||0!==c?c:0;if(s&&h==h){for(var p=u.length;p--;)if(u[p]===h)continue t;e&&u.push(h),a.push(c)}else i(u,h,n)||(u!==a&&u.push(h),a.push(c))}return a}function Ze(t,e){return null==(t=pr(t,e=sn(e,t)))||delete t[wr(r(e))]}function Je(t,e,n,r){return Ge(t,e,n(de(t,e)),r)}function Qe(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?a(t,r?0:o,r?o+1:i):a(t,r?o+1:0,r?i:o)}function tn(t,e){var n=t;return ka(e,function(t,e){return e.func.apply(e.thisArg,cs([t],e.args))},n=t instanceof m?t.value():n)}function en(t,e,n){var r=t.length;if(r<2)return r?$e(t[0]):[];for(var i=-1,o=w(r);++i<r;)for(var s=t[i],a=-1;++a<r;)a!=i&&(o[i]=re(o[i]||s,t[a],e,n));return $e(u(o,1),e,n)}function nn(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;){var a=r<o?e[r]:qo;n(s,t[r],a)}return s}function rn(t){return b(t)?t:[]}function on(t){return"function"==typeof t?t:R}function sn(t,e){return U(t)?t:or(t,e)?[t]:xr(f(t))}var an=s;function un(t,e,n){var r=t.length;return n=n===qo?r:n,!e&&r<=n?t:a(t,e,n)}var ln=ct||function(t){return os.clearTimeout(t)};function cn(t,e){return e?t.slice():(e=t.length,e=et?et(e):new t.constructor(e),t.copy(e),e)}function hn(t){var e=new t.constructor(t.byteLength);return new tt(e).set(new tt(t)),e}function pn(t,e){e=e?hn(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function fn(t,e){if(t!==e){var n=t!==qo,r=null===t,i=t==t,o=_(t),s=e!==qo,a=null===e,u=e==e,l=_(e);if(!a&&!l&&!o&&e<t||o&&s&&u&&!a&&!l||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!u)return-1}return 0}function dn(t,e,n,r){for(var i=-1,o=t.length,s=n.length,a=-1,u=e.length,l=E(o-s,0),c=w(u+l),h=!r;++a<u;)c[a]=e[a];for(;++i<s;)(h||i<o)&&(c[n[i]]=t[i]);for(;l--;)c[a++]=t[i++];return c}function gn(t,e,n,r){for(var i=-1,o=t.length,s=-1,a=n.length,u=-1,l=e.length,c=E(o-a,0),h=w(c+l),p=!r;++i<c;)h[i]=t[i];for(var f=i;++u<l;)h[f+u]=e[u];for(;++s<a;)(p||i<o)&&(h[f+n[s]]=t[i++]);return h}function C(t,e){var n=-1,r=t.length;for(e=e||w(r);++n<r;)e[n]=t[n];return e}function yn(t,e,n,r){for(var i=!n,o=(n=n||{},-1),s=e.length;++o<s;){var a=e[o],u=r?r(n[a],t[a],a,n,t):qo;(i?Jt:Yt)(n,a,u=u===qo?t[a]:u)}return n}function mn(i,o){return function(t,e){var n=U(t)?Oa:$t,r=o?o():{};return n(t,i,h(e,2),r)}}function vn(a){return s(function(t,e){var n=-1,r=e.length,i=1<r?e[r-1]:qo,o=2<r?e[2]:qo,i=3<a.length&&"function"==typeof i?(r--,i):qo;for(o&&p(e[0],e[1],o)&&(i=r<3?qo:i,r=1),t=g(t);++n<r;){var s=e[n];s&&a(t,s,n,i)}return t})}function _n(o,s){return function(t,e){if(null!=t){if(!c(t))return o(t,e);for(var n=t.length,r=s?n:-1,i=g(t);(s?r--:++r<n)&&!1!==e(i[r],r,i););}return t}}function bn(u){return function(t,e,n){for(var r=-1,i=g(t),o=n(t),s=o.length;s--;){var a=o[u?s:++r];if(!1===e(i[a],a,i))break}return t}}function xn(r){return function(t){var e=fs(t=f(t))?ys(t):qo,n=e?e[0]:t.charAt(0),e=e?un(e,1).join(""):t.slice(1);return n[r]()+e}}function wn(e){return function(t){return ka(fo(oo(t).replace(ga,"")),e,"")}}function Tn(r){return function(){var t=arguments;switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3]);case 5:return new r(t[0],t[1],t[2],t[3],t[4]);case 6:return new r(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new r(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=Lt(r.prototype),n=r.apply(e,t);return x(n)?n:e}}function En(o,s,a){var u=Tn(o);return function t(){for(var e=arguments.length,n=w(e),r=e,i=Kn(t);r--;)n[r]=arguments[r];i=e<3&&n[0]!==i&&n[e-1]!==i?[]:ds(n,i);return(e-=i.length)<a?kn(o,s,An,t.placeholder,qo,n,i,qo,qo,a-e):ss(this&&this!==os&&this instanceof t?u:o,this,n)}}function Sn(o){return function(t,e,n){var r,i=g(t),e=(c(t)||(r=h(e,3),t=M(t),e=function(t){return r(i[t],t,i)}),o(t,e,n));return-1<e?i[r?t[e]:e]:qo}}function Cn(u){return Hn(function(i){var o=i.length,t=o,e=y.prototype.thru;for(u&&i.reverse();t--;){var n=i[t];if("function"!=typeof n)throw new T(Go);e&&!a&&"wrapper"==Yn(n)&&(a=new y([],!0))}for(t=a?t:o;++t<o;)var r=Yn(n=i[t]),s="wrapper"==r?zn(n):qo,a=s&&sr(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?a[Yn(s[0])].apply(a,s[3]):1==n.length&&sr(n)?a[r]():a.thru(n);return function(){var t=arguments,e=t[0];if(a&&1==t.length&&U(e))return a.plant(e).value();for(var n=0,r=o?i[n].apply(this,t):e;++n<o;)r=i[n].call(this,r);return r}})}function An(s,a,u,l,c,h,p,f,d,g){var y=128&a,m=1&a,v=2&a,_=24&a,b=512&a,x=v?qo:Tn(s);return function t(){for(var e,n,r,i=w(r=arguments.length),o=r;o--;)i[o]=arguments[o];return _&&(n=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(i,e=Kn(t))),l&&(i=dn(i,l,c,_)),h&&(i=gn(i,h,p,_)),r-=n,_&&r<g?(n=ds(i,e),kn(s,a,An,t.placeholder,u,i,n,f,d,g-r)):(e=m?u:this,n=v?e[s]:s,r=i.length,f?i=function(t,e){for(var n=t.length,r=S(e.length,n),i=C(t);r--;){var o=e[r];t[r]=ir(o,n)?i[o]:qo}return t}(i,f):b&&1<r&&i.reverse(),y&&d<r&&(i.length=d),(n=this&&this!==os&&this instanceof t?x||Tn(n):n).apply(e,i))}}function Pn(n,s){return function(t,e){return t=t,r=n,i=s(e),o={},he(t,function(t,e,n){r(o,i(t),e,n)}),o;var r,i,o}}function Mn(r,i){return function(t,e){var n;if(t===qo&&e===qo)return i;if(t!==qo&&(n=t),e!==qo){if(n===qo)return e;e=("string"==typeof t||"string"==typeof e?(t=l(t),l):(t=Ke(t),Ke))(e),n=r(t,e)}return n}}function On(r){return Hn(function(t){return t=ls(t,ps(h())),s(function(e){var n=this;return r(t,function(t){return ss(t,n,e)})})})}function Rn(t,e){var n=(e=e===qo?" ":l(e)).length;return n<2?n?je(e,t):e:(n=je(e,ft(t/gs(e))),fs(e)?un(ys(n),0,t).join(""):n.slice(0,t))}function In(a,t,u,l){var c=1&t,h=Tn(a);return function t(){for(var e=-1,n=arguments.length,r=-1,i=l.length,o=w(i+n),s=this&&this!==os&&this instanceof t?h:a;++r<i;)o[r]=l[r];for(;n--;)o[r++]=arguments[++e];return ss(s,c?u:this,o)}}function Bn(l){return function(t,e,n){n&&"number"!=typeof n&&p(t,e,n)&&(e=n=qo),t=Di(t),e===qo?(e=t,t=0):e=Di(e),n=n===qo?t<e?1:-1:Di(n);for(var r=t,i=n,o=l,s=-1,a=E(ft((e-r)/(i||1)),0),u=w(a);a--;)u[o?a:++s]=r,r+=i;return u}}function Dn(n){return function(t,e){return"string"==typeof t&&"string"==typeof e||(t=P(t),e=P(e)),n(t,e)}}function kn(t,e,n,r,i,o,s,a,u,l){var c=8&e,i=(4&(e=(e|(c?32:64))&~(c?64:32))||(e&=-4),[t,e,i,c?o:qo,c?s:qo,c?qo:o,c?qo:s,a,u,l]),o=n.apply(qo,i);return sr(t)&&dr(o,i),o.placeholder=r,mr(o,t,e)}function Ln(t){var r=D[t];return function(t,e){var n;return t=P(t),(e=null==e?0:S(A(e),292))&&yt(t)?(n=(f(t)+"e").split("e"),+((n=(f(r(n[0]+"e"+(+n[1]+e)))+"e").split("e"))[0]+"e"+(+n[1]-e))):r(t)}}var Fn=St&&1/ru(new St([,-0]))[1]==1/0?function(t){return new St(t)}:Eo;function Nn(o){return function(t){var e,n,r,i=N(t);return i==Yo?eu(t):i==Jo?(i=t,e=-1,n=Array(i.size),i.forEach(function(t){n[++e]=[t,t]}),n):ls(o(r=t),function(t){return[t,r[t]]})}}function jn(t,e,n,r,i,o,s,a){var u,l,c,h,p,f,d,g,y,m,v,_,b,x=2&e;if(x||"function"==typeof t)return(u=r?r.length:0)||(e&=-97,r=i=qo),s=s===qo?s:E(A(s),0),a=a===qo?a:A(a),u-=i?i.length:0,64&e&&(c=r,h=i,r=i=qo),l=x?qo:zn(t),c=[t,e,n,r,i,c,h,o,s,a],l&&(h=l,s=(o=c)[1],f=h[1],g=(d=s|f)<131,y=128==f&&8==s||128==f&&256==s&&o[7].length<=h[8]||384==f&&h[7].length<=h[8]&&8==s,g||y)&&(1&f&&(o[2]=h[2],d|=1&s?0:4),(g=h[3])&&(p=o[3],o[3]=p?dn(p,g,h[4]):g,o[4]=p?ds(o[3],_s):h[4]),(g=h[5])&&(p=o[5],o[5]=p?gn(p,g,h[6]):g,o[6]=p?ds(o[5],_s):h[6]),(g=h[7])&&(o[7]=g),128&f&&(o[8]=null==o[8]?h[8]:S(o[8],h[8])),null==o[9]&&(o[9]=h[9]),o[0]=h[0],o[1]=d),t=c[0],e=c[1],n=c[2],r=c[3],i=c[4],!(a=c[9]=c[9]===qo?x?0:t.length:E(c[9]-u,0))&&24&e&&(e&=-25),y=e&&1!=e?8==e||16==e?En(t,e,a):32!=e&&33!=e||i.length?An.apply(qo,c):In(t,e,n,r):(v=n,_=1&e,b=Tn(m=t),function t(){return(this&&this!==os&&this instanceof t?b:m).apply(_?v:this,arguments)}),mr((l?We:dr)(y,c),t,e);throw new T(Go)}function Un(t,e,n,r){return t===qo||j(t,X[n])&&!L.call(r,n)?e:t}function qn(t,e,n,r,i,o){return x(t)&&x(e)&&(o.set(e,t),Ie(t,e,qo,qn,o),o.delete(e)),t}function Gn(t){return Ci(t)?qo:t}function Wn(t,e,n,r,i,o){var s=1&n,a=t.length,u=e.length;if(a!=u&&!(s&&a<u))return!1;var u=o.get(t),l=o.get(e);if(u&&l)return u==e&&l==t;var c=-1,h=!0,p=2&n?new Gt:qo;for(o.set(t,e),o.set(e,t);++c<a;){var f,d=t[c],g=e[c];if((f=r?s?r(g,d,c,e,t,o):r(d,g,c,t,e,o):f)!==qo){if(f)continue;h=!1;break}if(p){if(!Fa(e,function(t,e){return!Ka(p,e)&&(d===t||i(d,t,n,r,o))&&p.push(e)})){h=!1;break}}else if(d!==g&&!i(d,g,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function Hn(t){return yr(hr(t,qo,Ar),t+"")}function Xn(t){return ge(t,M,Qn)}function Vn(t){return ge(t,O,tr)}var zn=At?function(t){return At.get(t)}:Eo;function Yn(t){for(var e=t.name+"",n=Pt[e],r=L.call(Pt,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Kn(t){return(L.call(d,"placeholder")?d:t).placeholder}function h(){var t=(t=d.iteratee||bo)===bo?Se:t;return arguments.length?t(arguments[0],arguments[1]):t}function $n(t,e){var n,r,t=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?t["string"==typeof e?"string":"hash"]:t.map}function Zn(t){for(var e=M(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,lr(i)]}return e}function Jn(t,e){e=e;t=null==(t=t)?qo:t[e];return Ee(t)?t:qo}var Qn=gt?function(e){return null==e?[]:(e=g(e),us(gt(e),function(t){return it.call(e,t)}))}:Ro,tr=gt?function(t){for(var e=[];t;)cs(e,Qn(t)),t=nt(t);return e}:Ro,N=n;function er(t,e,n){for(var r=-1,i=(e=sn(e,t)).length,o=!1;++r<i;){var s=wr(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ti(i)&&ir(s,i)&&(U(t)||mi(t))}function nr(t){return"function"!=typeof t.constructor||ur(t)?{}:Lt(nt(t))}function rr(t){return U(t)||mi(t)||!!(st&&t&&t[st])}function ir(t,e){var n=typeof t;return!!(e=null==e?Wo:e)&&("number"==n||"symbol"!=n&&ha.test(t))&&-1<t&&t%1==0&&t<e}function p(t,e,n){var r;if(x(n))return("number"==(r=typeof e)?c(n)&&ir(e,n.length):"string"==r&&e in n)&&j(n[e],t)}function or(t,e){var n;if(!U(t))return"number"==(n=typeof t)||"symbol"==n||"boolean"==n||null==t||_(t)||Ys.test(t)||!zs.test(t)||null!=e&&t in g(e)}function sr(t){var e=Yn(t),n=d[e];return"function"==typeof n&&e in m.prototype&&(t===n||(e=zn(n))&&t===e[0])}(o&&N(new o(new ArrayBuffer(1)))!=ns||Tt&&N(new Tt)!=Yo||Et&&N(Et.resolve())!=Cs||St&&N(new St)!=Jo||t&&N(new t)!=ts)&&(N=function(t){var e=n(t),t=e==$o?t.constructor:qo,t=t?Tr(t):"";if(t)switch(t){case Mt:return ns;case Ot:return Yo;case Rt:return Cs;case It:return Jo;case Bt:return ts}return e});var ar=V?xi:Io;function ur(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||X)}function lr(t){return t==t&&!x(t)}function cr(e,n){return function(t){return null!=t&&t[e]===n&&(n!==qo||e in g(t))}}function hr(o,s,a){return s=E(s===qo?o.length-1:s,0),function(){for(var t=arguments,e=-1,n=E(t.length-s,0),r=w(n);++e<n;)r[e]=t[s+e];for(var e=-1,i=w(s+1);++e<s;)i[e]=t[e];return i[s]=a(r),ss(o,this,i)}}function pr(t,e){return e.length<2?t:de(t,a(e,0,-1))}function fr(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var dr=vr(We),gr=pt||function(t,e){return os.setTimeout(t,e)},yr=vr(e);function mr(t,e,n){var r,i,o,e=e+"";return yr(t,(i=(e=(e=t=e).match(ta))?e[1].split(ea):[],o=n,as(xs,function(t){var e="_."+t[0];o&t[1]&&!Ba(i,e)&&i.push(e)}),e=i.sort(),(n=e.length)?(e[r=n-1]=(1<n?"& ":"")+e[r],e=e.join(2<n?", ":" "),t.replace(Qs,"{\n/* [wrapped with "+e+"] */\n")):t))}function vr(n){var r=0,i=0;return function(){var t=_t(),e=16-(t-i);if(i=t,0<e){if(800<=++r)return arguments[0]}else r=0;return n.apply(qo,arguments)}}function _r(t,e){var n=-1,r=t.length,i=r-1;for(e=e===qo?r:e;++n<e;){var o=Ne(n,i),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}br=(ct=ci(ct=function(t){var i=[];return 46===t.charCodeAt(0)&&i.push(""),t.replace(Ks,function(t,e,n,r){i.push(n?r.replace(ia,"$1"):e||t)}),i},function(t){return 500===br.size&&br.clear(),t})).cache;var br,xr=ct;function wr(t){var e;return"string"==typeof t||_(t)?t:"0"==(e=t+"")&&1/t==-1/0?"-0":e}function Tr(t){if(null!=t){try{return z.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Er(t){var e;return t instanceof m?t.clone():((e=new y(t.__wrapped__,t.__chain__)).__actions__=C(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e)}o=s(function(t,e){return b(t)?re(t,u(e,1,b,!0)):[]}),Et=s(function(t,e){var n=r(e);return b(n)&&(n=qo),b(t)?re(t,u(e,1,b,!0),h(n,2)):[]}),t=s(function(t,e){var n=r(e);return b(n)&&(n=qo),b(t)?re(t,u(e,1,b,!0),qo,n):[]});function Sr(t,e,n){var r=null==t?0:t.length;return r?((n=null==n?0:A(n))<0&&(n=E(r+n,0)),ja(t,h(e,3),n)):-1}function Cr(t,e,n){var r,i=null==t?0:t.length;return i?(r=i-1,n!==qo&&(r=A(n),r=n<0?E(i+r,0):S(r,i-1)),ja(t,h(e,3),r,!0)):-1}function Ar(t){return(null==t?0:t.length)?u(t,1):[]}function Pr(t){return t&&t.length?t[0]:qo}V=s(function(t){var e=ls(t,rn);return e.length&&e[0]===t[0]?_e(e):[]}),pt=s(function(t){var e=r(t),n=ls(t,rn);return e===r(n)?e=qo:n.pop(),n.length&&n[0]===t[0]?_e(n,h(e,2)):[]}),e=s(function(t){var e=r(t),n=ls(t,rn);return(e="function"==typeof e?e:qo)&&n.pop(),n.length&&n[0]===t[0]?_e(n,qo,e):[]});function r(t){var e=null==t?0:t.length;return e?t[e-1]:qo}ct=s(Mr);function Mr(t,e){return t&&t.length&&e&&e.length?Le(t,e):t}var Or=Hn(function(t,e){var n=null==t?0:t.length,r=Qt(t,e);return Fe(t,ls(e,function(t){return ir(t,n)?+t:t}).sort(fn)),r});function Rr(t){return null==t?t:wt.call(t)}var Ir=s(function(t){return $e(u(t,1,b,!0))}),Br=s(function(t){var e=r(t);return b(e)&&(e=qo),$e(u(t,1,b,!0),h(e,2))}),Dr=s(function(t){var e="function"==typeof(e=r(t))?e:qo;return $e(u(t,1,b,!0),qo,e)});function kr(e){var n;return e&&e.length?(n=0,e=us(e,function(t){return b(t)&&(n=E(t.length,n),1)}),Va(n,function(t){return ls(e,Wa(t))})):[]}function Lr(t,e){return t&&t.length?(t=kr(t),null==e?t:ls(t,function(t){return ss(e,qo,t)})):[]}var Fr=s(function(t,e){return b(t)?re(t,e):[]}),Nr=s(function(t){return en(us(t,b))}),jr=s(function(t){var e=r(t);return b(e)&&(e=qo),en(us(t,b),h(e,2))}),Ur=s(function(t){var e="function"==typeof(e=r(t))?e:qo;return en(us(t,b),qo,e)}),qr=s(kr);var Gr=s(function(t){var e=t.length,e="function"==typeof(e=1<e?t[e-1]:qo)?(t.pop(),e):qo;return Lr(t,e)});function Wr(t){t=d(t);return t.__chain__=!0,t}function Hr(t,e){return e(t)}var Xr=Hn(function(e){function t(t){return Qt(t,e)}var n=e.length,r=n?e[0]:0,i=this.__wrapped__;return!(1<n||this.__actions__.length)&&i instanceof m&&ir(r)?((i=i.slice(r,+r+(n?1:0))).__actions__.push({func:Hr,args:[t],thisArg:qo}),new y(i,this.__chain__).thru(function(t){return n&&!t.length&&t.push(qo),t})):this.thru(t)});var Vr=mn(function(t,e,n){L.call(t,n)?++t[n]:Jt(t,n,1)});var zr=Sn(Sr),Yr=Sn(Cr);function Kr(t,e){return(U(t)?as:ie)(t,h(e,3))}function $r(t,e){return(U(t)?Ra:oe)(t,h(e,3))}var Zr=mn(function(t,e,n){L.call(t,n)?t[n].push(e):Jt(t,n,[e])});var Jr=s(function(t,e,n){var r=-1,i="function"==typeof e,o=c(t)?w(t.length):[];return ie(t,function(t){o[++r]=i?ss(e,t,n):be(t,e,n)}),o}),Qr=mn(function(t,e,n){Jt(t,n,e)});function ti(t,e){return(U(t)?ls:Me)(t,h(e,3))}var ei=mn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var ni=s(function(t,e){var n;return null==t?[]:(1<(n=e.length)&&p(t,e[0],e[1])?e=[]:2<n&&p(e[0],e[1],e[2])&&(e=[e[0]]),De(t,u(e,1),[]))}),ri=ht||function(){return os.Date.now()};function ii(t,e,n){return e=n?qo:e,e=t&&null==e?t.length:e,jn(t,128,qo,qo,qo,qo,e)}function oi(t,e){var n;if("function"!=typeof e)throw new T(Go);return t=A(t),function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=qo),n}}var si=s(function(t,e,n){var r,i=1;return n.length&&(r=ds(n,Kn(si)),i|=32),jn(t,i,e,n,r)}),ai=s(function(t,e,n){var r,i=3;return n.length&&(r=ds(n,Kn(ai)),i|=32),jn(e,i,t,n,r)});function ui(r,n,t){var i,o,s,a,u,l,c=0,h=!1,p=!1,e=!0;if("function"!=typeof r)throw new T(Go);function f(t){var e=i,n=o;return i=o=qo,c=t,a=r.apply(n,e)}function d(t){var e=t-l;return l===qo||n<=e||e<0||p&&s<=t-c}function g(){var t,e=ri();if(d(e))return y(e);u=gr(g,(t=n-((e=e)-l),p?S(t,s-(e-c)):t))}function y(t){return u=qo,e&&i?f(t):(i=o=qo,a)}function m(){var t=ri(),e=d(t);if(i=arguments,o=this,l=t,e){if(u===qo)return c=t=l,u=gr(g,n),h?f(t):a;if(p)return ln(u),u=gr(g,n),f(l)}return u===qo&&(u=gr(g,n)),a}return n=P(n)||0,x(t)&&(h=!!t.leading,p="maxWait"in t,s=p?E(P(t.maxWait)||0,n):s,e="trailing"in t?!!t.trailing:e),m.cancel=function(){u!==qo&&ln(u),c=0,i=l=o=u=qo},m.flush=function(){return u===qo?a:y(ri())},m}var ht=s(function(t,e){return ne(t,1,e)}),li=s(function(t,e,n){return ne(t,P(e)||0,n)});function ci(r,i){if("function"!=typeof r||null!=i&&"function"!=typeof i)throw new T(Go);function o(){var t=arguments,e=i?i.apply(this,t):t[0],n=o.cache;return n.has(e)?n.get(e):(t=r.apply(this,t),o.cache=n.set(e,t)||n,t)}return o.cache=new(ci.Cache||qt),o}function hi(e){if("function"!=typeof e)throw new T(Go);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ci.Cache=qt;var an=an(function(r,i){var o=(i=1==i.length&&U(i[0])?ls(i[0],ps(h())):ls(u(i,1),ps(h()))).length;return s(function(t){for(var e=-1,n=S(t.length,o);++e<n;)t[e]=i[e].call(this,t[e]);return ss(r,this,t)})}),pi=s(function(t,e){var n=ds(e,Kn(pi));return jn(t,32,qo,e,n)}),fi=s(function(t,e){var n=ds(e,Kn(fi));return jn(t,64,qo,e,n)}),di=Hn(function(t,e){return jn(t,256,qo,qo,qo,e)});function j(t,e){return t===e||t!=t&&e!=e}var gi=Dn(ye),yi=Dn(function(t,e){return e<=t}),mi=xe(function(){return arguments}())?xe:function(t){return q(t)&&L.call(t,"callee")&&!it.call(t,"callee")},U=w.isArray,vi=Ea?ps(Ea):function(t){return q(t)&&n(t)==es};function c(t){return null!=t&&Ti(t.length)&&!xi(t)}function b(t){return q(t)&&c(t)}var _i=H||Io,H=Sa?ps(Sa):function(t){return q(t)&&n(t)==zo};function bi(t){var e;return!!q(t)&&((e=n(t))==Ts||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Ci(t))}function xi(t){return!!x(t)&&((t=n(t))==Es||t==Ss||"[object AsyncFunction]"==t||"[object Proxy]"==t)}function wi(t){return"number"==typeof t&&t==A(t)}function Ti(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=Wo}function x(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function q(t){return null!=t&&"object"==typeof t}var Ei=Ca?ps(Ca):function(t){return q(t)&&N(t)==Yo};function Si(t){return"number"==typeof t||q(t)&&n(t)==Ko}function Ci(t){return!(!q(t)||n(t)!=$o)&&(null===(t=nt(t))||"function"==typeof(t=L.call(t,"constructor")&&t.constructor)&&t instanceof t&&z.call(t)==Z)}var Ai=Aa?ps(Aa):function(t){return q(t)&&n(t)==Zo};var Pi=Pa?ps(Pa):function(t){return q(t)&&N(t)==Jo};function Mi(t){return"string"==typeof t||!U(t)&&q(t)&&n(t)==Qo}function _(t){return"symbol"==typeof t||q(t)&&n(t)==As}var Oi=Ma?ps(Ma):function(t){return q(t)&&Ti(t.length)&&!!rs[n(t)]};var Ri=Dn(Pe),Ii=Dn(function(t,e){return t<=e});function Bi(t){if(!t)return[];if(c(t))return(Mi(t)?ys:C)(t);if(at&&t[at]){for(var e,n=t[at](),r=[];!(e=n.next()).done;)r.push(e.value);return r}var i=N(t);return(i==Yo?eu:i==Jo?ru:no)(t)}function Di(t){return t?(t=P(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function A(t){var t=Di(t),e=t%1;return t==t?e?t-e:t:0}function ki(t){return t?te(A(t),0,Ho):0}function P(t){if("number"==typeof t)return t;if(_(t))return bs;if("string"!=typeof(t=x(t)?x(e="function"==typeof t.valueOf?t.valueOf():t)?e+"":e:t))return 0===t?t:+t;t=za(t);var e=ua.test(t);return e||ca.test(t)?wa(t.slice(2),e?2:8):aa.test(t)?bs:+t}function Li(t){return yn(t,O(t))}function f(t){return null==t?"":l(t)}var Fi=vn(function(t,e){if(ur(e)||c(e))yn(e,M(e),t);else for(var n in e)L.call(e,n)&&Yt(t,n,e[n])}),Ni=vn(function(t,e){yn(e,O(e),t)}),ji=vn(function(t,e,n,r){yn(e,O(e),t,r)}),Ui=vn(function(t,e,n,r){yn(e,M(e),t,r)}),qi=Hn(Qt);var Gi=s(function(t,e){t=g(t);var n=-1,r=e.length,i=2<r?e[2]:qo;for(i&&p(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],s=O(o),a=-1,u=s.length;++a<u;){var l=s[a],c=t[l];(c===qo||j(c,X[l])&&!L.call(t,l))&&(t[l]=o[l])}return t}),Wi=s(function(t){return t.push(qo,qn),ss($i,qo,t)});function Hi(t,e,n){t=null==t?qo:de(t,e);return t===qo?n:t}function Xi(t,e){return null!=t&&er(t,e,ve)}var Vi=Pn(function(t,e,n){t[e=null!=e&&"function"!=typeof e.toString?$.call(e):e]=n},mo(R)),zi=Pn(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=$.call(e)),L.call(t,e)?t[e].push(n):t[e]=[n]},h),Yi=s(be);function M(t){return(c(t)?Wt:Ce)(t)}function O(t){return c(t)?Wt(t,!0):Ae(t)}var Ki=vn(function(t,e,n){Ie(t,e,n)}),$i=vn(function(t,e,n,r){Ie(t,e,n,r)}),Zi=Hn(function(e,t){var n={};if(null!=e)for(var r=!1,i=(t=ls(t,function(t){return t=sn(t,e),r=r||1<t.length,t}),yn(e,Vn(e),n),r&&(n=v(n,7,Gn)),t.length);i--;)Ze(n,t[i]);return n});var Ji=Hn(function(t,e){return null==t?{}:ke(n=t,e,function(t,e){return Xi(n,e)});var n});function Qi(t,n){var e;return null==t?{}:(e=ls(Vn(t),function(t){return[t]}),n=h(n),ke(t,e,function(t,e){return n(t,e[0])}))}var to=Nn(M),eo=Nn(O);function no(t){return null==t?[]:Ya(t,M(t))}var ro=wn(function(t,e,n){return e=e.toLowerCase(),t+(n?io(e):e)});function io(t){return po(f(t).toLowerCase())}function oo(t){return(t=f(t))&&t.replace(pa,Ja).replace(ya,"")}var so=wn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),ao=wn(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),uo=xn("toLowerCase");var lo=wn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var co=wn(function(t,e,n){return t+(n?" ":"")+po(e)});var ho=wn(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),po=xn("toUpperCase");function fo(t,e,n){return t=f(t),(e=n?qo:e)===qo?(n=t,va.test(n)?t.match(ma)||[]:t.match(na)||[]):t.match(e)||[]}var go=s(function(t,e){try{return ss(t,qo,e)}catch(t){return bi(t)?t:new I(t)}}),yo=Hn(function(e,t){return as(t,function(t){t=wr(t),Jt(e,t,si(e[t],e))}),e});function mo(t){return function(){return t}}var vo=Cn(),_o=Cn(!0);function R(t){return t}function bo(t){return Se("function"==typeof t?t:v(t,1))}var xo=s(function(e,n){return function(t){return be(t,e,n)}}),wo=s(function(e,n){return function(t){return be(e,t,n)}});function To(r,e,t){var n=M(e),i=fe(e,n),o=(null!=t||x(e)&&(i.length||!n.length)||(t=e,e=r,r=this,i=fe(e,M(e))),!(x(t)&&"chain"in t&&!t.chain)),s=xi(r);return as(i,function(t){var n=e[t];r[t]=n,s&&(r.prototype[t]=function(){var t,e=this.__chain__;return o||e?(((t=r(this.__wrapped__)).__actions__=C(this.__actions__)).push({func:n,args:arguments,thisArg:r}),t.__chain__=e,t):n.apply(r,cs([this.value()],arguments))})}),r}function Eo(){}var So=On(ls),Co=On(Ia),Ao=On(Fa);function Po(t){return or(t)?Wa(wr(t)):(e=t,function(t){return de(t,e)});var e}var Mo=Bn(),Oo=Bn(!0);function Ro(){return[]}function Io(){return!1}var Bo=Mn(function(t,e){return t+e},0),Do=Ln("ceil"),ko=Mn(function(t,e){return t/e},1),Lo=Ln("floor");var Fo,No=Mn(function(t,e){return t*e},1),jo=Ln("round"),Uo=Mn(function(t,e){return t-e},0);return d.after=function(t,e){if("function"!=typeof e)throw new T(Go);return t=A(t),function(){if(--t<1)return e.apply(this,arguments)}},d.ary=ii,d.assign=Fi,d.assignIn=Ni,d.assignInWith=ji,d.assignWith=Ui,d.at=qi,d.before=oi,d.bind=si,d.bindAll=yo,d.bindKey=ai,d.castArray=function(){var t;return arguments.length?U(t=arguments[0])?t:[t]:[]},d.chain=Wr,d.chunk=function(t,e,n){e=(n?p(t,e,n):e===qo)?1:E(A(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,s=w(ft(r/e));i<r;)s[o++]=a(t,i,i+=e);return s},d.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},d.concat=function(){var t=arguments.length;if(!t)return[];for(var e=w(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return cs(U(n)?C(n):[n],u(e,1))},d.cond=function(r){var i=null==r?0:r.length,e=h();return r=i?ls(r,function(t){if("function"!=typeof t[1])throw new T(Go);return[e(t[0]),t[1]]}):[],s(function(t){for(var e=-1;++e<i;){var n=r[e];if(ss(n[0],this,t))return ss(n[1],this,t)}})},d.conforms=function(t){return e=v(t,1),n=M(e),function(t){return ee(t,e,n)};var e,n},d.constant=mo,d.countBy=Vr,d.create=function(t,e){return t=Lt(t),null==e?t:Zt(t,e)},d.curry=function t(e,n,r){e=jn(e,8,qo,qo,qo,qo,qo,n=r?qo:n);return e.placeholder=t.placeholder,e},d.curryRight=function t(e,n,r){e=jn(e,16,qo,qo,qo,qo,qo,n=r?qo:n);return e.placeholder=t.placeholder,e},d.debounce=ui,d.defaults=Gi,d.defaultsDeep=Wi,d.defer=ht,d.delay=li,d.difference=o,d.differenceBy=Et,d.differenceWith=t,d.drop=function(t,e,n){var r=null==t?0:t.length;return r?a(t,(e=n||e===qo?1:A(e))<0?0:e,r):[]},d.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?a(t,0,(e=r-(e=n||e===qo?1:A(e)))<0?0:e):[]},d.dropRightWhile=function(t,e){return t&&t.length?Qe(t,h(e,3),!0,!0):[]},d.dropWhile=function(t,e){return t&&t.length?Qe(t,h(e,3),!0):[]},d.fill=function(t,e,n,r){if(!(u=null==t?0:t.length))return[];n&&"number"!=typeof n&&p(t,e,n)&&(n=0,r=u);var i=t,o=e,s=n,a=r,u=i.length;for((s=A(s))<0&&(s=u<-s?0:u+s),(a=a===qo||u<a?u:A(a))<0&&(a+=u),a=a<s?0:ki(a);s<a;)i[s++]=o;return i},d.filter=function(t,e){return(U(t)?us:ue)(t,h(e,3))},d.flatMap=function(t,e){return u(ti(t,e),1)},d.flatMapDeep=function(t,e){return u(ti(t,e),1/0)},d.flatMapDepth=function(t,e,n){return n=n===qo?1:A(n),u(ti(t,e),n)},d.flatten=Ar,d.flattenDeep=function(t){return(null==t?0:t.length)?u(t,1/0):[]},d.flattenDepth=function(t,e){return(null==t?0:t.length)?u(t,e=e===qo?1:A(e)):[]},d.flip=function(t){return jn(t,512)},d.flow=vo,d.flowRight=_o,d.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},d.functions=function(t){return null==t?[]:fe(t,M(t))},d.functionsIn=function(t){return null==t?[]:fe(t,O(t))},d.groupBy=Zr,d.initial=function(t){return(null==t?0:t.length)?a(t,0,-1):[]},d.intersection=V,d.intersectionBy=pt,d.intersectionWith=e,d.invert=Vi,d.invertBy=zi,d.invokeMap=Jr,d.iteratee=bo,d.keyBy=Qr,d.keys=M,d.keysIn=O,d.map=ti,d.mapKeys=function(t,r){var i={};return r=h(r,3),he(t,function(t,e,n){Jt(i,r(t,e,n),t)}),i},d.mapValues=function(t,r){var i={};return r=h(r,3),he(t,function(t,e,n){Jt(i,e,r(t,e,n))}),i},d.matches=function(t){return Oe(v(t,1))},d.matchesProperty=function(t,e){return Re(t,v(e,1))},d.memoize=ci,d.merge=Ki,d.mergeWith=$i,d.method=xo,d.methodOf=wo,d.mixin=To,d.negate=hi,d.nthArg=function(e){return e=A(e),s(function(t){return Be(t,e)})},d.omit=Zi,d.omitBy=function(t,e){return Qi(t,hi(h(e)))},d.once=function(t){return oi(2,t)},d.orderBy=function(t,e,n,r){return null==t?[]:De(t,e=U(e)?e:null==e?[]:[e],n=U(n=r?qo:n)?n:null==n?[]:[n])},d.over=So,d.overArgs=an,d.overEvery=Co,d.overSome=Ao,d.partial=pi,d.partialRight=fi,d.partition=ei,d.pick=Ji,d.pickBy=Qi,d.property=Po,d.propertyOf=function(e){return function(t){return null==e?qo:de(e,t)}},d.pull=ct,d.pullAll=Mr,d.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Le(t,e,h(n,2)):t},d.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Le(t,e,qo,n):t},d.pullAt=Or,d.range=Mo,d.rangeRight=Oo,d.rearg=di,d.reject=function(t,e){return(U(t)?us:ue)(t,hi(h(e,3)))},d.remove=function(t,e){var n=[];if(t&&t.length){var r=-1,i=[],o=t.length;for(e=h(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}Fe(t,i)}return n},d.rest=function(t,e){if("function"!=typeof t)throw new T(Go);return s(t,e=e===qo?e:A(e))},d.reverse=Rr,d.sampleSize=function(t,e,n){return e=(n?p(t,e,n):e===qo)?1:A(e),(U(t)?Xt:qe)(t,e)},d.set=function(t,e,n){return null==t?t:Ge(t,e,n)},d.setWith=function(t,e,n,r){return r="function"==typeof r?r:qo,null==t?t:Ge(t,e,n,r)},d.shuffle=function(t){return(U(t)?Vt:He)(t)},d.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n=n&&"number"!=typeof n&&p(t,e,n)?(e=0,r):(e=null==e?0:A(e),n===qo?r:A(n)),a(t,e,n)):[]},d.sortBy=ni,d.sortedUniq=function(t){return t&&t.length?Ye(t):[]},d.sortedUniqBy=function(t,e){return t&&t.length?Ye(t,h(e,2)):[]},d.split=function(t,e,n){return n&&"number"!=typeof n&&p(t,e,n)&&(e=n=qo),(n=n===qo?Ho:n>>>0)?(t=f(t))&&("string"==typeof e||null!=e&&!Ai(e))&&!(e=l(e))&&fs(t)?un(ys(t),0,n):t.split(e,n):[]},d.spread=function(n,r){if("function"!=typeof n)throw new T(Go);return r=null==r?0:E(A(r),0),s(function(t){var e=t[r],t=un(t,0,r);return e&&cs(t,e),ss(n,this,t)})},d.tail=function(t){var e=null==t?0:t.length;return e?a(t,1,e):[]},d.take=function(t,e,n){return t&&t.length?a(t,0,(e=n||e===qo?1:A(e))<0?0:e):[]},d.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?a(t,(e=r-(e=n||e===qo?1:A(e)))<0?0:e,r):[]},d.takeRightWhile=function(t,e){return t&&t.length?Qe(t,h(e,3),!1,!0):[]},d.takeWhile=function(t,e){return t&&t.length?Qe(t,h(e,3)):[]},d.tap=function(t,e){return e(t),t},d.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new T(Go);return x(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ui(t,e,{leading:r,maxWait:e,trailing:i})},d.thru=Hr,d.toArray=Bi,d.toPairs=to,d.toPairsIn=eo,d.toPath=function(t){return U(t)?ls(t,wr):_(t)?[t]:C(xr(f(t)))},d.toPlainObject=Li,d.transform=function(t,r,i){var e,n=U(t),o=n||_i(t)||Oi(t);return r=h(r,4),null==i&&(e=t&&t.constructor,i=o?n?new e:[]:x(t)&&xi(e)?Lt(nt(t)):{}),(o?as:he)(t,function(t,e,n){return r(i,t,e,n)}),i},d.unary=function(t){return ii(t,1)},d.union=Ir,d.unionBy=Br,d.unionWith=Dr,d.uniq=function(t){return t&&t.length?$e(t):[]},d.uniqBy=function(t,e){return t&&t.length?$e(t,h(e,2)):[]},d.uniqWith=function(t,e){return e="function"==typeof e?e:qo,t&&t.length?$e(t,qo,e):[]},d.unset=function(t,e){return null==t||Ze(t,e)},d.unzip=kr,d.unzipWith=Lr,d.update=function(t,e,n){return null==t?t:Je(t,e,on(n))},d.updateWith=function(t,e,n,r){return r="function"==typeof r?r:qo,null==t?t:Je(t,e,on(n),r)},d.values=no,d.valuesIn=function(t){return null==t?[]:Ya(t,O(t))},d.without=Fr,d.words=fo,d.wrap=function(t,e){return pi(on(e),t)},d.xor=Nr,d.xorBy=jr,d.xorWith=Ur,d.zip=qr,d.zipObject=function(t,e){return nn(t||[],e||[],Yt)},d.zipObjectDeep=function(t,e){return nn(t||[],e||[],Ge)},d.zipWith=Gr,d.entries=to,d.entriesIn=eo,d.extend=Ni,d.extendWith=ji,To(d,d),d.add=Bo,d.attempt=go,d.camelCase=ro,d.capitalize=io,d.ceil=Do,d.clamp=function(t,e,n){return n===qo&&(n=e,e=qo),n!==qo&&(n=(n=P(n))==n?n:0),e!==qo&&(e=(e=P(e))==e?e:0),te(P(t),e,n)},d.clone=function(t){return v(t,4)},d.cloneDeep=function(t){return v(t,5)},d.cloneDeepWith=function(t,e){return v(t,5,e="function"==typeof e?e:qo)},d.cloneWith=function(t,e){return v(t,4,e="function"==typeof e?e:qo)},d.conformsTo=function(t,e){return null==e||ee(t,e,M(e))},d.deburr=oo,d.defaultTo=function(t,e){return null==t||t!=t?e:t},d.divide=ko,d.endsWith=function(t,e,n){t=f(t),e=l(e);var r=t.length,r=n=n===qo?r:te(A(n),0,r);return 0<=(n-=e.length)&&t.slice(n,r)==e},d.eq=j,d.escape=function(t){return(t=f(t))&&Ws.test(t)?t.replace(qs,Qa):t},d.escapeRegExp=function(t){return(t=f(t))&&Zs.test(t)?t.replace($s,"\\$&"):t},d.every=function(t,e,n){return(U(t)?Ia:se)(t,h(e=n&&p(t,e,n)?qo:e,3))},d.find=zr,d.findIndex=Sr,d.findKey=function(t,e){return Na(t,h(e,3),he)},d.findLast=Yr,d.findLastIndex=Cr,d.findLastKey=function(t,e){return Na(t,h(e,3),pe)},d.floor=Lo,d.forEach=Kr,d.forEachRight=$r,d.forIn=function(t,e){return null==t?t:le(t,h(e,3),O)},d.forInRight=function(t,e){return null==t?t:ce(t,h(e,3),O)},d.forOwn=function(t,e){return t&&he(t,h(e,3))},d.forOwnRight=function(t,e){return t&&pe(t,h(e,3))},d.get=Hi,d.gt=gi,d.gte=yi,d.has=function(t,e){return null!=t&&er(t,e,me)},d.hasIn=Xi,d.head=Pr,d.identity=R,d.includes=function(t,e,n,r){return t=c(t)?t:no(t),n=n&&!r?A(n):0,r=t.length,n<0&&(n=E(r+n,0)),Mi(t)?n<=r&&-1<t.indexOf(e,n):!!r&&-1<hs(t,e,n)},d.indexOf=function(t,e,n){var r=null==t?0:t.length;return r?hs(t,e,t=(t=null==n?0:A(n))<0?E(r+t,0):t):-1},d.inRange=function(t,e,n){return e=Di(e),n===qo?(n=e,e=0):n=Di(n),(t=t=P(t))>=S(e=e,n=n)&&t<E(e,n)},d.invoke=Yi,d.isArguments=mi,d.isArray=U,d.isArrayBuffer=vi,d.isArrayLike=c,d.isArrayLikeObject=b,d.isBoolean=function(t){return!0===t||!1===t||q(t)&&n(t)==Vo},d.isBuffer=_i,d.isDate=H,d.isElement=function(t){return q(t)&&1===t.nodeType&&!Ci(t)},d.isEmpty=function(t){if(null!=t){if(c(t)&&(U(t)||"string"==typeof t||"function"==typeof t.splice||_i(t)||Oi(t)||mi(t)))return!t.length;var e,n=N(t);if(n==Yo||n==Jo)return!t.size;if(ur(t))return!Ce(t).length;for(e in t)if(L.call(t,e))return!1}return!0},d.isEqual=function(t,e){return we(t,e)},d.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:qo)?n(t,e):qo;return r===qo?we(t,e,qo,n):!!r},d.isError=bi,d.isFinite=function(t){return"number"==typeof t&&yt(t)},d.isFunction=xi,d.isInteger=wi,d.isLength=Ti,d.isMap=Ei,d.isMatch=function(t,e){return t===e||Te(t,e,Zn(e))},d.isMatchWith=function(t,e,n){return n="function"==typeof n?n:qo,Te(t,e,Zn(e),n)},d.isNaN=function(t){return Si(t)&&t!=+t},d.isNative=function(t){if(ar(t))throw new I("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ee(t)},d.isNil=function(t){return null==t},d.isNull=function(t){return null===t},d.isNumber=Si,d.isObject=x,d.isObjectLike=q,d.isPlainObject=Ci,d.isRegExp=Ai,d.isSafeInteger=function(t){return wi(t)&&-Wo<=t&&t<=Wo},d.isSet=Pi,d.isString=Mi,d.isSymbol=_,d.isTypedArray=Oi,d.isUndefined=function(t){return t===qo},d.isWeakMap=function(t){return q(t)&&N(t)==ts},d.isWeakSet=function(t){return q(t)&&"[object WeakSet]"==n(t)},d.join=function(t,e){return null==t?"":mt.call(t,e)},d.kebabCase=so,d.last=r,d.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;if(n!==qo&&(i=(i=A(n))<0?E(r+i,0):S(i,r-1)),e!=e)return ja(t,qa,i,!0);for(var o=t,s=e,a=i+1;a--;)if(o[a]===s)return a;return a},d.lowerCase=ao,d.lowerFirst=uo,d.lt=Ri,d.lte=Ii,d.max=function(t){return t&&t.length?ae(t,R,ye):qo},d.maxBy=function(t,e){return t&&t.length?ae(t,h(e,2),ye):qo},d.mean=function(t){return Ga(t,R)},d.meanBy=function(t,e){return Ga(t,h(e,2))},d.min=function(t){return t&&t.length?ae(t,R,Pe):qo},d.minBy=function(t,e){return t&&t.length?ae(t,h(e,2),Pe):qo},d.stubArray=Ro,d.stubFalse=Io,d.stubObject=function(){return{}},d.stubString=function(){return""},d.stubTrue=function(){return!0},d.multiply=No,d.nth=function(t,e){return t&&t.length?Be(t,A(e)):qo},d.noConflict=function(){return os._===this&&(os._=J),this},d.noop=Eo,d.now=ri,d.pad=function(t,e,n){t=f(t);var r=(e=A(e))?gs(t):0;return!e||e<=r?t:Rn(dt(e=(e-r)/2),n)+t+Rn(ft(e),n)},d.padEnd=function(t,e,n){t=f(t);var r=(e=A(e))?gs(t):0;return e&&r<e?t+Rn(e-r,n):t},d.padStart=function(t,e,n){t=f(t);var r=(e=A(e))?gs(t):0;return e&&r<e?Rn(e-r,n)+t:t},d.parseInt=function(t,e,n){return e=n||null==e?0:e&&+e,bt(f(t).replace(Js,""),e||0)},d.random=function(t,e,n){var r;return n&&"boolean"!=typeof n&&p(t,e,n)&&(e=n=qo),n===qo&&("boolean"==typeof e?(n=e,e=qo):"boolean"==typeof t&&(n=t,t=qo)),t===qo&&e===qo?(t=0,e=1):(t=Di(t),e===qo?(e=t,t=0):e=Di(e)),e<t&&(r=t,t=e,e=r),n||t%1||e%1?(r=xt(),S(t+r*(e-t+xa("1e-"+((r+"").length-1))),e)):Ne(t,e)},d.reduce=function(t,e,n){var r=U(t)?ka:Ha,i=arguments.length<3;return r(t,h(e,4),n,i,ie)},d.reduceRight=function(t,e,n){var r=U(t)?La:Ha,i=arguments.length<3;return r(t,h(e,4),n,i,oe)},d.repeat=function(t,e,n){return e=(n?p(t,e,n):e===qo)?1:A(e),je(f(t),e)},d.replace=function(){var t=arguments,e=f(t[0]);return t.length<3?e:e.replace(t[1],t[2])},d.result=function(t,e,n){var r=-1,i=(e=sn(e,t)).length;for(i||(i=1,t=qo);++r<i;){var o=null==t?qo:t[wr(e[r])];o===qo&&(r=i,o=n),t=xi(o)?o.call(t):o}return t},d.round=jo,d.runInContext=i,d.sample=function(t){return(U(t)?Ht:Ue)(t)},d.size=function(t){var e;return null==t?0:c(t)?Mi(t)?gs(t):t.length:(e=N(t))==Yo||e==Jo?t.size:Ce(t).length},d.snakeCase=lo,d.some=function(t,e,n){return(U(t)?Fa:Xe)(t,h(e=n&&p(t,e,n)?qo:e,3))},d.sortedIndex=function(t,e){return Ve(t,e)},d.sortedIndexBy=function(t,e,n){return ze(t,e,h(n,2))},d.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Ve(t,e);if(r<n&&j(t[r],e))return r}return-1},d.sortedLastIndex=function(t,e){return Ve(t,e,!0)},d.sortedLastIndexBy=function(t,e,n){return ze(t,e,h(n,2),!0)},d.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=Ve(t,e,!0)-1;if(j(t[n],e))return n}return-1},d.startCase=co,d.startsWith=function(t,e,n){return t=f(t),n=null==n?0:te(A(n),0,t.length),e=l(e),t.slice(n,n+e.length)==e},d.subtract=Uo,d.sum=function(t){return t&&t.length?Xa(t,R):0},d.sumBy=function(t,e){return t&&t.length?Xa(t,h(e,2)):0},d.template=function(s,t,e){var a,u,n=d.templateSettings;e&&p(s,t,e)&&(t=qo),s=f(s),t=ji({},t,n,Un);var r=M(e=ji({},t.imports,n.imports,Un)),i=Ya(e,r),l=0,n=t.interpolate||fa,c="__p += '",e=k((t.escape||fa).source+"|"+n.source+"|"+(n===Vs?oa:fa).source+"|"+(t.evaluate||fa).source+"|$","g"),o="//# sourceURL="+(L.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ba+"]")+"\n";if(s.replace(e,function(t,e,n,r,i,o){return n=n||r,c+=s.slice(l,o).replace(da,tu),e&&(a=!0,c+="' +\n__e("+e+") +\n'"),i&&(u=!0,c+="';\n"+i+";\n__p += '"),n&&(c+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=o+t.length,t}),c+="';\n",n=L.call(t,"variable")&&t.variable){if(ra.test(n))throw new I("Invalid `variable` option passed into `_.template`")}else c="with (obj) {\n"+c+"\n}\n";if(c=(u?c.replace(Fs,""):c).replace(Ns,"$1").replace(js,"$1;"),c="function("+(n||"obj")+") {\n"+(n?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}",(e=go(function(){return B(r,o+"return "+c).apply(qo,i)})).source=c,bi(e))throw e;return e},d.times=function(t,e){if((t=A(t))<1||Wo<t)return[];for(var n=Ho,r=S(t,Ho),r=(e=h(e),t-=Ho,Va(r,e));++n<t;)e(n);return r},d.toFinite=Di,d.toInteger=A,d.toLength=ki,d.toLower=function(t){return f(t).toLowerCase()},d.toNumber=P,d.toSafeInteger=function(t){return t?te(A(t),-Wo,Wo):0===t?t:0},d.toString=f,d.toUpper=function(t){return f(t).toUpperCase()},d.trim=function(t,e,n){return(t=f(t))&&(n||e===qo)?za(t):t&&(e=l(e))?un(n=ys(t),$a(n,e=ys(e)),Za(n,e)+1).join(""):t},d.trimEnd=function(t,e,n){return(t=f(t))&&(n||e===qo)?t.slice(0,iu(t)+1):t&&(e=l(e))?un(n=ys(t),0,Za(n,ys(e))+1).join(""):t},d.trimStart=function(t,e,n){return(t=f(t))&&(n||e===qo)?t.replace(Js,""):t&&(e=l(e))?un(n=ys(t),$a(n,ys(e))).join(""):t},d.truncate=function(t,e){var n,r=30,i="...",e=(x(e)&&(n="separator"in e?e.separator:n,r="length"in e?A(e.length):r,i="omission"in e?l(e.omission):i),(t=f(t)).length);if((e=fs(t)?(o=ys(t)).length:e)<=r)return t;if((e=r-gs(i))<1)return i;var o,r=o?un(o,0,e).join(""):t.slice(0,e);if(n!==qo)if(o&&(e+=r.length-e),Ai(n)){if(t.slice(e).search(n)){var s,a=r;for((n=n.global?n:k(n.source,f(sa.exec(n))+"g")).lastIndex=0;s=n.exec(a);)var u=s.index;r=r.slice(0,u===qo?e:u)}}else t.indexOf(l(n),e)!=e&&-1<(o=r.lastIndexOf(n))&&(r=r.slice(0,o));return r+i},d.unescape=function(t){return(t=f(t))&&Gs.test(t)?t.replace(Us,ou):t},d.uniqueId=function(t){var e=++Y;return f(t)+e},d.upperCase=ho,d.upperFirst=po,d.each=Kr,d.eachRight=$r,d.first=Pr,To(d,(Fo={},he(d,function(t,e){L.call(d.prototype,e)||(Fo[e]=t)}),Fo),{chain:!1}),d.VERSION="4.17.21",as(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){d[t].placeholder=d}),as(["drop","take"],function(n,r){m.prototype[n]=function(t){t=t===qo?1:E(A(t),0);var e=this.__filtered__&&!r?new m(this):this.clone();return e.__filtered__?e.__takeCount__=S(t,e.__takeCount__):e.__views__.push({size:S(t,Ho),type:n+(e.__dir__<0?"Right":"")}),e},m.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),as(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;m.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:h(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),as(["head","last"],function(t,e){var n="take"+(e?"Right":"");m.prototype[t]=function(){return this[n](1).value()[0]}}),as(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");m.prototype[t]=function(){return this.__filtered__?new m(this):this[n](1)}}),m.prototype.compact=function(){return this.filter(R)},m.prototype.find=function(t){return this.filter(t).head()},m.prototype.findLast=function(t){return this.reverse().find(t)},m.prototype.invokeMap=s(function(e,n){return"function"==typeof e?new m(this):this.map(function(t){return be(t,e,n)})}),m.prototype.reject=function(t){return this.filter(hi(h(t)))},m.prototype.slice=function(t,e){t=A(t);var n=this;return n.__filtered__&&(0<t||e<0)?new m(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==qo?(e=A(e))<0?n.dropRight(-e):n.take(e-t):n)},m.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},m.prototype.toArray=function(){return this.take(Ho)},he(m.prototype,function(l,t){var c=/^(?:filter|find|map|reject)|While$/.test(t),h=/^(?:head|last)$/.test(t),p=d[h?"take"+("last"==t?"Right":""):t],f=h||/^find/.test(t);p&&(d.prototype[t]=function(){function t(t){return t=p.apply(d,cs([t],r)),h&&a?t[0]:t}var e,n=this.__wrapped__,r=h?[1]:arguments,i=n instanceof m,o=r[0],s=i||U(n),a=(s&&c&&"function"==typeof o&&1!=o.length&&(i=s=!1),this.__chain__),o=!!this.__actions__.length,u=f&&!a,i=i&&!o;return!f&&s?(n=i?n:new m(this),(e=l.apply(n,r)).__actions__.push({func:Hr,args:[t],thisArg:qo}),new y(e,a)):u&&i?l.apply(this,r):(e=this.thru(t),u?h?e.value()[0]:e.value():e)})}),as(["pop","push","shift","sort","splice","unshift"],function(t){var n=W[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);d.prototype[t]=function(){var t,e=arguments;return i&&!this.__chain__?(t=this.value(),n.apply(U(t)?t:[],e)):this[r](function(t){return n.apply(U(t)?t:[],e)})}}),he(m.prototype,function(t,e){var n,r=d[e];r&&(n=r.name+"",L.call(Pt,n)||(Pt[n]=[]),Pt[n].push({name:e,func:r}))}),Pt[An(qo,2).name]=[{name:"wrapper",func:qo}],m.prototype.clone=function(){var t=new m(this.__wrapped__);return t.__actions__=C(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=C(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=C(this.__views__),t},m.prototype.reverse=function(){var t;return this.__filtered__?((t=new m(this)).__dir__=-1,t.__filtered__=!0):(t=this.clone()).__dir__*=-1,t},m.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=U(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=S(e,t+s);break;case"takeRight":t=E(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=(o=o.end)-s,u=r?o:s-1,l=this.__iteratees__,c=l.length,h=0,p=S(a,this.__takeCount__);if(!n||!r&&i==a&&p==a)return tn(t,this.__actions__);var f=[];t:for(;a--&&h<p;){for(var d=-1,g=t[u+=e];++d<c;){var y=l[d],m=y.iteratee,y=y.type,m=m(g);if(2==y)g=m;else if(!m){if(1==y)continue t;break t}}f[h++]=g}return f},d.prototype.at=Xr,d.prototype.chain=function(){return Wr(this)},d.prototype.commit=function(){return new y(this.value(),this.__chain__)},d.prototype.next=function(){this.__values__===qo&&(this.__values__=Bi(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?qo:this.__values__[this.__index__++]}},d.prototype.plant=function(t){for(var e,n=this;n instanceof Nt;)var r=Er(n),i=(r.__index__=0,r.__values__=qo,e?i.__wrapped__=r:e=r,r),n=n.__wrapped__;return i.__wrapped__=t,e},d.prototype.reverse=function(){var t=this.__wrapped__;return t instanceof m?(t=t,(t=(t=this.__actions__.length?new m(this):t).reverse()).__actions__.push({func:Hr,args:[Rr],thisArg:qo}),new y(t,this.__chain__)):this.thru(Rr)},d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=function(){return tn(this.__wrapped__,this.__actions__)},d.prototype.first=d.prototype.head,at&&(d.prototype[at]=function(){return this}),d}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(os._=ms,define(function(){return ms})):i?((i.exports=ms)._=ms,r._=ms):os._=ms}.call(this)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(t,e,n){function r(t){if(s=w(r),!(t<p+m)){for(h+=t-p,E(p=t,h),d+1e3<t&&(f=.9*g*1e3/(t-d)+(1-.9)*f,d=t,g=0),g++,y=0;c<=h;)if(S(c),h-=c,240<=++y){b=!0;break}C(h/c),A(f,b),b=!1}}function i(){}var o,s,a,u,l,c,h,p,f,d,g,y,m,v,_,b,x,w,T,E,S,C,A;o=this,c=1e3/60,m=y=g=d=p=h=0,b=_=v=!(f=60),x="object"==typeof window?window:o,w=x.requestAnimationFrame||(l=Date.now(),function(t){return a=Date.now(),u=Math.max(0,c-(a-l)),l=a+u,setTimeout(function(){t(a+u)},u)}),T=x.cancelAnimationFrame||clearTimeout,A=C=S=E=i,o.MainLoop={getSimulationTimestep:function(){return c},setSimulationTimestep:function(t){return c=t,this},getFPS:function(){return f},getMaxAllowedFPS:function(){return 1e3/m},setMaxAllowedFPS:function(t){return 0===(t=void 0===t?1/0:t)?this.stop():m=1e3/t,this},resetFrameDelta:function(){var t=h;return h=0,t},setBegin:function(t){return E=t||E,this},setUpdate:function(t){return S=t||S,this},setDraw:function(t){return C=t||C,this},setEnd:function(t){return A=t||A,this},start:function(){return _||(_=!0,s=w(function(t){C(1),v=!0,d=p=t,g=0,s=w(r)})),this},stop:function(){return _=v=!1,T(s),this},isRunning:function(){return v}},"function"==typeof define&&define.amd?define(o.MainLoop):"object"==typeof e&&null!==e&&"object"==typeof e.exports&&(e.exports=o.MainLoop)},{}],50:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r(a,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]);var s=a;function a(t,e,n){void 0===e&&(e=!1),o(this,a),this._fn=t,this._once=e,this._thisArg=n,this._next=this._prev=this._owner=null}function u(t,e){return t._head?(t._tail._next=e)._prev=t._tail:t._head=e,(t._tail=e)._owner=t,e}r(l,[{key:"handlers",value:function(){var t=this._head;if(!(arguments.length<=0||void 0===arguments[0])&&arguments[0])return!!t;for(var e=[];t;)e.push(t),t=t._next;return e}},{key:"has",value:function(t){if(t instanceof s)return t._owner===this;throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.")}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return u(this,new s(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return u(this,new s(t,!0,e))}},{key:"detach",value:function(t){if(t instanceof s)return t._owner===this&&(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this;throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.")}},{key:"detachAll",value:function(){var t=this._head;if(t)for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]);r=l;function l(){o(this,l),this._head=this._tail=void 0}r.MiniSignalBinding=s,n.default=r,e.exports=n.default},{}],51:[function(t,e,n){function i(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}e.exports=function(t,e){e=e||{};var n=typeof t;if(!("string"==n&&0<t.length)){if("number"==n&&!1===isNaN(t))if(e.long)return i(n=t,864e5,"day")||i(n,36e5,"hour")||i(n,6e4,"minute")||i(n,1e3,"second")||n+" ms";else{e=t;return 864e5<=e?Math.round(e/864e5)+"d":36e5<=e?Math.round(e/36e5)+"h":6e4<=e?Math.round(e/6e4)+"m":1e3<=e?Math.round(e/1e3)+"s":e+"ms"}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}n=t;if(!(100<(n=String(n)).length)){n=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(n);if(n){var r=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}},{}],52:[function(t,e,n){"use strict";var u=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(Object.assign){var t=new String("abc");if(t[5]="de","5"!==Object.getOwnPropertyNames(t)[0]){for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r,i=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"===i.join(""))return r={},"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")?1:void 0}}}catch(t){}}()?Object.assign:function(t,e){for(var n,r=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),i=1;i<arguments.length;i++){for(var o in n=Object(arguments[i]))l.call(n,o)&&(r[o]=n[o]);if(u)for(var s=u(n),a=0;a<s.length;a++)c.call(n,s[a])&&(r[s[a]]=n[s[a]])}return r}},{}],53:[function(t,e,n){e.exports={_args:[["p2@0.7.1","C:\\Users\\user\\Desktop\\brofist.io_1"]],_from:"p2@0.7.1",_id:"p2@0.7.1",_inBundle:!1,_integrity:"sha1-JfJHTZvDptMUCh2iamfJ4RislUM=",_location:"/p2",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"p2@0.7.1",name:"p2",escapedName:"p2",rawSpec:"0.7.1",saveSpec:null,fetchSpec:"0.7.1"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/p2/-/p2-0.7.1.tgz",_spec:"0.7.1",_where:"C:\\Users\\user\\Desktop\\brofist.io_1",author:{name:"Stefan Hedman",email:"schteppe@gmail.com",url:"http://steffe.se"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},dependencies:{"poly-decomp":"0.1.1"},description:"A JavaScript 2D physics engine.",devDependencies:{grunt:"^0.4.5","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0","grunt-contrib-jshint":"^0.11.2","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0"},engines:{node:"*"},homepage:"https://github.com/schteppe/p2.js#readme",keywords:["p2.js","p2","physics","engine","2d"],licenses:[{type:"MIT"}],main:"./src/p2.js",name:"p2",repository:{type:"git",url:"git+https://github.com/schteppe/p2.js.git"},version:"0.7.1"}},{}],54:[function(t,e,n){var f=t("../math/vec2");t("../utils/Utils");function r(t){this.lowerBound=f.create(),t&&t.lowerBound&&f.copy(this.lowerBound,t.lowerBound),this.upperBound=f.create(),t&&t.upperBound&&f.copy(this.upperBound,t.upperBound)}e.exports=r;var d=f.create();r.prototype.setFromPoints=function(t,e,n,r){for(var i=this.lowerBound,o=this.upperBound,s=(0!==(n="number"!=typeof n?0:n)?f.rotate(i,t[0],n):f.copy(i,t[0]),f.copy(o,i),Math.cos(n)),a=Math.sin(n),u=1;u<t.length;u++){var l,c,h=t[u];0!==n&&(l=h[0],c=h[1],d[0]=s*l-a*c,d[1]=a*l+s*c,h=d);for(var p=0;p<2;p++)h[p]>o[p]&&(o[p]=h[p]),h[p]<i[p]&&(i[p]=h[p])}e&&(f.add(this.lowerBound,this.lowerBound,e),f.add(this.upperBound,this.upperBound,e)),r&&(this.lowerBound[0]-=r,this.lowerBound[1]-=r,this.upperBound[0]+=r,this.upperBound[1]+=r)},r.prototype.copy=function(t){f.copy(this.lowerBound,t.lowerBound),f.copy(this.upperBound,t.upperBound)},r.prototype.extend=function(t){for(var e=2;e--;){var n=t.lowerBound[e],n=(this.lowerBound[e]>n&&(this.lowerBound[e]=n),t.upperBound[e]);this.upperBound[e]<n&&(this.upperBound[e]=n)}},r.prototype.overlaps=function(t){var e=this.lowerBound,n=this.upperBound,r=t.lowerBound,t=t.upperBound;return(r[0]<=n[0]&&n[0]<=t[0]||e[0]<=t[0]&&t[0]<=n[0])&&(r[1]<=n[1]&&n[1]<=t[1]||e[1]<=t[1]&&t[1]<=n[1])},r.prototype.containsPoint=function(t){var e=this.lowerBound,n=this.upperBound;return e[0]<=t[0]&&t[0]<=n[0]&&e[1]<=t[1]&&t[1]<=n[1]},r.prototype.overlapsRay=function(t){var e=1/t.direction[0],n=1/t.direction[1],r=(this.lowerBound[0]-t.from[0])*e,e=(this.upperBound[0]-t.from[0])*e,i=(this.lowerBound[1]-t.from[1])*n,t=(this.upperBound[1]-t.from[1])*n,n=Math.max(Math.max(Math.min(r,e),Math.min(i,t))),r=Math.min(Math.min(Math.max(r,e),Math.max(i,t)));return r<0||r<n?-1:n}},{"../math/vec2":77,"../utils/Utils":104}],55:[function(t,e,n){var r=t("../math/vec2"),i=t("../objects/Body");function o(t){this.type=t,this.result=[],this.world=null,this.boundingVolumeType=o.AABB}(e.exports=o).AABB=1,o.BOUNDING_CIRCLE=2,o.prototype.setWorld=function(t){this.world=t},o.prototype.getCollisionPairs=function(t){};var s=r.create();o.boundingRadiusCheck=function(t,e){r.sub(s,t.position,e.position);var n=r.squaredLength(s),t=t.boundingRadius+e.boundingRadius;return n<=t*t},o.aabbCheck=function(t,e){return t.getAABB().overlaps(e.getAABB())},o.prototype.boundingVolumeCheck=function(t,e){var n;switch(this.boundingVolumeType){case o.BOUNDING_CIRCLE:n=o.boundingRadiusCheck(t,e);break;case o.AABB:n=o.aabbCheck(t,e);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return n},o.canCollide=function(t,e){var n=i.KINEMATIC,r=i.STATIC;return(t.type!==r||e.type!==r)&&!(t.type===n&&e.type===r||t.type===r&&e.type===n||t.type===n&&e.type===n||t.sleepState===i.SLEEPING&&e.sleepState===i.SLEEPING||t.sleepState===i.SLEEPING&&e.type===r||e.sleepState===i.SLEEPING&&t.type===r)},o.NAIVE=1,o.SAP=2},{"../math/vec2":77,"../objects/Body":78}],56:[function(t,e,n){t("../shapes/Circle"),t("../shapes/Plane"),t("../shapes/Shape"),t("../shapes/Particle");var u=t("../collision/Broadphase");t("../math/vec2");function r(){u.call(this,u.NAIVE)}(((e.exports=r).prototype=new u).constructor=r).prototype.getCollisionPairs=function(t){for(var e=t.bodies,n=this.result,r=n.length=0,i=e.length;r!==i;r++)for(var o=e[r],s=0;s<r;s++){var a=e[s];u.canCollide(o,a)&&this.boundingVolumeCheck(o,a)&&n.push(o,a)}return n},r.prototype.aabbQuery=function(t,e,n){n=n||[];for(var r=t.bodies,i=0;i<r.length;i++){var o=r[i];o.aabbNeedsUpdate&&o.updateAABB(),o.aabb.overlaps(e)&&n.push(o)}return n}},{"../collision/Broadphase":55,"../math/vec2":77,"../shapes/Circle":86,"../shapes/Particle":90,"../shapes/Plane":91,"../shapes/Shape":92}],57:[function(t,e,l){var U=t("../math/vec2"),q=U.sub,G=U.add,W=U.dot,n=(t("../utils/Utils"),t("../utils/ContactEquationPool")),r=t("../utils/FrictionEquationPool"),i=t("../utils/TupleDictionary"),o=t("../equations/Equation"),s=(t("../equations/ContactEquation"),t("../equations/FrictionEquation"),t("../shapes/Circle")),a=t("../shapes/Convex"),u=t("../shapes/Shape"),T=(t("../objects/Body"),t("../shapes/Box")),E=(e.exports=J,U.fromValues(0,1)),H=U.fromValues(0,0),X=U.fromValues(0,0),V=U.fromValues(0,0),z=U.fromValues(0,0),Y=U.fromValues(0,0),O=U.fromValues(0,0),K=U.fromValues(0,0),$=U.fromValues(0,0),Z=U.fromValues(0,0),R=U.fromValues(0,0),I=U.fromValues(0,0),B=U.fromValues(0,0),D=U.fromValues(0,0),k=U.fromValues(0,0),M=U.fromValues(0,0),L=U.fromValues(0,0),C=U.fromValues(0,0),A=U.fromValues(0,0),F=[];function J(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new n({size:32}),this.frictionEquationPool=new r({size:64}),this.restitution=0,this.stiffness=o.DEFAULT_STIFFNESS,this.relaxation=o.DEFAULT_RELAXATION,this.frictionStiffness=o.DEFAULT_STIFFNESS,this.frictionRelaxation=o.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new i,this.contactSkinSize=.01}var c=U.create(),h=U.create();function v(t,e){U.set(t.vertices[0],.5*-e.length,-e.radius),U.set(t.vertices[1],.5*e.length,-e.radius),U.set(t.vertices[2],.5*e.length,e.radius),U.set(t.vertices[3],.5*-e.length,e.radius)}J.prototype.bodiesOverlap=function(t,e){for(var n=c,r=h,i=0,o=t.shapes.length;i!==o;i++){var s=t.shapes[i];t.toWorldFrame(n,s.position);for(var a=0,u=e.shapes.length;a!==u;a++){var l=e.shapes[a];if(e.toWorldFrame(r,l.position),this[s.type|l.type](t,s,n,s.angle+t.angle,e,l,r,l.angle+e.angle,!0))return!0}}return!1},J.prototype.collidedLastStep=function(t,e){t=0|t.id,e=0|e.id;return!!this.collidingBodiesLastStep.get(t,e)},J.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var t=this.contactEquations,e=t.length;e--;){var n=t[e],r=n.bodyA.id,n=n.bodyB.id;this.collidingBodiesLastStep.set(r,n,!0)}for(var i=this.contactEquations,o=this.frictionEquations,s=0;s<i.length;s++)this.contactEquationPool.release(i[s]);for(s=0;s<o.length;s++)this.frictionEquationPool.release(o[s]);this.contactEquations.length=this.frictionEquations.length=0},J.prototype.createContactEquation=function(t,e,n,r){var i=this.contactEquationPool.get();return i.bodyA=t,i.bodyB=e,i.shapeA=n,i.shapeB=r,i.restitution=this.restitution,i.firstImpact=!this.collidedLastStep(t,e),i.stiffness=this.stiffness,i.relaxation=this.relaxation,i.needsUpdate=!0,i.enabled=this.enabledEquations,i.offset=this.contactSkinSize,i},J.prototype.createFrictionEquation=function(t,e,n,r){var i=this.frictionEquationPool.get();return i.bodyA=t,i.bodyB=e,i.shapeA=n,i.shapeB=r,i.setSlipForce(this.slipForce),i.frictionCoefficient=this.frictionCoefficient,i.relativeVelocity=this.surfaceVelocity,i.enabled=this.enabledEquations,i.needsUpdate=!0,i.stiffness=this.frictionStiffness,i.relaxation=this.frictionRelaxation,i.contactEquations.length=0,i},J.prototype.createFrictionFromContact=function(t){var e=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB);return U.copy(e.contactPointA,t.contactPointA),U.copy(e.contactPointB,t.contactPointB),U.rotate90cw(e.t,t.normalA),e.contactEquations.push(t),e},J.prototype.createFrictionFromAverage=function(t){var e=this.contactEquations[this.contactEquations.length-1],n=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB),r=e.bodyA;e.bodyB;U.set(n.contactPointA,0,0),U.set(n.contactPointB,0,0),U.set(n.t,0,0);for(var i=0;i!==t;i++)(e=this.contactEquations[this.contactEquations.length-1-i]).bodyA===r?(U.add(n.t,n.t,e.normalA),U.add(n.contactPointA,n.contactPointA,e.contactPointA),U.add(n.contactPointB,n.contactPointB,e.contactPointB)):(U.sub(n.t,n.t,e.normalA),U.add(n.contactPointA,n.contactPointA,e.contactPointB),U.add(n.contactPointB,n.contactPointB,e.contactPointA)),n.contactEquations.push(e);var o=1/t;return U.scale(n.contactPointA,n.contactPointA,o),U.scale(n.contactPointB,n.contactPointB,o),U.normalize(n.t,n.t),U.rotate90cw(n.t,n.t),n},J.prototype[u.LINE|u.CONVEX]=J.prototype.convexLine=function(t,e,n,r,i,o,s,a,u){return!u&&0},J.prototype[u.LINE|u.BOX]=J.prototype.lineBox=function(t,e,n,r,i,o,s,a,u){return!u&&0};var p=new T({width:1,height:1}),f=U.create(),_=(J.prototype[u.CAPSULE|u.CONVEX]=J.prototype[u.CAPSULE|u.BOX]=J.prototype.convexCapsule=function(t,e,n,r,i,o,s,a,u){var l,c=f,h=(U.set(c,o.length/2,0),U.rotate(c,c,a),U.add(c,c,s),this.circleConvex(i,o,c,a,t,e,n,r,u,o.radius)),c=(U.set(c,-o.length/2,0),U.rotate(c,c,a),U.add(c,c,s),this.circleConvex(i,o,c,a,t,e,n,r,u,o.radius));return!(!u||!h&&!c)||(v(l=p,o),this.convexConvex(t,e,n,r,i,l,s,a,u)+h+c)},J.prototype[u.CAPSULE|u.LINE]=J.prototype.lineCapsule=function(t,e,n,r,i,o,s,a,u){return!u&&0},U.create()),b=U.create(),x=new T({width:1,height:1}),d=(J.prototype[u.CAPSULE|u.CAPSULE]=J.prototype.capsuleCapsule=function(t,e,n,r,i,o,s,a,u){for(var l=_,c=b,h=0,p=0;p<2;p++){U.set(l,(0===p?-1:1)*e.length/2,0),U.rotate(l,l,r),U.add(l,l,n);for(var f=0;f<2;f++){U.set(c,(0===f?-1:1)*o.length/2,0),U.rotate(c,c,a),U.add(c,c,s),this.enableFrictionReduction&&(g=this.enableFriction,this.enableFriction=!1);var d=this.circleCircle(t,e,l,r,i,o,c,a,u,e.radius,o.radius);if(this.enableFrictionReduction&&(this.enableFriction=g),u&&d)return!0;h+=d}}this.enableFrictionReduction&&(g=this.enableFriction,this.enableFriction=!1);var g,y=x,m=(v(y,e),this.convexCapsule(t,y,n,r,i,o,s,a,u));if(this.enableFrictionReduction&&(this.enableFriction=g),u&&m)return!0;h+=m,this.enableFrictionReduction&&(g=this.enableFriction,this.enableFriction=!1),v(y,o);m=this.convexCapsule(i,y,s,a,t,e,n,r,u);return this.enableFrictionReduction&&(this.enableFriction=g),!(!u||!m)||(h+=m,this.enableFrictionReduction&&h&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(h)),h)},J.prototype[u.LINE|u.LINE]=J.prototype.lineLine=function(t,e,n,r,i,o,s,a,u){return!u&&0},J.prototype[u.PLANE|u.LINE]=J.prototype.planeLine=function(t,e,n,r,i,o,s,a,u){var l=H,c=X,h=V,p=z,f=Y,d=O,g=K,y=$,m=Z,v=F,_=0;U.set(l,-o.length/2,0),U.set(c,o.length/2,0),U.rotate(h,l,a),U.rotate(p,c,a),G(h,h,s),G(p,p,s),U.copy(l,h),U.copy(c,p),q(f,c,l),U.normalize(d,f),U.rotate90cw(m,d),U.rotate(y,E,r),v[0]=l,v[1]=c;for(var b=0;b<v.length;b++){var x=v[b],w=(q(g,x,n),W(g,y));if(w<0){if(u)return!0;var T=this.createContactEquation(t,i,e,o);_++,U.copy(T.normalA,y),U.normalize(T.normalA,T.normalA),U.scale(g,y,w),q(T.contactPointA,x,g),q(T.contactPointA,T.contactPointA,t.position),q(T.contactPointB,x,s),G(T.contactPointB,T.contactPointB,s),q(T.contactPointB,T.contactPointB,i.position),this.contactEquations.push(T),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(T))}}return!u&&(this.enableFrictionReduction||_&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(_)),_)},J.prototype[u.PARTICLE|u.CAPSULE]=J.prototype.particleCapsule=function(t,e,n,r,i,o,s,a,u){return this.circleLine(t,e,n,r,i,o,s,a,u,o.radius,0)},J.prototype[u.CIRCLE|u.LINE]=J.prototype.circleLine=function(t,e,n,r,i,o,s,a,u,l,c){var l=l||0,c=void 0!==c?c:e.radius,h=H,p=X,f=V,d=z,g=Y,y=O,m=K,v=$,_=Z,b=R,x=I,w=B,T=D,E=k,S=F,a=(U.set(v,-o.length/2,0),U.set(_,o.length/2,0),U.rotate(b,v,a),U.rotate(x,_,a),G(b,b,s),G(x,x,s),U.copy(v,b),U.copy(_,x),q(y,_,v),U.normalize(m,y),U.rotate90cw(g,m),q(w,n,v),W(w,g)),C=(q(d,v,s),q(T,n,s),c+l);if(Math.abs(a)<C){U.scale(h,g,a),q(f,n,h),U.scale(p,g,W(g,T)),U.normalize(p,p),U.scale(p,p,l),G(f,f,p);b=W(m,f),x=W(m,v),y=W(m,_);if(x<b&&b<y)return!!u||(P=this.createContactEquation(t,i,e,o),U.scale(P.normalA,h,-1),U.normalize(P.normalA,P.normalA),U.scale(P.contactPointA,P.normalA,c),G(P.contactPointA,P.contactPointA,n),q(P.contactPointA,P.contactPointA,t.position),q(P.contactPointB,f,s),G(P.contactPointB,P.contactPointB,s),q(P.contactPointB,P.contactPointB,i.position),this.contactEquations.push(P),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(P)),1)}S[0]=v,S[1]=_;for(var A=0;A<S.length;A++){var P,M=S[A];if(q(w,M,n),U.squaredLength(w)<Math.pow(C,2))return!!u||(P=this.createContactEquation(t,i,e,o),U.copy(P.normalA,w),U.normalize(P.normalA,P.normalA),U.scale(P.contactPointA,P.normalA,c),G(P.contactPointA,P.contactPointA,n),q(P.contactPointA,P.contactPointA,t.position),q(P.contactPointB,M,s),U.scale(E,P.normalA,-l),G(P.contactPointB,P.contactPointB,E),G(P.contactPointB,P.contactPointB,s),q(P.contactPointB,P.contactPointB,i.position),this.contactEquations.push(P),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(P)),1)}return 0},J.prototype[u.CIRCLE|u.CAPSULE]=J.prototype.circleCapsule=function(t,e,n,r,i,o,s,a,u){return this.circleLine(t,e,n,r,i,o,s,a,u,o.radius)},J.prototype[u.CIRCLE|u.CONVEX]=J.prototype[u.CIRCLE|u.BOX]=J.prototype.circleConvex=function(t,e,n,r,i,o,s,a,u,l){for(var l="number"==typeof l?l:e.radius,c=H,h=X,p=V,f=z,d=Y,g=R,y=I,m=D,v=k,_=M,b=L,x=!1,w=Number.MAX_VALUE,T=o.vertices,E=0;E!==T.length+1;E++){var S=T[E%T.length],C=T[(E+1)%T.length];U.rotate(c,S,a),U.rotate(h,C,a),G(c,c,s),G(h,h,s),q(p,h,c),U.normalize(f,p),U.rotate90cw(d,f),U.scale(v,d,-e.radius),G(v,v,n),N(v,o,s,a)&&(U.sub(_,c,v),(S=Math.abs(U.dot(_,d)))<w)&&(U.copy(b,v),U.scale(m,d,w=S),U.add(m,m,v),x=!0)}if(x)return!!u||(A=this.createContactEquation(t,i,e,o),U.sub(A.normalA,b,n),U.normalize(A.normalA,A.normalA),U.scale(A.contactPointA,A.normalA,l),G(A.contactPointA,A.contactPointA,n),q(A.contactPointA,A.contactPointA,t.position),q(A.contactPointB,m,s),G(A.contactPointB,A.contactPointB,s),q(A.contactPointB,A.contactPointB,i.position),this.contactEquations.push(A),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(A)),1);if(0<l)for(E=0;E<T.length;E++){var A,P=T[E];if(U.rotate(y,P,a),G(y,y,s),q(g,y,n),U.squaredLength(g)<Math.pow(l,2))return!!u||(A=this.createContactEquation(t,i,e,o),U.copy(A.normalA,g),U.normalize(A.normalA,A.normalA),U.scale(A.contactPointA,A.normalA,l),G(A.contactPointA,A.contactPointA,n),q(A.contactPointA,A.contactPointA,t.position),q(A.contactPointB,y,s),G(A.contactPointB,A.contactPointB,s),q(A.contactPointB,A.contactPointB,i.position),this.contactEquations.push(A),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(A)),1)}return 0},U.create()),g=U.create(),y=U.create(),m=U.create();function N(t,e,n,r){for(var i=d,o=g,s=y,a=m,u=t,l=e.vertices,c=null,h=0;h!==l.length+1;h++){var p=l[h%l.length],f=l[(h+1)%l.length],p=(U.rotate(i,p,r),U.rotate(o,f,r),G(i,i,n),G(o,o,n),q(s,i,u),q(a,o,u),U.crossLength(s,a));if(p*(c=null===c?p:c)<=0)return;c=p}return 1}J.prototype[u.PARTICLE|u.CONVEX]=J.prototype[u.PARTICLE|u.BOX]=J.prototype.particleConvex=function(t,e,n,r,i,o,s,a,u){var l=H,c=X,h=V,p=z,f=Y,d=O,g=K,y=R,m=D,v=C,_=A,b=Number.MAX_VALUE,x=!1,w=o.vertices;if(!N(n,o,s,a))return 0;if(u)return!0;for(var T=0;T!==w.length+1;T++){var E=w[T%w.length],S=w[(T+1)%w.length],E=(U.rotate(l,E,a),U.rotate(c,S,a),G(l,l,s),G(c,c,s),q(h,c,l),U.normalize(p,h),U.rotate90cw(f,p),q(y,n,l),W(y,f),q(d,l,s),q(g,n,s),U.sub(v,l,n),Math.abs(U.dot(v,f)));E<b&&(U.scale(m,f,b=E),U.add(m,m,n),U.copy(_,f),x=!0)}return x?(u=this.createContactEquation(t,i,e,o),U.scale(u.normalA,_,-1),U.normalize(u.normalA,u.normalA),U.set(u.contactPointA,0,0),G(u.contactPointA,u.contactPointA,n),q(u.contactPointA,u.contactPointA,t.position),q(u.contactPointB,m,s),G(u.contactPointB,u.contactPointB,s),q(u.contactPointB,u.contactPointB,i.position),this.contactEquations.push(u),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(u)),1):0},J.prototype[u.CIRCLE]=J.prototype.circleCircle=function(t,e,n,r,i,o,s,a,u,l,c){var h=H,l=l||e.radius,c=c||o.radius,p=(q(h,n,s),l+c);return U.squaredLength(h)>Math.pow(p,2)?0:!!u||(h=this.createContactEquation(t,i,e,o),q(h.normalA,s,n),U.normalize(h.normalA,h.normalA),U.scale(h.contactPointA,h.normalA,l),U.scale(h.contactPointB,h.normalA,-c),G(h.contactPointA,h.contactPointA,n),q(h.contactPointA,h.contactPointA,t.position),G(h.contactPointB,h.contactPointB,s),q(h.contactPointB,h.contactPointB,i.position),this.contactEquations.push(h),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(h)),1)},J.prototype[u.PLANE|u.CONVEX]=J.prototype[u.PLANE|u.BOX]=J.prototype.planeConvex=function(t,e,n,r,i,o,s,a,u){var l=H,c=X,h=V,p=0;U.rotate(c,E,r);for(var f=0;f!==o.vertices.length;f++){var d=o.vertices[f];if(U.rotate(l,d,a),G(l,l,s),q(h,l,n),W(h,c)<=0){if(u)return!0;p++;var d=this.createContactEquation(t,i,e,o),g=(q(h,l,n),U.copy(d.normalA,c),W(h,d.normalA));U.scale(h,d.normalA,g),q(d.contactPointB,l,i.position),q(d.contactPointA,l,h),q(d.contactPointA,d.contactPointA,t.position),this.contactEquations.push(d),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(d))}}return this.enableFrictionReduction&&this.enableFriction&&p&&this.frictionEquations.push(this.createFrictionFromAverage(p)),p},J.prototype[u.PARTICLE|u.PLANE]=J.prototype.particlePlane=function(t,e,n,r,i,o,s,a,u){var l=H,c=X,s=(a=a||0,q(l,n,s),U.rotate(c,E,a),W(l,c));return 0<s?0:!!u||(a=this.createContactEquation(i,t,o,e),U.copy(a.normalA,c),U.scale(l,a.normalA,s),q(a.contactPointA,n,l),q(a.contactPointA,a.contactPointA,i.position),q(a.contactPointB,n,t.position),this.contactEquations.push(a),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(a)),1)},J.prototype[u.CIRCLE|u.PARTICLE]=J.prototype.circleParticle=function(t,e,n,r,i,o,s,a,u){var l=H;return q(l,s,n),U.squaredLength(l)>Math.pow(e.radius,2)?0:!!u||(u=this.createContactEquation(t,i,e,o),U.copy(u.normalA,l),U.normalize(u.normalA,u.normalA),U.scale(u.contactPointA,u.normalA,e.radius),G(u.contactPointA,u.contactPointA,n),q(u.contactPointA,u.contactPointA,t.position),q(u.contactPointB,s,i.position),this.contactEquations.push(u),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(u)),1)};var w=new s({radius:1}),S=U.create(),P=U.create(),j=(U.create(),J.prototype[u.PLANE|u.CAPSULE]=J.prototype.planeCapsule=function(t,e,n,r,i,o,s,a,u){var l,c=S,h=P,p=w,a=(U.set(c,-o.length/2,0),U.rotate(c,c,a),G(c,c,s),U.set(h,o.length/2,0),U.rotate(h,h,a),G(h,h,s),p.radius=o.radius,this.enableFrictionReduction&&(l=this.enableFriction,this.enableFriction=!1),this.circlePlane(i,p,c,0,t,e,n,r,u)),s=this.circlePlane(i,p,h,0,t,e,n,r,u);return this.enableFrictionReduction&&(this.enableFriction=l),u?a||s:(o=a+s,this.enableFrictionReduction&&o&&this.frictionEquations.push(this.createFrictionFromAverage(o)),o)},J.prototype[u.CIRCLE|u.PLANE]=J.prototype.circlePlane=function(t,e,n,r,i,o,s,a,u){var l=e,a=a||0,c=H,h=X,p=V,a=(q(c,n,s),U.rotate(h,E,a),W(h,c));return a>l.radius?0:!!u||(u=this.createContactEquation(i,t,o,e),U.copy(u.normalA,h),U.scale(u.contactPointB,u.normalA,-l.radius),G(u.contactPointB,u.contactPointB,n),q(u.contactPointB,u.contactPointB,t.position),U.scale(p,u.normalA,a),q(u.contactPointA,c,p),G(u.contactPointA,u.contactPointA,s),q(u.contactPointA,u.contactPointA,i.position),this.contactEquations.push(u),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(u)),1)},J.prototype[u.CONVEX]=J.prototype[u.CONVEX|u.BOX]=J.prototype[u.BOX]=J.prototype.convexConvex=function(L,t,e,n,F,r,i,o,N,s){var a=H,u=X,l=V,c=z,h=Y,p=K,f=$,d=Z,g=0,s="number"==typeof s?s:0;if(!J.findSeparatingAxis(t,e,n,r,i,o,a))return 0;q(f,i,e),0<W(a,f)&&U.scale(a,a,-1);var y=J.getClosestEdge(t,n,a,!0),m=J.getClosestEdge(r,o,a);if(-1===y||-1===m)return 0;for(var v=0;v<2;v++){var _,b=y,x=m,w=t,T=r,E=e,S=i,C=n,A=o,P=L,M=F;0===v&&(_=b,b=x,x=_,_=w,w=T,T=_,_=E,E=S,S=_,_=C,C=o,A=_,_=P,P=M,M=_);for(var O=x;O<x+2;O++){for(var R=T.vertices[(O+T.vertices.length)%T.vertices.length],j=(U.rotate(u,R,A),G(u,u,S),0),I=b-1;I<b+2;I++){var B=w.vertices[(I+w.vertices.length)%w.vertices.length],D=w.vertices[(I+1+w.vertices.length)%w.vertices.length],k=(U.rotate(l,B,C),U.rotate(c,D,C),G(l,l,E),G(c,c,E),q(h,c,l),U.rotate90cw(d,h),U.normalize(d,d),q(f,u,l),W(d,f));(I===b&&k<=s||I!==b&&k<=0)&&j++}if(3<=j){if(N)return!0;R=this.createContactEquation(P,M,w,T),B=(g++,w.vertices[b%w.vertices.length]),D=w.vertices[(b+1)%w.vertices.length],k=(U.rotate(l,B,C),U.rotate(c,D,C),G(l,l,E),G(c,c,E),q(h,c,l),U.rotate90cw(R.normalA,h),U.normalize(R.normalA,R.normalA),q(f,u,l),W(R.normalA,f));U.scale(p,R.normalA,k),q(R.contactPointA,u,E),q(R.contactPointA,R.contactPointA,p),G(R.contactPointA,R.contactPointA,E),q(R.contactPointA,R.contactPointA,P.position),q(R.contactPointB,u,S),G(R.contactPointB,R.contactPointB,S),q(R.contactPointB,R.contactPointB,M.position),this.contactEquations.push(R),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(R))}}}return this.enableFrictionReduction&&this.enableFriction&&g&&this.frictionEquations.push(this.createFrictionFromAverage(g)),g},U.fromValues(0,0)),Q=(J.projectConvexOntoAxis=function(t,e,n,r,i){var o,s=null,a=null,u=j;U.rotate(u,r,-n);for(var l=0;l<t.vertices.length;l++)o=t.vertices[l],o=W(o,u),(null===s||s<o)&&(s=o),(null===a||o<a)&&(a=o);s<a&&(n=a,a=s,s=n);n=W(e,r);U.set(i,a+n,s+n)},U.fromValues(0,0)),tt=U.fromValues(0,0),et=U.fromValues(0,0),nt=U.fromValues(0,0),rt=U.fromValues(0,0),it=U.fromValues(0,0),ot=(J.findSeparatingAxis=function(t,e,n,r,i,o,s){var a=null,u=!1,l=!1,c=Q,h=tt,p=et,f=nt,d=rt,g=it;if(t instanceof T&&r instanceof T)for(var y=0;2!==y;y++){var m=t,v=n;1===y&&(m=r,v=o);for(var _=0;2!==_;_++){0===_?U.set(f,0,1):1===_&&U.set(f,1,0),0!==v&&U.rotate(f,f,v),J.projectConvexOntoAxis(t,e,n,f,d),J.projectConvexOntoAxis(r,i,o,f,g);var b=d,x=g;d[0]>g[0]&&(x=d,b=g,0);u=(w=x[0]-b[1])<=0;(null===a||a<w)&&(U.copy(s,f),a=w,l=u)}}else for(y=0;2!==y;y++){m=t,v=n;1===y&&(m=r,v=o);for(_=0;_!==m.vertices.length;_++){U.rotate(h,m.vertices[_],v),U.rotate(p,m.vertices[(_+1)%m.vertices.length],v),q(c,p,h),U.rotate90cw(f,c),U.normalize(f,f),J.projectConvexOntoAxis(t,e,n,f,d),J.projectConvexOntoAxis(r,i,o,f,g);var w,b=d,x=g;d[0]>g[0]&&(x=d,b=g,0),u=(w=x[0]-b[1])<=0,(null===a||a<w)&&(U.copy(s,f),a=w,l=u)}}return l},U.fromValues(0,0)),st=U.fromValues(0,0),at=U.fromValues(0,0),ut=(J.getClosestEdge=function(t,e,n,r){for(var i=ot,o=st,s=at,a=(U.rotate(i,n,-e),r&&U.scale(i,i,-1),-1),u=t.vertices.length,l=-1,c=0;c!==u;c++){q(o,t.vertices[(c+1)%u],t.vertices[c%u]),U.rotate90cw(s,o),U.normalize(s,s);var h=W(s,i);(-1===a||l<h)&&(a=c%u,l=h)}return a},U.create()),lt=U.create(),ct=U.create(),ht=U.create(),pt=U.create(),ft=U.create(),dt=U.create(),gt=(J.prototype[u.CIRCLE|u.HEIGHTFIELD]=J.prototype.circleHeightfield=function(t,e,n,r,i,o,s,a,u,l){for(var c=o.heights,l=l||e.radius,h=o.elementWidth,p=lt,f=ut,d=pt,g=dt,y=ft,m=ct,v=ht,_=Math.floor((n[0]-l-s[0])/h),b=Math.ceil((n[0]+l-s[0])/h),x=(b>=c.length&&(b=c.length-1),c[_=_<0?0:_]),w=c[b],T=_;T<b;T++)c[T]<w&&(w=c[T]),c[T]>x&&(x=c[T]);if(n[1]-l>x)return!u&&0;for(var E=!1,T=_;T<b;T++){U.set(m,T*h,c[T]),U.set(v,(T+1)*h,c[T+1]),U.add(m,m,s),U.add(v,v,s),U.sub(y,v,m),U.rotate(y,y,Math.PI/2),U.normalize(y,y),U.scale(f,y,-l),U.add(f,f,n),U.sub(p,f,m);var S=U.dot(p,y);if(f[0]>=m[0]&&f[0]<v[0]&&S<=0){if(u)return!0;E=!0,U.scale(p,y,-S),U.add(d,f,p),U.copy(g,y);var C=this.createContactEquation(i,t,o,e);U.copy(C.normalA,g),U.scale(C.contactPointB,C.normalA,-l),G(C.contactPointB,C.contactPointB,n),q(C.contactPointB,C.contactPointB,t.position),U.copy(C.contactPointA,d),U.sub(C.contactPointA,C.contactPointA,i.position),this.contactEquations.push(C),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(C))}}if(E=!1,0<l)for(T=_;T<=b;T++)if(U.set(m,T*h,c[T]),U.add(m,m,s),U.sub(p,n,m),U.squaredLength(p)<Math.pow(l,2)){if(u)return!0;E=!0,C=this.createContactEquation(i,t,o,e);U.copy(C.normalA,p),U.normalize(C.normalA,C.normalA),U.scale(C.contactPointB,C.normalA,-l),G(C.contactPointB,C.contactPointB,n),q(C.contactPointB,C.contactPointB,t.position),q(C.contactPointA,m,s),G(C.contactPointA,C.contactPointA,s),q(C.contactPointA,C.contactPointA,i.position),this.contactEquations.push(C),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(C))}return E?1:0},U.create()),yt=U.create(),mt=U.create(),vt=new a({vertices:[U.create(),U.create(),U.create(),U.create()]});J.prototype[u.BOX|u.HEIGHTFIELD]=J.prototype[u.CONVEX|u.HEIGHTFIELD]=J.prototype.convexHeightfield=function(t,e,n,r,i,o,s,a,u){for(var l=o.heights,c=o.elementWidth,h=gt,p=yt,f=mt,d=vt,o=Math.floor((t.aabb.lowerBound[0]-s[0])/c),g=Math.ceil((t.aabb.upperBound[0]-s[0])/c),y=(g>=l.length&&(g=l.length-1),l[o=o<0?0:o]),m=l[g],v=o;v<g;v++)l[v]<m&&(m=l[v]),l[v]>y&&(y=l[v]);if(t.aabb.lowerBound[1]>y)return!u&&0;for(var _=0,v=o;v<g;v++){U.set(h,v*c,l[v]),U.set(p,(v+1)*c,l[v+1]),U.add(h,h,s),U.add(p,p,s);U.set(f,.5*(p[0]+h[0]),.5*(p[1]+h[1]-100)),U.sub(d.vertices[0],p,f),U.sub(d.vertices[1],h,f),U.copy(d.vertices[2],d.vertices[1]),U.copy(d.vertices[3],d.vertices[0]),d.vertices[2][1]-=100,d.vertices[3][1]-=100,_+=this.convexConvex(t,e,n,r,i,d,f,0,u)}return _}},{"../equations/ContactEquation":68,"../equations/Equation":69,"../equations/FrictionEquation":70,"../math/vec2":77,"../objects/Body":78,"../shapes/Box":84,"../shapes/Circle":86,"../shapes/Convex":87,"../shapes/Shape":92,"../utils/ContactEquationPool":95,"../utils/FrictionEquationPool":96,"../utils/TupleDictionary":103,"../utils/Utils":104}],58:[function(t,e,n){e.exports=s;var l=t("../math/vec2");t("../collision/RaycastResult"),t("../shapes/Shape"),t("../collision/AABB");function s(t){this.from=(t=t||{}).from?l.fromValues(t.from[0],t.from[1]):l.create(),this.to=t.to?l.fromValues(t.to[0],t.to[1]):l.create(),this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,this.skipBackfaces=!!t.skipBackfaces,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:-1,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:-1,this.mode=void 0!==t.mode?t.mode:s.ANY,this.callback=t.callback||function(t){},this.direction=l.create(),this.length=1,this.update()}(s.prototype.constructor=s).CLOSEST=1,s.ANY=2,s.ALL=4,s.prototype.update=function(){var t=this.direction;l.sub(t,this.to,this.from),this.length=l.length(t),l.normalize(t,t)},s.prototype.intersectBodies=function(t,e){for(var n=0,r=e.length;!t.shouldStop(this)&&n<r;n++){var i=e[n],o=i.getAABB();(0<=o.overlapsRay(this)||o.containsPoint(this.from))&&this.intersectBody(t,i)}};var u=l.create(),c=(s.prototype.intersectBody=function(t,e){var n=this.checkCollisionResponse;if(!n||e.collisionResponse)for(var r=u,i=0,o=e.shapes.length;i<o;i++){var s=e.shapes[i];if((!n||s.collisionResponse)&&(0!=(this.collisionGroup&s.collisionMask)&&0!=(s.collisionGroup&this.collisionMask))){l.rotate(r,s.position,e.angle),l.add(r,r,e.position);var a=s.angle+e.angle;if(this.intersectShape(t,s,a,r,e),t.shouldStop(this))break}}},s.prototype.intersectShape=function(t,e,n,r,i){var o,s,a,u=this.from;u=u,o=this.direction,s=r,l.sub(c,s,u),a=l.dot(c,o),l.scale(h,o,a),l.add(h,h,u),l.squaredDistance(s,h)>e.boundingRadius*e.boundingRadius||(this._currentBody=i,(this._currentShape=e).raycast(t,this,r,n),this._currentBody=this._currentShape=null)},s.prototype.getAABB=function(t){var e=this.to,n=this.from;l.set(t.lowerBound,Math.min(e[0],n[0]),Math.min(e[1],n[1])),l.set(t.upperBound,Math.max(e[0],n[0]),Math.max(e[1],n[1]))},l.create(),s.prototype.reportIntersection=function(t,e,n,r){this.from,this.to;var i=this._currentShape,o=this._currentBody;if(!(this.skipBackfaces&&0<l.dot(n,this.direction)))switch(this.mode){case s.ALL:t.set(n,i,o,e,r),this.callback(t);break;case s.CLOSEST:(e<t.fraction||!t.hasHit())&&t.set(n,i,o,e,r);break;case s.ANY:t.set(n,i,o,e,r)}},l.create()),h=l.create()},{"../collision/AABB":54,"../collision/RaycastResult":59,"../math/vec2":77,"../shapes/Shape":92}],59:[function(t,e,n){var o=t("../math/vec2"),r=t("../collision/Ray");function i(){this.normal=o.create(),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1}(e.exports=i).prototype.reset=function(){o.set(this.normal,0,0),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1},i.prototype.getHitDistance=function(t){return o.distance(t.from,t.to)*this.fraction},i.prototype.hasHit=function(){return-1!==this.fraction},i.prototype.getHitPoint=function(t,e){o.lerp(t,e.from,e.to,this.fraction)},i.prototype.stop=function(){this.isStopped=!0},i.prototype.shouldStop=function(t){return this.isStopped||-1!==this.fraction&&t.mode===r.ANY},i.prototype.set=function(t,e,n,r,i){o.copy(this.normal,t),this.shape=e,this.body=n,this.fraction=r,this.faceIndex=i}},{"../collision/Ray":58,"../math/vec2":77}],60:[function(t,e,n){var r=t("../utils/Utils"),h=t("../collision/Broadphase");function i(){h.call(this,h.SAP),this.axisList=[],this.axisIndex=0;var e=this;this._addBodyHandler=function(t){e.axisList.push(t.body)},this._removeBodyHandler=function(t){t=e.axisList.indexOf(t.body);-1!==t&&e.axisList.splice(t,1)}}(((e.exports=i).prototype=new h).constructor=i).prototype.setWorld=function(t){this.axisList.length=0,r.appendArray(this.axisList,t.bodies),t.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),t.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=t},i.sortAxisList=function(t,e){e|=0;for(var n=1,r=t.length;n<r;n++){for(var i=t[n],o=n-1;0<=o&&!(t[o].aabb.lowerBound[e]<=i.aabb.lowerBound[e]);o--)t[o+1]=t[o];t[o+1]=i}return t},i.prototype.sortList=function(){var t=this.axisList,e=this.axisIndex;i.sortAxisList(t,e)},i.prototype.getCollisionPairs=function(t){for(var e=this.axisList,n=this.result,r=this.axisIndex,i=(n.length=0,e.length);i--;){var o=e[i];o.aabbNeedsUpdate&&o.updateAABB()}this.sortList();for(var s=0,a=0|e.length;s!==a;s++)for(var u=e[s],l=s+1;l<a;l++){var c=e[l];if(!(c.aabb.lowerBound[r]<=u.aabb.upperBound[r]))break;h.canCollide(u,c)&&this.boundingVolumeCheck(u,c)&&n.push(u,c)}return n},i.prototype.aabbQuery=function(t,e,n){n=n||[],this.sortList();for(var r=this.axisIndex,r=2===r?"z":1===r?"y":"x",i=this.axisList,o=(e.lowerBound[r],e.upperBound[r],0);o<i.length;o++){var s=i[o];s.aabbNeedsUpdate&&s.updateAABB(),s.aabb.overlaps(e)&&n.push(s)}return n}},{"../collision/Broadphase":55,"../utils/Utils":104}],61:[function(t,e,n){e.exports=r;var i=t("../utils/Utils");function r(t,e,n,r){this.type=n,r=i.defaults(r,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.collideConnected=r.collideConnected,r.wakeUpBodies&&(t&&t.wakeUp(),e)&&e.wakeUp()}r.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},r.DISTANCE=1,r.GEAR=2,r.LOCK=3,r.PRISMATIC=4,r.REVOLUTE=5,r.prototype.setStiffness=function(t){for(var e=this.equations,n=0;n!==e.length;n++){var r=e[n];r.stiffness=t,r.needsUpdate=!0}},r.prototype.setRelaxation=function(t){for(var e=this.equations,n=0;n!==e.length;n++){var r=e[n];r.relaxation=t,r.needsUpdate=!0}}},{"../utils/Utils":104}],62:[function(t,e,n){var h=t("./Constraint"),p=t("../equations/Equation"),f=t("../math/vec2"),d=t("../utils/Utils");function r(t,e,n){n=d.defaults(n,{localAnchorA:[0,0],localAnchorB:[0,0]}),h.call(this,t,e,h.DISTANCE,n),this.localAnchorA=f.fromValues(n.localAnchorA[0],n.localAnchorA[1]),this.localAnchorB=f.fromValues(n.localAnchorB[0],n.localAnchorB[1]);var r,i=this.localAnchorA,o=this.localAnchorB,s=(this.distance=0,"number"==typeof n.distance?this.distance=n.distance:(s=f.create(),r=f.create(),a=f.create(),f.rotate(s,i,t.angle),f.rotate(r,o,e.angle),f.add(a,e.position,r),f.sub(a,a,s),f.sub(a,a,t.position),this.distance=f.length(a)),r=void 0===n.maxForce?Number.MAX_VALUE:n.maxForce,new p(t,e,-r,r)),a=(this.equations=[s],this.maxForce=r,f.create()),u=f.create(),l=f.create(),c=this;s.computeGq=function(){var t=this.bodyA,e=this.bodyB,n=t.position,r=e.position;return f.rotate(u,i,t.angle),f.rotate(l,o,e.angle),f.add(a,r,l),f.sub(a,a,u),f.sub(a,a,n),f.length(a)-c.distance},this.setMaxForce(r),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}((e.exports=r).prototype=new h).constructor=r;var s=f.create(),a=f.create(),u=f.create();r.prototype.update=function(){var t=this.equations[0],e=this.bodyA,n=this.bodyB,r=(this.distance,e.position),i=n.position,o=this.equations[0],t=t.G,e=(f.rotate(a,this.localAnchorA,e.angle),f.rotate(u,this.localAnchorB,n.angle),f.add(s,i,u),f.sub(s,s,a),f.sub(s,s,r),this.position=f.length(s),!1);this.upperLimitEnabled&&this.position>this.upperLimit&&(o.maxForce=0,o.minForce=-this.maxForce,this.distance=this.upperLimit,e=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(o.maxForce=this.maxForce,o.minForce=0,this.distance=this.lowerLimit,e=!0),!this.lowerLimitEnabled&&!this.upperLimitEnabled||e?(o.enabled=!0,f.normalize(s,s),n=f.crossLength(a,s),i=f.crossLength(u,s),t[0]=-s[0],t[1]=-s[1],t[2]=-n,t[3]=s[0],t[4]=s[1],t[5]=i):o.enabled=!1},r.prototype.setMaxForce=function(t){var e=this.equations[0];e.minForce=-t,e.maxForce=t},r.prototype.getMaxForce=function(){return this.equations[0].maxForce}},{"../equations/Equation":69,"../math/vec2":77,"../utils/Utils":104,"./Constraint":61}],63:[function(t,e,n){var r=t("./Constraint"),i=(t("../equations/Equation"),t("../equations/AngleLockEquation"));t("../math/vec2");function o(t,e,n){r.call(this,t,e,r.GEAR,n=n||{}),this.ratio=void 0!==n.ratio?n.ratio:1,this.angle=void 0!==n.angle?n.angle:e.angle-this.ratio*t.angle,n.angle=this.angle,n.ratio=this.ratio,this.equations=[new i(t,e,n)],void 0!==n.maxTorque&&this.setMaxTorque(n.maxTorque)}(((e.exports=o).prototype=new r).constructor=o).prototype.update=function(){var t=this.equations[0];t.ratio!==this.ratio&&t.setRatio(this.ratio),t.angle=this.angle},o.prototype.setMaxTorque=function(t){this.equations[0].setMaxTorque(t)},o.prototype.getMaxTorque=function(t){return this.equations[0].maxForce}},{"../equations/AngleLockEquation":67,"../equations/Equation":69,"../math/vec2":77,"./Constraint":61}],64:[function(t,e,n){var p=t("./Constraint"),f=t("../math/vec2"),d=t("../equations/Equation");function r(t,e,n){p.call(this,t,e,p.LOCK,n=n||{});var r=void 0===n.maxForce?Number.MAX_VALUE:n.maxForce,i=(n.localAngleB,new d(t,e,-r,r)),o=new d(t,e,-r,r),s=new d(t,e,-r,r),a=f.create(),u=f.create(),l=this,c=(i.computeGq=function(){return f.rotate(a,l.localOffsetB,t.angle),f.sub(u,e.position,t.position),f.sub(u,u,a),u[0]},o.computeGq=function(){return f.rotate(a,l.localOffsetB,t.angle),f.sub(u,e.position,t.position),f.sub(u,u,a),u[1]},f.create()),h=f.create();s.computeGq=function(){return f.rotate(c,l.localOffsetB,e.angle-l.localAngleB),f.scale(c,c,-1),f.sub(u,t.position,e.position),f.add(u,u,c),f.rotate(h,c,-Math.PI/2),f.normalize(h,h),f.dot(u,h)},this.localOffsetB=f.create(),n.localOffsetB?f.copy(this.localOffsetB,n.localOffsetB):(f.sub(this.localOffsetB,e.position,t.position),f.rotate(this.localOffsetB,this.localOffsetB,-t.angle)),this.localAngleB=0,"number"==typeof n.localAngleB?this.localAngleB=n.localAngleB:this.localAngleB=e.angle-t.angle,this.equations.push(i,o,s),this.setMaxForce(r)}(((e.exports=r).prototype=new p).constructor=r).prototype.setMaxForce=function(t){for(var e=this.equations,n=0;n<this.equations.length;n++)e[n].maxForce=t,e[n].minForce=-t},r.prototype.getMaxForce=function(){return this.equations[0].maxForce};var o=f.create(),s=f.create(),a=f.create(),u=f.fromValues(1,0),l=f.fromValues(0,1);r.prototype.update=function(){var t=this.equations[0],e=this.equations[1],n=this.equations[2],r=this.bodyA,i=this.bodyB;f.rotate(o,this.localOffsetB,r.angle),f.rotate(s,this.localOffsetB,i.angle-this.localAngleB),f.scale(s,s,-1),f.rotate(a,s,Math.PI/2),f.normalize(a,a),t.G[0]=-1,t.G[1]=0,t.G[2]=-f.crossLength(o,u),t.G[3]=1,e.G[0]=0,e.G[1]=-1,e.G[2]=-f.crossLength(o,l),e.G[4]=1,n.G[0]=-a[0],n.G[1]=-a[1],n.G[3]=a[0],n.G[4]=a[1],n.G[5]=f.crossLength(s,a)}},{"../equations/Equation":69,"../math/vec2":77,"./Constraint":61}],65:[function(t,e,n){var f=t("./Constraint"),d=t("../equations/ContactEquation"),g=t("../equations/Equation"),y=t("../math/vec2"),m=t("../equations/RotationalLockEquation");function r(r,i,t){f.call(this,r,i,f.PRISMATIC,t=t||{});var o=y.fromValues(0,0),s=y.fromValues(1,0),a=y.fromValues(0,0),e=(t.localAnchorA&&y.copy(o,t.localAnchorA),t.localAxisA&&y.copy(s,t.localAxisA),t.localAnchorB&&y.copy(a,t.localAnchorB),this.localAnchorA=o,this.localAnchorB=a,this.localAxisA=s,this.maxForce=void 0!==t.maxForce?t.maxForce:Number.MAX_VALUE),n=new g(r,i,-e,e),u=new y.create,l=new y.create,c=new y.create,h=new y.create,p=(n.computeGq=function(){return y.dot(c,h)},n.updateJacobian=function(){var t=this.G,e=r.position,n=i.position;y.rotate(u,o,r.angle),y.rotate(l,a,i.angle),y.add(c,n,l),y.sub(c,c,e),y.sub(c,c,u),y.rotate(h,s,r.angle+Math.PI/2),t[0]=-h[0],t[1]=-h[1],t[2]=-y.crossLength(u,h)+y.crossLength(h,c),t[3]=h[0],t[4]=h[1],t[5]=y.crossLength(l,h)},this.equations.push(n),t.disableRotationalLock||(n=new m(r,i,-e,e),this.equations.push(n)),this.position=0,this.velocity=0,this.lowerLimitEnabled=void 0!==t.lowerLimit,this.upperLimitEnabled=void 0!==t.upperLimit,this.lowerLimit=void 0!==t.lowerLimit?t.lowerLimit:0,this.upperLimit=void 0!==t.upperLimit?t.upperLimit:1,this.upperLimitEquation=new d(r,i),this.lowerLimitEquation=new d(r,i),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=e,this.motorEquation=new g(r,i),this.motorEnabled=!1,this.motorSpeed=0,this),n=this.motorEquation;n.computeGW;n.computeGq=function(){return 0},n.computeGW=function(){var t=this.G,e=this.bodyA,n=this.bodyB,r=e.velocity,i=n.velocity,e=e.angularVelocity,n=n.angularVelocity;return this.gmult(t,r,e,i,n)+p.motorSpeed}}((e.exports=r).prototype=new f).constructor=r;var p=y.create(),v=y.create(),_=y.create(),b=y.create(),x=y.create(),w=y.create();r.prototype.update=function(){var t,e=this.equations,n=e[0],r=this.upperLimit,i=this.lowerLimit,o=this.upperLimitEquation,s=this.lowerLimitEquation,a=this.bodyA,u=this.bodyB,l=this.localAxisA,c=this.localAnchorA,h=this.localAnchorB,n=(n.updateJacobian(),y.rotate(p,l,a.angle),y.rotate(b,c,a.angle),y.add(v,b,a.position),y.rotate(x,h,u.angle),y.add(_,x,u.position),this.position=y.dot(_,p)-y.dot(v,p));this.motorEnabled&&((l=this.motorEquation.G)[0]=p[0],l[1]=p[1],l[2]=y.crossLength(p,x),l[3]=-p[0],l[4]=-p[1],l[5]=-y.crossLength(p,b)),this.upperLimitEnabled&&r<n?(y.scale(o.normalA,p,-1),y.sub(o.contactPointA,v,a.position),y.sub(o.contactPointB,_,u.position),y.scale(w,p,r),y.add(o.contactPointA,o.contactPointA,w),-1===e.indexOf(o)&&e.push(o)):-1!==(t=e.indexOf(o))&&e.splice(t,1),this.lowerLimitEnabled&&n<i?(y.scale(s.normalA,p,1),y.sub(s.contactPointA,v,a.position),y.sub(s.contactPointB,_,u.position),y.scale(w,p,i),y.sub(s.contactPointB,s.contactPointB,w),-1===e.indexOf(s)&&e.push(s)):-1!==(t=e.indexOf(s))&&e.splice(t,1)},r.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},r.prototype.disableMotor=function(){var t;this.motorEnabled&&(t=this.equations.indexOf(this.motorEquation),this.equations.splice(t,1),this.motorEnabled=!1)},r.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)}},{"../equations/ContactEquation":68,"../equations/Equation":69,"../equations/RotationalLockEquation":71,"../math/vec2":77,"./Constraint":61}],66:[function(t,e,n){var s=t("./Constraint"),a=t("../equations/Equation"),u=t("../equations/RotationalVelocityEquation"),l=t("../equations/RotationalLockEquation"),f=t("../math/vec2"),d=(e.exports=r,f.create()),g=f.create(),y=f.fromValues(1,0),m=f.fromValues(0,1),c=f.create();function r(t,e,n){s.call(this,t,e,s.REVOLUTE,n=n||{});var r=this.maxForce=void 0!==n.maxForce?n.maxForce:Number.MAX_VALUE,n=(this.pivotA=f.create(),this.pivotB=f.create(),n.worldPivot?(f.sub(this.pivotA,n.worldPivot,t.position),f.sub(this.pivotB,n.worldPivot,e.position),f.rotate(this.pivotA,this.pivotA,-t.angle),f.rotate(this.pivotB,this.pivotB,-e.angle)):(f.copy(this.pivotA,n.localPivotA),f.copy(this.pivotB,n.localPivotB)),this.equations=[new a(t,e,-r,r),new a(t,e,-r,r)]),i=n[0],n=n[1],o=this;i.computeGq=function(){return f.rotate(d,o.pivotA,t.angle),f.rotate(g,o.pivotB,e.angle),f.add(c,e.position,g),f.sub(c,c,t.position),f.sub(c,c,d),f.dot(c,y)},n.computeGq=function(){return f.rotate(d,o.pivotA,t.angle),f.rotate(g,o.pivotB,e.angle),f.add(c,e.position,g),f.sub(c,c,t.position),f.sub(c,c,d),f.dot(c,m)},n.minForce=i.minForce=-r,n.maxForce=i.maxForce=r,this.motorEquation=new u(t,e),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new l(t,e),this.lowerLimitEquation=new l(t,e),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}((r.prototype=new s).constructor=r).prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)},r.prototype.update=function(){var t,e=this.bodyA,n=this.bodyB,r=this.pivotA,i=this.pivotB,o=this.equations,s=(o[0],o[1],o[0]),a=o[1],u=this.upperLimit,l=this.lowerLimit,c=this.upperLimitEquation,h=this.lowerLimitEquation,p=this.angle=n.angle-e.angle;this.upperLimitEnabled&&u<p?(c.angle=u,-1===o.indexOf(c)&&o.push(c)):-1!==(t=o.indexOf(c))&&o.splice(t,1),this.lowerLimitEnabled&&p<l?(h.angle=l,-1===o.indexOf(h)&&o.push(h)):-1!==(t=o.indexOf(h))&&o.splice(t,1),f.rotate(d,r,e.angle),f.rotate(g,i,n.angle),s.G[0]=-1,s.G[1]=0,s.G[2]=-f.crossLength(d,y),s.G[3]=1,s.G[4]=0,s.G[5]=f.crossLength(g,y),a.G[0]=0,a.G[1]=-1,a.G[2]=-f.crossLength(d,m),a.G[3]=0,a.G[4]=1,a.G[5]=f.crossLength(g,m)},r.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},r.prototype.disableMotor=function(){var t;this.motorEnabled&&(t=this.equations.indexOf(this.motorEquation),this.equations.splice(t,1),this.motorEnabled=!1)},r.prototype.motorIsEnabled=function(){return!!this.motorEnabled},r.prototype.setMotorSpeed=function(t){var e;this.motorEnabled&&(e=this.equations.indexOf(this.motorEquation),this.equations[e].relativeVelocity=t)},r.prototype.getMotorSpeed=function(){return!!this.motorEnabled&&this.motorEquation.relativeVelocity}},{"../equations/Equation":69,"../equations/RotationalLockEquation":71,"../equations/RotationalVelocityEquation":72,"../math/vec2":77,"./Constraint":61}],67:[function(t,e,n){var r=t("./Equation");t("../math/vec2");function i(t,e,n){n=n||{},r.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=n.angle||0,this.ratio="number"==typeof n.ratio?n.ratio:1,this.setRatio(this.ratio)}(((e.exports=i).prototype=new r).constructor=i).prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},i.prototype.setRatio=function(t){var e=this.G;e[2]=t,e[5]=-1,this.ratio=t},i.prototype.setMaxTorque=function(t){this.maxForce=t,this.minForce=-t}},{"../math/vec2":77,"./Equation":69}],68:[function(t,e,n){var r=t("./Equation"),f=t("../math/vec2");function i(t,e){r.call(this,t,e,0,Number.MAX_VALUE),this.contactPointA=f.create(),this.penetrationVec=f.create(),this.contactPointB=f.create(),this.normalA=f.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}(((e.exports=i).prototype=new r).constructor=i).prototype.computeB=function(t,e,n){var r,i=this.bodyA,o=this.bodyB,s=this.contactPointA,a=this.contactPointB,i=i.position,o=o.position,u=this.penetrationVec,l=this.normalA,c=this.G,h=f.crossLength(s,l),p=f.crossLength(a,l),c=(c[0]=-l[0],c[1]=-l[1],c[2]=-h,c[3]=l[0],c[4]=l[1],c[5]=p,f.add(u,o,a),f.sub(u,u,i),f.sub(u,u,s),h=this.firstImpact&&0!==this.restitution?(r=0,1/e*(1+this.restitution)*this.computeGW()):(r=f.dot(l,u)+this.offset,this.computeGW()),this.computeGiMf());return-r*t-h*e-n*c};var o=f.create(),s=f.create(),a=f.create();i.prototype.getVelocityAlongNormal=function(){return this.bodyA.getVelocityAtPoint(o,this.contactPointA),this.bodyB.getVelocityAtPoint(s,this.contactPointB),f.subtract(a,o,s),f.dot(this.normalA,a)}},{"../math/vec2":77,"./Equation":69}],69:[function(t,e,n){e.exports=s;var h=t("../math/vec2"),o=t("../utils/Utils");t("../objects/Body");function s(t,e,n,r){this.minForce=void 0===n?-Number.MAX_VALUE:n,this.maxForce=void 0===r?Number.MAX_VALUE:r,this.bodyA=t,this.bodyB=e,this.stiffness=s.DEFAULT_STIFFNESS,this.relaxation=s.DEFAULT_RELAXATION,this.G=new o.ARRAY_TYPE(6);for(var i=0;i<6;i++)this.G[i]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}(s.prototype.constructor=s).DEFAULT_STIFFNESS=1e6,s.DEFAULT_RELAXATION=4,s.prototype.update=function(){var t=this.stiffness,e=this.relaxation,n=this.timeStep;this.a=4/(n*(1+4*e)),this.b=4*e/(1+4*e),this.epsilon=4/(n*n*t*(1+4*e)),this.needsUpdate=!1},s.prototype.gmult=function(t,e,n,r,i){return t[0]*e[0]+t[1]*e[1]+t[2]*n+t[3]*r[0]+t[4]*r[1]+t[5]*i},s.prototype.computeB=function(t,e,n){var r=this.computeGW();return-this.computeGq()*t-r*e-this.computeGiMf()*n};var r=h.create(),i=h.create(),p=(s.prototype.computeGq=function(){var t=this.G,e=this.bodyA,n=this.bodyB,e=(e.position,n.position,e.angle),n=n.angle;return this.gmult(t,r,e,i,n)+this.offset},s.prototype.computeGW=function(){var t=this.G,e=this.bodyA,n=this.bodyB,r=e.velocity,i=n.velocity,e=e.angularVelocity,n=n.angularVelocity;return this.gmult(t,r,e,i,n)+this.relativeVelocity},s.prototype.computeGWlambda=function(){var t=this.G,e=this.bodyA,n=this.bodyB,r=e.vlambda,i=n.vlambda,e=e.wlambda,n=n.wlambda;return this.gmult(t,r,e,i,n)},h.create()),f=h.create(),d=(s.prototype.computeGiMf=function(){var t=this.bodyA,e=this.bodyB,n=t.force,r=t.angularForce,i=e.force,o=e.angularForce,s=t.invMassSolve,a=e.invMassSolve,u=t.invInertiaSolve,l=e.invInertiaSolve,c=this.G;return h.scale(p,n,s),h.multiply(p,t.massMultiplier,p),h.scale(f,i,a),h.multiply(f,e.massMultiplier,f),this.gmult(c,p,r*u,f,o*l)},s.prototype.computeGiMGt=function(){var t=this.bodyA,e=this.bodyB,n=t.invMassSolve,r=e.invMassSolve,i=t.invInertiaSolve,o=e.invInertiaSolve,s=this.G;return s[0]*s[0]*n*t.massMultiplier[0]+s[1]*s[1]*n*t.massMultiplier[1]+s[2]*s[2]*i+s[3]*s[3]*r*e.massMultiplier[0]+s[4]*s[4]*r*e.massMultiplier[1]+s[5]*s[5]*o},h.create()),g=h.create(),y=h.create();h.create(),h.create(),h.create();s.prototype.addToWlambda=function(t){var e=this.bodyA,n=this.bodyB,r=d,i=g,o=y,s=e.invMassSolve,a=n.invMassSolve,u=e.invInertiaSolve,l=n.invInertiaSolve,c=this.G;i[0]=c[0],i[1]=c[1],o[0]=c[3],o[1]=c[4],h.scale(r,i,s*t),h.multiply(r,r,e.massMultiplier),h.add(e.vlambda,e.vlambda,r),e.wlambda+=u*c[2]*t,h.scale(r,o,a*t),h.multiply(r,r,n.massMultiplier),h.add(n.vlambda,n.vlambda,r),n.wlambda+=l*c[5]*t},s.prototype.computeInvC=function(t){return 1/(this.computeGiMGt()+t)}},{"../math/vec2":77,"../objects/Body":78,"../utils/Utils":104}],70:[function(t,e,n){var a=t("../math/vec2"),r=t("./Equation");t("../utils/Utils");function i(t,e,n){r.call(this,t,e,-n,n),this.contactPointA=a.create(),this.contactPointB=a.create(),this.t=a.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}(((e.exports=i).prototype=new r).constructor=i).prototype.setSlipForce=function(t){this.maxForce=t,this.minForce=-t},i.prototype.getSlipForce=function(){return this.maxForce},i.prototype.computeB=function(t,e,n){this.bodyA,this.bodyB;var r=this.contactPointA,i=this.contactPointB,o=this.t,s=this.G;return s[0]=-o[0],s[1]=-o[1],s[2]=-a.crossLength(r,o),s[3]=o[0],s[4]=o[1],s[5]=a.crossLength(i,o),-this.computeGW()*e-n*this.computeGiMf()}},{"../math/vec2":77,"../utils/Utils":104,"./Equation":69}],71:[function(t,e,n){var r=t("./Equation"),i=t("../math/vec2");function o(t,e,n){n=n||{},r.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=n.angle||0;t=this.G;t[2]=1,t[5]=-1}((e.exports=o).prototype=new r).constructor=o;var s=i.create(),a=i.create(),u=i.fromValues(1,0),l=i.fromValues(0,1);o.prototype.computeGq=function(){return i.rotate(s,u,this.bodyA.angle+this.angle),i.rotate(a,l,this.bodyB.angle),i.dot(s,a)}},{"../math/vec2":77,"./Equation":69}],72:[function(t,e,n){var r=t("./Equation");t("../math/vec2");function i(t,e){r.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}(((e.exports=i).prototype=new r).constructor=i).prototype.computeB=function(t,e,n){var r=this.G,r=(r[2]=-1,r[5]=this.ratio,this.computeGiMf());return-this.computeGW()*e-n*r}},{"../math/vec2":77,"./Equation":69}],73:[function(t,e,n){function r(){}(e.exports=r).prototype={constructor:r,on:function(t,e,n){e.context=n||this,void 0===this._listeners&&(this._listeners={});n=this._listeners;return void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e),this},has:function(t,e){if(void 0!==this._listeners){var n=this._listeners;if(e){if(void 0!==n[t]&&-1!==n[t].indexOf(e))return!0}else if(void 0!==n[t])return!0}return!1},off:function(t,e){var n;return void 0!==this._listeners&&-1!==(e=(n=this._listeners)[t].indexOf(e))&&n[t].splice(e,1),this},emit:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=0,r=e.length;n<r;n++){var i=e[n];i.call(i.context,t)}}}return this}}},{}],74:[function(t,e,n){var r=t("./Material"),i=t("../equations/Equation");function o(t,e,n){if(n=n||{},!(t instanceof r&&e instanceof r))throw new Error("First two arguments must be Material instances.");this.id=o.idCounter++,this.materialA=t,this.materialB=e,this.friction=void 0!==n.friction?Number(n.friction):.3,this.restitution=void 0!==n.restitution?Number(n.restitution):0,this.stiffness=void 0!==n.stiffness?Number(n.stiffness):i.DEFAULT_STIFFNESS,this.relaxation=void 0!==n.relaxation?Number(n.relaxation):i.DEFAULT_RELAXATION,this.frictionStiffness=void 0!==n.frictionStiffness?Number(n.frictionStiffness):i.DEFAULT_STIFFNESS,this.frictionRelaxation=void 0!==n.frictionRelaxation?Number(n.frictionRelaxation):i.DEFAULT_RELAXATION,this.surfaceVelocity=void 0!==n.surfaceVelocity?Number(n.surfaceVelocity):0,this.contactSkinSize=.005}(e.exports=o).idCounter=0},{"../equations/Equation":69,"./Material":75}],75:[function(t,e,n){function r(t){this.id=t||r.idCounter++}(e.exports=r).idCounter=0},{}],76:[function(t,e,n){var v={GetArea:function(t){if(t.length<6)return 0;for(var e=t.length-2,n=0,r=0;r<e;r+=2)n+=(t[r+2]-t[r])*(t[r+1]+t[r+3]);return.5*-(n+=(t[0]-t[e])*(t[1+e]+t[1]))},Triangulate:function(t){var e=t.length>>1;if(e<3)return[];for(var n=[],r=[],i=0;i<e;i++)r.push(i);for(var i=0,o=e;3<o;){var s=r[(i+0)%o],a=r[(i+1)%o],u=r[(i+2)%o],l=t[2*s],c=t[2*s+1],h=t[2*a],p=t[2*a+1],f=t[2*u],d=t[2*u+1],g=!1;if(v._convex(l,c,h,p,f,d))for(var g=!0,y=0;y<o;y++){var m=r[y];if(m!=s&&m!=a&&m!=u&&v._PointInTriangle(t[2*m],t[2*m+1],l,c,h,p,f,d)){g=!1;break}}if(g)n.push(s,a,u),r.splice((i+1)%o,1),o--,i=0;else if(i++>3*o)break}return n.push(r[0],r[1],r[2]),n},_PointInTriangle:function(t,e,n,r,i,o,s,a){s-=n,a-=r,i-=n,o-=r,t-=n,n=e-r,e=s*s+a*a,r=s*i+a*o,s=s*t+a*n,a=i*i+o*o,i=i*t+o*n,t=1/(e*a-r*r),o=(a*s-r*i)*t,n=(e*i-r*s)*t;return 0<=o&&0<=n&&o+n<1},_convex:function(t,e,n,r,i,o){return 0<=(e-r)*(i-n)+(n-t)*(o-r)}};e.exports=v},{}],77:[function(t,e,n){var o=e.exports={},r=t("../utils/Utils");o.crossLength=function(t,e){return t[0]*e[1]-t[1]*e[0]},o.crossVZ=function(t,e,n){return o.rotate(t,e,-Math.PI/2),o.scale(t,t,n),t},o.crossZV=function(t,e,n){return o.rotate(t,n,Math.PI/2),o.scale(t,t,e),t},o.rotate=function(t,e,n){var r,i,o;0!==n?(r=Math.cos(n),n=Math.sin(n),i=e[0],o=e[1],t[0]=r*i-n*o,t[1]=n*i+r*o):(t[0]=e[0],t[1]=e[1])},o.rotate90cw=function(t,e){var n=e[0],e=e[1];t[0]=e,t[1]=-n},o.toLocalFrame=function(t,e,n,r){o.copy(t,e),o.sub(t,t,n),o.rotate(t,t,-r)},o.toGlobalFrame=function(t,e,n,r){o.copy(t,e),o.rotate(t,t,r),o.add(t,t,n)},o.vectorToLocalFrame=function(t,e,n){o.rotate(t,e,-n)},o.vectorToGlobalFrame=function(t,e,n){o.rotate(t,e,n)},o.centroid=function(t,e,n,r){return o.add(t,e,n),o.add(t,t,r),o.scale(t,t,1/3),t},o.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},o.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},o.fromValues=function(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},o.set=function(t,e,n){return t[0]=e,t[1]=n,t},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},o.div=o.divide,o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},o.distance=function(t,e){var n=e[0]-t[0],e=e[1]-t[1];return Math.sqrt(n*n+e*e)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],e=e[1]-t[1];return n*n+e*e},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],t=t[1];return Math.sqrt(e*e+t*t)},o.len=o.length,o.squaredLength=function(t){var e=t[0],t=t[1];return e*e+t*t},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},o.normalize=function(t,e){var n=e[0],r=e[1],n=n*n+r*r;return 0<n&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},o.lerp=function(t,e,n,r){var i=e[0],e=e[1];return t[0]=i+r*(n[0]-i),t[1]=e+r*(n[1]-e),t},o.reflect=function(t,e,n){var r=e[0]*n[0]+e[1]*n[1];t[0]=e[0]-2*n[0]*r,t[1]=e[1]-2*n[1]*r},o.getLineSegmentsIntersection=function(t,e,n,r,i){r=o.getLineSegmentsIntersectionFraction(e,n,r,i);return!(r<0||(t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),0))},o.getLineSegmentsIntersectionFraction=function(t,e,n,r){var i=e[0]-t[0],e=e[1]-t[1],o=r[0]-n[0],r=r[1]-n[1],s=(-e*(t[0]-n[0])+i*(t[1]-n[1]))/(-o*e+i*r),t=(o*(t[1]-n[1])-r*(t[0]-n[0]))/(-o*e+i*r);return 0<=s&&s<=1&&0<=t&&t<=1?t:-1}},{"../utils/Utils":104}],78:[function(t,e,n){var h=t("../math/vec2"),l=t("poly-decomp"),c=t("../shapes/Convex"),r=t("../collision/RaycastResult"),i=t("../collision/Ray"),o=t("../collision/AABB"),s=t("../events/EventEmitter");function a(t){t=t||{},s.call(this),this.id=t.id||++a._idCounter,this.world=null,this.shapes=[],this.mass=t.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!t.fixedRotation,this.fixedX=!!t.fixedX,this.fixedY=!!t.fixedY,this.massMultiplier=h.create(),this.position=h.fromValues(0,0),t.position&&h.copy(this.position,t.position),this.interpolatedPosition=h.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=h.fromValues(0,0),this.previousAngle=0,this.velocity=h.fromValues(0,0),t.velocity&&h.copy(this.velocity,t.velocity),this.vlambda=h.fromValues(0,0),this.wlambda=0,this.angle=t.angle||0,this.angularVelocity=t.angularVelocity||0,this.force=h.create(),t.force&&h.copy(this.force,t.force),this.angularForce=t.angularForce||0,this.damping="number"==typeof t.damping?t.damping:.1,this.angularDamping="number"==typeof t.angularDamping?t.angularDamping:.1,this.type=a.STATIC,void 0!==t.type?this.type=t.type:t.mass?this.type=a.DYNAMIC:this.type=a.STATIC,this.boundingRadius=0,this.aabb=new o,this.aabbNeedsUpdate=!0,this.allowSleep=void 0===t.allowSleep||t.allowSleep,this.wantsToSleep=!1,this.sleepState=a.AWAKE,this.sleepSpeedLimit=void 0!==t.sleepSpeedLimit?t.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==t.sleepTimeLimit?t.sleepTimeLimit:1,this.gravityScale=void 0!==t.gravityScale?t.gravityScale:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==t.ccdSpeedThreshold?t.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==t.ccdIterations?t.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}(((e.exports=a).prototype=new s).constructor=a)._idCounter=0,a.prototype.updateSolveMassProperties=function(){this.sleepState===a.SLEEPING||this.type===a.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},a.prototype.setDensity=function(t){var e=this.getArea();this.mass=e*t,this.updateMassProperties()},a.prototype.getArea=function(){for(var t=0,e=0;e<this.shapes.length;e++)t+=this.shapes[e].area;return t},a.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var u=new o,p=h.create(),f=(a.prototype.updateAABB=function(){for(var t=this.shapes,e=t.length,n=p,r=this.angle,i=0;i!==e;i++){var o=t[i],s=o.angle+r;h.rotate(n,o.position,r),h.add(n,n,this.position),o.computeAABB(u,n,s),0===i?this.aabb.copy(u):this.aabb.extend(u)}this.aabbNeedsUpdate=!1},a.prototype.updateBoundingRadius=function(){for(var t=this.shapes,e=t.length,n=0,r=0;r!==e;r++){var i=t[r],o=h.length(i.position),i=i.boundingRadius;n<o+i&&(n=o+i)}this.boundingRadius=n},a.prototype.addShape=function(t,e,n){if(t.body)throw new Error("A shape can only be added to one body.");t.body=this,e?h.copy(t.position,e):h.set(t.position,0,0),t.angle=n||0,this.shapes.push(t),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},a.prototype.removeShape=function(t){var e=this.shapes.indexOf(t);return-1!==e&&(this.shapes.splice(e,1),this.aabbNeedsUpdate=!0,!(t.body=null))},a.prototype.updateMassProperties=function(){if(this.type===a.STATIC||this.type===a.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var t=this.shapes,e=t.length,n=this.mass/e,r=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var i=0;i<e;i++){var o=t[i],s=h.squaredLength(o.position);r+=o.computeMomentOfInertia(n)+n*s}this.inertia=r,this.invInertia=0<r?1/r:0}this.invMass=1/this.mass,h.set(this.massMultiplier,this.fixedX?0:1,this.fixedY?0:1)}},h.create(),a.prototype.applyForce=function(t,e){h.add(this.force,this.force,t),e&&(e=h.crossLength(e,t),this.angularForce+=e)},h.create()),d=h.create(),g=h.create(),y=(a.prototype.applyForceLocal=function(t,e){e=e||g;var n=f,r=d;this.vectorToWorldFrame(n,t),this.vectorToWorldFrame(r,e),this.applyForce(n,r)},h.create()),m=(a.prototype.applyImpulse=function(t,e){var n;this.type===a.DYNAMIC&&(h.scale(n=y,t,this.invMass),h.multiply(n,this.massMultiplier,n),h.add(this.velocity,n,this.velocity),e)&&(n=h.crossLength(e,t),n*=this.invInertia,this.angularVelocity+=n)},h.create()),v=h.create(),_=h.create(),b=(a.prototype.applyImpulseLocal=function(t,e){e=e||_;var n=m,r=v;this.vectorToWorldFrame(n,t),this.vectorToWorldFrame(r,e),this.applyImpulse(n,r)},a.prototype.toLocalFrame=function(t,e){h.toLocalFrame(t,e,this.position,this.angle)},a.prototype.toWorldFrame=function(t,e){h.toGlobalFrame(t,e,this.position,this.angle)},a.prototype.vectorToLocalFrame=function(t,e){h.vectorToLocalFrame(t,e,this.angle)},a.prototype.vectorToWorldFrame=function(t,e){h.vectorToGlobalFrame(t,e,this.angle)},a.prototype.fromPolygon=function(t,e){e=e||{};for(var n=this.shapes.length;0<=n;--n)this.removeShape(this.shapes[n]);var r=new l.Polygon;if(r.vertices=t,r.makeCCW(),"number"==typeof e.removeCollinearPoints&&r.removeCollinearPoints(e.removeCollinearPoints),void 0===e.skipSimpleCheck&&!r.isSimple())return!1;this.concavePath=r.vertices.slice(0);for(n=0;n<this.concavePath.length;n++){var i=[0,0];h.copy(i,this.concavePath[n]),this.concavePath[n]=i}for(var o=e.optimalDecomp?r.decomp():r.quickDecomp(),s=h.create(),n=0;n!==o.length;n++){for(var a=new c({vertices:o[n].vertices}),u=0;u!==a.vertices.length;u++){i=a.vertices[u];h.sub(i,i,a.centerOfMass)}h.scale(s,a.centerOfMass,1),a.updateTriangles(),a.updateCenterOfMass(),a.updateBoundingRadius(),this.addShape(a,s)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0},h.fromValues(0,0),h.fromValues(0,0)),x=h.fromValues(0,0),w=h.fromValues(0,0),T=(a.prototype.adjustCenterOfMass=function(){var t=b,e=x,n=w,r=0;h.set(e,0,0);for(var i=0;i!==this.shapes.length;i++){var o=this.shapes[i];h.scale(t,o.position,o.area),h.add(e,e,t),r+=o.area}h.scale(n,e,1/r);for(i=0;i!==this.shapes.length;i++){o=this.shapes[i];h.sub(o.position,o.position,n)}h.add(this.position,this.position,n);for(i=0;this.concavePath&&i<this.concavePath.length;i++)h.sub(this.concavePath[i],this.concavePath[i],n);this.updateMassProperties(),this.updateBoundingRadius()},a.prototype.setZeroForce=function(){h.set(this.force,0,0),this.angularForce=0},a.prototype.resetConstraintVelocity=function(){var t=this.vlambda;h.set(t,0,0),this.wlambda=0},a.prototype.addConstraintVelocity=function(){var t=this.velocity;h.add(t,t,this.vlambda),this.angularVelocity+=this.wlambda},a.prototype.applyDamping=function(t){var e;this.type===a.DYNAMIC&&(e=this.velocity,h.scale(e,e,Math.pow(1-this.damping,t)),this.angularVelocity*=Math.pow(1-this.angularDamping,t))},a.prototype.wakeUp=function(){var t=this.sleepState;this.sleepState=a.AWAKE,this.idleTime=0,t!==a.AWAKE&&this.emit(a.wakeUpEvent)},a.prototype.sleep=function(){this.sleepState=a.SLEEPING,this.angularVelocity=0,this.angularForce=0,h.set(this.velocity,0,0),h.set(this.force,0,0),this.emit(a.sleepEvent)},a.prototype.sleepTick=function(t,e,n){var r;this.allowSleep&&this.type!==a.SLEEPING&&(this.wantsToSleep=!1,this.sleepState,r=h.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2),Math.pow(this.sleepSpeedLimit,2)<=r?(this.idleTime=0,this.sleepState=a.AWAKE):(this.idleTime+=n,this.sleepState=a.SLEEPY),this.idleTime>this.sleepTimeLimit)&&(e?this.wantsToSleep=!0:this.sleep())},a.prototype.overlaps=function(t){return this.world.overlapKeeper.bodiesAreOverlapping(this,t)},h.create()),E=h.create(),S=(a.prototype.integrate=function(t){var e=this.invMass,n=this.force,r=this.position,i=this.velocity;h.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*t),h.scale(T,n,t*e),h.multiply(T,this.massMultiplier,T),h.add(i,T,i),this.integrateToTimeOfImpact(t)||(h.scale(E,i,t),h.add(r,r,E),this.fixedRotation)||(this.angle+=this.angularVelocity*t),this.aabbNeedsUpdate=!0},new r),C=new i({mode:i.ALL}),A=h.create(),P=h.create(),M=h.create(),O=h.create();a.prototype.integrateToTimeOfImpact=function(t){if(this.ccdSpeedThreshold<0||h.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;h.normalize(A,this.velocity),h.scale(P,this.velocity,t),h.add(P,P,this.position),h.sub(M,P,this.position);var e,n=this.angularVelocity*t,r=h.length(M),i=1,o=this;if(S.reset(),C.callback=function(t){t.body!==o&&(e=t.body,t.getHitPoint(P,C),h.sub(M,P,o.position),i=h.length(M)/r,t.stop())},h.copy(C.from,this.position),h.copy(C.to,P),C.update(),this.world.raycast(S,C),!e)return!1;for(var s=this.angle,a=(h.copy(O,this.position),0),u=0,l=0,c=i;u<=c&&a<this.ccdIterations;)a++,l=(c-u)/2,h.scale(E,M,i),h.add(this.position,O,E),this.angle=s+n*i,this.updateAABB(),this.aabb.overlaps(e.aabb)&&this.world.narrowphase.bodiesOverlap(this,e)?u=l:c=l;return i=l,h.copy(this.position,O),this.angle=s,h.scale(E,M,i),h.add(this.position,this.position,E),this.fixedRotation||(this.angle+=n*i),!0},a.prototype.getVelocityAtPoint=function(t,e){return h.crossVZ(t,e,this.angularVelocity),h.subtract(t,this.velocity,t),t},a.sleepyEvent={type:"sleepy"},a.sleepEvent={type:"sleep"},a.wakeUpEvent={type:"wakeup"},a.DYNAMIC=1,a.STATIC=2,a.KINEMATIC=4,a.AWAKE=0,a.SLEEPY=1,a.SLEEPING=2},{"../collision/AABB":54,"../collision/Ray":58,"../collision/RaycastResult":59,"../events/EventEmitter":73,"../math/vec2":77,"../shapes/Convex":87,"poly-decomp":283}],79:[function(t,e,n){var d=t("../math/vec2"),r=t("./Spring");t("../utils/Utils");function i(t,e,n){r.call(this,t,e,n=n||{}),this.localAnchorA=d.fromValues(0,0),this.localAnchorB=d.fromValues(0,0),n.localAnchorA&&d.copy(this.localAnchorA,n.localAnchorA),n.localAnchorB&&d.copy(this.localAnchorB,n.localAnchorB),n.worldAnchorA&&this.setWorldAnchorA(n.worldAnchorA),n.worldAnchorB&&this.setWorldAnchorB(n.worldAnchorB);t=d.create(),e=d.create(),this.getWorldAnchorA(t),this.getWorldAnchorB(e),t=d.distance(t,e);this.restLength="number"==typeof n.restLength?n.restLength:t}(((e.exports=i).prototype=new r).constructor=i).prototype.setWorldAnchorA=function(t){this.bodyA.toLocalFrame(this.localAnchorA,t)},i.prototype.setWorldAnchorB=function(t){this.bodyB.toLocalFrame(this.localAnchorB,t)},i.prototype.getWorldAnchorA=function(t){this.bodyA.toWorldFrame(t,this.localAnchorA)},i.prototype.getWorldAnchorB=function(t){this.bodyB.toWorldFrame(t,this.localAnchorB)};var g=d.create(),y=d.create(),m=d.create(),v=d.create(),_=d.create(),b=d.create(),x=d.create(),w=d.create(),T=d.create();i.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,n=this.restLength,r=this.bodyA,i=this.bodyB,o=g,s=y,a=m,u=v,l=T,c=_,h=b,p=x,f=w,h=(this.getWorldAnchorA(c),this.getWorldAnchorB(h),d.sub(p,c,r.position),d.sub(f,h,i.position),d.sub(o,h,c),d.len(o)),c=(d.normalize(s,o),d.sub(a,i.velocity,r.velocity),d.crossZV(l,i.angularVelocity,f),d.add(a,a,l),d.crossZV(l,r.angularVelocity,p),d.sub(a,a,l),d.scale(u,s,-t*(h-n)-e*d.dot(a,s)),d.sub(r.force,r.force,u),d.add(i.force,i.force,u),d.crossLength(p,u)),o=d.crossLength(f,u);r.angularForce-=c,i.angularForce+=o}},{"../math/vec2":77,"../utils/Utils":104,"./Spring":81}],80:[function(t,e,n){t("../math/vec2");var r=t("./Spring");function i(t,e,n){r.call(this,t,e,n=n||{}),this.restAngle="number"==typeof n.restAngle?n.restAngle:e.angle-t.angle}(((e.exports=i).prototype=new r).constructor=i).prototype.applyForce=function(){var t=this.stiffness,e=this.damping,n=this.restAngle,r=this.bodyA,i=this.bodyB,t=-t*(i.angle-r.angle-n)-e*(i.angularVelocity-r.angularVelocity)*0;r.angularForce-=t,i.angularForce+=t}},{"../math/vec2":77,"./Spring":81}],81:[function(t,e,n){t("../math/vec2");var r=t("../utils/Utils");function i(t,e,n){n=r.defaults(n,{stiffness:100,damping:1}),this.stiffness=n.stiffness,this.damping=n.damping,this.bodyA=t,this.bodyB=e}(e.exports=i).prototype.applyForce=function(){}},{"../math/vec2":77,"../utils/Utils":104}],82:[function(t,e,n){var r=t("../math/vec2"),i=(t("../utils/Utils"),t("../constraints/Constraint")),o=t("../equations/FrictionEquation"),s=t("../objects/Body");function a(t,e){this.chassisBody=t,this.wheels=[],this.groundBody=new s({mass:0}),this.world=null;var n=this;this.preStepCallback=function(){n.update()}}function u(t,e){e=e||{},this.vehicle=t,this.forwardEquation=new o(t.chassisBody,t.groundBody),this.sideEquation=new o(t.chassisBody,t.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==e.sideFriction?e.sideFriction:5),this.localForwardVector=r.fromValues(0,1),e.localForwardVector&&r.copy(this.localForwardVector,e.localForwardVector),this.localPosition=r.fromValues(0,0),e.localPosition&&r.copy(this.localPosition,e.localPosition),i.apply(this,t.chassisBody,t.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}(e.exports=a).prototype.addToWorld=function(t){(this.world=t).addBody(this.groundBody),t.on("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var n=this.wheels[e];t.addConstraint(n)}},a.prototype.removeFromWorld=function(){var t=this.world;t.removeBody(this.groundBody),t.off("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var n=this.wheels[e];t.removeConstraint(n)}this.world=null},a.prototype.addWheel=function(t){t=new u(this,t);return this.wheels.push(t),t},a.prototype.update=function(){for(var t=0;t<this.wheels.length;t++)this.wheels[t].update()},(u.prototype=new i).setBrakeForce=function(t){this.forwardEquation.setSlipForce(t)},u.prototype.setSideFriction=function(t){this.sideEquation.setSlipForce(t)};var l=r.create(),c=r.create(),h=(u.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(c,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(l,c),r.dot(l,c)},r.create());u.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),r.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),r.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),r.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),r.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),r.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),r.normalize(h,this.forwardEquation.t),r.scale(h,h,this.engineForce),this.vehicle.chassisBody.applyForce(h,this.forwardEquation.contactPointA)}},{"../constraints/Constraint":61,"../equations/FrictionEquation":70,"../math/vec2":77,"../objects/Body":78,"../utils/Utils":104}],83:[function(t,e,n){e=e.exports={AABB:t("./collision/AABB"),AngleLockEquation:t("./equations/AngleLockEquation"),Body:t("./objects/Body"),Broadphase:t("./collision/Broadphase"),Capsule:t("./shapes/Capsule"),Circle:t("./shapes/Circle"),Constraint:t("./constraints/Constraint"),ContactEquation:t("./equations/ContactEquation"),ContactEquationPool:t("./utils/ContactEquationPool"),ContactMaterial:t("./material/ContactMaterial"),Convex:t("./shapes/Convex"),DistanceConstraint:t("./constraints/DistanceConstraint"),Equation:t("./equations/Equation"),EventEmitter:t("./events/EventEmitter"),FrictionEquation:t("./equations/FrictionEquation"),FrictionEquationPool:t("./utils/FrictionEquationPool"),GearConstraint:t("./constraints/GearConstraint"),GSSolver:t("./solver/GSSolver"),Heightfield:t("./shapes/Heightfield"),Line:t("./shapes/Line"),LockConstraint:t("./constraints/LockConstraint"),Material:t("./material/Material"),Narrowphase:t("./collision/Narrowphase"),NaiveBroadphase:t("./collision/NaiveBroadphase"),Particle:t("./shapes/Particle"),Plane:t("./shapes/Plane"),Pool:t("./utils/Pool"),RevoluteConstraint:t("./constraints/RevoluteConstraint"),PrismaticConstraint:t("./constraints/PrismaticConstraint"),Ray:t("./collision/Ray"),RaycastResult:t("./collision/RaycastResult"),Box:t("./shapes/Box"),RotationalVelocityEquation:t("./equations/RotationalVelocityEquation"),SAPBroadphase:t("./collision/SAPBroadphase"),Shape:t("./shapes/Shape"),Solver:t("./solver/Solver"),Spring:t("./objects/Spring"),TopDownVehicle:t("./objects/TopDownVehicle"),LinearSpring:t("./objects/LinearSpring"),RotationalSpring:t("./objects/RotationalSpring"),Utils:t("./utils/Utils"),World:t("./world/World"),vec2:t("./math/vec2"),version:t("../package.json").version};Object.defineProperty(e,"Rectangle",{get:function(){return console.warn("The Rectangle class has been renamed to Box."),this.Box}})},{"../package.json":53,"./collision/AABB":54,"./collision/Broadphase":55,"./collision/NaiveBroadphase":56,"./collision/Narrowphase":57,"./collision/Ray":58,"./collision/RaycastResult":59,"./collision/SAPBroadphase":60,"./constraints/Constraint":61,"./constraints/DistanceConstraint":62,"./constraints/GearConstraint":63,"./constraints/LockConstraint":64,"./constraints/PrismaticConstraint":65,"./constraints/RevoluteConstraint":66,"./equations/AngleLockEquation":67,"./equations/ContactEquation":68,"./equations/Equation":69,"./equations/FrictionEquation":70,"./equations/RotationalVelocityEquation":72,"./events/EventEmitter":73,"./material/ContactMaterial":74,"./material/Material":75,"./math/vec2":77,"./objects/Body":78,"./objects/LinearSpring":79,"./objects/RotationalSpring":80,"./objects/Spring":81,"./objects/TopDownVehicle":82,"./shapes/Box":84,"./shapes/Capsule":85,"./shapes/Circle":86,"./shapes/Convex":87,"./shapes/Heightfield":88,"./shapes/Line":89,"./shapes/Particle":90,"./shapes/Plane":91,"./shapes/Shape":92,"./solver/GSSolver":93,"./solver/Solver":94,"./utils/ContactEquationPool":95,"./utils/FrictionEquationPool":96,"./utils/Pool":102,"./utils/Utils":104,"./world/World":108}],84:[function(t,e,n){var r=t("../math/vec2"),i=t("./Shape"),o=t("./Convex");function s(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={width:arguments[0],height:arguments[1]},console.warn("The Rectangle has been renamed to Box and its constructor signature has changed. Please use the following format: new Box({ width: 1, height: 1, ... })"));var e=this.width=(t=t||{}).width||1,n=this.height=t.height||1,e=[r.fromValues(-e/2,-n/2),r.fromValues(e/2,-n/2),r.fromValues(e/2,n/2),r.fromValues(-e/2,n/2)],n=[r.fromValues(1,0),r.fromValues(0,1)];t.vertices=e,t.axes=n,t.type=i.BOX,o.call(this,t)}(((e.exports=s).prototype=new o).constructor=s).prototype.computeMomentOfInertia=function(t){var e=this.width,n=this.height;return t*(n*n+e*e)/12},s.prototype.updateBoundingRadius=function(){var t=this.width,e=this.height;this.boundingRadius=Math.sqrt(t*t+e*e)/2};r.create(),r.create(),r.create(),r.create();s.prototype.computeAABB=function(t,e,n){t.setFromPoints(this.vertices,e,n,0)},s.prototype.updateArea=function(){this.area=this.width*this.height}},{"../math/vec2":77,"./Convex":87,"./Shape":92}],85:[function(t,e,n){var r=t("./Shape"),_=t("../math/vec2");function i(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={length:arguments[0],radius:arguments[1]},console.warn("The Capsule constructor signature has changed. Please use the following format: new Capsule({ radius: 1, length: 1 })")),this.length=(t=t||{}).length||1,this.radius=t.radius||1,t.type=r.CAPSULE,r.call(this,t)}(((e.exports=i).prototype=new r).constructor=i).prototype.computeMomentOfInertia=function(t){var e=this.radius,n=this.length+e,e=2*e;return t*(e*e+n*n)/12},i.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},i.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var o=_.create(),b=(i.prototype.computeAABB=function(t,e,n){var r=this.radius;_.set(o,this.length/2,0),0!==n&&_.rotate(o,o,n),_.set(t.upperBound,Math.max(o[0]+r,-o[0]+r),Math.max(o[1]+r,-o[1]+r)),_.set(t.lowerBound,Math.min(o[0]-r,-o[0]-r),Math.min(o[1]-r,-o[1]-r)),_.add(t.lowerBound,t.lowerBound,e),_.add(t.upperBound,t.upperBound,e)},_.create()),x=_.create(),w=_.create(),T=_.create(),E=_.fromValues(0,1);i.prototype.raycast=function(t,e,n,r){for(var i=e.from,o=e.to,s=(e.direction,b),a=x,u=w,l=T,c=this.length/2,h=0;h<2;h++){var p=this.radius*(2*h-1),f=(_.set(u,-c,p),_.set(l,c,p),_.toGlobalFrame(u,u,n,r),_.toGlobalFrame(l,l,n,r),_.getLineSegmentsIntersectionFraction(i,o,u,l));if(0<=f&&(_.rotate(a,E,r),_.scale(a,a,2*h-1),e.reportIntersection(t,f,a,-1),t.shouldStop(e)))return}for(var d=Math.pow(this.radius,2)+Math.pow(c,2),h=0;h<2;h++){_.set(u,c*(2*h-1),0),_.toGlobalFrame(u,u,n,r);var g=Math.pow(o[0]-i[0],2)+Math.pow(o[1]-i[1],2),y=2*((o[0]-i[0])*(i[0]-u[0])+(o[1]-i[1])*(i[1]-u[1])),m=Math.pow(i[0]-u[0],2)+Math.pow(i[1]-u[1],2)-Math.pow(this.radius,2),f=Math.pow(y,2)-4*g*m;if(!(f<0))if(0===f){if(_.lerp(s,i,o,f),_.squaredDistance(s,n)>d&&(_.sub(a,s,u),_.normalize(a,a),e.reportIntersection(t,f,a,-1),t.shouldStop(e)))return}else{var m=Math.sqrt(f),g=1/(2*g),v=(-y-m)*g,y=(-y+m)*g;if(0<=v&&v<=1&&(_.lerp(s,i,o,v),_.squaredDistance(s,n)>d)&&(_.sub(a,s,u),_.normalize(a,a),e.reportIntersection(t,v,a,-1),t.shouldStop(e)))return;if(0<=y&&y<=1&&(_.lerp(s,i,o,y),_.squaredDistance(s,n)>d)&&(_.sub(a,s,u),_.normalize(a,a),e.reportIntersection(t,y,a,-1),t.shouldStop(e)))return}}}},{"../math/vec2":77,"./Shape":92}],86:[function(t,e,n){var r=t("./Shape"),p=t("../math/vec2");function i(t){"number"==typeof arguments[0]&&(t={radius:arguments[0]},console.warn("The Circle constructor signature has changed. Please use the following format: new Circle({ radius: 1 })")),this.radius=(t=t||{}).radius||1,t.type=r.CIRCLE,r.call(this,t)}(((e.exports=i).prototype=new r).constructor=i).prototype.computeMomentOfInertia=function(t){var e=this.radius;return t*e*e/2},i.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},i.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},i.prototype.computeAABB=function(t,e,n){var r=this.radius;p.set(t.upperBound,r,r),p.set(t.lowerBound,-r,-r),e&&(p.add(t.lowerBound,t.lowerBound,e),p.add(t.upperBound,t.upperBound,e))};var f=p.create(),d=p.create();i.prototype.raycast=function(t,e,n,r){var i,o=e.from,s=e.to,a=this.radius,u=Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2),l=2*((s[0]-o[0])*(o[0]-n[0])+(s[1]-o[1])*(o[1]-n[1])),a=Math.pow(o[0]-n[0],2)+Math.pow(o[1]-n[1],2)-Math.pow(a,2),a=Math.pow(l,2)-4*u*a,c=f,h=d;a<0||(0==a?(p.lerp(c,o,s,a),p.sub(h,c,n),p.normalize(h,h),e.reportIntersection(t,a,h,-1)):(i=(-l+(a=Math.sqrt(a)))*(u=1/(2*u)),0<=(l=(-l-a)*u)&&l<=1&&(p.lerp(c,o,s,l),p.sub(h,c,n),p.normalize(h,h),e.reportIntersection(t,l,h,-1),t.shouldStop(e))||0<=i&&i<=1&&(p.lerp(c,o,s,i),p.sub(h,c,n),p.normalize(h,h),e.reportIntersection(t,i,h,-1))))}},{"../math/vec2":77,"./Shape":92}],87:[function(t,e,n){var u=t("./Shape"),f=t("../math/vec2"),a=t("../math/polyk");t("poly-decomp");function c(t){Array.isArray(arguments[0])&&(t={vertices:arguments[0],axes:arguments[1]},console.warn("The Convex constructor signature has changed. Please use the following format: new Convex({ vertices: [...], ... })")),t=t||{},this.vertices=[];for(var e=void 0!==t.vertices?t.vertices:[],n=0;n<e.length;n++){var r=f.create();f.copy(r,e[n]),this.vertices.push(r)}if(this.axes=[],t.axes)for(n=0;n<t.axes.length;n++){var i=f.create();f.copy(i,t.axes[n]),this.axes.push(i)}else for(n=0;n<this.vertices.length;n++){var o=this.vertices[n],s=this.vertices[(n+1)%this.vertices.length],a=f.create();f.sub(a,s,o),f.rotate90cw(a,a),f.normalize(a,a),this.axes.push(a)}if(this.centerOfMass=f.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,t.type=u.CONVEX,u.call(this,t),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}((e.exports=c).prototype=new u).constructor=c;var l=f.create(),o=f.create(),h=(c.prototype.projectOntoLocalAxis=function(t,e){for(var n,r,i=null,o=null,t=l,s=0;s<this.vertices.length;s++)n=this.vertices[s],n=f.dot(n,t),(null===i||i<n)&&(i=n),(null===o||n<o)&&(o=n);i<o&&(r=o,o=i,i=r),f.set(e,o,i)},c.prototype.projectOntoWorldAxis=function(t,e,n,r){var i=o,n=(this.projectOntoLocalAxis(t,r),0!==n?f.rotate(i,t,n):i=t,f.dot(e,i));f.set(r,r[0]+n,r[1]+n)},c.prototype.updateTriangles=function(){for(var t=[],e=this.triangles.length=0;e<this.vertices.length;e++){var n=this.vertices[e];t.push(n[0],n[1])}for(var r=a.Triangulate(t),e=0;e<r.length;e+=3){var i=r[e],o=r[e+1],s=r[e+2];this.triangles.push([i,o,s])}},f.create()),p=f.create(),d=(f.create(),f.create(),f.create(),f.create(),f.create(),f.create(),f.create(),c.prototype.updateCenterOfMass=function(){for(var t=this.triangles,e=this.vertices,n=this.centerOfMass,r=h,i=p,o=(f.set(n,0,0),0),s=0;s!==t.length;s++){var a=t[s],u=e[a[0]],l=e[a[1]],a=e[a[2]],u=(f.centroid(r,u,l,a),c.triangleArea(u,l,a));o+=u,f.scale(i,r,u),f.add(n,n,i)}f.scale(n,n,1/o)},c.prototype.computeMomentOfInertia=function(t){for(var e=0,n=0,r=this.vertices.length,i=r-1,o=0;o<r;i=o,o++){var s=this.vertices[i],a=this.vertices[o],u=Math.abs(f.crossLength(s,a));e+=u*(f.dot(a,a)+f.dot(a,s)+f.dot(s,s)),n+=u}return t/6*(e/n)},c.prototype.updateBoundingRadius=function(){for(var t=this.vertices,e=0,n=0;n!==t.length;n++){var r=f.squaredLength(t[n]);e<r&&(e=r)}this.boundingRadius=Math.sqrt(e)},c.triangleArea=function(t,e,n){return.5*((e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1]))},c.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var t=this.triangles,e=this.vertices,n=0;n!==t.length;n++){var r=t[n],i=e[r[0]],o=e[r[1]],r=e[r[2]],i=c.triangleArea(i,o,r);this.area+=i}},c.prototype.computeAABB=function(t,e,n){t.setFromPoints(this.vertices,e,n,0)},f.create()),g=f.create(),y=f.create();c.prototype.raycast=function(t,e,n,r){for(var i=d,o=g,s=y,a=this.vertices,u=(f.toLocalFrame(i,e.from,n,r),f.toLocalFrame(o,e.to,n,r),a.length),l=0;l<u&&!t.shouldStop(e);l++){var c=a[l],h=a[(l+1)%u],p=f.getLineSegmentsIntersectionFraction(i,o,c,h);0<=p&&(f.sub(s,h,c),f.rotate(s,s,-Math.PI/2+r),f.normalize(s,s),e.reportIntersection(t,p,s,l))}}},{"../math/polyk":76,"../math/vec2":77,"./Shape":92,"poly-decomp":283}],88:[function(t,e,n){var r=t("./Shape"),f=t("../math/vec2");t("../utils/Utils");function i(t){if(Array.isArray(arguments[0])){if(t={heights:arguments[0]},"object"==typeof arguments[1])for(var e in arguments[1])t[e]=arguments[1][e];console.warn("The Heightfield constructor signature has changed. Please use the following format: new Heightfield({ heights: [...], ... })")}this.heights=(t=t||{}).heights?t.heights.slice(0):[],this.maxValue=t.maxValue||null,this.minValue=t.minValue||null,this.elementWidth=t.elementWidth||.1,void 0!==t.maxValue&&void 0!==t.minValue||this.updateMaxMinValues(),t.type=r.HEIGHTFIELD,r.call(this,t)}(((e.exports=i).prototype=new r).constructor=i).prototype.updateMaxMinValues=function(){for(var t=this.heights,e=t[0],n=t[0],r=0;r!==t.length;r++){var i=t[r];e<i&&(e=i),i<n&&(n=i)}this.maxValue=e,this.minValue=n},i.prototype.computeMomentOfInertia=function(t){return Number.MAX_VALUE},i.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},i.prototype.updateArea=function(){for(var t=this.heights,e=0,n=0;n<t.length-1;n++)e+=(t[n]+t[n+1])/2*this.elementWidth;this.area=e};var o=[f.create(),f.create(),f.create(),f.create()],d=(i.prototype.computeAABB=function(t,e,n){f.set(o[0],0,this.maxValue),f.set(o[1],this.elementWidth*this.heights.length,this.maxValue),f.set(o[2],this.elementWidth*this.heights.length,this.minValue),f.set(o[3],0,this.minValue),t.setFromPoints(o,e,n)},i.prototype.getLineSegment=function(t,e,n){var r=this.heights,i=this.elementWidth;f.set(t,n*i,r[n]),f.set(e,(n+1)*i,r[n+1])},i.prototype.getSegmentIndex=function(t){return Math.floor(t[0]/this.elementWidth)},i.prototype.getClampedSegmentIndex=function(t){t=this.getSegmentIndex(t);return Math.min(this.heights.length,Math.max(t,0))},f.create(),f.create()),g=f.create(),y=f.create(),m=f.create(),v=f.create();f.fromValues(0,1);i.prototype.raycast=function(t,e,n,r){var i=e.from,o=e.to,s=(e.direction,d),a=g,u=y,l=m,c=v,i=(f.toLocalFrame(l,i,n,r),f.toLocalFrame(c,o,n,r),this.getClampedSegmentIndex(l)),o=this.getClampedSegmentIndex(c);o<i&&(n=i,i=o,o=n);for(var h=0;h<this.heights.length-1;h++){this.getLineSegment(a,u,h);var p=f.getLineSegmentsIntersectionFraction(l,c,a,u);if(0<=p&&(f.sub(s,u,a),f.rotate(s,s,r+Math.PI/2),f.normalize(s,s),e.reportIntersection(t,p,s,-1),t.shouldStop(e)))return}}},{"../math/vec2":77,"../utils/Utils":104,"./Shape":92}],89:[function(t,e,n){var r=t("./Shape"),l=t("../math/vec2");function i(t){"number"==typeof arguments[0]&&(t={length:arguments[0]},console.warn("The Line constructor signature has changed. Please use the following format: new Line({ length: 1, ... })")),this.length=(t=t||{}).length||1,t.type=r.LINE,r.call(this,t)}(((e.exports=i).prototype=new r).constructor=i).prototype.computeMomentOfInertia=function(t){return t*Math.pow(this.length,2)/12},i.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var o=[l.create(),l.create()],c=(i.prototype.computeAABB=function(t,e,n){var r=this.length/2;l.set(o[0],-r,0),l.set(o[1],r,0),t.setFromPoints(o,e,n,0)},l.create(),l.create()),h=l.create(),p=l.create(),f=l.fromValues(0,1);i.prototype.raycast=function(t,e,n,r){var i=e.from,o=e.to,s=h,a=p,u=this.length/2,u=(l.set(s,-u,0),l.set(a,u,0),l.toGlobalFrame(s,s,n,r),l.toGlobalFrame(a,a,n,r),l.getLineSegmentsIntersectionFraction(s,a,i,o));0<=u&&(l.rotate(n=c,f,r),e.reportIntersection(t,u,n,-1))}},{"../math/vec2":77,"./Shape":92}],90:[function(t,e,n){var r=t("./Shape"),i=t("../math/vec2");function o(t){(t=t||{}).type=r.PARTICLE,r.call(this,t)}(((e.exports=o).prototype=new r).constructor=o).prototype.computeMomentOfInertia=function(t){return 0},o.prototype.updateBoundingRadius=function(){this.boundingRadius=0},o.prototype.computeAABB=function(t,e,n){i.copy(t.lowerBound,e),i.copy(t.upperBound,e)}},{"../math/vec2":77,"./Shape":92}],91:[function(t,e,n){var r=t("./Shape"),c=t("../math/vec2");t("../utils/Utils");function i(t){(t=t||{}).type=r.PLANE,r.call(this,t)}(((e.exports=i).prototype=new r).constructor=i).prototype.computeMomentOfInertia=function(t){return 0},i.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},i.prototype.computeAABB=function(t,e,n){var n=n%(2*Math.PI),r=c.set,i=t.lowerBound,t=t.upperBound;r(i,-1e7,-1e7),r(t,1e7,1e7),0==n?t[1]=0:n==Math.PI/2?i[0]=0:n===Math.PI?i[1]=0:n==3*Math.PI/2&&(t[0]=0)},i.prototype.updateArea=function(){this.area=Number.MAX_VALUE};var h=c.create(),p=(c.create(),c.create(),c.create()),f=c.create();i.prototype.raycast=function(t,e,n,r){var i=e.from,o=e.to,s=e.direction,a=h,u=p,l=f,r=(c.set(u,0,1),c.rotate(u,u,r),c.sub(l,i,n),c.dot(l,u));c.sub(l,o,n),0<r*c.dot(l,u)||c.squaredDistance(i,o)<r*r||(l=c.dot(u,s),c.sub(a,i,n),o=-c.dot(u,a)/l/e.length,e.reportIntersection(t,o,u,-1))}},{"../math/vec2":77,"../utils/Utils":104,"./Shape":92}],92:[function(t,e,n){e.exports=i;var r=t("../math/vec2");function i(t){t=t||{},this.body=null,this.position=r.fromValues(0,0),t.position&&r.copy(this.position,t.position),this.angle=t.angle||0,this.type=t.type||0,this.id=i.idCounter++,this.boundingRadius=0,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:1,this.material=t.material||null,this.area=0,this.sensor=void 0!==t.sensor&&t.sensor,this.type&&this.updateBoundingRadius(),this.updateArea()}i.idCounter=0,i.CIRCLE=1,i.PARTICLE=2,i.PLANE=4,i.CONVEX=8,i.LINE=16,i.BOX=32,Object.defineProperty(i,"RECTANGLE",{get:function(){return console.warn("Shape.RECTANGLE is deprecated, use Shape.BOX instead."),i.BOX}}),i.CAPSULE=64,i.HEIGHTFIELD=128,i.prototype.computeMomentOfInertia=function(t){},i.prototype.updateBoundingRadius=function(){},i.prototype.updateArea=function(){},i.prototype.computeAABB=function(t,e,n){},i.prototype.raycast=function(t,e,n,r){}},{"../math/vec2":77}],93:[function(t,e,n){var E=t("../math/vec2"),r=t("./Solver"),S=t("../utils/Utils"),C=t("../equations/FrictionEquation");function A(t){r.call(this,t,r.GS),this.iterations=(t=t||{}).iterations||10,this.tolerance=t.tolerance||1e-7,this.arrayStep=30,this.lambda=new S.ARRAY_TYPE(this.arrayStep),this.Bs=new S.ARRAY_TYPE(this.arrayStep),this.invCs=new S.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=void 0!==t.frictionIterations?0:t.frictionIterations,this.usedIterations=0}(((e.exports=A).prototype=new r).constructor=A).prototype.solve=function(t,e){this.sortEquations();var n=0,r=this.iterations,i=this.frictionIterations,o=this.equations,s=o.length,a=Math.pow(this.tolerance*s,2),u=e.bodies,l=e.bodies.length,c=(E.add,E.set,this.useZeroRHS),h=this.lambda;if(this.usedIterations=0,s)for(var p=0;p!==l;p++)u[p].updateSolveMassProperties();h.length<s&&(h=this.lambda=new S.ARRAY_TYPE(s+this.arrayStep),this.Bs=new S.ARRAY_TYPE(s+this.arrayStep),this.invCs=new S.ARRAY_TYPE(s+this.arrayStep));for(var f=h,d=f.length;d--;)f[d]=0;for(var g,y,m,v=this.invCs,_=this.Bs,h=this.lambda,p=0;p!==o.length;p++)(g=o[p]).timeStep===t&&!g.needsUpdate||(g.timeStep=t,g.update()),_[p]=g.computeB(g.a,g.b,t),v[p]=g.computeInvC(g.epsilon);if(0!==s){for(p=0;p!==l;p++)u[p].resetConstraintVelocity();if(i){for(n=0;n!==i;n++){for(m=y=0;m!==s;m++){g=o[m];var b=A.iterateEquation(m,g,g.epsilon,_,v,h,c,t,n);y+=Math.abs(b)}if(this.usedIterations++,y*y<=a)break}for(A.updateMultipliers(o,h,1/t),m=0;m!==s;m++){var x=o[m];if(x instanceof C){for(var w=0,T=0;T!==x.contactEquations.length;T++)w+=x.contactEquations[T].multiplier;w*=x.frictionCoefficient/x.contactEquations.length,x.maxForce=w,x.minForce=-w}}}for(n=0;n!==r;n++){for(m=y=0;m!==s;m++){g=o[m];b=A.iterateEquation(m,g,g.epsilon,_,v,h,c,t,n);y+=Math.abs(b)}if(this.usedIterations++,y*y<=a)break}for(p=0;p!==l;p++)u[p].addConstraintVelocity();A.updateMultipliers(o,h,1/t)}},A.updateMultipliers=function(t,e,n){for(var r=t.length;r--;)t[r].multiplier=e[r]*n},A.iterateEquation=function(t,e,n,r,i,o,s,a,u){var r=r[t],i=i[t],l=o[t],c=e.computeGWlambda(),h=e.maxForce,p=e.minForce,i=i*((r=s?0:r)-c-n*l),s=l+i;return s<p*a?i=p*a-l:h*a<s&&(i=h*a-l),o[t]+=i,e.addToWlambda(i),i}},{"../equations/FrictionEquation":70,"../math/vec2":77,"../utils/Utils":104,"./Solver":94}],94:[function(t,e,n){t("../utils/Utils");var r=t("../events/EventEmitter");function i(t,e){t=t||{},r.call(this),this.type=e,this.equations=[],this.equationSortFunction=t.equationSortFunction||!1}(((e.exports=i).prototype=new r).constructor=i).prototype.solve=function(t,e){throw new Error("Solver.solve should be implemented by subclasses!")};var o={bodies:[]};i.prototype.solveIsland=function(t,e){this.removeAllEquations(),e.equations.length&&(this.addEquations(e.equations),o.bodies.length=0,e.getBodies(o.bodies),o.bodies.length)&&this.solve(t,o)},i.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},i.prototype.addEquation=function(t){t.enabled&&this.equations.push(t)},i.prototype.addEquations=function(t){for(var e=0,n=t.length;e!==n;e++){var r=t[e];r.enabled&&this.equations.push(r)}},i.prototype.removeEquation=function(t){t=this.equations.indexOf(t);-1!==t&&this.equations.splice(t,1)},i.prototype.removeAllEquations=function(){this.equations.length=0},i.GS=1,i.ISLAND=2},{"../events/EventEmitter":73,"../utils/Utils":104}],95:[function(t,e,n){var r=t("../equations/ContactEquation"),i=t("./Pool");function o(){i.apply(this,arguments)}(((e.exports=o).prototype=new i).constructor=o).prototype.create=function(){return new r},o.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},{"../equations/ContactEquation":68,"./Pool":102}],96:[function(t,e,n){var r=t("../equations/FrictionEquation"),i=t("./Pool");function o(){i.apply(this,arguments)}(((e.exports=o).prototype=new i).constructor=o).prototype.create=function(){return new r},o.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},{"../equations/FrictionEquation":70,"./Pool":102}],97:[function(t,e,n){var r=t("../world/IslandNode"),i=t("./Pool");function o(){i.apply(this,arguments)}(((e.exports=o).prototype=new i).constructor=o).prototype.create=function(){return new r},o.prototype.destroy=function(t){return t.reset(),this}},{"../world/IslandNode":107,"./Pool":102}],98:[function(t,e,n){var r=t("../world/Island"),i=t("./Pool");function o(){i.apply(this,arguments)}(((e.exports=o).prototype=new i).constructor=o).prototype.create=function(){return new r},o.prototype.destroy=function(t){return t.reset(),this}},{"../world/Island":105,"./Pool":102}],99:[function(t,e,n){var r=t("./TupleDictionary"),i=(t("./OverlapKeeperRecord"),t("./OverlapKeeperRecordPool"));t("./Utils");function o(){this.overlappingShapesLastState=new r,this.overlappingShapesCurrentState=new r,this.recordPool=new i({size:16}),this.tmpDict=new r,this.tmpArray1=[]}(e.exports=o).prototype.tick=function(){for(var t=this.overlappingShapesLastState,e=this.overlappingShapesCurrentState,n=t.keys.length;n--;){var r=t.keys[n],i=t.getByKey(r);e.getByKey(r);i&&this.recordPool.release(i)}t.reset(),t.copy(e),e.reset()},o.prototype.setOverlapping=function(t,e,n,r){this.overlappingShapesLastState;var i,o=this.overlappingShapesCurrentState;o.get(e.id,r.id)||((i=this.recordPool.get()).set(t,e,n,r),o.set(e.id,r.id,i))},o.prototype.getNewOverlaps=function(t){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,t)},o.prototype.getEndOverlaps=function(t){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,t)},o.prototype.bodiesAreOverlapping=function(t,e){for(var n=this.overlappingShapesCurrentState,r=n.keys.length;r--;){var i=n.keys[r],i=n.data[i];if(i.bodyA===t&&i.bodyB===e||i.bodyA===e&&i.bodyB===t)return!0}return!1},o.prototype.getDiff=function(t,e,n){for(var r=t,i=e,o=((n=n||[]).length=0,i.keys.length);o--;){var s=i.keys[o],a=i.data[s];if(!a)throw new Error("Key "+s+" had no data!");r.data[s]||n.push(a)}return n},o.prototype.isNewOverlap=function(t,e){var t=0|t.id,e=0|e.id,n=this.overlappingShapesLastState,r=this.overlappingShapesCurrentState;return!n.get(t,e)&&!!r.get(t,e)},o.prototype.getNewBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},o.prototype.getEndBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},o.prototype.getBodyDiff=function(t,e){e=e||[];for(var n=this.tmpDict,r=t.length;r--;){var i=t[r];n.set(0|i.bodyA.id,0|i.bodyB.id,i)}for(r=n.keys.length;r--;)(i=n.getByKey(n.keys[r]))&&e.push(i.bodyA,i.bodyB);return n.reset(),e}},{"./OverlapKeeperRecord":100,"./OverlapKeeperRecordPool":101,"./TupleDictionary":103,"./Utils":104}],100:[function(t,e,n){function i(t,e,n,r){this.shapeA=e,this.shapeB=r,this.bodyA=t,this.bodyB=n}(e.exports=i).prototype.set=function(t,e,n,r){i.call(this,t,e,n,r)}},{}],101:[function(t,e,n){var r=t("./OverlapKeeperRecord"),i=t("./Pool");function o(){i.apply(this,arguments)}(((e.exports=o).prototype=new i).constructor=o).prototype.create=function(){return new r},o.prototype.destroy=function(t){return t.bodyA=t.bodyB=t.shapeA=t.shapeB=null,this}},{"./OverlapKeeperRecord":100,"./Pool":102}],102:[function(t,e,n){function r(t){t=t||{},this.objects=[],void 0!==t.size&&this.resize(t.size)}(e.exports=r).prototype.resize=function(t){for(var e=this.objects;e.length>t;)e.pop();for(;e.length<t;)e.push(this.create());return this},r.prototype.get=function(){var t=this.objects;return t.length?t.pop():this.create()},r.prototype.release=function(t){return this.destroy(t),this.objects.push(t),this}},{}],103:[function(t,e,n){var r=t("./Utils");function i(){this.data={},this.keys=[]}(e.exports=i).prototype.getKey=function(t,e){return(0|(t|=0))==(0|(e|=0))?-1:0|((0|e)<(0|t)?t<<16|65535&e:e<<16|65535&t)},i.prototype.getByKey=function(t){return this.data[t|=0]},i.prototype.get=function(t,e){return this.data[this.getKey(t,e)]},i.prototype.set=function(t,e,n){if(n)return t=this.getKey(t,e),this.data[t]||this.keys.push(t),this.data[t]=n,t;throw new Error("No data!")},i.prototype.reset=function(){for(var t=this.data,e=this.keys,n=e.length;n--;)delete t[e[n]];e.length=0},i.prototype.copy=function(t){this.reset(),r.appendArray(this.keys,t.keys);for(var e=t.keys.length;e--;){var n=t.keys[e];this.data[n]=t.data[n]}}},{"./Utils":104}],104:[function(t,e,n){function r(){}(e.exports=r).appendArray=function(t,e){if(e.length<15e4)t.push.apply(t,e);else for(var n=0,r=e.length;n!==r;++n)t.push(e[n])},r.splice=function(t,e,n){for(var r=e,i=t.length-(n=n||1);r<i;r++)t[r]=t[r+n];t.length=i},"undefined"!=typeof P2_ARRAY_TYPE?r.ARRAY_TYPE=P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?r.ARRAY_TYPE=Float32Array:r.ARRAY_TYPE=Array,r.extend=function(t,e){for(var n in e)t[n]=e[n]},r.defaults=function(t,e){for(var n in t=t||{},e)n in t||(t[n]=e[n]);return t}},{}],105:[function(t,e,n){var r=t("../objects/Body");function i(){this.equations=[],this.bodies=[]}(e.exports=i).prototype.reset=function(){this.equations.length=this.bodies.length=0};var o=[];i.prototype.getBodies=function(t){for(var e=t||[],n=this.equations,r=o.length=0;r!==n.length;r++){var i=n[r];-1===o.indexOf(i.bodyA.id)&&(e.push(i.bodyA),o.push(i.bodyA.id)),-1===o.indexOf(i.bodyB.id)&&(e.push(i.bodyB),o.push(i.bodyB.id))}return e},i.prototype.wantsToSleep=function(){for(var t=0;t<this.bodies.length;t++){var e=this.bodies[t];if(e.type===r.DYNAMIC&&!e.wantsToSleep)return!1}return!0},i.prototype.sleep=function(){for(var t=0;t<this.bodies.length;t++)this.bodies[t].sleep();return!0}},{"../objects/Body":78}],106:[function(t,e,n){t("../math/vec2"),t("./Island"),t("./IslandNode");var r=t("./../utils/IslandNodePool"),i=t("./../utils/IslandPool"),s=t("../objects/Body");function f(t){this.nodePool=new r({size:16}),this.islandPool=new i({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}(e.exports=f).getUnvisitedNode=function(t){for(var e=t.length,n=0;n!==e;n++){var r=t[n];if(!r.visited&&r.body.type===s.DYNAMIC)return r}return!1},f.prototype.visit=function(t,e,n){e.push(t.body);for(var r=t.equations.length,i=0;i!==r;i++){var o=t.equations[i];-1===n.indexOf(o)&&n.push(o)}},f.prototype.bfs=function(t,e,n){var r=this.queue;for(r.length=0,r.push(t),t.visited=!0,this.visit(t,e,n);r.length;)for(var i,o=r.pop();i=f.getUnvisitedNode(o.neighbors);)i.visited=!0,this.visit(i,e,n),i.body.type===s.DYNAMIC&&r.push(i)},f.prototype.split=function(t){for(var e=t.bodies,n=this.nodes,r=this.equations;n.length;)this.nodePool.release(n.pop());for(var i=0;i!==e.length;i++){var o=this.nodePool.get();o.body=e[i],n.push(o)}for(var s=0;s!==r.length;s++){var a=r[s],i=e.indexOf(a.bodyA),u=e.indexOf(a.bodyB),l=n[i],u=n[u];l.neighbors.push(u),u.neighbors.push(l),l.equations.push(a),u.equations.push(a)}for(var c,h=this.islands,i=0;i<h.length;i++)this.islandPool.release(h[i]);for(h.length=0;c=f.getUnvisitedNode(n);){var p=this.islandPool.get();this.bfs(c,p.bodies,p.equations),h.push(p)}return h}},{"../math/vec2":77,"../objects/Body":78,"./../utils/IslandNodePool":97,"./../utils/IslandPool":98,"./Island":105,"./IslandNode":107}],107:[function(t,e,n){function r(t){this.body=t,this.neighbors=[],this.equations=[],this.visited=!1}(e.exports=r).prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},{}],108:[function(t,e,n){var r=t("../solver/GSSolver"),H=(t("../solver/Solver"),t("../collision/Ray"),t("../math/vec2")),m=t("../shapes/Circle"),v=t("../shapes/Convex"),_=(t("../shapes/Line"),t("../shapes/Plane")),b=t("../shapes/Capsule"),x=t("../shapes/Particle"),i=t("../events/EventEmitter"),X=t("../objects/Body"),o=(t("../shapes/Shape"),t("../objects/LinearSpring"),t("../material/Material")),s=t("../material/ContactMaterial"),a=(t("../constraints/DistanceConstraint"),t("../constraints/Constraint"),t("../constraints/LockConstraint"),t("../constraints/RevoluteConstraint"),t("../constraints/PrismaticConstraint"),t("../constraints/GearConstraint"),t("../../package.json"),t("../collision/Broadphase"),t("../collision/AABB")),u=t("../collision/SAPBroadphase"),l=t("../collision/Narrowphase"),V=t("../utils/Utils"),c=t("../utils/OverlapKeeper"),h=t("./IslandManager");t("../objects/RotationalSpring");function z(t){i.apply(this),t=t||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=t.solver||new r,this.narrowphase=new l(this),this.islandManager=new h,this.gravity=H.fromValues(0,-9.78),t.gravity&&H.copy(this.gravity,t.gravity),this.frictionGravity=H.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=t.broadphase||new u,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new o,this.defaultContactMaterial=new s(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit=void 0===t.islandSplit||!!t.islandSplit,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=z.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new c}(((e.exports=z).prototype=new Object(i.prototype)).constructor=z).NO_SLEEPING=1,z.BODY_SLEEPING=2,z.ISLAND_SLEEPING=4,z.prototype.addConstraint=function(t){this.constraints.push(t)},z.prototype.addContactMaterial=function(t){this.contactMaterials.push(t)},z.prototype.removeContactMaterial=function(t){t=this.contactMaterials.indexOf(t);-1!==t&&V.splice(this.contactMaterials,t,1)},z.prototype.getContactMaterial=function(t,e){for(var n=this.contactMaterials,r=0,i=n.length;r!==i;r++){var o=n[r];if(o.materialA.id===t.id&&o.materialB.id===e.id||o.materialA.id===e.id&&o.materialB.id===t.id)return o}return!1},z.prototype.removeConstraint=function(t){t=this.constraints.indexOf(t);-1!==t&&V.splice(this.constraints,t,1)};H.create(),H.create(),H.create(),H.create(),H.create(),H.create();var Y=H.create(),g=H.fromValues(0,0),y=H.fromValues(0,0),K=(H.fromValues(0,0),H.fromValues(0,0),z.prototype.step=function(t,e,n){if(n=n||10,0===(e=e||0))this.internalStep(t),this.time+=t;else{this.accumulator+=e;for(var r=0;this.accumulator>=t&&r<n;)this.internalStep(t),this.time+=t,this.accumulator-=t,r++;for(var i=this.accumulator%t/t,o=0;o!==this.bodies.length;o++){var s=this.bodies[o];H.lerp(s.interpolatedPosition,s.previousPosition,s.position,i),s.interpolatedAngle=s.previousAngle+i*(s.angle-s.previousAngle)}}},[]),w=(z.prototype.internalStep=function(t){this.stepping=!0;var e=this.springs.length,n=this.springs,r=this.bodies,i=this.gravity,o=this.solver,s=this.bodies.length,a=this.broadphase,u=this.narrowphase,l=this.constraints,c=Y,L=(H.scale,H.add),h=(H.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=t,!this.useWorldGravityAsFrictionGravity||0===(O=H.length(this.gravity))&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=O),this.applyGravity)for(var p=0;p!==s;p++){var f=(d=r[p]).force;d.type===X.DYNAMIC&&d.sleepState!==X.SLEEPING&&(H.scale(c,i,d.mass*d.gravityScale),L(f,f,c))}if(this.applySpringForces)for(p=0;p!==e;p++)n[p].applyForce();if(this.applyDamping)for(var d,p=0;p!==s;p++)(d=r[p]).type===X.DYNAMIC&&d.applyDamping(t);for(var g=a.getCollisionPairs(this),y=this.disabledBodyCollisionPairs,p=y.length-2;0<=p;p-=2)for(var m=g.length-2;0<=m;m-=2)(y[p]===g[m]&&y[p+1]===g[m+1]||y[p+1]===g[m]&&y[p]===g[m+1])&&g.splice(m,2);var v=l.length;for(p=0;p!==v;p++){var _=l[p];if(!_.collideConnected)for(m=g.length-2;0<=m;m-=2)(_.bodyA===g[m]&&_.bodyB===g[m+1]||_.bodyB===g[m]&&_.bodyA===g[m+1])&&g.splice(m,2)}this.postBroadphaseEvent.pairs=g,this.emit(this.postBroadphaseEvent),this.postBroadphaseEvent.pairs=null,u.reset(this);for(var p=0,F=g.length;p!==F;p+=2)for(var b=g[p],x=g[p+1],w=0,N=b.shapes.length;w!==N;w++)for(var T=b.shapes[w],j=T.position,U=T.angle,E=0,q=x.shapes.length;E!==q;E++){var S,C=x.shapes[E],G=C.position,W=C.angle,A=this.defaultContactMaterial;T.material&&C.material&&(S=this.getContactMaterial(T.material,C.material))&&(A=S),this.runNarrowphase(u,b,T,j,U,x,C,G,W,A,this.frictionGravity)}for(p=0;p!==s;p++)(R=r[p])._wakeUpAfterNarrowphase&&(R.wakeUp(),R._wakeUpAfterNarrowphase=!1);if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(K);for(var P=this.endContactEvent,E=K.length;E--;){var M=K[E];P.shapeA=M.shapeA,P.shapeB=M.shapeB,P.bodyA=M.bodyA,P.bodyB=M.bodyB,this.emit(P)}K.length=0}var O=this.preSolveEvent,v=(O.contactEquations=u.contactEquations,O.frictionEquations=u.frictionEquations,this.emit(O),O.contactEquations=O.frictionEquations=null,l.length);for(p=0;p!==v;p++)l[p].update();if(u.contactEquations.length||u.frictionEquations.length||v)if(this.islandSplit){for(h.equations.length=0,V.appendArray(h.equations,u.contactEquations),V.appendArray(h.equations,u.frictionEquations),p=0;p!==v;p++)V.appendArray(h.equations,l[p].equations);h.split(this);for(p=0;p!==h.islands.length;p++)(D=h.islands[p]).equations.length&&o.solveIsland(t,D)}else{for(o.addEquations(u.contactEquations),o.addEquations(u.frictionEquations),p=0;p!==v;p++)o.addEquations(l[p].equations);this.solveConstraints&&o.solve(t,this),o.removeAllEquations()}for(var R,p=0;p!==s;p++)(R=r[p]).integrate(t);for(p=0;p!==s;p++)r[p].setZeroForce();if(this.emitImpactEvent&&this.has("impact"))for(var I=this.impactEvent,p=0;p!==u.contactEquations.length;p++){var B=u.contactEquations[p];B.firstImpact&&(I.bodyA=B.bodyA,I.bodyB=B.bodyB,I.shapeA=B.shapeA,I.shapeB=B.shapeB,I.contactEquation=B,this.emit(I))}if(this.sleepMode===z.BODY_SLEEPING)for(p=0;p!==s;p++)r[p].sleepTick(this.time,!1,t);else if(this.sleepMode===z.ISLAND_SLEEPING&&this.islandSplit){for(p=0;p!==s;p++)r[p].sleepTick(this.time,!0,t);for(var D,p=0;p<this.islandManager.islands.length;p++)(D=this.islandManager.islands[p]).wantsToSleep()&&D.sleep()}this.stepping=!1;for(var k=this.bodiesToBeRemoved,p=0;p!==k.length;p++)this.removeBody(k[p]);k.length=0,this.emit(this.postStepEvent)},z.prototype.runNarrowphase=function(t,e,n,r,i,o,s,a,u,l,c){if(0!=(n.collisionGroup&s.collisionMask)&&0!=(s.collisionGroup&n.collisionMask)){H.rotate(g,r,e.angle),H.rotate(y,a,o.angle),H.add(g,g,e.position),H.add(y,y,o.position);r=i+e.angle,a=u+o.angle,u=(t.enableFriction=0<l.friction,t.frictionCoefficient=l.friction,i=e.type===X.STATIC||e.type===X.KINEMATIC?o.mass:o.type===X.STATIC||o.type===X.KINEMATIC?e.mass:e.mass*o.mass/(e.mass+o.mass),t.slipForce=l.friction*c*i,t.restitution=l.restitution,t.surfaceVelocity=l.surfaceVelocity,t.frictionStiffness=l.frictionStiffness,t.frictionRelaxation=l.frictionRelaxation,t.stiffness=l.stiffness,t.relaxation=l.relaxation,t.contactSkinSize=l.contactSkinSize,t.enabledEquations=e.collisionResponse&&o.collisionResponse&&n.collisionResponse&&s.collisionResponse,t[n.type|s.type]),c=0;if(u){var i=n.sensor||s.sensor,l=t.frictionEquations.length,c=n.type<s.type?u.call(t,e,n,g,r,o,s,y,a,i):u.call(t,o,s,y,a,e,n,g,r,i),h=t.frictionEquations.length-l;if(c){if(e.allowSleep&&e.type===X.DYNAMIC&&e.sleepState===X.SLEEPING&&o.sleepState===X.AWAKE&&o.type!==X.STATIC&&(u=H.squaredLength(o.velocity)+Math.pow(o.angularVelocity,2),2*Math.pow(o.sleepSpeedLimit,2)<=u)&&(e._wakeUpAfterNarrowphase=!0),o.allowSleep&&o.type===X.DYNAMIC&&o.sleepState===X.SLEEPING&&e.sleepState===X.AWAKE&&e.type!==X.STATIC&&(a=H.squaredLength(e.velocity)+Math.pow(e.angularVelocity,2),2*Math.pow(e.sleepSpeedLimit,2)<=a)&&(o._wakeUpAfterNarrowphase=!0),this.overlapKeeper.setOverlapping(e,n,o,s),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(n,s)){var p=this.beginContactEvent;if(p.shapeA=n,p.shapeB=s,p.bodyA=e,p.bodyB=o,p.contactEquations.length=0,"number"==typeof c)for(var f=t.contactEquations.length-c;f<t.contactEquations.length;f++)p.contactEquations.push(t.contactEquations[f]);this.emit(p)}if("number"==typeof c&&1<h)for(f=t.frictionEquations.length-h;f<t.frictionEquations.length;f++){var d=t.frictionEquations[f];d.setSlipForce(d.getSlipForce()/h)}}}}},z.prototype.addSpring=function(t){this.springs.push(t);var e=this.addSpringEvent;e.spring=t,this.emit(e),e.spring=null},z.prototype.removeSpring=function(t){t=this.springs.indexOf(t);-1!==t&&V.splice(this.springs,t,1)},z.prototype.addBody=function(t){var e;-1===this.bodies.indexOf(t)&&(this.bodies.push(t),(e=(t.world=this).addBodyEvent).body=t,this.emit(e),e.body=null)},z.prototype.removeBody=function(t){var e;this.stepping?this.bodiesToBeRemoved.push(t):(t.world=null,-1!==(e=this.bodies.indexOf(t))&&(V.splice(this.bodies,e,1),(this.removeBodyEvent.body=t).resetConstraintVelocity(),this.emit(this.removeBodyEvent),this.removeBodyEvent.body=null))},z.prototype.getBodyById=function(t){for(var e=this.bodies,n=0;n<e.length;n++){var r=e[n];if(r.id===t)return r}return!1},z.prototype.disableBodyCollision=function(t,e){this.disabledBodyCollisionPairs.push(t,e)},z.prototype.enableBodyCollision=function(t,e){for(var n=this.disabledBodyCollisionPairs,r=0;r<n.length;r+=2)if(n[r]===t&&n[r+1]===e||n[r+1]===t&&n[r]===e)return void n.splice(r,2)},z.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var t=this.constraints,e=t.length-1;0<=e;e--)this.removeConstraint(t[e]);for(var n=this.bodies,e=n.length-1;0<=e;e--)this.removeBody(n[e]);for(var r=this.springs,e=r.length-1;0<=e;e--)this.removeSpring(r[e]);for(var i=this.contactMaterials,e=i.length-1;0<=e;e--)this.removeContactMaterial(i[e]);z.apply(this)},H.create()),T=(H.fromValues(0,0),H.fromValues(0,0)),p=(z.prototype.hitTest=function(t,e,n){n=n||0;for(var r=new X({position:t}),i=new x,o=t,s=w,a=T,u=(r.addShape(i),this.narrowphase),l=[],c=0,h=e.length;c!==h;c++)for(var p=e[c],f=0,d=p.shapes.length;f!==d;f++){var g=p.shapes[f],y=(H.rotate(s,g.position,p.angle),H.add(s,s,p.position),g.angle+p.angle);(g instanceof m&&u.circleParticle(p,g,s,y,r,i,o,0,!0)||g instanceof v&&u.particleConvex(r,i,o,0,p,g,s,y,!0)||g instanceof _&&u.particlePlane(r,i,o,0,p,g,s,y,!0)||g instanceof b&&u.particleCapsule(r,i,o,0,p,g,s,y,!0)||g instanceof x&&H.squaredLength(H.sub(a,s,t))<n*n)&&l.push(p)}return l},z.prototype.setGlobalStiffness=function(t){for(var e=this.constraints,n=0;n!==e.length;n++)for(var r=e[n],i=0;i!==r.equations.length;i++){var o=r.equations[i];o.stiffness=t,o.needsUpdate=!0}for(var s=this.contactMaterials,n=0;n!==s.length;n++)(r=s[n]).stiffness=r.frictionStiffness=t;(r=this.defaultContactMaterial).stiffness=r.frictionStiffness=t},z.prototype.setGlobalRelaxation=function(t){for(var e=0;e!==this.constraints.length;e++)for(var n=this.constraints[e],r=0;r!==n.equations.length;r++){var i=n.equations[r];i.relaxation=t,i.needsUpdate=!0}for(e=0;e!==this.contactMaterials.length;e++)(n=this.contactMaterials[e]).relaxation=n.frictionRelaxation=t;(n=this.defaultContactMaterial).relaxation=n.frictionRelaxation=t},new a),f=[];z.prototype.raycast=function(t,e){return e.getAABB(p),this.broadphase.aabbQuery(this,p,f),e.intersectBodies(t,f),f.length=0,t.hasHit()}},{"../../package.json":53,"../collision/AABB":54,"../collision/Broadphase":55,"../collision/Narrowphase":57,"../collision/Ray":58,"../collision/SAPBroadphase":60,"../constraints/Constraint":61,"../constraints/DistanceConstraint":62,"../constraints/GearConstraint":63,"../constraints/LockConstraint":64,"../constraints/PrismaticConstraint":65,"../constraints/RevoluteConstraint":66,"../events/EventEmitter":73,"../material/ContactMaterial":74,"../material/Material":75,"../math/vec2":77,"../objects/Body":78,"../objects/LinearSpring":79,"../objects/RotationalSpring":80,"../shapes/Capsule":85,"../shapes/Circle":86,"../shapes/Convex":87,"../shapes/Line":89,"../shapes/Particle":90,"../shapes/Plane":91,"../shapes/Shape":92,"../solver/GSSolver":93,"../solver/Solver":94,"../utils/OverlapKeeper":99,"../utils/Utils":104,"./IslandManager":106}],109:[function(t,e,n){"use strict";e.exports=(e,n={})=>{if(e){const i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var r=i.parser[n.strictMode?"strict":"loose"].exec(e);const o={};let t=14;for(;t--;)o[i.key[t]]=r[t]||"";return o[i.q.name]={},o[i.key[12]].replace(i.q.parser,function(t,e,n){e&&(o[i.q.name][e]=n)}),o}}},{}],110:[function(t,e,n){n.encode=function(t){var e,n="";for(e in t)t.hasOwnProperty(e)&&(n.length&&(n+="&"),n+=encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return n},n.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},{}],111:[function(t,e,n){var u=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,l=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){for(var r,e=t,n=t.indexOf("["),i=t.indexOf("]"),o=(-1!=n&&-1!=i&&(t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length)),u.exec(t||"")),s={},a=14;a--;)s[l[a]]=o[a]||"";return-1!=n&&-1!=i&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(t){var e=t.replace(/\/{2,9}/g,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||e.splice(0,1);"/"==t.substr(t.length-1,1)&&e.splice(e.length-1,1);return e}(s.path),s.queryKey=(r={},s.query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,e,n){e&&(r[e]=n)}),r),s}},{}],112:[function(t,e,n){function i(t,e,n,r){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=r||t.STATIC_DRAW,this.data=o,n&&this.upload(n),this._updateID=0}var o=new ArrayBuffer(0);i.prototype.upload=function(t,e,n){n||this.bind();n=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?n.bufferSubData(this.type,e,t):n.bufferData(this.type,t,this.drawType),this.data=t},i.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},i.createVertexBuffer=function(t,e,n){return new i(t,t.ARRAY_BUFFER,e,n)},i.createIndexBuffer=function(t,e,n){return new i(t,t.ELEMENT_ARRAY_BUFFER,e,n)},i.create=function(t,e,n,r){return new i(t,e,n,r)},i.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=i},{}],113:[function(t,e,n){function o(t,e,n){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=n||100}var s=t("./GLTexture");o.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new s(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},o.prototype.enableStencil=function(){var t;this.stencil||(t=this.gl,this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height))},o.prototype.clear=function(t,e,n,r){this.bind();var i=this.gl;i.clearColor(t,e,n,r),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)},o.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},o.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},o.prototype.resize=function(t,e){var n=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,this.stencil),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t,e))},o.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},o.createRGBA=function(t,e,n,r){var i=s.fromData(t,null,e,n),t=(i.enableNearestScaling(),i.enableWrapClamp(),new o(t,e,n));return t.enableTexture(i),t.unbind(),t},o.createFloat32=function(t,e,n,r){r=new s.fromData(t,r,e,n),r.enableNearestScaling(),r.enableWrapClamp(),t=new o(t,e,n);return t.enableTexture(r),t.unbind(),t},e.exports=o},{"./GLTexture":115}],114:[function(t,e,n){function r(t,e,n,r,i){this.gl=t,r&&(e=u(e,r),n=u(n,r)),this.program=o(t,e,n,i),this.attributes=s(t,this.program),this.uniformData=a(t,this.program),this.uniforms=l(t,this.uniformData)}var o=t("./shader/compileProgram"),s=t("./shader/extractAttributes"),a=t("./shader/extractUniforms"),u=t("./shader/setPrecision"),l=t("./shader/generateUniformAccessObject");r.prototype.bind=function(){return this.gl.useProgram(this.program),this},r.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},e.exports=r},{"./shader/compileProgram":120,"./shader/extractAttributes":122,"./shader/extractUniforms":123,"./shader/generateUniformAccessObject":124,"./shader/setPrecision":128}],115:[function(t,e,n){function i(t,e,n,r,i){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=n||-1,this.format=r||t.RGBA,this.type=i||t.UNSIGNED_BYTE}var o=!(i.prototype.upload=function(t){this.bind();var e=this.gl,n=(e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t.videoWidth||t.width),r=t.videoHeight||t.height;r!==this.height||n!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=n,this.height=r});i.prototype.uploadData=function(t,e,n){this.bind();var r=this.gl;if(t instanceof Float32Array){if(!o){if(!r.getExtension("OES_texture_float"))throw new Error("floating point textures not available");o=!0}this.type=r.FLOAT}else this.type=this.type||r.UNSIGNED_BYTE;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||n!==this.height?r.texImage2D(r.TEXTURE_2D,0,this.format,e,n,0,this.format,this.type,t||null):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e,n,this.format,this.type,t||null),this.width=e,this.height=n},i.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},i.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},i.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},i.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},i.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},i.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},i.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},i.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},i.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},i.fromSource=function(t,e,n){t=new i(t);return t.premultiplyAlpha=n||!1,t.upload(e),t},i.fromData=function(t,e,n,r){t=new i(t);return t.uploadData(e,n,r),t},e.exports=i},{}],116:[function(t,e,n){var i=t("./setVertexAttribArrays");function r(t,e){this.nativeVaoExtension=null,r.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension&&(this.nativeVao=this.nativeVaoExtension.createVertexArrayOES(),e=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.nativeState={tempAttribState:new Array(e),attribState:new Array(e)}),this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}(e.exports=r.prototype.constructor=r).FORCE_NATIVE=!1,r.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},r.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},r.prototype.activate=function(){for(var t=this.gl,e=null,n=0;n<this.attributes.length;n++){var r=this.attributes[n];e!==r.buffer&&(r.buffer.bind(),e=r.buffer),t.vertexAttribPointer(r.attribute.location,r.attribute.size,r.type||t.FLOAT,r.normalized||!1,r.stride||0,r.start||0)}return i(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},r.prototype.addAttribute=function(t,e,n,r,i,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:n||this.gl.FLOAT,normalized:r||!1,stride:i||0,start:o||0}),this.dirty=!0,this},r.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},r.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},r.prototype.draw=function(t,e,n){var r=this.gl;return this.indexBuffer?r.drawElements(t,e||this.indexBuffer.data.length,r.UNSIGNED_SHORT,2*(n||0)):r.drawArrays(t,n,e||this.getSize()),this},r.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},r.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},{"./setVertexAttribArrays":119}],117:[function(t,e,n){e.exports=function(t,e){t=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(t)return t;throw new Error("This browser does not support webGL. Try using the canvas renderer")}},{}],118:[function(t,e,n){t={createContext:t("./createContext"),setVertexAttribArrays:t("./setVertexAttribArrays"),GLBuffer:t("./GLBuffer"),GLFramebuffer:t("./GLFramebuffer"),GLShader:t("./GLShader"),GLTexture:t("./GLTexture"),VertexArrayObject:t("./VertexArrayObject"),shader:t("./shader")};void 0!==e&&e.exports&&(e.exports=t),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=t)},{"./GLBuffer":112,"./GLFramebuffer":113,"./GLShader":114,"./GLTexture":115,"./VertexArrayObject":116,"./createContext":117,"./setVertexAttribArrays":119,"./shader":125}],119:[function(t,e,n){e.exports=function(t,e,n){if(n){for(var r=n.tempAttribState,i=n.attribState,o=0;o<r.length;o++)r[o]=!1;for(o=0;o<e.length;o++)r[e[o].attribute.location]=!0;for(o=0;o<i.length;o++)i[o]!==r[o]&&(i[o]=r[o],n.attribState[o]?t.enableVertexAttribArray(o):t.disableVertexAttribArray(o))}else for(o=0;o<e.length;o++){var s=e[o];t.enableVertexAttribArray(s.attribute.location)}}},{}],120:[function(t,e,n){function s(t,e,n){return e=t.createShader(e),t.shaderSource(e,n),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)?e:(console.log(t.getShaderInfoLog(e)),null)}e.exports=function(t,e,n,r){var e=s(t,t.VERTEX_SHADER,e),n=s(t,t.FRAGMENT_SHADER,n),i=t.createProgram();if(t.attachShader(i,e),t.attachShader(i,n),r)for(var o in r)t.bindAttribLocation(i,r[o],o);return t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(i,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(i)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(i)),t.deleteProgram(i),i=null),t.deleteShader(e),t.deleteShader(n),i}},{}],121:[function(t,e,n){function r(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e}e.exports=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return r(2*e);case"bvec3":return r(3*e);case"bvec4":return r(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},{}],122:[function(t,e,n){function a(t,e,n,r){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,n||0,r||0)}var u=t("./mapType"),l=t("./mapSize");e.exports=function(t,e){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=t.getActiveAttrib(e,i),s=u(t,o.type);n[o.name]={type:s,size:l(s),location:t.getAttribLocation(e,o.name),pointer:a}}return n}},{"./mapSize":126,"./mapType":127}],123:[function(t,e,n){var u=t("./mapType"),l=t("./defaultValue");e.exports=function(t,e){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<r;i++){var o=t.getActiveUniform(e,i),s=o.name.replace(/\[.*?\]/,""),a=u(t,o.type);n[s]={type:a,size:o.size,location:t.getUniformLocation(e,s),value:l(a,o.size)}}return n}},{"./defaultValue":121,"./mapType":127}],124:[function(t,e,n){var u={float:function(t,e,n){t.uniform1f(e,n)},vec2:function(t,e,n){t.uniform2f(e,n[0],n[1])},vec3:function(t,e,n){t.uniform3f(e,n[0],n[1],n[2])},vec4:function(t,e,n){t.uniform4f(e,n[0],n[1],n[2],n[3])},int:function(t,e,n){t.uniform1i(e,n)},ivec2:function(t,e,n){t.uniform2i(e,n[0],n[1])},ivec3:function(t,e,n){t.uniform3i(e,n[0],n[1],n[2])},ivec4:function(t,e,n){t.uniform4i(e,n[0],n[1],n[2],n[3])},bool:function(t,e,n){t.uniform1i(e,n)},bvec2:function(t,e,n){t.uniform2i(e,n[0],n[1])},bvec3:function(t,e,n){t.uniform3i(e,n[0],n[1],n[2])},bvec4:function(t,e,n){t.uniform4i(e,n[0],n[1],n[2],n[3])},mat2:function(t,e,n){t.uniformMatrix2fv(e,!1,n)},mat3:function(t,e,n){t.uniformMatrix3fv(e,!1,n)},mat4:function(t,e,n){t.uniformMatrix4fv(e,!1,n)},sampler2D:function(t,e,n){t.uniform1i(e,n)}},l={float:function(t,e,n){t.uniform1fv(e,n)},vec2:function(t,e,n){t.uniform2fv(e,n)},vec3:function(t,e,n){t.uniform3fv(e,n)},vec4:function(t,e,n){t.uniform4fv(e,n)},int:function(t,e,n){t.uniform1iv(e,n)},ivec2:function(t,e,n){t.uniform2iv(e,n)},ivec3:function(t,e,n){t.uniform3iv(e,n)},ivec4:function(t,e,n){t.uniform4iv(e,n)},bool:function(t,e,n){t.uniform1iv(e,n)},bvec2:function(t,e,n){t.uniform2iv(e,n)},bvec3:function(t,e,n){t.uniform3iv(e,n)},bvec4:function(t,e,n){t.uniform4iv(e,n)},sampler2D:function(t,e,n){t.uniform1iv(e,n)}};e.exports=function(t,e){for(var n={data:{}},r=(n.gl=t,Object.keys(e)),i=0;i<r.length;i++){var o=r[i],s=o.split("."),a=s[s.length-1],s=function(t,e){for(var n=e,r=0;r<t.length-1;r++){var i=n[t[r]]||{data:{}};n[t[r]]=i,n=i}return n}(s,n),o=e[o];s.data[a]=o,s.gl=t,Object.defineProperty(s,a,{get:function(t){return function(){return this.data[t].value}}(a),set:function(n,r){return function(t){this.data[n].value=t;var e=this.data[n].location;(1===r.size?u:l)[r.type](this.gl,e,t)}}(a,o)})}return n}},{}],125:[function(t,e,n){e.exports={compileProgram:t("./compileProgram"),defaultValue:t("./defaultValue"),extractAttributes:t("./extractAttributes"),extractUniforms:t("./extractUniforms"),generateUniformAccessObject:t("./generateUniformAccessObject"),setPrecision:t("./setPrecision"),mapSize:t("./mapSize"),mapType:t("./mapType")}},{"./compileProgram":120,"./defaultValue":121,"./extractAttributes":122,"./extractUniforms":123,"./generateUniformAccessObject":124,"./mapSize":126,"./mapType":127,"./setPrecision":128}],126:[function(t,e,n){var r={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=function(t){return r[t]}},{}],127:[function(t,e,n){var o=null,s={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=function(t,e){if(!o){var n=Object.keys(s);o={};for(var r=0;r<n.length;++r){var i=n[r];o[t[i]]=s[i]}}return o[e]}},{}],128:[function(t,e,n){e.exports=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t}},{}],129:[function(t,e,n){"use strict";n.__esModule=!0;var u=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../core")),r=i(t("ismobilejs")),t=i(t("./accessibleTarget"));function i(t){return t&&t.__esModule?t:{default:t}}u.utils.mixins.delayMixin(u.DisplayObject.prototype,t.default);o.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},o.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},o.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode)&&this.div.parentNode.removeChild(this.div)},o.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,n=0;n<e.length;n++)this.updateAccessibleObjects(e[n])}},o.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,n=t.height/this.renderer.height;(i=this.div).style.left=t.left+"px",i.style.top=t.top+"px",i.style.width=this.renderer.width+"px",i.style.height=this.renderer.height+"px";for(var r=0;r<this.children.length;r++){var i,o,s,a=this.children[r];a.renderId!==this.renderId?(a._accessibleActive=!1,u.utils.removeItems(this.children,r,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,r--,0===this.children.length&&this.deactivate()):(i=a._accessibleDiv,o=a.hitArea,s=a.worldTransform,a.hitArea?(i.style.left=(s.tx+o.x*s.a)*e+"px",i.style.top=(s.ty+o.y*s.d)*n+"px",i.style.width=o.width*s.a*e+"px",i.style.height=o.height*s.d*n+"px"):(o=a.getBounds(),this.capHitArea(o),i.style.left=o.x*e+"px",i.style.top=o.y*n+"px",i.style.width=o.width*e+"px",i.style.height=o.height*n+"px",i.title!==a.accessibleTitle&&null!==a.accessibleTitle&&(i.title=a.accessibleTitle),i.getAttribute("aria-label")!==a.accessibleHint&&null!==a.accessibleHint&&i.setAttribute("aria-label",a.accessibleHint)))}this.renderId++}},o.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},o.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",-1<navigator.userAgent.toLowerCase().indexOf("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,(t._accessibleDiv=e).displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},o.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},o.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},o.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},o.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},o.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},o.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null};t=o;function o(t){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");!r.default.tablet&&!r.default.phone||navigator.isCocoonJS||this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}n.default=t,u.WebGLRenderer.registerPlugin("accessibility",t),u.CanvasRenderer.registerPlugin("accessibility",t)},{"../core":154,"./accessibleTarget":130,ismobilejs:41}],130:[function(t,e,n){"use strict";n.__esModule=!0,n.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],131:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("./accessibleTarget"),i=(Object.defineProperty(n,"accessibleTarget",{enumerable:!0,get:function(){return o(r).default}}),t("./AccessibilityManager"));function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"AccessibilityManager",{enumerable:!0,get:function(){return o(i).default}})},{"./AccessibilityManager":129,"./accessibleTarget":130}],132:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=t("./autoDetectRenderer"),s=c(t("./display/Container")),a=t("./ticker"),u=c(t("./settings")),l=t("./const");function c(t){return t&&t.__esModule?t:{default:t}}function h(t,e,n,r,i){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");"number"==typeof t&&(t=Object.assign({width:t,height:e||u.default.RENDER_OPTIONS.height,forceCanvas:!!r,sharedTicker:!!i},n)),this._options=t=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=(0,o.autoDetectRenderer)(t),this.stage=new s.default,this._ticker=null,this.ticker=t.sharedTicker?a.shared:new a.Ticker,t.autoStart&&this.start()}h.prototype.render=function(){this.renderer.render(this.stage)},h.prototype.stop=function(){this._ticker.stop()},h.prototype.start=function(){this._ticker.start()},h.prototype.destroy=function(t,e){var n;this._ticker&&(n=this._ticker,this.ticker=null,n.destroy()),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},r(h,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,l.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),n.default=h},{"./autoDetectRenderer":134,"./const":135,"./display/Container":137,"./settings":190,"./ticker":210}],133:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("pixi-gl-core"),t=t("./settings"),u=(t=t)&&t.__esModule?t:{default:t};function l(t,e){var n;if(t instanceof Array){if("precision"!==t[0].substring(0,9))return(n=t.slice(0)).unshift("precision "+e+" float;"),n}else if("precision"!==t.trim().substring(0,9))return"precision "+e+" float;\n"+t;return t}t=function(s){var t=a,e=s;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(t,e,n,r,i){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var o=this,t=s.call(this,t,l(e,i||u.default.PRECISION_VERTEX),l(n,i||u.default.PRECISION_FRAGMENT),void 0,r);if(o)return!t||"object"!=typeof t&&"function"!=typeof t?o:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),a}(r.GLShader);n.default=t},{"./settings":190,"pixi-gl-core":118}],134:[function(t,e,n){"use strict";n.__esModule=!0,n.autoDetectRenderer=function(t,e,n,r){var i=t&&t.forceCanvas;void 0!==r&&(i=r);return new(i||!o.isWebGLSupported()?s:a).default(t,e,n)};var o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("./utils")),s=r(t("./renderers/canvas/CanvasRenderer")),a=r(t("./renderers/webgl/WebGLRenderer"));function r(t){return t&&t.__esModule?t:{default:t}}},{"./renderers/canvas/CanvasRenderer":166,"./renderers/webgl/WebGLRenderer":173,"./utils":214}],135:[function(t,e,n){"use strict";n.__esModule=!0;n.VERSION="4.8.9",n.PI_2=2*Math.PI,n.RAD_TO_DEG=180/Math.PI,n.DEG_TO_RAD=Math.PI/180,n.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},n.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},n.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},n.SCALE_MODES={LINEAR:0,NEAREST:1},n.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},n.GC_MODES={AUTO:0,MANUAL:1},n.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,n.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,n.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,n.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},n.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},n.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},n.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},n.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],136:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("../math");function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}i.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},i.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},i.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?r.Rectangle.EMPTY:((t=t||new r.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},i.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},i.prototype.addQuad=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=t[0],s=t[1],e=o<e?o:e,n=s<n?s:n,r=r<o?o:r,i=i<s?s:i;e=(o=t[2])<e?o:e,n=(s=t[3])<n?s:n,r=r<o?o:r,i=i<s?s:i,e=(o=t[4])<e?o:e,n=(s=t[5])<n?s:n,r=r<o?o:r,i=i<s?s:i,o=t[6],n=(s=t[7])<n?s:n,r=r<o?o:r,i=i<s?s:i,this.minX=o<e?o:e,this.minY=n,this.maxX=r,this.maxY=i},i.prototype.addFrame=function(t,e,n,r,i){var t=t.worldTransform,o=t.a,s=t.b,a=t.c,u=t.d,l=t.tx,t=t.ty,c=o*e+a*n+l,h=s*e+u*n+t,p=c<(p=this.minX)?c:p,f=h<(f=this.minY)?h:f,d=(d=this.maxX)<c?c:d,g=(g=this.maxY)<h?h:g;p=(c=o*r+a*n+l)<p?c:p,f=(h=s*r+u*n+t)<f?h:f,d=d<c?c:d,g=g<h?h:g,p=(c=o*e+a*i+l)<p?c:p,f=(h=s*e+u*i+t)<f?h:f,g=g<h?h:g,f=(h=s*r+u*i+t)<f?h:f,d=(d=d<c?c:d)<(c=o*r+a*i+l)?c:d,g=g<h?h:g,this.minX=c<p?c:p,this.minY=f,this.maxX=d,this.maxY=g},i.prototype.addVertices=function(t,e,n,r){for(var t=t.worldTransform,i=t.a,o=t.b,s=t.c,a=t.d,u=t.tx,l=t.ty,c=this.minX,h=this.minY,p=this.maxX,f=this.maxY,d=n;d<r;d+=2)var g=e[d],y=e[d+1],m=i*g+s*y+u,y=a*y+o*g+l,c=m<c?m:c,h=y<h?y:h,p=p<m?m:p,f=f<y?y:f;this.minX=c,this.minY=h,this.maxX=p,this.maxY=f},i.prototype.addBounds=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>i?t.maxY:i},i.prototype.addBoundsMask=function(t,e){var n,r,i,o=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,a=(t.maxX<e.maxX?t:e).maxX,t=(t.maxY<e.maxY?t:e).maxY;o<=a&&s<=t&&(e=this.minX,n=this.minY,r=this.maxX,i=this.maxY,this.minX=o<e?o:e,this.minY=s<n?s:n,this.maxX=r<a?a:r,this.maxY=i<t?t:i)},i.prototype.addBoundsArea=function(t,e){var n,r,i,o=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,a=t.maxX<e.x+e.width?t.maxX:e.x+e.width,t=t.maxY<e.y+e.height?t.maxY:e.y+e.height;o<=a&&s<=t&&(e=this.minX,n=this.minY,r=this.maxX,i=this.maxY,this.minX=o<e?o:e,this.minY=s<n?s:n,this.maxX=r<a?a:r,this.maxY=i<t?t:i)},n.default=i},{"../math":159}],137:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=t("../utils"),t=t("./DisplayObject");t=function(i){var t=n,e=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function n(){var t;if(this instanceof n)return(t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,i.call(this))).children=[],t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n.prototype.onChildrenChange=function(){},n.prototype.addChild=function(t){var e=arguments.length;if(1<e)for(var n=0;n<e;n++)this.addChild(arguments[n]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},n.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},n.prototype.swapChildren=function(t,e){var n,r;t!==e&&(n=this.getChildIndex(t),r=this.getChildIndex(e),this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r))},n.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},n.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);(0,o.removeItems)(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},n.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},n.prototype.removeChild=function(t){var e=arguments.length;if(1<e)for(var n=0;n<e;n++)this.removeChild(arguments[n]);else{var r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,(0,o.removeItems)(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this)}return t},n.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,o.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},n.prototype.removeChildren=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],e="number"==typeof e?e:this.children.length,n=e-t,r=void 0;if(0<n&&n<=e){for(var r=this.children.splice(t,n),i=0;i<r.length;++i)r[i].parent=null,r[i].transform&&(r[i].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var o=0;o<r.length;++o)r[o].emit("removed",this);return r}if(0==n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},n.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var n=this.children[t];n.visible&&n.updateTransform()}},n.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},n.prototype._calculateBounds=function(){},n.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].renderWebGL(t)}},n.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var r=this._enabledFilters.length=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}n&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var i=0,o=this.children.length;i<o;i++)this.children[i].renderWebGL(t);t.flush(),n&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},n.prototype._renderWebGL=function(t){},n.prototype._renderCanvas=function(t){},n.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},n.prototype.destroy=function(t){i.prototype.destroy.call(this);var e="boolean"==typeof t?t:t&&t.children,n=this.removeChildren(0,this.children.length);if(e)for(var r=0;r<n.length;++r)n[r].destroy(t)},r(n,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),n}(((t=t)&&t.__esModule?t:{default:t}).default);(n.default=t).prototype.containerUpdateTransform=t.prototype.updateTransform},{"../utils":214,"./DisplayObject":138}],138:[function(t,e,n){"use strict";n.__esModule=!0;var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=p(t("eventemitter3")),s=t("../const"),a=p(t("../settings")),u=p(t("./TransformStatic")),l=p(t("./Transform")),c=p(t("./Bounds")),h=t("../math");function p(t){return t&&t.__esModule?t:{default:t}}t=function(n){var t=r,e=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function r(){var t,e;if(this instanceof r)return t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,n.call(this)),e=(a.default.TRANSFORM_MODE===s.TRANSFORM_MODE.STATIC?u:l).default,t.tempDisplayObjectParent=null,t.transform=new e,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t.filterArea=null,t._filters=null,t._enabledFilters=null,t._bounds=new c.default,t._boundsID=0,t._lastBoundsID=-1,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},r.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},r.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new h.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},r.prototype.getLocalBounds=function(t){var e=this.transform,n=this.parent,t=(this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new h.Rectangle),t=this._localBoundsRect),this.getBounds(!1,t));return this.parent=n,this.transform=e,t},r.prototype.toGlobal=function(t,e){return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},r.prototype.toLocal=function(t,e,n,r){return e&&(t=e.toGlobal(t,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},r.prototype.renderWebGL=function(t){},r.prototype.renderCanvas=function(t){},r.prototype.setParent=function(t){if(t&&t.addChild)return t.addChild(this),t;throw new Error("setParent: Argument must be a Container")},r.prototype.setTransform=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,a=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,u=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=u,this},r.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},i(r,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new r),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),r}(o.default);(n.default=t).prototype.displayObjectUpdateTransform=t.prototype.updateTransform},{"../const":135,"../math":159,"../settings":190,"./Bounds":136,"./Transform":139,"./TransformStatic":141,eventemitter3:36}],139:[function(t,e,n){"use strict";n.__esModule=!0;var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=t("../math"),t=t("./TransformBase");t=function(e){var t=r,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);function r(){var t;if(this instanceof r)return(t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,e.call(this))).position=new o.Point(0,0),t.scale=new o.Point(1,1),t.skew=new o.ObservablePoint(t.updateSkew,t,0,0),t.pivot=new o.Point(0,0),t._rotation=0,t._cx=1,t._sx=0,t._cy=0,t._sy=1,t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n),r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},r.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},r.prototype.updateTransform=function(t){var e=this.localTransform,t=(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),t.worldTransform),n=this.worldTransform;n.a=e.a*t.a+e.b*t.c,n.b=e.a*t.b+e.b*t.d,n.c=e.c*t.a+e.d*t.c,n.d=e.c*t.b+e.d*t.d,n.tx=e.tx*t.a+e.ty*t.c+t.tx,n.ty=e.tx*t.b+e.ty*t.d+t.ty,this._worldID++},r.prototype.setFromMatrix=function(t){t.decompose(this)},i(r,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),r}(((t=t)&&t.__esModule?t:{default:t}).default);n.default=t},{"../math":159,"./TransformBase":140}],140:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("../math");i.prototype.updateLocalTransform=function(){},i.prototype.updateTransform=function(t){var t=t.worldTransform,e=this.worldTransform,n=this.localTransform;e.a=n.a*t.a+n.b*t.c,e.b=n.a*t.b+n.b*t.d,e.c=n.c*t.a+n.d*t.c,e.d=n.c*t.b+n.d*t.d,e.tx=n.tx*t.a+n.ty*t.c+t.tx,e.ty=n.tx*t.b+n.ty*t.d+t.ty,this._worldID++};t=i;function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.worldTransform=new r.Matrix,this.localTransform=new r.Matrix,this._worldID=0,this._parentID=0}(n.default=t).prototype.updateWorldTransform=t.prototype.updateTransform,t.IDENTITY=new t},{"../math":159}],141:[function(t,e,n){"use strict";n.__esModule=!0;var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=t("../math"),t=t("./TransformBase");t=function(e){var t=r,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);function r(){var t;if(this instanceof r)return(t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,e.call(this))).position=new o.ObservablePoint(t.onChange,t,0,0),t.scale=new o.ObservablePoint(t.onChange,t,1,1),t.pivot=new o.ObservablePoint(t.onChange,t,0,0),t.skew=new o.ObservablePoint(t.updateSkew,t,0,0),t._rotation=0,t._cx=1,t._sx=0,t._cy=0,t._sy=1,t._localID=0,t._currentLocalID=0,t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n),r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e,n,r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale._x,r.b=this._sx*this.scale._x,r.c=this._cy*this.scale._y,r.d=this._sy*this.scale._y,r.tx=this.position._x-(this.pivot._x*r.a+this.pivot._y*r.c),r.ty=this.position._y-(this.pivot._x*r.b+this.pivot._y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(n=this.worldTransform).a=r.a*e.a+r.b*e.c,n.b=r.a*e.b+r.b*e.d,n.c=r.c*e.a+r.d*e.c,n.d=r.c*e.b+r.d*e.d,n.tx=r.tx*e.a+r.ty*e.c+e.tx,n.ty=r.tx*e.b+r.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},i(r,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}}]),r}(((t=t)&&t.__esModule?t:{default:t}).default);n.default=t},{"../math":159,"./TransformBase":140}],142:[function(t,e,n){"use strict";n.__esModule=!0;var r=i(t("../display/Container")),o=i(t("../textures/RenderTexture")),s=i(t("../textures/Texture")),a=i(t("./GraphicsData")),u=i(t("../sprites/Sprite")),l=t("../math"),c=t("../utils"),x=t("../const"),h=i(t("../display/Bounds")),p=i(t("./utils/bezierCurveTo")),f=i(t("../renderers/canvas/CanvasRenderer"));function i(t){return t&&t.__esModule?t:{default:t}}var d=void 0,g=new l.Matrix,y=new l.Point,m=new Float32Array(4),v=new Float32Array(4),t=function(i){var t=b,e=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function b(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=this,n=b;if(e instanceof n)return(e=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,i.call(this))).fillAlpha=1,e.lineWidth=0,e.nativeLines=t,e.lineColor=0,e.lineAlignment=.5,e.graphicsData=[],e.tint=16777215,e._prevTint=16777215,e.blendMode=x.BLEND_MODES.NORMAL,e.currentPath=null,e._webGL={},e.isMask=!1,e.boundsPadding=0,e._localBounds=new h.default,e.dirty=0,e.fastRectDirty=-1,e.clearDirty=0,e.boundsDirty=-1,e.cachedSpriteDirty=!1,e._spriteRect=null,e._fastRect=!1,e._prevRectTint=null,e._prevRectFillColor=null,e;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),b.prototype.clone=function(){var t;(t=new b).renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.lineAlignment=this.lineAlignment,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},b.prototype._quadraticCurveLength=function(t,e,n,r,i,o){var i=t-2*n+i,o=e-2*r+o,n=2*n-2*t,t=2*r-2*e,r=4*(i*i+o*o),e=4*(i*n+o*t),i=n*n+t*t,o=2*Math.sqrt(r+e+i),n=Math.sqrt(r),t=2*r*n,s=2*Math.sqrt(i),a=e/n;return(t*o+n*e*(o-s)+(4*i*r-e*e)*Math.log((2*n+a+o)/(a+s)))/(4*t)},b.prototype._bezierCurveLength=function(t,e,n,r,i,o,s,a){for(var u,l,c,h,p,f,d,g,y=0,m=t,v=e,_=1;_<=10;++_)d=m-(p=(f=(g=(h=1-(u=_/10))*h)*h)*t+3*g*u*n+3*h*(l=u*u)*i+(c=l*u)*s),g=v-(f=f*e+3*g*u*r+3*h*l*o+c*a),m=p,v=f,y+=Math.sqrt(d*d+g*g);return y},b.prototype._segmentsCount=function(t){t=Math.ceil(t/b.CURVES.maxLength);return t<b.CURVES.minSegments?t=b.CURVES.minSegments:t>b.CURVES.maxSegments&&(t=b.CURVES.maxSegments),t},b.prototype.lineStyle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.5;return this.lineWidth=t,this.lineColor=e,this.lineAlpha=n,this.lineAlignment=r,this.currentPath&&(this.currentPath.shape.points.length?((t=new l.Polygon(this.currentPath.shape.points.slice(-2))).closed=!1,this.drawShape(t)):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment)),this},b.prototype.moveTo=function(t,e){t=new l.Polygon([t,e]);return t.closed=!1,this.drawShape(t),this},b.prototype.lineTo=function(t,e){var n=this.currentPath.shape.points,r=n[n.length-2],i=n[n.length-1];return r===t&&i===e||(n.push(t,e),this.dirty++),this},b.prototype.quadraticCurveTo=function(t,e,n,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var i=this.currentPath.shape.points,o=(0===i.length&&this.moveTo(0,0),i[i.length-2]),s=i[i.length-1],a=b.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(o,s,t,e,n,r)):20,u=1;u<=a;++u){var l,c=u/a;i.push((l=o+(t-o)*c)+(t+(n-t)*c-l)*c,(l=s+(e-s)*c)+(e+(r-e)*c-l)*c)}return this.dirty++,this},b.prototype.bezierCurveTo=function(t,e,n,r,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,a=s[s.length-2],u=s[s.length-1],l=(s.length-=2,b.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(a,u,t,e,n,r,i,o)):20);return(0,p.default)(a,u,t,e,n,r,i,o,l,s),this.dirty++,this},b.prototype.arcTo=function(t,e,n,r,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o,s,a,u,l,c=this.currentPath.shape.points,h=c[c.length-2],p=c[c.length-1]-e,h=h-t,r=r-e,n=n-t,f=Math.abs(p*n-h*r);return f<1e-8||0===i?c[c.length-2]===t&&c[c.length-1]===e||c.push(t,e):(c=p*p+h*h,a=r*r+n*n,l=p*r+h*n,c=(u=i*Math.sqrt(c)/f)*l/c,o=u*n+(f=i*Math.sqrt(a)/f)*h,s=u*r+f*p,a=n*(u+(l=f*l/a)),u=r*(u+l),l=Math.atan2(p*(f+c)-s,h*(f+c)-o),f=Math.atan2(u-s,a-o),this.arc(o+t,s+e,i,l,f,n*p<h*r)),this.dirty++,this},b.prototype.arc=function(t,e,n,r,i){var o=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(r!==i){!o&&i<=r?i+=x.PI_2:o&&r<=i&&(r+=x.PI_2);o=i-r,i=b.CURVES.adaptive?this._segmentsCount(Math.abs(o)*n):40*Math.ceil(Math.abs(o)/x.PI_2);if(0!=o){for(var s,a,u=t+Math.cos(r)*n,l=e+Math.sin(r)*n,c=this.currentPath?this.currentPath.shape.points:null,h=(c?(s=Math.abs(c[c.length-2]-u),a=Math.abs(c[c.length-1]-l),s<.001&&a<.001||c.push(u,l)):(this.moveTo(u,l),c=this.currentPath.shape.points),o/(2*i)),p=2*h,f=Math.cos(h),d=Math.sin(h),g=i-1,y=g%1/g,m=0;m<=g;++m){var v=h+r+p*(m+y*m),_=Math.cos(v),v=-Math.sin(v);c.push((f*_+d*v)*n+t,(f*-v+d*_)*n+e)}this.dirty++}}return this},b.prototype.beginFill=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},b.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},b.prototype.drawRect=function(t,e,n,r){return this.drawShape(new l.Rectangle(t,e,n,r)),this},b.prototype.drawRoundedRect=function(t,e,n,r,i){return this.drawShape(new l.RoundedRectangle(t,e,n,r,i)),this},b.prototype.drawCircle=function(t,e,n){return this.drawShape(new l.Circle(t,e,n)),this},b.prototype.drawEllipse=function(t,e,n,r){return this.drawShape(new l.Ellipse(t,e,n,r)),this},b.prototype.drawPolygon=function(t){var e=!0;if((n=t)instanceof l.Polygon&&(e=n.closed,n=n.points),!Array.isArray(n))for(var n=new Array(arguments.length),r=0;r<n.length;++r)n[r]=arguments[r];t=new l.Polygon(n);return t.closed=e,this.drawShape(t),this},b.prototype.drawStar=function(t,e,n,r,i){i=i||r/2;for(var o=-1*Math.PI/2+(5<arguments.length&&void 0!==arguments[5]?arguments[5]:0),s=2*n,a=x.PI_2/s,u=[],l=0;l<s;l++){var c=l%2?i:r,h=l*a+o;u.push(t+c*Math.cos(h),e+c*Math.sin(h))}return this.drawPolygon(u)},b.prototype.clear=function(){return(this.lineWidth||this.filling||0<this.graphicsData.length)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},b.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===x.SHAPES.RECT&&!this.graphicsData[0].lineWidth},b.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},b.prototype._renderSpriteRect=function(t){var e,n,r=this.graphicsData[0].shape,i=(this._spriteRect||(this._spriteRect=new u.default(new s.default(s.default.WHITE))),this._spriteRect),o=this.graphicsData[0].fillColor;16777215===this.tint?i.tint=o:this.tint===this._prevRectTint&&o===this._prevRectFillColor||(n=v,(0,c.hex2rgb)(o,e=m),(0,c.hex2rgb)(this.tint,n),e[0]*=n[0],e[1]*=n[1],e[2]*=n[2],i.tint=(0,c.rgb2hex)(e),this._prevRectTint=this.tint,this._prevRectFillColor=o),i.alpha=this.graphicsData[0].fillAlpha,i.worldAlpha=this.worldAlpha*i.alpha,i.blendMode=this.blendMode,i._texture._frame.width=r.width,i._texture._frame.height=r.height,i.transform.worldTransform=this.transform.worldTransform,i.anchor.set(-r.x/r.width,-r.y/r.height),i._onAnchorUpdate(),i._renderWebGL(t)},b.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},b.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},b.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,y);for(var e=this.graphicsData,n=0;n<e.length;++n){var r=e[n];if(r.fill&&(r.shape&&r.shape.contains(y.x,y.y))){var i=!1;if(r.holes)for(var o=0;o<r.holes.length;o++)if(r.holes[o].contains(y.x,y.y)){i=!0;break}if(!i)return!0}}return!1},b.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0;if(this.graphicsData.length)for(var i=0,o=0,s=0,a=0,u=0;u<this.graphicsData.length;u++){var l=this.graphicsData[u],c=l.type,h=l.lineWidth*l.lineAlignment,l=l.shape;if(c===x.SHAPES.RECT||c===x.SHAPES.RREC)i=l.x-h,o=l.y-h,t=i<t?i:t,e=e<i+(s=l.width+2*h)?i+s:e,n=o<n?o:n,r=r<o+(a=l.height+2*h)?o+a:r;else if(c===x.SHAPES.CIRC)i=l.x,o=l.y,t=i-(s=l.radius+h)<t?i-s:t,e=e<i+s?i+s:e,n=o-(a=l.radius+h)<n?o-a:n,r=r<o+a?o+a:r;else if(c===x.SHAPES.ELIP)i=l.x,o=l.y,t=i-(s=l.width+h)<t?i-s:t,e=e<i+s?i+s:e,n=o-(a=l.height+h)<n?o-a:n,r=r<o+a?o+a:r;else for(var p,f,d,g,y,m=l.points,v=0;v+2<m.length;v+=2)i=m[v],o=m[v+1],y=m[v+2],p=m[v+3],f=Math.abs(y-i),d=Math.abs(p-o),a=2*h,(s=Math.sqrt(f*f+d*d))<1e-9||(t=(y=(y+i)/2)-(g=(a/s*d+f)/2)<t?y-g:t,e=e<y+g?y+g:e,n=(y=(p+o)/2)-(g=(a/s*f+d)/2)<n?y-g:n,r=r<y+g?y+g:r)}else r=n=e=t=0;var _=this.boundsPadding;this._localBounds.minX=t-_,this._localBounds.maxX=e+_,this._localBounds.minY=n-_,this._localBounds.maxY=r+_},b.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;t=new a.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t,this.lineAlignment);return this.graphicsData.push(t),t.type===x.SHAPES.POLY&&(t.shape.closed=t.shape.closed,this.currentPath=t),this.dirty++,t},b.prototype.generateCanvasTexture=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=this.getLocalBounds(),r=o.default.create(n.width,n.height,t,e),n=(d=d||new f.default,this.transform.updateLocalTransform(),this.transform.localTransform.copy(g),g.invert(),g.tx-=n.x,g.ty-=n.y,d.render(this,r,!0,g),s.default.fromCanvas(r.baseTexture._canvasRenderTarget.canvas,t,"graphics"));return n.baseTexture.resolution=e,n.baseTexture.update(),n},b.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},b.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},b.prototype.destroy=function(t){i.prototype.destroy.call(this,t);for(var e,n=0;n<this.graphicsData.length;++n)this.graphicsData[n].destroy();for(e in this._webGL)for(var r=0;r<this._webGL[e].data.length;++r)this._webGL[e].data[r].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},b}(r.default);(n.default=t)._SPRITE_TEXTURE=null,t.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},{"../const":135,"../display/Bounds":136,"../display/Container":137,"../math":159,"../renderers/canvas/CanvasRenderer":166,"../sprites/Sprite":191,"../textures/RenderTexture":202,"../textures/Texture":204,"../utils":214,"./GraphicsData":143,"./utils/bezierCurveTo":145}],143:[function(t,e,n){"use strict";function l(t,e,n,r,i,o,s,a,u){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.lineWidth=t,this.lineAlignment=u,this.nativeLines=s,this.lineColor=e,this.lineAlpha=n,this._lineTint=e,this.fillColor=r,this.fillAlpha=i,this._fillTint=r,this.fill=o,this.holes=[],this.shape=a,this.type=a.type}n.__esModule=!0,l.prototype.clone=function(){return new l(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape,this.lineAlignment)},l.prototype.addHole=function(t){this.holes.push(t)},l.prototype.destroy=function(){this.shape=null,this.holes=null},n.default=l},{}],144:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("../../renderers/canvas/CanvasRenderer"),r=(r=r)&&r.__esModule?r:{default:r},R=t("../../const");i.prototype.render=function(t){var e=this.renderer,n=e.context,r=t.worldAlpha,i=t.transform.worldTransform,o=e.resolution;n.setTransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o,i.ty*o),t.canvasTintDirty===t.dirty&&t._prevTint===t.tint||this.updateGraphicsTint(t),e.setBlendMode(t.blendMode);for(var s=0;s<t.graphicsData.length;s++){var a,u,l,c,h,p,f,d,g=t.graphicsData[s],y=g.shape,m=g._fillTint,v=g._lineTint;if(n.lineWidth=g.lineWidth,g.type===R.SHAPES.POLY){n.beginPath();var _=y.points,b=g.holes,x=void 0,w=void 0,T=void 0,E=void 0;n.moveTo(_[0],_[1]);for(var S=2;S<_.length;S+=2)n.lineTo(_[S],_[S+1]);if(y.closed&&n.closePath(),0<b.length){T=_[x=0],E=_[1];for(var C=2;C+2<_.length;C+=2)x+=(_[C]-T)*(_[C+3]-E)-(_[C+2]-T)*(_[C+1]-E);for(var A=0;A<b.length;A++)if(_=b[A].points){for(var w=0,T=_[0],E=_[1],P=2;P+2<_.length;P+=2)w+=(_[P]-T)*(_[P+3]-E)-(_[P+2]-T)*(_[P+1]-E);if(w*x<0){n.moveTo(_[0],_[1]);for(var M=2;M<_.length;M+=2)n.lineTo(_[M],_[M+1])}else{n.moveTo(_[_.length-2],_[_.length-1]);for(var O=_.length-4;0<=O;O-=2)n.lineTo(_[O],_[O+1])}b[A].close&&n.closePath()}}g.fill&&(n.globalAlpha=g.fillAlpha*r,n.fillStyle="#"+("00000"+(0|m).toString(16)).substr(-6),n.fill()),g.lineWidth&&(n.globalAlpha=g.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|v).toString(16)).substr(-6),n.stroke())}else g.type===R.SHAPES.RECT?(!g.fillColor&&0!==g.fillColor||(n.globalAlpha=g.fillAlpha*r,n.fillStyle="#"+("00000"+(0|m).toString(16)).substr(-6),n.fillRect(y.x,y.y,y.width,y.height)),g.lineWidth&&(n.globalAlpha=g.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|v).toString(16)).substr(-6),n.strokeRect(y.x,y.y,y.width,y.height))):g.type===R.SHAPES.CIRC?(n.beginPath(),n.arc(y.x,y.y,y.radius,0,2*Math.PI),n.closePath(),g.fill&&(n.globalAlpha=g.fillAlpha*r,n.fillStyle="#"+("00000"+(0|m).toString(16)).substr(-6),n.fill()),g.lineWidth&&(n.globalAlpha=g.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|v).toString(16)).substr(-6),n.stroke())):g.type===R.SHAPES.ELIP?(h=2*y.width,u=2*y.height,a=y.x-h/2,l=y.y-u/2,n.beginPath(),p=h/2*.5522848,f=u/2*.5522848,c=a+h,d=l+u,h=a+h/2,n.moveTo(a,u=l+u/2),n.bezierCurveTo(a,u-f,h-p,l,h,l),n.bezierCurveTo(h+p,l,c,u-f,c,u),n.bezierCurveTo(c,u+f,h+p,d,h,d),n.bezierCurveTo(h-p,d,a,u+f,a,u),n.closePath(),g.fill&&(n.globalAlpha=g.fillAlpha*r,n.fillStyle="#"+("00000"+(0|m).toString(16)).substr(-6),n.fill()),g.lineWidth&&(n.globalAlpha=g.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|v).toString(16)).substr(-6),n.stroke())):g.type===R.SHAPES.RREC&&(l=y.x,c=y.y,h=y.width,p=y.height,d=y.radius,d=(f=Math.min(h,p)/2|0)<d?f:d,n.beginPath(),n.moveTo(l,c+d),n.lineTo(l,c+p-d),n.quadraticCurveTo(l,c+p,l+d,c+p),n.lineTo(l+h-d,c+p),n.quadraticCurveTo(l+h,c+p,l+h,c+p-d),n.lineTo(l+h,c+d),n.quadraticCurveTo(l+h,c,l+h-d,c),n.lineTo(l+d,c),n.quadraticCurveTo(l,c,l,c+d),n.closePath(),!g.fillColor&&0!==g.fillColor||(n.globalAlpha=g.fillAlpha*r,n.fillStyle="#"+("00000"+(0|m).toString(16)).substr(-6),n.fill()),g.lineWidth)&&(n.globalAlpha=g.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|v).toString(16)).substr(-6),n.stroke())}},i.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint,t.canvasTintDirty=t.dirty;for(var e=(t.tint>>16&255)/255,n=(t.tint>>8&255)/255,r=(255&t.tint)/255,i=0;i<t.graphicsData.length;++i){var o=t.graphicsData[i],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*n*255<<8)+(255&s)/255*r*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*n*255<<8)+(255&a)/255*r*255}},i.prototype.renderPolygon=function(t,e,n){n.moveTo(t[0],t[1]);for(var r=1;r<t.length/2;++r)n.lineTo(t[2*r],t[2*r+1]);e&&n.closePath()},i.prototype.destroy=function(){this.renderer=null};t=i;function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.renderer=t}n.default=t,r.default.registerPlugin("graphics",t)},{"../../const":135,"../../renderers/canvas/CanvasRenderer":166}],145:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e,n,r,i,o,s,a,u){var l=9<arguments.length&&void 0!==arguments[9]?arguments[9]:[],c=0,h=0,p=0,f=0,d=0;l.push(t,e);for(var g=1,y=0;g<=u;++g)p=(h=(c=1-(y=g/u))*c)*c,d=(f=y*y)*y,l.push(p*t+3*h*y*n+3*c*f*i+d*s,p*e+3*h*y*r+3*c*f*o+d*a);return l}},{}],146:[function(t,e,n){"use strict";n.__esModule=!0;var l=t("../../utils"),c=t("../../const"),i=a(t("../../renderers/webgl/utils/ObjectRenderer")),r=a(t("../../renderers/webgl/WebGLRenderer")),o=a(t("./WebGLGraphicsData")),s=a(t("./shaders/PrimitiveShader")),h=a(t("./utils/buildPoly")),p=a(t("./utils/buildRectangle")),f=a(t("./utils/buildRoundedRectangle")),d=a(t("./utils/buildCircle"));function a(t){return t&&t.__esModule?t:{default:t}}t=function(n){var t=r,e=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function r(t){var e;if(this instanceof r)return(e=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,n.call(this,t))).graphicsDataPool=[],e.primitiveShader=null,e.gl=t.gl,e.CONTEXT_UID=0,e;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new s.default(this.gl)},r.prototype.destroy=function(){i.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},r.prototype.render=function(t){var e=this.renderer,n=e.gl,r=void 0,i=t._webGL[this.CONTEXT_UID],o=(i&&t.dirty===i.dirty||(this.updateGraphics(t),i=t._webGL[this.CONTEXT_UID]),this.primitiveShader);e.bindShader(o),e.state.setBlendMode(t.blendMode);for(var s=0,a=i.data.length;s<a;s++){var u=(r=i.data[s]).shader;e.bindShader(u),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.tint=(0,l.hex2rgb)(t.tint),u.uniforms.alpha=t.worldAlpha,e.bindVao(r.vao),r.nativeLines?n.drawArrays(n.LINES,0,r.points.length/6):r.vao.draw(n.TRIANGLE_STRIP,r.indices.length)}},r.prototype.updateGraphics=function(t){var e=this.renderer.gl,n=t._webGL[this.CONTEXT_UID];if((n=n||(t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1})).dirty=t.dirty,t.clearDirty!==n.clearDirty){n.clearDirty=t.clearDirty;for(var r=0;r<n.data.length;r++)this.graphicsDataPool.push(n.data[r]);n.data.length=0,n.lastIndex=0}for(var i=void 0,o=void 0,s=n.lastIndex;s<t.graphicsData.length;s++){var a=t.graphicsData[s],i=this.getWebGLData(n,0);a.nativeLines&&a.lineWidth&&(o=this.getWebGLData(n,0,!0),n.lastIndex++),a.type===c.SHAPES.POLY&&(0,h.default)(a,i,o),a.type===c.SHAPES.RECT?(0,p.default)(a,i,o):a.type===c.SHAPES.CIRC||a.type===c.SHAPES.ELIP?(0,d.default)(a,i,o):a.type===c.SHAPES.RREC&&(0,f.default)(a,i,o),n.lastIndex++}this.renderer.bindVao(null);for(var u=0;u<n.data.length;u++)(i=n.data[u]).dirty&&i.upload()},r.prototype.getWebGLData=function(t,e,n){var r=t.data[t.data.length-1];return(!r||r.nativeLines!==n||32e4<r.points.length)&&((r=this.graphicsDataPool.pop()||new o.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=n,r.reset(e),t.data.push(r)),r.dirty=!0,r},r}(i.default);n.default=t,r.default.registerPlugin("graphics",t)},{"../../const":135,"../../renderers/webgl/WebGLRenderer":173,"../../renderers/webgl/utils/ObjectRenderer":183,"../../utils":214,"./WebGLGraphicsData":147,"./shaders/PrimitiveShader":148,"./utils/buildCircle":149,"./utils/buildPoly":151,"./utils/buildRectangle":152,"./utils/buildRoundedRectangle":153}],147:[function(t,e,n){"use strict";n.__esModule=!0;var t=t("pixi-gl-core"),r=(t=t)&&t.__esModule?t:{default:t};function i(t,e,n){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=r.default.GLBuffer.createVertexBuffer(t),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=e,this.vao=new r.default.VertexArrayObject(t,n).addIndex(this.indexBuffer).addAttribute(this.buffer,e.attributes.aVertexPosition,t.FLOAT,!1,24,0).addAttribute(this.buffer,e.attributes.aColor,t.FLOAT,!1,24,8)}i.prototype.reset=function(){this.points.length=0,this.indices.length=0},i.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},i.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},n.default=i},{"pixi-gl-core":118}],148:[function(t,e,n){"use strict";n.__esModule=!0;var t=t("../../../Shader");t=function(n){var t=r,e=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var e=this,t=n.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"));if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r}(((t=t)&&t.__esModule?t:{default:t}).default);n.default=t},{"../../../Shader":133}],149:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e,n){var r=t.shape,i=r.x,o=r.y,s=void 0,a=void 0;a=t.type===b.SHAPES.CIRC?(s=r.radius,r.radius):(s=r.width,r.height);if(0!==s&&0!==a){var u=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height)),l=2*Math.PI/u;if(t.fill){var r=(0,x.hex2rgb)(t.fillColor),c=t.fillAlpha,h=r[0]*c,p=r[1]*c,f=r[2]*c,d=e.points,g=e.indices,y=d.length/6;g.push(y);for(var m=0;m<u+1;m++)d.push(i,o,h,p,f,c),d.push(i+Math.sin(l*m)*s,o+Math.cos(l*m)*a,h,p,f,c),g.push(y++,y++);g.push(y-1)}if(t.lineWidth){r=t.points;t.points=[];for(var v=0;v<u;v++)t.points.push(i+Math.sin(l*-v)*s,o+Math.cos(l*-v)*a);t.points.push(t.points[0],t.points[1]),(0,_.default)(t,e,n),t.points=r}}};var n=t("./buildLine"),_=(n=n)&&n.__esModule?n:{default:n},b=t("../../../const"),x=t("../../../utils")},{"../../../const":135,"../../../utils":214,"./buildLine":150}],150:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e,n){if(t.nativeLines){var r=t,i=0,o=r.points;if(0!==o.length){var s=n.points,L=o.length/2,n=(0,Q.hex2rgb)(r.lineColor),a=r.lineAlpha,F=n[0]*a,N=n[1]*a,j=n[2]*a;for(i=1;i<L;i++){var U=o[2*(i-1)],q=o[2*(i-1)+1],G=o[2*i],W=o[2*i+1];s.push(U,q),s.push(F,N,j,a),s.push(G,W),s.push(F,N,j,a)}}}else{var r=t,n=e,u=r.points;if(0!==u.length){var t=new J.Point(u[0],u[1]),e=new J.Point(u[u.length-2],u[u.length-1]),l=(t.x===e.x&&t.y===e.y&&((u=u.slice()).pop(),u.pop(),M=(e=new J.Point(u[u.length-2],u[u.length-1])).x+.5*(t.x-e.x),t=e.y+.5*(t.y-e.y),u.unshift(M,t),u.push(M,t)),n.points),H=n.indices,c=u.length/2,X=u.length,V=l.length/6,h=r.lineWidth/2,e=(0,Q.hex2rgb)(r.lineColor),p=r.lineAlpha,f=e[0]*p,d=e[1]*p,g=e[2]*p,y=u[0],m=u[1],v=u[2],_=u[3],b=0,x=0,w=-(m-_),T=y-v,E=0,S=0,C=0,A=0,P=Math.sqrt(w*w+T*T),M=(w=w/P*h,T=T/P*h,r.lineAlignment),O=2*(1-M),R=2*M;l.push(y-w*O,m-T*O,f,d,g,p),l.push(y+w*R,m+T*R,f,d,g,p);for(var I=1;I<c-1;++I){y=u[2*(I-1)],m=u[2*(I-1)+1],v=u[2*I],_=u[2*I+1],b=u[2*(I+1)],x=u[2*(I+1)+1],w=-(m-_),T=y-v,P=Math.sqrt(w*w+T*T),w=w/P*h,T=T/P*h,E=-(_-x),S=v-b,P=Math.sqrt(E*E+S*S);var z=-T+m-(-T+_),B=-w+v-(-w+y),Y=(-w+y)*(-T+_)-(-w+v)*(-T+m),K=-(S=S/P*h)+x-(-S+_),D=-(E=E/P*h)+v-(-E+b),$=(-E+b)*(-S+_)-(-E+v)*(-S+x),k=z*D-K*B;Math.abs(k)<.1?(k+=10.1,l.push(v-w*O,_-T*O,f,d,g,p),l.push(v+w*R,_+T*R,f,d,g,p)):196*h*h<((B=(B*$-D*Y)/k)-v)*(B-v)+((D=(K*Y-z*$)/k)-_)*(D-_)?(C=w-E,A=T-S,P=Math.sqrt(C*C+A*A),C=C/P*h,A=A/P*h,l.push(v-C*O,_-A*O),l.push(f,d,g,p),l.push(v+C*R,_+A*R),l.push(f,d,g,p),l.push(v-C*R*O,_-A*O),l.push(f,d,g,p),X++):(l.push(v+(B-v)*O,_+(D-_)*O),l.push(f,d,g,p),l.push(v-(B-v)*R,_-(D-_)*R),l.push(f,d,g,p))}y=u[2*(c-2)],m=u[2*(c-2)+1],v=u[2*(c-1)],_=u[2*(c-1)+1],w=-(m-_),T=y-v,P=Math.sqrt(w*w+T*T),w=w/P*h,T=T/P*h,l.push(v-w*O,_-T*O),l.push(f,d,g,p),l.push(v+w*R,_+T*R),l.push(f,d,g,p),H.push(V);for(var Z=0;Z<X;++Z)H.push(V++);H.push(V-1)}}};var J=t("../../../math"),Q=t("../../../utils")},{"../../../math":159,"../../../utils":214}],151:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e,n){t.points=t.shape.points.slice();var r=t.points;if(t.fill&&6<=r.length){for(var i=[],o=t.holes,s=0;s<o.length;s++){var a=o[s];i.push(r.length/2),r=r.concat(a.points)}var u=e.points,l=e.indices,c=r.length/2,h=(0,x.hex2rgb)(t.fillColor),p=t.fillAlpha,f=h[0]*p,d=h[1]*p,g=h[2]*p,y=(0,w.default)(r,i,2);if(!y)return;for(var m=u.length/6,v=0;v<y.length;v+=3)l.push(y[v]+m),l.push(y[v]+m),l.push(y[v+1]+m),l.push(y[v+2]+m),l.push(y[v+2]+m);for(var _=0;_<c;_++)u.push(r[2*_],r[2*_+1],f,d,g,p)}0<t.lineWidth&&(0,b.default)(t,e,n)};var b=r(t("./buildLine")),x=t("../../../utils"),w=r(t("earcut"));function r(t){return t&&t.__esModule?t:{default:t}}},{"../../../utils":214,"./buildLine":150,earcut:20}],152:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e,n){var r=t.shape,i=r.x,o=r.y,s=r.width,r=r.height;{var a,u,l,c,h,p;t.fill&&(c=(0,g.hex2rgb)(t.fillColor),a=t.fillAlpha,u=c[0]*a,l=c[1]*a,c=c[2]*a,f=e.points,h=e.indices,p=f.length/6,f.push(i,o),f.push(u,l,c,a),f.push(i+s,o),f.push(u,l,c,a),f.push(i,o+r),f.push(u,l,c,a),f.push(i+s,o+r),f.push(u,l,c,a),h.push(p,p,1+p,2+p,3+p,3+p))}{var f;t.lineWidth&&(f=t.points,t.points=[i,o,i+s,o,i+s,o+r,i,o+r,i,o],(0,d.default)(t,e,n),t.points=f)}};var n=t("./buildLine"),d=(n=n)&&n.__esModule?n:{default:n},g=t("../../../utils")},{"../../../utils":214,"./buildLine":150}],153:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e,n){var r=t.shape,i=r.x,o=r.y,s=r.width,a=r.height,r=r.radius,u=[];if(u.push(i+r,o),E(i+s-r,o,i+s,o,i+s,o+r,u),E(i+s,o+a-r,i+s,o+a,i+s-r,o+a,u),E(i+r,o+a,i,o+a,i,o+a-r,u),E(i,o+r,i,o,i+r+1e-10,o,u),t.fill){for(var s=(0,T.hex2rgb)(t.fillColor),l=t.fillAlpha,c=s[0]*l,h=s[1]*l,p=s[2]*l,f=e.points,d=e.indices,g=f.length/6,y=(0,x.default)(u,null,2),m=0,v=y.length;m<v;m+=3)d.push(y[m]+g),d.push(y[m]+g),d.push(y[m+1]+g),d.push(y[m+2]+g),d.push(y[m+2]+g);for(var _=0,b=u.length;_<b;_++)f.push(u[_],u[++_],c,h,p,l)}t.lineWidth&&(a=t.points,t.points=u,(0,w.default)(t,e,n),t.points=a)};var x=r(t("earcut")),w=r(t("./buildLine")),T=t("../../../utils");function r(t){return t&&t.__esModule?t:{default:t}}function d(t,e,n){return t+(e-t)*n}function E(t,e,n,r,i,o,s){for(var a,u,l,c,h,p=6<arguments.length&&void 0!==s?s:[],f=0;f<=20;++f)l=d(t,n,h=f/20),a=d(e,r,h),c=d(n,i,h),u=d(r,o,h),l=d(l,c,h),c=d(a,u,h),p.push(l,c)}},{"../../../utils":214,"./buildLine":150,earcut:20}],154:[function(t,L,e){"use strict";e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.TextureMatrix=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextMetrics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var n=t("./const"),r=(Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}),t("./math")),i=(Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}),t("pixi-gl-core")),o=(Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return k(i).default}}),t("./display/Bounds")),s=(Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return k(o).default}}),t("./display/DisplayObject")),a=(Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return k(s).default}}),t("./display/Container")),u=(Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return k(a).default}}),t("./display/Transform")),l=(Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return k(u).default}}),t("./display/TransformStatic")),c=(Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return k(l).default}}),t("./display/TransformBase")),h=(Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return k(c).default}}),t("./sprites/Sprite")),p=(Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return k(h).default}}),t("./sprites/canvas/CanvasSpriteRenderer")),f=(Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return k(p).default}}),t("./sprites/canvas/CanvasTinter")),d=(Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return k(f).default}}),t("./sprites/webgl/SpriteRenderer")),g=(Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return k(d).default}}),t("./text/Text")),y=(Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return k(g).default}}),t("./text/TextStyle")),m=(Object.defineProperty(e,"TextStyle",{enumerable:!0,get:function(){return k(y).default}}),t("./text/TextMetrics")),v=(Object.defineProperty(e,"TextMetrics",{enumerable:!0,get:function(){return k(m).default}}),t("./graphics/Graphics")),_=(Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return k(v).default}}),t("./graphics/GraphicsData")),b=(Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return k(_).default}}),t("./graphics/webgl/GraphicsRenderer")),x=(Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return k(b).default}}),t("./graphics/canvas/CanvasGraphicsRenderer")),w=(Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return k(x).default}}),t("./textures/Spritesheet")),T=(Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return k(w).default}}),t("./textures/Texture")),E=(Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return k(T).default}}),t("./textures/TextureMatrix")),S=(Object.defineProperty(e,"TextureMatrix",{enumerable:!0,get:function(){return k(E).default}}),t("./textures/BaseTexture")),C=(Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return k(S).default}}),t("./textures/RenderTexture")),A=(Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return k(C).default}}),t("./textures/BaseRenderTexture")),P=(Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return k(A).default}}),t("./textures/VideoBaseTexture")),M=(Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return k(P).default}}),t("./textures/TextureUvs")),O=(Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return k(M).default}}),t("./renderers/canvas/utils/CanvasRenderTarget")),R=(Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return k(O).default}}),t("./Shader")),I=(Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return k(R).default}}),t("./renderers/webgl/managers/WebGLManager")),B=(Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return k(I).default}}),t("./renderers/webgl/utils/ObjectRenderer")),F=(Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return k(B).default}}),t("./renderers/webgl/utils/RenderTarget")),N=(Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return k(F).default}}),t("./renderers/webgl/utils/Quad")),j=(Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return k(N).default}}),t("./renderers/webgl/filters/spriteMask/SpriteMaskFilter")),U=(Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return k(j).default}}),t("./renderers/webgl/filters/Filter")),q=(Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return k(U).default}}),t("./Application")),G=(Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return k(q).default}}),t("./autoDetectRenderer"));Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return G.autoDetectRenderer}});var W=D(t("./utils")),H=D(t("./ticker")),X=k(t("./settings")),V=k(t("./renderers/canvas/CanvasRenderer")),t=k(t("./renderers/webgl/WebGLRenderer"));function D(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function k(t){return t&&t.__esModule?t:{default:t}}e.settings=X.default,e.utils=W,e.ticker=H,e.CanvasRenderer=V.default,e.WebGLRenderer=t.default},{"./Application":132,"./Shader":133,"./autoDetectRenderer":134,"./const":135,"./display/Bounds":136,"./display/Container":137,"./display/DisplayObject":138,"./display/Transform":139,"./display/TransformBase":140,"./display/TransformStatic":141,"./graphics/Graphics":142,"./graphics/GraphicsData":143,"./graphics/canvas/CanvasGraphicsRenderer":144,"./graphics/webgl/GraphicsRenderer":146,"./math":159,"./renderers/canvas/CanvasRenderer":166,"./renderers/canvas/utils/CanvasRenderTarget":168,"./renderers/webgl/WebGLRenderer":173,"./renderers/webgl/filters/Filter":175,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":178,"./renderers/webgl/managers/WebGLManager":182,"./renderers/webgl/utils/ObjectRenderer":183,"./renderers/webgl/utils/Quad":184,"./renderers/webgl/utils/RenderTarget":185,"./settings":190,"./sprites/Sprite":191,"./sprites/canvas/CanvasSpriteRenderer":192,"./sprites/canvas/CanvasTinter":193,"./sprites/webgl/SpriteRenderer":195,"./text/Text":197,"./text/TextMetrics":198,"./text/TextStyle":199,"./textures/BaseRenderTexture":200,"./textures/BaseTexture":201,"./textures/RenderTexture":202,"./textures/Spritesheet":203,"./textures/Texture":204,"./textures/TextureMatrix":205,"./textures/TextureUvs":206,"./textures/VideoBaseTexture":207,"./ticker":210,"./utils":214,"pixi-gl-core":118}],155:[function(t,e,n){"use strict";n.__esModule=!0;var t=t("./Matrix"),r=(t=t)&&t.__esModule?t:{default:t};var i=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],o=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],s=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],a=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],u=[],l=[];function c(t){return t<0?-1:0<t?1:0}for(var h=0;h<16;h++){var p=[];l.push(p);for(var f=0;f<16;f++)for(var d=c(i[h]*i[f]+s[h]*o[f]),g=c(o[h]*i[f]+a[h]*o[f]),y=c(i[h]*s[f]+s[h]*a[f]),m=c(o[h]*s[f]+a[h]*a[f]),v=0;v<16;v++)if(i[v]===d&&o[v]===g&&s[v]===y&&a[v]===m){p.push(v);break}}for(var _=0;_<16;_++){var b=new r.default;b.set(i[_],o[_],s[_],a[_],0,0),u.push(b)}var x={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return i[t]},uY:function(t){return o[t]},vX:function(t){return s[t]},vY:function(t){return a[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return l[t][e]},sub:function(t,e){return l[t][x.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?x.S:x.N:2*Math.abs(e)<=Math.abs(t)?0<t?x.E:x.W:0<e?0<t?x.SE:x.SW:0<t?x.NE:x.NW},matrixAppendRotationInv:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,e=u[x.inv(e)];e.tx=n,e.ty=r,t.append(e)}};n.default=x},{"./Matrix":156}],156:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=t("./Point"),s=(o=o)&&o.__esModule?o:{default:o},u=t("../const");function l(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,s=this,a=l;if(!(s instanceof a))throw new TypeError("Cannot call a class as a function");this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this.array=null}l.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},l.prototype.set=function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this},l.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},l.prototype.apply=function(t,e){e=e||new s.default;var n=t.x,t=t.y;return e.x=this.a*n+this.c*t+this.tx,e.y=this.b*n+this.d*t+this.ty,e},l.prototype.applyInverse=function(t,e){e=e||new s.default;var n=1/(this.a*this.d+this.c*-this.b),r=t.x,t=t.y;return e.x=this.d*n*r+-this.c*n*t+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*t+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,e},l.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},l.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},l.prototype.rotate=function(t){var e=Math.cos(t),t=Math.sin(t),n=this.a,r=this.c,i=this.tx;return this.a=n*e-this.b*t,this.b=n*t+this.b*e,this.c=r*e-this.d*t,this.d=r*t+this.d*e,this.tx=i*e-this.ty*t,this.ty=i*t+this.ty*e,this},l.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},l.prototype.setTransform=function(t,e,n,r,i,o,s,a,u){return this.a=Math.cos(s+u)*i,this.b=Math.sin(s+u)*i,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(n*this.a+r*this.c),this.ty=e-(n*this.b+r*this.d),this},l.prototype.prepend=function(t){var e,n,r=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,n=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d),this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this},l.prototype.decompose=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=-Math.atan2(-r,i),s=Math.atan2(n,e),a=Math.abs(o+s);return a<1e-5||Math.abs(u.PI_2-a)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(r*r+i*i),t.position.x=this.tx,t.position.y=this.ty,t},l.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=t*r-e*n;return this.a=r/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this},l.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},l.prototype.clone=function(){var t=new l;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},l.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r(l,null,[{key:"IDENTITY",get:function(){return new l}},{key:"TEMP_MATRIX",get:function(){return new l}}]),n.default=l},{"../const":135,"./Point":158}],157:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=this,o=s;if(!(i instanceof o))throw new TypeError("Cannot call a class as a function");this._x=n,this._y=r,this.cb=t,this.scope=e}s.prototype.clone=function(){return new s((0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||this.cb,(1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)||this.scope,this._x,this._y)},s.prototype.set=function(t,e){t=t||0,e=e||(0!==e?t:0);this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope))},s.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},s.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r(s,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),n.default=s},{}],158:[function(t,e,n){"use strict";function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=this,r=i;if(!(n instanceof r))throw new TypeError("Cannot call a class as a function");this.x=t,this.y=e}n.__esModule=!0,i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.copy=function(t){this.set(t.x,t.y)},i.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},i.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},n.default=i},{}],159:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("./Point"),i=(Object.defineProperty(n,"Point",{enumerable:!0,get:function(){return p(r).default}}),t("./ObservablePoint")),o=(Object.defineProperty(n,"ObservablePoint",{enumerable:!0,get:function(){return p(i).default}}),t("./Matrix")),s=(Object.defineProperty(n,"Matrix",{enumerable:!0,get:function(){return p(o).default}}),t("./GroupD8")),a=(Object.defineProperty(n,"GroupD8",{enumerable:!0,get:function(){return p(s).default}}),t("./shapes/Circle")),u=(Object.defineProperty(n,"Circle",{enumerable:!0,get:function(){return p(a).default}}),t("./shapes/Ellipse")),l=(Object.defineProperty(n,"Ellipse",{enumerable:!0,get:function(){return p(u).default}}),t("./shapes/Polygon")),c=(Object.defineProperty(n,"Polygon",{enumerable:!0,get:function(){return p(l).default}}),t("./shapes/Rectangle")),h=(Object.defineProperty(n,"Rectangle",{enumerable:!0,get:function(){return p(c).default}}),t("./shapes/RoundedRectangle"));function p(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"RoundedRectangle",{enumerable:!0,get:function(){return p(h).default}})},{"./GroupD8":155,"./Matrix":156,"./ObservablePoint":157,"./Point":158,"./shapes/Circle":160,"./shapes/Ellipse":161,"./shapes/Polygon":162,"./shapes/Rectangle":163,"./shapes/RoundedRectangle":164}],160:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("./Rectangle"),i=(r=r)&&r.__esModule?r:{default:r},o=t("../../const");function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=this,i=s;if(!(r instanceof i))throw new TypeError("Cannot call a class as a function");this.x=t,this.y=e,this.radius=n,this.type=o.SHAPES.CIRC}s.prototype.clone=function(){return new s(this.x,this.y,this.radius)},s.prototype.contains=function(t,e){var n;return!(this.radius<=0)&&(n=this.radius*this.radius,t=this.x-t,e=this.y-e,(t*=t)+(e*=e)<=n)},s.prototype.getBounds=function(){return new i.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},n.default=s},{"../../const":135,"./Rectangle":163}],161:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("./Rectangle"),i=(r=r)&&r.__esModule?r:{default:r},s=t("../../const");function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=this,o=a;if(!(i instanceof o))throw new TypeError("Cannot call a class as a function");this.x=t,this.y=e,this.width=n,this.height=r,this.type=s.SHAPES.ELIP}a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t=(t-this.x)/this.width,e=(e-this.y)/this.height,(t*=t)+(e*=e)<=1)},a.prototype.getBounds=function(){return new i.default(this.x-this.width,this.y-this.height,this.width,this.height)},n.default=a},{"../../const":135,"./Rectangle":163}],162:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("../Point"),u=(r=r)&&r.__esModule?r:{default:r},l=t("../../const");function c(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this,i=c;if(!(r instanceof i))throw new TypeError("Cannot call a class as a function");if((e=Array.isArray(e[0])?e[0]:e)[0]instanceof u.default){for(var o=[],s=0,a=e.length;s<a;s++)o.push(e[s].x,e[s].y);e=o}this.closed=!0,this.points=e,this.type=l.SHAPES.POLY}c.prototype.clone=function(){return new c(this.points.slice())},c.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},c.prototype.contains=function(t,e){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var s=this.points[2*i],a=this.points[2*i+1],u=this.points[2*o],l=this.points[2*o+1];e<a!=e<l&&t<(e-a)/(l-a)*(u-s)+s&&(n=!n)}return n},n.default=c},{"../../const":135,"../Point":158}],163:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=t("../../const");function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=this,o=a;if(!(i instanceof o))throw new TypeError("Cannot call a class as a function");this.x=Number(t),this.y=Number(e),this.width=Number(n),this.height=Number(r),this.type=s.SHAPES.RECT}a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},a.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},a.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},a.prototype.fit=function(t){var e=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);this.x=e,this.width=Math.max(n-e,0),this.y=r,this.height=Math.max(t-r,0)},a.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=n-e,this.y=r,this.height=t-r},a.prototype.ceil=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.001,n=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=n-this.x,this.height=r-this.y},r(a,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new a(0,0,0,0)}}]),n.default=a},{"../../const":135}],164:[function(t,e,n){"use strict";n.__esModule=!0;var a=t("../../const");function u(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20,o=this,s=u;if(!(o instanceof s))throw new TypeError("Cannot call a class as a function");this.x=t,this.y=e,this.width=n,this.height=r,this.radius=i,this.type=a.SHAPES.RREC}u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height,this.radius)},u.prototype.contains=function(t,e){if(!(this.width<=0||this.height<=0)&&t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var n=t-(this.x+this.radius),r=e-(this.y+this.radius),i=this.radius*this.radius;if(n*n+r*r<=i)return!0;if((n=t-(this.x+this.width-this.radius))*n+r*r<=i)return!0;if(n*n+(r=e-(this.y+this.height-this.radius))*r<=i)return!0;if((n=t-(this.x+this.radius))*n+r*r<=i)return!0}return!1},n.default=u},{"../../const":135}],165:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=t("../utils"),u=t("../math"),l=t("../const"),c=o(t("../settings")),h=o(t("../display/Container")),p=o(t("../textures/RenderTexture")),t=o(t("eventemitter3"));function o(t){return t&&t.__esModule?t:{default:t}}var f=new u.Matrix,t=function(o){var t=s,e=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function s(t,e,n,r){var i;if(this instanceof s)return i=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,o.call(this)),(0,a.sayHello)(t),"number"==typeof e&&(e=Object.assign({width:e,height:n||c.default.RENDER_OPTIONS.height},r)),e=Object.assign({},c.default.RENDER_OPTIONS,e),i.options=e,i.type=l.RENDERER_TYPE.UNKNOWN,i.screen=new u.Rectangle(0,0,e.width,e.height),i.view=e.view||document.createElement("canvas"),i.resolution=e.resolution||c.default.RESOLUTION,i.transparent=e.transparent,i.autoResize=e.autoResize||!1,i.blendModes=null,i.preserveDrawingBuffer=e.preserveDrawingBuffer,i.clearBeforeRender=e.clearBeforeRender,i.roundPixels=e.roundPixels,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,0],i._backgroundColorString="#000000",i.backgroundColor=e.backgroundColor||i._backgroundColor,i._tempDisplayObjectParent=new h.default,i._lastObjectRendered=i._tempDisplayObjectParent,i;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),s.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},s.prototype.generateTexture=function(t,e,n,r){r=r||t.getLocalBounds();e=p.default.create(0|r.width,0|r.height,e,n);return f.tx=-r.x,f.ty=-r.y,this.render(t,e,!1,f,!!t.parent),e},s.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=l.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},r(s,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,a.hex2string)(t),(0,a.hex2rgb)(t,this._backgroundColorRgba)}}]),s}(t.default);n.default=t},{"../const":135,"../display/Container":137,"../math":159,"../settings":190,"../textures/RenderTexture":202,"../utils":214,eventemitter3:36}],166:[function(t,e,n){"use strict";n.__esModule=!0;var r=c(t("../SystemRenderer")),o=c(t("./utils/CanvasMaskManager")),a=c(t("./utils/CanvasRenderTarget")),s=c(t("./utils/mapCanvasBlendModesToPixi")),i=t("../../utils"),u=t("../../const"),l=c(t("../../settings"));function c(t){return t&&t.__esModule?t:{default:t}}t=function(r){var t=i,e=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function i(t,e,n){if(this instanceof i)return(t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,r.call(this,"Canvas",t,e,n))).type=u.RENDERER_TYPE.CANVAS,t.rootContext=t.view.getContext("2d",{alpha:t.transparent}),t.context=t.rootContext,t.refresh=!0,t.maskManager=new o.default(t),t.smoothProperty="imageSmoothingEnabled",t.rootContext.imageSmoothingEnabled||(t.rootContext.webkitImageSmoothingEnabled?t.smoothProperty="webkitImageSmoothingEnabled":t.rootContext.mozImageSmoothingEnabled?t.smoothProperty="mozImageSmoothingEnabled":t.rootContext.oImageSmoothingEnabled?t.smoothProperty="oImageSmoothingEnabled":t.rootContext.msImageSmoothingEnabled&&(t.smoothProperty="msImageSmoothingEnabled")),t.initPlugins(),t.blendModes=(0,s.default)(),t._activeBlendMode=null,t.renderingToScreen=!1,t.resize(t.options.width,t.options.height),t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),i.prototype.render=function(t,e,n,r,i){var o,s;this.view&&(this.renderingToScreen=!e,this.emit("prerender"),o=this.resolution,e?((e=e.baseTexture||e)._canvasRenderTarget||(e._canvasRenderTarget=new a.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext,s=this.context,e||(this._lastObjectRendered=t),i||(e=t.parent,i=this._tempDisplayObjectParent.transform.worldTransform,r?(r.copy(i),this._tempDisplayObjectParent.transform._worldID=-1):i.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e),s.save(),s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,this._activeBlendMode=u.BLEND_MODES.NORMAL,s.globalCompositeOperation=this.blendModes[u.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(s.fillStyle="black",s.clear()),(void 0!==n?n:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?s.clearRect(0,0,this.width,this.height):(s.fillStyle=this._backgroundColorString,s.fillRect(0,0,this.width,this.height))),r=this.context,this.context=s,t.renderCanvas(this),this.context=r,s.restore(),this.resolution=o,this.emit("postrender"))},i.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},i.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},i.prototype.destroy=function(t){this.destroyPlugins(),r.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},i.prototype.resize=function(t,e){r.prototype.resize.call(this,t,e),this.smoothProperty&&(this.rootContext[this.smoothProperty]=l.default.SCALE_MODE===u.SCALE_MODES.LINEAR)},i.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},i}(r.default);n.default=t,i.pluginTarget.mixin(t)},{"../../const":135,"../../settings":190,"../../utils":214,"../SystemRenderer":165,"./utils/CanvasMaskManager":167,"./utils/CanvasRenderTarget":168,"./utils/mapCanvasBlendModesToPixi":170}],167:[function(t,e,n){"use strict";n.__esModule=!0;var E=t("../../../const");function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.renderer=t}r.prototype.pushMask=function(t){var e=this.renderer,n=(e.context.save(),t.alpha),r=t.transform.worldTransform,i=e.resolution;e.context.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=n},r.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,n=t.graphicsData.length;if(0!==n){e.beginPath();for(var r=0;r<n;r++){var i,o,s,a,u,l,c,h,p=t.graphicsData[r],f=p.shape;if(p.type===E.SHAPES.POLY){var d=f.points,g=p.holes,y=void 0,m=void 0;e.moveTo(d[0],d[1]);for(var v=2;v<d.length;v+=2)e.lineTo(d[v],d[v+1]);if(d[0]===d[d.length-2]&&d[1]===d[d.length-1]&&e.closePath(),0<g.length){for(var y=0,_=0;_<d.length;_+=2)y+=d[_]*d[_+3]-d[_+1]*d[_+2];for(var b=0;b<g.length;b++){for(var d=g[b].points,m=0,x=0;x<d.length;x+=2)m+=d[x]*d[x+3]-d[x+1]*d[x+2];if(e.moveTo(d[0],d[1]),m*y<0)for(var w=2;w<d.length;w+=2)e.lineTo(d[w],d[w+1]);else for(var T=d.length-2;2<=T;T-=2)e.lineTo(d[T],d[T+1])}}}else p.type===E.SHAPES.RECT?(e.rect(f.x,f.y,f.width,f.height),e.closePath()):p.type===E.SHAPES.CIRC?(e.arc(f.x,f.y,f.radius,0,2*Math.PI),e.closePath()):p.type===E.SHAPES.ELIP?(l=(u=2*f.width)/2*.5522848,c=(o=2*f.height)/2*.5522848,a=(i=f.x-u/2)+u,h=(s=f.y-o/2)+o,u=i+u/2,e.moveTo(i,o=s+o/2),e.bezierCurveTo(i,o-c,u-l,s,u,s),e.bezierCurveTo(u+l,s,a,o-c,a,o),e.bezierCurveTo(a,o+c,u+l,h,u,h),e.bezierCurveTo(u-l,h,i,o+c,i,o),e.closePath()):p.type===E.SHAPES.RREC&&(s=f.x,a=f.y,u=f.width,l=f.height,h=f.radius,c=Math.min(u,l)/2|0,e.moveTo(s,a+(h=c<h?c:h)),e.lineTo(s,a+l-h),e.quadraticCurveTo(s,a+l,s+h,a+l),e.lineTo(s+u-h,a+l),e.quadraticCurveTo(s+u,a+l,s+u,a+l-h),e.lineTo(s+u,a+h),e.quadraticCurveTo(s+u,a,s+u-h,a),e.lineTo(s+h,a),e.quadraticCurveTo(s,a,s,a+h),e.closePath())}}},r.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},r.prototype.destroy=function(){},n.default=r},{"../../../const":135}],168:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var t=t("../../../settings"),o=(t=t)&&t.__esModule?t:{default:t};function s(t,e,n){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||o.default.RESOLUTION,this.resize(t,e)}s.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},s.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},s.prototype.destroy=function(){this.context=null,this.canvas=null},r(s,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),n.default=s},{"../../../settings":190}],169:[function(t,e,n){"use strict";function r(t){var e=document.createElement("canvas"),n=(e.width=6,e.height=1,e.getContext("2d"));return n.fillStyle=t,n.fillRect(0,0,6,1),e}n.__esModule=!0,n.default=function(){if("undefined"==typeof document)return!1;var t=r("#ff00ff"),e=r("#ffff00"),n=document.createElement("canvas"),n=(n.width=6,n.height=1,n.getContext("2d")),t=(n.globalCompositeOperation="multiply",n.drawImage(t,0,0),n.drawImage(e,2,0),n.getImageData(2,0,1,1));return!!t&&255===(e=t.data)[0]&&0===e[1]&&0===e[2]}},{}],170:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];(0,i.default)()?(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="multiply",t[r.BLEND_MODES.SCREEN]="screen",t[r.BLEND_MODES.OVERLAY]="overlay",t[r.BLEND_MODES.DARKEN]="darken",t[r.BLEND_MODES.LIGHTEN]="lighten",t[r.BLEND_MODES.COLOR_DODGE]="color-dodge",t[r.BLEND_MODES.COLOR_BURN]="color-burn",t[r.BLEND_MODES.HARD_LIGHT]="hard-light",t[r.BLEND_MODES.SOFT_LIGHT]="soft-light",t[r.BLEND_MODES.DIFFERENCE]="difference",t[r.BLEND_MODES.EXCLUSION]="exclusion",t[r.BLEND_MODES.HUE]="hue",t[r.BLEND_MODES.SATURATION]="saturate",t[r.BLEND_MODES.COLOR]="color",t[r.BLEND_MODES.LUMINOSITY]="luminosity"):(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="source-over",t[r.BLEND_MODES.SCREEN]="source-over",t[r.BLEND_MODES.OVERLAY]="source-over",t[r.BLEND_MODES.DARKEN]="source-over",t[r.BLEND_MODES.LIGHTEN]="source-over",t[r.BLEND_MODES.COLOR_DODGE]="source-over",t[r.BLEND_MODES.COLOR_BURN]="source-over",t[r.BLEND_MODES.HARD_LIGHT]="source-over",t[r.BLEND_MODES.SOFT_LIGHT]="source-over",t[r.BLEND_MODES.DIFFERENCE]="source-over",t[r.BLEND_MODES.EXCLUSION]="source-over",t[r.BLEND_MODES.HUE]="source-over",t[r.BLEND_MODES.SATURATION]="source-over",t[r.BLEND_MODES.COLOR]="source-over",t[r.BLEND_MODES.LUMINOSITY]="source-over");return t[r.BLEND_MODES.NORMAL_NPM]=t[r.BLEND_MODES.NORMAL],t[r.BLEND_MODES.ADD_NPM]=t[r.BLEND_MODES.ADD],t[r.BLEND_MODES.SCREEN_NPM]=t[r.BLEND_MODES.SCREEN],t};var r=t("../../../const"),n=t("./canUseNewCanvasBlendModes"),i=(t=n)&&t.__esModule?t:{default:t}},{"../../../const":135,"./canUseNewCanvasBlendModes":169}],171:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("../../const"),t=t("../../settings"),i=(t=t)&&t.__esModule?t:{default:t};function o(t){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=i.default.GC_MAX_IDLE,this.checkCountMax=i.default.GC_MAX_CHECK_COUNT,this.mode=i.default.GC_MODE}o.prototype.update=function(){this.count++,this.mode!==r.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax)&&(this.checkCount=0,this.run())},o.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,n=!1,r=0;r<e.length;r++){var i=e[r];!i._glRenderTargets&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),n=!(e[r]=null))}if(n){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},o.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var n=t.children.length-1;0<=n;n--)this.unload(t.children[n])},n.default=o},{"../../const":135,"../../settings":190}],172:[function(t,e,n){"use strict";n.__esModule=!0;var s=t("pixi-gl-core"),a=t("../../const"),r=t("./utils/RenderTarget"),u=(r=r)&&r.__esModule?r:{default:r},l=t("../../utils");function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.renderer=t,this.gl=t.gl,this._managedTextures=[]}i.prototype.bindTexture=function(){},i.prototype.getTexture=function(){},i.prototype.updateTexture=function(t,e){var n=this.gl,r=!!t._glRenderTargets;if(!t.hasLoaded)return null;var i=this.renderer.boundTextures;if(void 0===e)for(var o=e=0;o<i.length;++o)if(i[o]===t){e=o;break}i[e]=t,n.activeTexture(n.TEXTURE0+e);n=t._glTextures[this.renderer.CONTEXT_UID];return n?r?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):n.upload(t.source):(r?((r=new u.default(this.gl,t.width,t.height,t.scaleMode,t.resolution)).resize(t.width,t.height),n=(t._glRenderTargets[this.renderer.CONTEXT_UID]=r).texture,this.renderer._activeRenderTarget.root||this.renderer._activeRenderTarget.frameBuffer.bind()):((n=new s.GLTexture(this.gl,null,null,null,null)).bind(e),n.premultiplyAlpha=!0,n.upload(t.source)),t._glTextures[this.renderer.CONTEXT_UID]=n,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),!t.isPowerOfTwo||(t.mipmap&&n.enableMipmap(),t.wrapMode===a.WRAP_MODES.CLAMP)?n.enableWrapClamp():t.wrapMode===a.WRAP_MODES.REPEAT?n.enableWrapRepeat():n.enableWrapMirrorRepeat(),t.scaleMode===a.SCALE_MODES.NEAREST?n.enableNearestScaling():n.enableLinearScaling()),n},i.prototype.destroyTexture=function(t,e){var n,r,i,o;(t=t.baseTexture||t).hasLoaded&&(r=(n=this.renderer).CONTEXT_UID,o=t._glTextures,i=t._glRenderTargets,o[r]&&(n.unbindTexture(t),o[r].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete o[r],e||-1!==(o=this._managedTextures.indexOf(t))&&(0,l.removeItems)(this._managedTextures,o,1)),i)&&i[r]&&(n._activeRenderTarget===i[r]&&n.bindRenderTarget(n.rootRenderTarget),i[r].destroy(),delete i[r])},i.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},i.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},n.default=i},{"../../const":135,"../../utils":214,"./utils/RenderTarget":185,"pixi-gl-core":118}],173:[function(t,e,n){"use strict";n.__esModule=!0;var o=i(t("../SystemRenderer")),s=i(t("./managers/MaskManager")),a=i(t("./managers/StencilManager")),u=i(t("./managers/FilterManager")),l=i(t("./utils/RenderTarget")),c=i(t("./utils/ObjectRenderer")),h=i(t("./TextureManager")),p=i(t("../../textures/BaseTexture")),f=i(t("./TextureGarbageCollector")),d=i(t("./WebGLState")),g=i(t("./utils/mapWebGLDrawModesToPixi")),y=i(t("./utils/validateContext")),r=t("../../utils"),m=i(t("pixi-gl-core")),v=t("../../const");function i(t){return t&&t.__esModule?t:{default:t}}var _=0,t=function(r){var t=i,e=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function i(t,e,n){if(this instanceof i)return(t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,r.call(this,"WebGL",t,e,n))).legacy=t.options.legacy,t.legacy&&(m.default.VertexArrayObject.FORCE_NATIVE=!0),t.type=v.RENDERER_TYPE.WEBGL,t.handleContextLost=t.handleContextLost.bind(t),t.handleContextRestored=t.handleContextRestored.bind(t),t.view.addEventListener("webglcontextlost",t.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",t.handleContextRestored,!1),t._contextOptions={alpha:t.transparent,antialias:t.options.antialias,premultipliedAlpha:t.transparent&&"notMultiplied"!==t.transparent,stencil:!0,preserveDrawingBuffer:t.options.preserveDrawingBuffer,powerPreference:t.options.powerPreference},t._backgroundColorRgba[3]=t.transparent?0:1,t.maskManager=new s.default(t),t.stencilManager=new a.default(t),t.emptyRenderer=new c.default(t),t.currentRenderer=t.emptyRenderer,t.textureManager=null,t.filterManager=null,t.initPlugins(),t.options.context&&(0,y.default)(t.options.context),t.gl=t.options.context||m.default.createContext(t.view,t._contextOptions),t.CONTEXT_UID=_++,t.state=new d.default(t.gl),t.renderingToScreen=!0,t.boundTextures=null,t._activeShader=null,t._activeVao=null,t._activeRenderTarget=null,t._initContext(),t.drawModes=(0,g.default)(t.gl),t._nextTextureLocation=0,t.setBlendMode(0),t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),i.prototype._initContext=function(){var t=this.gl,e=(t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext(),t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),n=(this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this._unknownBoundTextures=!1,this.textureManager=new h.default(this),this.filterManager=new u.default(this),this.textureGC=new f.default(this),this.state.resetToDefault(),this.rootRenderTarget=new l.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget),new m.default.GLTexture.fromData(t,null,1,1)),r={_glTextures:{}};r._glTextures[this.CONTEXT_UID]={};for(var i=0;i<e;i++){var o=new p.default;o._glTextures[this.CONTEXT_UID]=n,this.boundTextures[i]=r,this.emptyTextures[i]=o,this.bindTexture(null,i)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},i.prototype.render=function(t,e,n,r,i){this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()&&(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),i||(i=t.parent,t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=i),this.bindRenderTexture(e,r),this.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender"))},i.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},i.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},i.prototype.resize=function(t,e){o.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader)&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0))},i.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},i.prototype.clear=function(t){this._activeRenderTarget.clear(t)},i.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},i.prototype.clearRenderTexture=function(t,e){t=t.baseTexture._glRenderTargets[this.CONTEXT_UID];return t&&t.clear(e),this},i.prototype.bindRenderTexture=function(t,e){var n,r=void 0;return t?((n=t.baseTexture)._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),(r=n._glRenderTargets[this.CONTEXT_UID]).setFrame(t.frame)):r=this.rootRenderTarget,r.transform=e,this.bindRenderTarget(r),this},i.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&((this._activeRenderTarget=t).activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},i.prototype.bindShader=function(t,e){return this._activeShader!==t&&((this._activeShader=t).bind(),!1!==e)&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0)),this},i.prototype.bindTexture=function(t,e,n){if((t=(t=t||this.emptyTextures[e]).baseTexture||t).touched=this.textureGC.count,n)e=e||0;else{for(var r=0;r<this.boundTextures.length;r++)if(this.boundTextures[r]===t)return r;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var n=this.gl,i=t._glTextures[this.CONTEXT_UID];return i?(this.boundTextures[e]=t,n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,i.texture)):this.textureManager.updateTexture(t,e),e},i.prototype.unbindTexture=function(t){var e=this.gl;if(t=t.baseTexture||t,this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]===this.emptyTextures[n]&&(e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[n]._glTextures[this.CONTEXT_UID].texture))}for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===t&&(this.boundTextures[r]=this.emptyTextures[r],e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},i.prototype.createVao=function(){return new m.default.VertexArrayObject(this.gl,this.state.attribState)},i.prototype.bindVao=function(t){return this._activeVao!==t&&(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t),this},i.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._unknownBoundTextures=!0;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},i.prototype.handleContextLost=function(t){t.preventDefault()},i.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},i.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),r.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},i}(o.default);n.default=t,r.pluginTarget.mixin(t)},{"../../const":135,"../../textures/BaseTexture":201,"../../utils":214,"../SystemRenderer":165,"./TextureGarbageCollector":171,"./TextureManager":172,"./WebGLState":174,"./managers/FilterManager":179,"./managers/MaskManager":180,"./managers/StencilManager":181,"./utils/ObjectRenderer":183,"./utils/RenderTarget":185,"./utils/mapWebGLDrawModesToPixi":188,"./utils/validateContext":189,"pixi-gl-core":118}],174:[function(t,e,n){"use strict";n.__esModule=!0;var t=t("./utils/mapWebGLBlendModesToPixi"),r=(t=t)&&t.__esModule?t:{default:t};function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,r.default)(t),this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")}i.prototype.push=function(){var t=(t=this.stack[this.stackIndex])||(this.stack[this.stackIndex]=new Uint8Array(16));++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},i.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},i.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},i.prototype.setBlend=function(t){this.activeState[0]!==(t=t?1:0)&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},i.prototype.setBlendMode=function(t){t!==this.activeState[4]&&(this.activeState[4]=t,2===(t=this.blendModes[t]).length?this.gl.blendFunc(t[0],t[1]):this.gl.blendFuncSeparate(t[0],t[1],t[2],t[3]))},i.prototype.setDepthTest=function(t){this.activeState[1]!==(t=t?1:0)&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},i.prototype.setCullFace=function(t){this.activeState[3]!==(t=t?1:0)&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},i.prototype.setFrontFace=function(t){this.activeState[2]!==(t=t?1:0)&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},i.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var n=1;n<this.maxAttribs;n++)this.gl.disableVertexAttribArray(n)},i.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},n.default=i},{"./utils/mapWebGLBlendModesToPixi":187}],175:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=l(t("./extractUniformsFromSrc")),s=t("../../../utils"),a=t("../../../const"),u=l(t("../../../settings"));function l(t){return t&&t.__esModule?t:{default:t}}var c={};function h(t,e,n){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");for(var r in this.vertexSrc=t||h.defaultVertexSrc,this.fragmentSrc=e||h.defaultFragmentSrc,this._blendMode=a.BLEND_MODES.NORMAL,this.uniformData=n||(0,o.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[r]=this.uniformData[r].value,this.uniformData[r].type&&(this.uniformData[r].type=this.uniformData[r].type.toLowerCase());this.glShaders={},c[this.vertexSrc+this.fragmentSrc]||(c[this.vertexSrc+this.fragmentSrc]=(0,s.uid)()),this.glShaderKey=c[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=u.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}h.prototype.apply=function(t,e,n,r,i){t.applyFilter(this,e,n,r)},r(h,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),n.default=h},{"../../../const":135,"../../../settings":190,"../../../utils":214,"./extractUniformsFromSrc":176}],176:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e,n){t=r(t),e=r(e);return Object.assign(t,e)};n=t("pixi-gl-core");var l=((t=n)&&t.__esModule?t:{default:t}).default.shader.defaultValue;function r(t){for(var e,n=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),r={},i=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<i.length;o++){var s,a,u=i[o].trim();-1<u.indexOf("uniform")&&(s=(u=u.split(" "))[1],-(a=1)<(u=u[2]).indexOf("[")&&(u=(e=u.split(/\[|]/))[0],a*=Number(e[1])),u.match(n)||(r[u]={value:l(s,a),name:u,type:s}))}return r}},{"pixi-gl-core":118}],177:[function(t,e,n){"use strict";n.__esModule=!0,n.calculateScreenSpaceMatrix=function(t,e,n){t=t.identity();return t.translate(e.x/n.width,e.y/n.height),t.scale(n.width,n.height),t},n.calculateNormalizedScreenSpaceMatrix=function(t,e,n){var t=t.identity(),r=(t.translate(e.x/n.width,e.y/n.height),n.width/e.width),n=n.height/e.height;return t.scale(r,n),t},n.calculateSpriteMatrix=function(t,e,n,r){var i=r._texture.orig,t=t.set(n.width,0,0,n.height,e.x,e.y),n=r.worldTransform.copy(o.Matrix.TEMP_MATRIX);return n.invert(),t.prepend(n),t.scale(1/i.width,1/i.height),t.translate(r.anchor.x,r.anchor.y),t};var o=t("../../../math")},{"../../../math":159}],178:[function(t,e,n){"use strict";n.__esModule=!0;var r=i(t("../Filter")),o=t("../../../../math"),s=(t("path"),i(t("../../../../textures/TextureMatrix")));function i(t){return t&&t.__esModule?t:{default:t}}t=function(r){var t=i,e=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function i(t){var e,n;if(this instanceof i)return e=new o.Matrix,n=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,r.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n")),t.renderable=!1,n.maskSprite=t,n.maskMatrix=e,n;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),i.prototype.apply=function(t,e,n,r){var i=this.maskSprite,o=this.maskSprite.texture;o.valid&&(o.transform||(o.transform=new s.default(o,0)),o.transform.update(),this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.transform.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.transform.uClampFrame,t.applyFilter(this,e,n,r))},i}(r.default);n.default=t},{"../../../../math":159,"../../../../textures/TextureMatrix":205,"../Filter":175,path:321}],179:[function(t,e,n){"use strict";n.__esModule=!0;var r=c(t("./WebGLManager")),a=c(t("../utils/RenderTarget")),i=c(t("../utils/Quad")),o=t("../../../math"),u=c(t("../../../Shader")),s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../filters/filterTransforms")),l=c(t("bit-twiddle"));function c(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}f.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null};var p=f;function f(){h(this,f),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new o.Rectangle,this.destinationFrame=new o.Rectangle,this.filters=[]}var d="screen",t=function(n){var t=r,e=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function r(t){h(this,r);var e=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,n.call(this,t));return e.gl=e.renderer.gl,e.quad=new i.default(e.gl,t.state.attribState),e.shaderCache={},e.pool={},e.filterData=null,e.managedFilters=[],e.renderer.on("prerender",e.onPrerender,e),e._screenWidth=t.view.width,e._screenHeight=t.view.height,e}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r.prototype.pushFilter=function(t,e){var n=this.renderer,r=this.filterData,i=(r||(r=this.renderer._activeRenderTarget.filterStack,(i=new p).sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=n._activeRenderTarget,this.renderer._activeRenderTarget.filterData=r={index:0,stack:[i]},this.filterData=r),r.stack[++r.index]),o=r.stack[0].destinationFrame,i=i||(r.stack[r.index]=new p),s=t.filterArea&&0===t.filterArea.x&&0===t.filterArea.y&&t.filterArea.width===n.screen.width&&t.filterArea.height===n.screen.height,a=e[0].resolution,u=0|e[0].padding,l=s?n.screen:t.filterArea||t.getBounds(!0),c=i.sourceFrame,h=i.destinationFrame,l=(c.x=(l.x*a|0)/a,c.y=(l.y*a|0)/a,c.width=(l.width*a|0)/a,c.height=(l.height*a|0)/a,s||(r.stack[0].renderTarget.transform||e[0].autoFit&&c.fit(o),c.pad(u)),h.width=c.width,h.height=c.height,this.getPotRenderTarget(n.gl,c.width,c.height,a));i.target=t,i.filters=e,i.resolution=a,(i.renderTarget=l).setFrame(h,c),n.bindRenderTarget(l),l.clear()},r.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],n=t.stack[t.index],r=(this.quad.map(n.renderTarget.size,n.sourceFrame).upload(),n.filters);if(1===r.length)r[0].apply(this,n.renderTarget,e.renderTarget,!1,n),this.freePotRenderTarget(n.renderTarget);else{for(var i=n.renderTarget,o=((a=this.getPotRenderTarget(this.renderer.gl,n.sourceFrame.width,n.sourceFrame.height,n.resolution)).setFrame(n.destinationFrame,n.sourceFrame),a.clear(),0),o=0;o<r.length-1;++o){r[o].apply(this,i,a,!0,n);var s=i,i=a,a=s}r[o].apply(this,i,e.renderTarget,!1,n),this.freePotRenderTarget(i),this.freePotRenderTarget(a)}n.clear(),t.index--,0===t.index&&(this.filterData=null)},r.prototype.applyFilter=function(t,e,n,r){var i=this.renderer,o=i.gl,s=t.glShaders[i.CONTEXT_UID],r=(s||(t.glShaderKey?(s=this.shaderCache[t.glShaderKey])||(s=new u.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[i.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=s,this.managedFilters.push(t)):(s=t.glShaders[i.CONTEXT_UID]=new u.default(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),i.bindVao(null),this.quad.initVao(s)),i.bindVao(this.quad.vao),i.bindRenderTarget(n),r&&(o.disable(o.SCISSOR_TEST),i.clear(),o.enable(o.SCISSOR_TEST)),n===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(s),this.renderer.emptyTextures[0]);this.renderer.boundTextures[0]=r,this.syncUniforms(s,t),i.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,r._glTextures[this.renderer.CONTEXT_UID].texture)},r.prototype.syncUniforms=function(t,e){var n,r,i,o,s=e.uniformData,a=e.uniforms,u=1,e=void 0;for(r in t.uniforms.filterArea&&(e=this.filterData.stack[this.filterData.index],(n=t.uniforms.filterArea)[0]=e.renderTarget.size.width,n[1]=e.renderTarget.size.height,n[2]=e.sourceFrame.x,n[3]=e.sourceFrame.y,t.uniforms.filterArea=n),t.uniforms.filterClamp&&(e=e||this.filterData.stack[this.filterData.index],(n=t.uniforms.filterClamp)[0]=0,n[1]=0,n[2]=(e.sourceFrame.width-1)/e.renderTarget.size.width,n[3]=(e.sourceFrame.height-1)/e.renderTarget.size.height,t.uniforms.filterClamp=n),s)t.uniforms.data[r]&&("sampler2d"===(i=s[r].type)&&0!==a[r]?(a[r].baseTexture?t.uniforms[r]=this.renderer.bindTexture(a[r].baseTexture,u):(t.uniforms[r]=u,o=this.renderer.gl,this.renderer.boundTextures[u]=this.renderer.emptyTextures[u],o.activeTexture(o.TEXTURE0+u),a[r].texture.bind()),u++):"mat3"===i?void 0!==a[r].a?t.uniforms[r]=a[r].toArray(!0):t.uniforms[r]=a[r]:"vec2"===i?void 0!==a[r].x?((o=t.uniforms[r]||new Float32Array(2))[0]=a[r].x,o[1]=a[r].y,t.uniforms[r]=o):t.uniforms[r]=a[r]:"float"===i&&t.uniforms.data[r].value===s[r]||(t.uniforms[r]=a[r]))},r.prototype.getRenderTarget=function(t,e){var n=this.filterData.stack[this.filterData.index],e=this.getPotRenderTarget(this.renderer.gl,n.sourceFrame.width,n.sourceFrame.height,e||n.resolution);return e.setFrame(n.destinationFrame,n.sourceFrame),e},r.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},r.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return s.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},r.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return s.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},r.prototype.calculateSpriteMatrix=function(t,e){var n=this.filterData.stack[this.filterData.index];return s.calculateSpriteMatrix(t,n.sourceFrame,n.renderTarget.size,e)},r.prototype.destroy=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=this.renderer,n=this.managedFilters;e.off("prerender",this.onPrerender,this);for(var r=0;r<n.length;r++)t||n[r].glShaders[e.CONTEXT_UID].destroy(),delete n[r].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},r.prototype.getPotRenderTarget=function(t,e,n,r){var i,o=d,s=(n*=r,(e*=r)===this._screenWidth&&n===this._screenHeight||(o=(65535&(e=l.default.nextPow2(e)))<<16|65535&(n=l.default.nextPow2(n))),this.pool[o]||(this.pool[o]=[]),this.pool[o].pop());return s||(i=this.renderer.boundTextures[0],t.activeTexture(t.TEXTURE0),s=new a.default(t,e,n,null,1),t.bindTexture(t.TEXTURE_2D,i._glTextures[this.renderer.CONTEXT_UID].texture)),s.resolution=r,s.defaultFrame.width=s.size.width=e/r,s.defaultFrame.height=s.size.height=n/r,s.filterPoolKey=o,s},r.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var n=0;n<e.length;n++)e[n].destroy(!0)}this.pool={}},r.prototype.freePotRenderTarget=function(t){this.pool[t.filterPoolKey].push(t)},r.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var t=this.pool[d];if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool[d]=[]}},r}(r.default);n.default=t},{"../../../Shader":133,"../../../math":159,"../filters/filterTransforms":177,"../utils/Quad":184,"../utils/RenderTarget":185,"./WebGLManager":182,"bit-twiddle":15}],180:[function(t,e,n){"use strict";n.__esModule=!0;var r=o(t("./WebGLManager")),i=o(t("../filters/spriteMask/SpriteMaskFilter"));function o(t){return t&&t.__esModule?t:{default:t}}t=function(e){var t=r,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);function r(t){if(this instanceof r)return(t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,e.call(this,t))).scissor=!1,t.scissorData=null,t.scissorRenderTarget=null,t.enableScissor=!0,t.alphaMaskPool=[],t.alphaMaskIndex=0,t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n),r.prototype.pushMask=function(t,e){var n;e.texture?this.pushSpriteMask(t,e):!this.enableScissor||this.scissor||!this.renderer._activeRenderTarget.root||this.renderer.stencilManager.stencilMaskStack.length||!e.isFastRect()||(n=e.worldTransform,n=Math.atan2(n.b,n.a),(n=Math.round(n*(180/Math.PI)))%90)?this.pushStencilMask(e):this.pushScissorMask(t,e)},r.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},r.prototype.pushSpriteMask=function(t,e){var n=this.alphaMaskPool[this.alphaMaskIndex],r=((n=n||(this.alphaMaskPool[this.alphaMaskIndex]=[new i.default(e)]))[0].resolution=this.renderer.resolution,n[0].maskSprite=e,t.filterArea);t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,n),t.filterArea=r,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},r.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},r.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},r.prototype.pushScissorMask=function(t,e){e.renderable=!0;var n=this.renderer._activeRenderTarget,r=e.getBounds(),i=(r.fit(n.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.resolution);this.renderer.gl.scissor(r.x*i,(n.root?n.size.height-r.y-r.height:r.y)*i,r.width*i,r.height*i),this.scissorRenderTarget=n,this.scissorData=e,this.scissor=!0},r.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},r}(r.default);n.default=t},{"../filters/spriteMask/SpriteMaskFilter":178,"./WebGLManager":182}],181:[function(t,e,n){"use strict";n.__esModule=!0;var t=t("./WebGLManager"),i=(t=t)&&t.__esModule?t:{default:t};t=function(e){var t=r,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);function r(t){if(this instanceof r)return(t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,e.call(this,t))).stencilMaskStack=null,t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n),r.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},r.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,n=this.stencilMaskStack.length;0===n&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,n,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},r.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},r.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},r.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},r.prototype.destroy=function(){i.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},r}(i.default);n.default=t},{"./WebGLManager":182}],182:[function(t,e,n){"use strict";function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.renderer=t,this.renderer.on("context",this.onContextChange,this)}n.__esModule=!0,r.prototype.onContextChange=function(){},r.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},n.default=r},{}],183:[function(t,e,n){"use strict";n.__esModule=!0;var t=t("../managers/WebGLManager");t=function(n){var t=r,e=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function r(){var t=this,e=r;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");t=this,e=n.apply(this,arguments);if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.flush=function(){},r.prototype.render=function(t){},r}(((t=t)&&t.__esModule?t:{default:t}).default);n.default=t},{"../managers/WebGLManager":182}],184:[function(t,e,n){"use strict";n.__esModule=!0;var r=o(t("pixi-gl-core")),i=o(t("../../../utils/createIndicesForQuads"));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var n=0;n<4;n++)this.interleaved[4*n]=this.vertices[2*n],this.interleaved[4*n+1]=this.vertices[2*n+1],this.interleaved[4*n+2]=this.uvs[2*n],this.interleaved[4*n+3]=this.uvs[2*n+1];this.indices=(0,i.default)(1),this.vertexBuffer=r.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new r.default.VertexArrayObject(t,e)}s.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},s.prototype.map=function(t,e){var n;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,t=e.x,n=e.y,this.vertices[0]=t,this.vertices[1]=n,this.vertices[2]=t+e.width,this.vertices[3]=n,this.vertices[4]=t+e.width,this.vertices[5]=n+e.height,this.vertices[6]=t,this.vertices[7]=n+e.height,this},s.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},s.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},n.default=s},{"../../../utils/createIndicesForQuads":212,"pixi-gl-core":118}],185:[function(t,e,n){"use strict";n.__esModule=!0;var s=t("../../../math"),a=t("../../../const"),r=t("../../../settings"),u=(r=r)&&r.__esModule?r:{default:r},l=t("pixi-gl-core");function c(t,e,n,r,i,o){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new s.Rectangle(0,0,1,1),this.resolution=i||u.default.RESOLUTION,this.projectionMatrix=new s.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new s.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==r?r:u.default.SCALE_MODE,this.root=o||!1,this.root?(this.frameBuffer=new l.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=l.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===a.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(e,n)}c.prototype.clear=function(t){t=t||this.clearColor;this.frameBuffer.clear(t[0],t[1],t[2],t[3])},c.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},c.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},c.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},c.prototype.calculateProjection=function(t,e){var n=this.projectionMatrix;e=e||t,n.identity(),this.root?(n.a=1/t.width*2,n.d=-1/t.height*2,n.tx=-1-e.x*n.a,n.ty=1-e.y*n.d):(n.a=1/t.width*2,n.d=1/t.height*2,n.tx=-1-e.x*n.a,n.ty=-1-e.y*n.d)},c.prototype.resize=function(t,e){e|=0,this.size.width===(t|=0)&&this.size.height===e||(this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution),t=this.frame||this.size,this.calculateProjection(t))},c.prototype.destroy=function(){this.frameBuffer.stencil&&this.gl.deleteRenderbuffer(this.frameBuffer.stencil),this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},n.default=c},{"../../../const":135,"../../../math":159,"../../../settings":190,"pixi-gl-core":118}],186:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e){var n=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");{var r;n&&((r=document.createElement("canvas")).width=1,r.height=1,e=s.default.createContext(r))}var i=e.createShader(e.FRAGMENT_SHADER);for(;;){var o=a.replace(/%forloop%/gi,function(t){for(var e="",n=0;n<t;++n)0<n&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}(t));if(e.shaderSource(i,o),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}n&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext();return t};var n=t("pixi-gl-core"),s=(t=n)&&t.__esModule?t:{default:t};var a=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":118}],187:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return e[r.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD]=[t.ONE,t.ONE],e[r.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[r.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e};var r=t("../../../const")},{"../../../const":135}],188:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e[r.DRAW_MODES.POINTS]=t.POINTS,e[r.DRAW_MODES.LINES]=t.LINES,e[r.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[r.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[r.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[r.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[r.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e};var r=t("../../../const")},{"../../../const":135}],189:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],190:[function(t,e,n){"use strict";n.__esModule=!0;var r=i(t("./utils/maxRecommendedTextures")),t=i(t("./utils/canUploadSameBuffer"));function i(t){return t&&t.__esModule?t:{default:t}}n.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,r.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,t.default)(),MESH_CANVAS_PADDING:0}},{"./utils/canUploadSameBuffer":211,"./utils/maxRecommendedTextures":216}],191:[function(t,e,n){"use strict";n.__esModule=!0;var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=t("../math"),s=t("../utils"),a=t("../const"),u=l(t("../textures/Texture")),t=l(t("../display/Container"));function l(t){return t&&t.__esModule?t:{default:t}}var c=new o.Point,t=function(n){var t=r,e=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function r(t){var e;if(this instanceof r)return(e=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,n.call(this)))._anchor=new o.ObservablePoint(e._onAnchorUpdate,e,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),e._texture=null,e._width=0,e._height=0,e._tint=null,e._tintRGB=null,e.tint=16777215,e.blendMode=a.BLEND_MODES.NORMAL,e.shader=null,e.cachedTint=16777215,e.texture=t||u.default.EMPTY,e.vertexData=new Float32Array(8),e.vertexTrimmedData=null,e._transformID=-1,e._textureID=-1,e._transformTrimmedID=-1,e._textureTrimmedID=-1,e.pluginName="sprite",e;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,s.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,s.sign)(this.scale.y)*this._height/this._texture.orig.height)},r.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},r.prototype.calculateVertices=function(){var t,e,n,r,i,o,s,a,u,l,c,h,p,f;this._transformID===this.transform._worldID&&this._textureID===this._texture._updateID||(this._transformID=this.transform._worldID,this._textureID=this._texture._updateID,u=this._texture,t=(o=this.transform.worldTransform).a,e=o.b,n=o.c,r=o.d,i=o.tx,o=o.ty,s=this.vertexData,a=u.trim,u=u.orig,l=this._anchor,p=f=h=c=0,f=a?(c=(h=a.x-l._x*u.width)+a.width,(p=a.y-l._y*u.height)+a.height):(c=(h=-l._x*u.width)+u.width,(p=-l._y*u.height)+u.height),s[0]=t*h+n*p+i,s[1]=r*p+e*h+o,s[2]=t*c+n*p+i,s[3]=r*p+e*c+o,s[4]=t*c+n*f+i,s[5]=r*f+e*c+o,s[6]=t*h+n*f+i,s[7]=r*f+e*h+o)},r.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,t=t.orig,n=this._anchor,r=this.transform.worldTransform,i=r.a,o=r.b,s=r.c,a=r.d,u=r.tx,r=r.ty,l=-n._x*t.width,c=l+t.width,n=-n._y*t.height,t=n+t.height;e[0]=i*l+s*n+u,e[1]=a*n+o*l+r,e[2]=i*c+s*n+u,e[3]=a*n+o*c+r,e[4]=i*c+s*t+u,e[5]=a*t+o*c+r,e[6]=i*l+s*t+u,e[7]=a*t+o*l+r},r.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},r.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},r.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},r.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);var t=this._texture.orig.width,e=this._texture.orig.height,n=-t*this.anchor.x;return c.x>=n&&c.x<n+t&&(n=-e*this.anchor.y,c.y>=n)&&c.y<n+e},r.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof t?t:t&&t.texture)&&(t="boolean"==typeof t?t:t&&t.baseTexture,this._texture.destroy(!!t)),this._texture=null,this.shader=null},r.from=function(t){return new r(u.default.from(t))},r.fromFrame=function(t){var e=s.TextureCache[t];if(e)return new r(e);throw new Error('The frameId "'+t+'" does not exist in the texture cache')},r.fromImage=function(t,e,n){return new r(u.default.fromImage(t,e,n))},i(r,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,s.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,s.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t||u.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t)&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this))}}]),r}(t.default);n.default=t},{"../const":135,"../display/Container":137,"../math":159,"../textures/Texture":204,"../utils":214}],192:[function(t,e,n){"use strict";n.__esModule=!0;var r=i(t("../../renderers/canvas/CanvasRenderer")),l=t("../../const"),c=t("../../math"),h=i(t("./CanvasTinter"));function i(t){return t&&t.__esModule?t:{default:t}}var p=new c.Matrix,t=(o.prototype.render=function(t){var e,n=t._texture,r=this.renderer,i=n._frame.width,o=n._frame.height,s=t.transform.worldTransform,a=0,u=0;n.orig.width<=0||n.orig.height<=0||!n.baseTexture.source||(r.setBlendMode(t.blendMode),n.valid&&(r.context.globalAlpha=t.worldAlpha,e=n.baseTexture.scaleMode===l.SCALE_MODES.LINEAR,r.smoothProperty&&r.context[r.smoothProperty]!==e&&(r.context[r.smoothProperty]=e),u=n.trim?(a=n.trim.width/2+n.trim.x-t.anchor.x*n.orig.width,n.trim.height/2+n.trim.y-t.anchor.y*n.orig.height):(a=(.5-t.anchor.x)*n.orig.width,(.5-t.anchor.y)*n.orig.height),n.rotate&&(s.copy(p),c.GroupD8.matrixAppendRotationInv(s=p,n.rotate,a,u),u=a=0),a-=i/2,u-=o/2,r.roundPixels?(r.context.setTransform(s.a,s.b,s.c,s.d,s.tx*r.resolution|0,s.ty*r.resolution|0),a|=0,u|=0):r.context.setTransform(s.a,s.b,s.c,s.d,s.tx*r.resolution,s.ty*r.resolution),e=n.baseTexture.resolution,16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=h.default.getTintedTexture(t,t.tint)),r.context.drawImage(t.tintedTexture,0,0,i*e,o*e,a*r.resolution,u*r.resolution,i*r.resolution,o*r.resolution)):r.context.drawImage(n.baseTexture.source,n._frame.x*e,n._frame.y*e,i*e,o*e,a*r.resolution,u*r.resolution,i*r.resolution,o*r.resolution)))},o.prototype.destroy=function(){this.renderer=null},o);function o(t){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this.renderer=t}n.default=t,r.default.registerPlugin("sprite",t)},{"../../const":135,"../../math":159,"../../renderers/canvas/CanvasRenderer":166,"./CanvasTinter":193}],193:[function(t,e,n){"use strict";n.__esModule=!0;var h=t("../../utils"),t=t("../../renderers/canvas/utils/canUseNewCanvasBlendModes");var o={getTintedTexture:function(t,e){var t=t._texture,n="#"+("00000"+(0|(e=o.roundColor(e))).toString(16)).substr(-6),r=(t.tintCache=t.tintCache||{},t.tintCache[n]),i=void 0;if(r){if(r.tintId===t._updateID)return t.tintCache[n];i=t.tintCache[n]}else i=o.canvas||document.createElement("canvas");return o.tintMethod(t,e,i),i.tintId=t._updateID,o.convertTintToImage?((r=new Image).src=i.toDataURL(),t.tintCache[n]=r):(t.tintCache[n]=i,o.canvas=null),i},tintWithMultiply:function(t,e,n){var r=n.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithOverlay:function(t,e,n){var r=n.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithPerPixel:function(t,e,n){for(var r=n.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution,o=(i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore(),(0,h.hex2rgb)(e)),s=o[0],a=o[1],u=o[2],n=r.getImageData(0,0,i.width,i.height),l=n.data,c=0;c<l.length;c+=4)l[c+0]*=s,l[c+1]*=a,l[c+2]*=u;r.putImageData(n,0,0)},roundColor:function(t){var e=o.cacheStepsPerColorChannel,t=(0,h.hex2rgb)(t);return t[0]=Math.min(255,t[0]/e*e),t[1]=Math.min(255,t[1]/e*e),t[2]=Math.min(255,t[2]/e*e),(0,h.rgb2hex)(t)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,((t=t)&&t.__esModule?t:{default:t}).default)(),tintMethod:0};o.tintMethod=o.canUseMultiply?o.tintWithMultiply:o.tintWithPerPixel,n.default=o},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":169,"../../utils":214}],194:[function(t,e,n){"use strict";function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}n.__esModule=!0,r.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},n.default=r},{}],195:[function(t,e,n){"use strict";n.__esModule=!0;var r=o(t("../../renderers/webgl/utils/ObjectRenderer")),i=o(t("../../renderers/webgl/WebGLRenderer")),s=o(t("../../utils/createIndicesForQuads")),a=o(t("./generateMultiTextureShader")),u=o(t("../../renderers/webgl/utils/checkMaxIfStatmentsInShader")),l=o(t("./BatchBuffer")),I=o(t("../../settings")),B=t("../../utils"),D=o(t("pixi-gl-core")),k=o(t("bit-twiddle"));function o(t){return t&&t.__esModule?t:{default:t}}var L=0,F=0,t=function(i){var t=o,e=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function o(t){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");var e=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,i.call(this,t));e.vertSize=5,e.vertByteSize=4*e.vertSize,e.size=I.default.SPRITE_BATCH_SIZE,e.buffers=[];for(var n=1;n<=k.default.nextPow2(e.size);n*=2)e.buffers.push(new l.default(4*n*e.vertByteSize));e.indices=(0,s.default)(e.size),e.shader=null,e.currentIndex=0,e.groups=[];for(var r=0;r<e.size;r++)e.groups[r]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return e.sprites=[],e.vertexBuffers=[],e.vaos=[],e.vaoMax=2,e.vertexCount=0,e.renderer.on("prerender",e.onPrerender,e),e}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o.prototype.onContextChange=function(){for(var t=this.renderer.gl,e=(this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),I.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,u.default)(this.MAX_TEXTURES,t)),this.shader=(0,a.default)(t,this.MAX_TEXTURES),this.indexBuffer=D.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null),this.shader.attributes),n=0;n<this.vaoMax;n++){var r=this.vertexBuffers[n]=D.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(r,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(r,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(r,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&i.addAttribute(r,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[n]=i}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},o.prototype.onPrerender=function(){this.vertexCount=0},o.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},o.prototype.flush=function(){if(0!==this.currentIndex){for(var t,e,n,r,i=this.renderer.gl,o=this.MAX_TEXTURES,s=k.default.nextPow2(this.currentIndex),s=k.default.log2(s),s=this.buffers[s],a=this.sprites,u=this.groups,l=s.float32View,c=s.uint32View,h=this.boundTextures,p=this.renderer.boundTextures,f=this.renderer.textureGC.count,d=0,g=void 0,y=void 0,m=1,v=0,_=u[0],b=B.premultiplyBlendMode[a[0]._texture.baseTexture.premultipliedAlpha?1:0][a[0].blendMode],x=(_.textureCount=0,_.start=0,_.blend=b,L++,void 0),x=0;x<o;++x){var w=p[x];w._enabled===L?h[x]=this.renderer.emptyTextures[x]:((h[x]=w)._virtalBoundId=x,w._enabled=L)}for(L++,x=0;x<this.currentIndex;++x){var T=a[x],E=(a[x]=null,g=T._texture.baseTexture,B.premultiplyBlendMode[Number(g.premultipliedAlpha)][T.blendMode]);if(b!==E&&(b=E,y=null,v=o,L++),y!==g&&(y=g)._enabled!==L){if(v===o&&(L++,_.size=x-_.start,v=0,(_=u[m++]).blend=b,_.textureCount=0,_.start=x),g.touched=f,-1===g._virtalBoundId)for(var S=0;S<o;++S){var C=(S+F)%o,A=h[C];if(A._enabled!==L){F++,A._virtalBoundId=-1,h[g._virtalBoundId=C]=g;break}}g._enabled=L,_.textureCount++,_.ids[v]=g._virtalBoundId,_.textures[v++]=g}E=T.vertexData,t=T._texture._uvs.uvsUint32,this.renderer.roundPixels?(P=this.renderer.resolution,l[d]=(E[0]*P|0)/P,l[d+1]=(E[1]*P|0)/P,l[d+5]=(E[2]*P|0)/P,l[d+6]=(E[3]*P|0)/P,l[d+10]=(E[4]*P|0)/P,l[d+11]=(E[5]*P|0)/P,l[d+15]=(E[6]*P|0)/P,l[d+16]=(E[7]*P|0)/P):(l[d]=E[0],l[d+1]=E[1],l[d+5]=E[2],l[d+6]=E[3],l[d+10]=E[4],l[d+11]=E[5],l[d+15]=E[6],l[d+16]=E[7]),c[d+2]=t[0],c[d+7]=t[1],c[d+12]=t[2],c[d+17]=t[3];var P=Math.min(T.worldAlpha,1),E=P<1&&g.premultipliedAlpha?(0,B.premultiplyTint)(T._tintRGB,P):T._tintRGB+(255*P<<24);c[d+3]=c[d+8]=c[d+13]=c[d+18]=E,l[d+4]=l[d+9]=l[d+14]=l[d+19]=g._virtalBoundId,d+=20}for(_.size=x-_.start,I.default.CAN_UPLOAD_SAME_BUFFER?this.vertexBuffers[this.vertexCount].upload(s.vertices,0,!0):(this.vaoMax<=this.vertexCount&&(this.vaoMax++,e=this.shader.attributes,n=this.vertexBuffers[this.vertexCount]=D.default.GLBuffer.createVertexBuffer(i,null,i.STREAM_DRAW),r=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,e.aVertexPosition,i.FLOAT,!1,this.vertByteSize,0).addAttribute(n,e.aTextureCoord,i.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,e.aColor,i.UNSIGNED_BYTE,!0,this.vertByteSize,12),e.aTextureId&&r.addAttribute(n,e.aTextureId,i.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=r),this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(s.vertices,0,!1),this.vertexCount++),x=0;x<o;++x)p[x]._virtalBoundId=-1;for(x=0;x<m;++x){for(var M=u[x],O=M.textureCount,R=0;R<O;R++)y=M.textures[R],p[M.ids[R]]!==y&&this.renderer.bindTexture(y,M.ids[R],!0),y._virtalBoundId=-1;this.renderer.state.setBlendMode(M.blend),i.drawElements(i.TRIANGLES,6*M.size,i.UNSIGNED_SHORT,6*M.start*2)}this.currentIndex=0}},o.prototype.start=function(){this.renderer.bindShader(this.shader),I.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},o.prototype.stop=function(){this.flush()},o.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),i.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var e=0;e<this.buffers.length;++e)this.buffers[e].destroy()},o}(r.default);n.default=t,i.default.registerPlugin("sprite",t)},{"../../renderers/webgl/WebGLRenderer":173,"../../renderers/webgl/utils/ObjectRenderer":183,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":186,"../../settings":190,"../../utils":214,"../../utils/createIndicesForQuads":212,"./BatchBuffer":194,"./generateMultiTextureShader":196,"bit-twiddle":15,"pixi-gl-core":118}],196:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e){for(var n=s,t=(n=(n=n.replace(/%count%/gi,e)).replace(/%forloop%/gi,function(t){var e="";e+="\n\n";for(var n=0;n<t;n++)0<n&&(e+="\nelse "),n<t-1&&(e+="if(vTextureId < "+n+".5)"),e=(e+="\n{")+"\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);\n}";return e+="\n\n"}(e)),new o.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",n)),r=[],i=0;i<e;i++)r[i]=i;return t.bind(),t.uniforms.uSamplers=r,t};var n=t("../../Shader"),o=(n=n)&&n.__esModule?n:{default:n};t("path");var s=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","%forloop%","gl_FragColor = color * vColor;","}"].join("\n")},{"../../Shader":133,path:321}],197:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=p(t("../sprites/Sprite")),s=p(t("../textures/Texture")),a=t("../math"),u=t("../utils"),g=t("../const"),l=p(t("../settings")),c=p(t("./TextStyle")),y=p(t("./TextMetrics")),h=p(t("../utils/trimCanvas"));function p(t){return t&&t.__esModule?t:{default:t}}var f={texture:!0,children:!1,baseTexture:!0},t=function(i){var t=o,e=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function o(t,e,n){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");(n=n||document.createElement("canvas")).width=3,n.height=3;var r=s.default.fromCanvas(n,l.default.SCALE_MODE,"text"),r=(r.orig=new a.Rectangle,r.trim=new a.Rectangle,function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,i.call(this,r)));return s.default.addToCache(r._texture,r._texture.baseTexture.textureCacheIds[0]),r.canvas=n,r.context=r.canvas.getContext("2d"),r.resolution=l.default.RESOLUTION,r._text=null,r._style=null,r._styleListener=null,r._font="",r.text=t,r.style=e,r.localStyleID=-1,r}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var n=this.context,t=y.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),r=t.width,i=t.height,o=t.lines,s=t.lineHeight,a=t.lineWidths,u=t.maxLineWidth,l=t.fontProperties,c=(this.canvas.width=Math.ceil((Math.max(1,r)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,i)+2*e.padding)*this.resolution),n.scale(this.resolution,this.resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.strokeStyle=e.stroke,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,void 0),h=void 0;if(e.dropShadow){n.fillStyle=e.dropShadowColor,n.globalAlpha=e.dropShadowAlpha,n.shadowBlur=e.dropShadowBlur,0<e.dropShadowBlur&&(n.shadowColor=e.dropShadowColor);for(var p=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,f=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,d=0;d<o.length;d++)c=e.strokeThickness/2,h=e.strokeThickness/2+d*s+l.ascent,"right"===e.align?c+=u-a[d]:"center"===e.align&&(c+=(u-a[d])/2),e.fill&&(this.drawLetterSpacing(o[d],c+p+e.padding,h+f+e.padding),e.stroke)&&e.strokeThickness&&(n.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(o[d],c+p+e.padding,h+f+e.padding,!0),n.strokeStyle=e.stroke)}n.shadowBlur=0,n.globalAlpha=1,n.fillStyle=this._generateFillStyle(e,o);for(var g=0;g<o.length;g++)c=e.strokeThickness/2,h=e.strokeThickness/2+g*s+l.ascent,"right"===e.align?c+=u-a[g]:"center"===e.align&&(c+=(u-a[g])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[g],c+e.padding,h+e.padding,!0),e.fill&&this.drawLetterSpacing(o[g],c+e.padding,h+e.padding);this.updateTexture()}},o.prototype.drawLetterSpacing=function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=this._style.letterSpacing;if(0===i)r?this.context.strokeText(t,e,n):this.context.fillText(t,e,n);else for(var o,s=String.prototype.split.call(t,""),a=e,u=0,l=this.context.measureText(t).width;u<t.length;)o=s[u++],r?this.context.strokeText(o,a,n):this.context.fillText(o,a,n),a+=l-(o=this.context.measureText(t.substring(u)).width)+i,l=o},o.prototype.updateTexture=function(){var t=this.canvas,e=(this._style.trim&&(e=(0,h.default)(t)).data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0)),this._texture),n=this._style,n=n.trim?0:n.padding,r=e.baseTexture;r.hasLoaded=!0,r.resolution=this.resolution,r.realWidth=t.width,r.realHeight=t.height,r.width=t.width/this.resolution,r.height=t.height/this.resolution,e.trim.width=e._frame.width=t.width/this.resolution,e.trim.height=e._frame.height=t.height/this.resolution,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-2*n,e.orig.height=e._frame.height-2*n,this._onTextureUpdate(),r.emit("update",r),this.dirty=!1},o.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),i.prototype.renderWebGL.call(this,t)},o.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),i.prototype._renderCanvas.call(this,t)},o.prototype.getLocalBounds=function(t){return this.updateText(!0),i.prototype.getLocalBounds.call(this,t)},o.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},o.prototype._onStyleChange=function(){this.dirty=!0},o.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var n=void 0,r=void 0,i=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,u=t.fill.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var c=u.length+1,h=1;h<c;++h)l.push(h/c);if(u.unshift(t.fill[0]),l.unshift(0),u.push(t.fill[t.fill.length-1]),l.push(1),t.fillGradientType===g.TEXT_GRADIENT.LINEAR_VERTICAL)for(var n=this.context.createLinearGradient(s/2,0,s/2,a),r=(u.length+1)*e.length,i=0,p=0;p<e.length;p++){i+=1;for(var f=0;f<u.length;f++)o="number"==typeof l[f]?l[f]/e.length+p/e.length:i/r,n.addColorStop(o,u[f]),i++}else{n=this.context.createLinearGradient(0,a/2,s,a/2),r=u.length+1,i=1;for(var d=0;d<u.length;d++)o="number"==typeof l[d]?l[d]:i/r,n.addColorStop(o,u[d]),i++}return n},o.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},f,t),i.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},r(o,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,u.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,u.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){(t=t||{})instanceof c.default?this._style=t:this._style=new c.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null==t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),o}(o.default);n.default=t},{"../const":135,"../math":159,"../settings":190,"../sprites/Sprite":191,"../textures/Texture":204,"../utils":214,"../utils/trimCanvas":219,"./TextMetrics":198,"./TextStyle":199}],198:[function(t,e,n){"use strict";n.__esModule=!0;S.measureText=function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:S._canvas,i=(n=null==n?e.wordWrap:n,e.toFontString()),o=S.measureFont(i),s=r.getContext("2d");s.font=i;for(var a=(n?S.wordWrap(t,e,r):t).split(/(?:\r\n|\r|\n)/),u=new Array(a.length),l=0,c=0;c<a.length;c++){var h=s.measureText(a[c]).width+(a[c].length-1)*e.letterSpacing;u[c]=h,l=Math.max(l,h)}i=l+e.strokeThickness,e.dropShadow&&(i+=e.dropShadowDistance),n=e.lineHeight||o.fontSize+e.strokeThickness,r=Math.max(n,o.fontSize+e.strokeThickness)+(a.length-1)*(n+e.leading);return e.dropShadow&&(r+=e.dropShadowDistance),new S(t,e,i,r,a,u,n+e.leading,l,o)},S.wordWrap=function(t,e){for(var n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:S._canvas).getContext("2d"),r=0,i="",o="",s={},a=e.letterSpacing,u=e.whiteSpace,l=S.collapseSpaces(u),c=S.collapseNewlines(u),h=!l,p=e.wordWrapWidth+a,f=S.tokenize(t),d=0;d<f.length;d++){var g=f[d];if(S.isNewline(g)){if(!c){o+=S.addLine(i),h=!l,i="",r=0;continue}g=" "}if(l){var y=S.isBreakingSpace(g),m=S.isBreakingSpace(i[i.length-1]);if(y&&m)continue}y=S.getFromCache(g,a,s,n);if(p<y)if(""!==i&&(o+=S.addLine(i),i="",r=0),S.canBreakWords(g,e.breakWords))for(var v=g.split(""),_=0;_<v.length;_++){for(var b=v[_],x=1;v[_+x];){var w=v[_+x],T=b[b.length-1];if(S.canBreakChars(T,w,g,_,e.breakWords))break;b+=w,x++}_+=b.length-1;var E=S.getFromCache(b,a,s,n);p<E+r&&(o+=S.addLine(i),h=!1,i="",r=0),i+=b,r+=E}else{0<i.length&&(o+=S.addLine(i),i="",r=0);m=d===f.length-1;o+=S.addLine(g,!m),h=!1,i="",r=0}else p<y+r&&(h=!1,o+=S.addLine(i),i="",r=0),(0<i.length||!S.isBreakingSpace(g)||h)&&(i+=g,r+=y)}return o+=S.addLine(i,!1)},S.addLine=function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return t=S.trimRight(t),t=e?t+"\n":t},S.getFromCache=function(t,e,n,r){var i=n[t];return void 0===i&&(e=t.length*e,i=r.measureText(t).width+e,n[t]=i),i},S.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},S.collapseNewlines=function(t){return"normal"===t},S.trimRight=function(t){if("string"!=typeof t)return"";for(var e=t.length-1;0<=e;e--){var n=t[e];if(!S.isBreakingSpace(n))break;t=t.slice(0,-1)}return t},S.isNewline=function(t){return"string"==typeof t&&0<=S._newlines.indexOf(t.charCodeAt(0))},S.isBreakingSpace=function(t){return"string"==typeof t&&0<=S._breakingSpaces.indexOf(t.charCodeAt(0))},S.tokenize=function(t){var e=[],n="";if("string"==typeof t){for(var r=0;r<t.length;r++){var i=t[r];S.isBreakingSpace(i)||S.isNewline(i)?(""!==n&&(e.push(n),n=""),e.push(i)):n+=i}""!==n&&e.push(n)}return e},S.canBreakWords=function(t,e){return e},S.canBreakChars=function(t,e,n,r,i){return!0},S.measureFont=function(t){if(S._fonts[t])return S._fonts[t];for(var e={},n=S._canvas,r=S._context,i=(r.font=t,S.METRICS_STRING+S.BASELINE_SYMBOL),o=Math.ceil(r.measureText(i).width),s=2*(a=Math.ceil(r.measureText(S.BASELINE_SYMBOL).width)),a=a*S.BASELINE_MULTIPLIER|0,u=(n.width=o,n.height=s,r.fillStyle="#f00",r.fillRect(0,0,o,s),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(i,0,a),r.getImageData(0,0,o,s).data),n=u.length,l=4*o,c=0,h=0,p=!1,c=0;c<a;++c){for(var f=0;f<l;f+=4)if(255!==u[h+f]){p=!0;break}if(p)break;h+=l}for(e.ascent=a-c,h=n-l,p=!1,c=s;a<c;--c){for(var d=0;d<l;d+=4)if(255!==u[h+d]){p=!0;break}if(p)break;h-=l}return e.descent=c-a,e.fontSize=e.ascent+e.descent,S._fonts[t]=e},S.clearMetrics=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";t?delete S._fonts[t]:S._fonts={}};var r=S;function S(t,e,n,r,i,o,s,a,u){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");this.text=t,this.style=e,this.width=n,this.height=r,this.lines=i,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=u}n.default=r;n=document.createElement("canvas");n.width=n.height=10,r._canvas=n,r._context=n.getContext("2d"),r._fonts={},r.METRICS_STRING="|Éq",r.BASELINE_SYMBOL="M",r.BASELINE_MULTIPLIER=1.4,r._newlines=[10,13],r._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},{}],199:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=t("../const"),s=t("../utils");var a={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:o.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},u=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],t=(l.prototype.clone=function(){var t={};return p(t,this,a),new l(t)},l.prototype.reset=function(){p(this,a,a)},l.prototype.toFontString=function(){for(var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily,n=(e=Array.isArray(this.fontFamily)?e:this.fontFamily.split(",")).length-1;0<=n;n--){var r=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&u.indexOf(r)<0&&(r='"'+r+'"'),e[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},r(l,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){t=h(t);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){t=h(t);this._fill!==t&&(this._fill=t,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){!function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return;if(t.length!==e.length)return;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return;return 1}(this._fillGradientStops,t)&&(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){t=h(t);this._stroke!==t&&(this._stroke=t,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),l);function l(t){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.styleID=0,this.reset(),p(this,t,t)}function c(t){return"number"==typeof t?(0,s.hex2string)(t):"string"==typeof t&&0===t.indexOf("0x")?t.replace("0x","#"):t}function h(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=c(t[e]);return t}return c(t)}function p(t,e,n){for(var r in n)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}n.default=t},{"../const":135,"../utils":214}],200:[function(t,e,n){"use strict";n.__esModule=!0;var r=i(t("./BaseTexture")),u=i(t("../settings"));function i(t){return t&&t.__esModule?t:{default:t}}t=function(s){var t=a,e=s;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,n=arguments[2],r=arguments[3],i=this,o=a;if(i instanceof o)return(i=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,s.call(this,null,n))).resolution=r||u.default.RESOLUTION,i.width=Math.ceil(t),i.height=Math.ceil(e),i.realWidth=i.width*i.resolution,i.realHeight=i.height*i.resolution,i.scaleMode=void 0!==n?n:u.default.SCALE_MODE,i.hasLoaded=!0,i._glRenderTargets={},i._canvasRenderTarget=null,i.valid=!1,i;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),a.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=0<t&&0<e,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},a.prototype.destroy=function(){s.prototype.destroy.call(this,!0),this.renderer=null},a}(r.default);n.default=t},{"../settings":190,"./BaseTexture":201}],201:[function(t,e,n){"use strict";n.__esModule=!0;var a=t("../utils"),o=i(t("../settings")),r=i(t("eventemitter3")),u=i(t("../utils/determineCrossOrigin")),l=i(t("bit-twiddle"));function i(t){return t&&t.__esModule?t:{default:t}}t=function(i){var t=s,e=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function s(t,e,n){var r;if(this instanceof s)return(r=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,i.call(this))).uid=(0,a.uid)(),r.touched=0,r.resolution=n||o.default.RESOLUTION,r.width=100,r.height=100,r.realWidth=100,r.realHeight=100,r.scaleMode=void 0!==e?e:o.default.SCALE_MODE,r.hasLoaded=!1,r.isLoading=!1,r.source=null,r.origSource=null,r.imageType=null,r.sourceScale=1,r.premultipliedAlpha=!0,r.imageUrl=null,r.isPowerOfTwo=!1,r.mipmap=o.default.MIPMAP_TEXTURES,r.wrapMode=o.default.WRAP_MODE,r._glTextures={},r._enabled=0,r._virtalBoundId=-1,r._destroyed=!1,r.textureCacheIds=[],t&&r.loadSource(t),r;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),s.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},s.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=l.default.isPow2(this.realWidth)&&l.default.isPow2(this.realHeight)},s.prototype.loadSource=function(t){var e,n=this.isLoading,r=(this.hasLoaded=!1,this.isLoading=!1,n&&this.source&&(this.source.onload=null,this.source.onerror=null),!this.source);((this.source=t).src&&t.complete||t.getContext)&&t.width&&t.height?(this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),r&&this.emit("loaded",this)):t.getContext||(this.isLoading=!0,e=this,t.onload=function(){e._updateImageType(),t.onload=null,t.onerror=null,e.isLoading&&(e.isLoading=!1,e._sourceLoaded(),"svg"===e.imageType?e._loadSvgSource():e.emit("loaded",e))},t.onerror=function(){t.onload=null,t.onerror=null,e.isLoading&&(e.isLoading=!1,e.emit("error",e))},t.complete&&t.src&&(t.onload=null,t.onerror=null,"svg"===e.imageType?e._loadSvgSource():(this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),n&&this.emit("loaded",this)):n&&this.emit("error",this))))},s.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,a.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){t=t.subType.split("+")[0];if(!(e=(0,a.getUrlFileExtension)("."+t)))throw new Error("Invalid image type in data URI.")}else e=(e=(0,a.getUrlFileExtension)(this.imageUrl))||"png";this.imageType=e}},s.prototype._loadSvgSource=function(){var t;"svg"===this.imageType&&((t=(0,a.decomposeDataUri)(this.imageUrl))?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr())},s.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},s.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},s.prototype._loadSvgSourceUsingString=function(t){var t=(0,a.getSvgSize)(t),e=t.width,t=t.height;if(!e||!t)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(e*this.sourceScale),this.realHeight=Math.round(t*this.sourceScale),this._updateDimensions();var n=document.createElement("canvas");n.width=this.realWidth,n.height=this.realHeight,n._pixiId="canvas_"+(0,a.uid)(),n.getContext("2d").drawImage(this.source,0,0,e,t,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=n,s.addToCache(this,n._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},s.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},s.prototype.destroy=function(){this.imageUrl&&(delete a.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),s.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},s.prototype.dispose=function(){this.emit("dispose",this)},s.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},s.fromImage=function(t,e,n,r){var i,o=a.BaseTextureCache[t];return o||(i=new Image,void 0===e&&0!==t.indexOf("data:")?i.crossOrigin=(0,u.default)(t):e&&(i.crossOrigin="string"==typeof e?e:"anonymous"),(o=new s(i,n)).imageUrl=t,r&&(o.sourceScale=r),o.resolution=(0,a.getResolutionOfUrl)(t),i.src=t,s.addToCache(o,t)),o},s.fromCanvas=function(t,e){t._pixiId||(t._pixiId=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas")+"_"+(0,a.uid)());var n=a.BaseTextureCache[t._pixiId];return n||(n=new s(t,e),s.addToCache(n,t._pixiId)),n},s.from=function(t,e,n){var r,i;return"string"==typeof t?s.fromImage(t,void 0,e,n):t instanceof HTMLImageElement?(r=t.src,(i=a.BaseTextureCache[r])||((i=new s(t,e)).imageUrl=r,n&&(i.sourceScale=n),i.resolution=(0,a.getResolutionOfUrl)(r),s.addToCache(i,r)),i):t instanceof HTMLCanvasElement?s.fromCanvas(t,e):t},s.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),a.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),a.BaseTextureCache[e]=t)},s.removeFromCache=function(t){if("string"==typeof t){var e,n=a.BaseTextureCache[t];if(n)return-1<(e=n.textureCacheIds.indexOf(t))&&n.textureCacheIds.splice(e,1),delete a.BaseTextureCache[t],n}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete a.BaseTextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},s}(r.default);n.default=t},{"../settings":190,"../utils":214,"../utils/determineCrossOrigin":213,"bit-twiddle":15,eventemitter3:36}],202:[function(t,e,n){"use strict";n.__esModule=!0;var l=r(t("./BaseRenderTexture"));function r(t){return t&&t.__esModule?t:{default:t}}t=function(a){var t=u,e=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function u(t,e){var n,r,i,o=this,s=u;if(o instanceof s)return o=null,t instanceof l.default||(s=arguments[1],n=arguments[2],r=arguments[3],i=arguments[4],console.warn("Please use RenderTexture.create("+s+", "+n+") instead of the ctor directly."),o=arguments[0],e=null,t=new l.default(s,n,r,i)),(s=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,a.call(this,t,e))).legacyRenderer=o,s.valid=!0,s._updateUvs(),s;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),u.prototype.resize=function(t,e,n){t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,n||this.baseTexture.resize(t,e),this._updateUvs()},u.create=function(t,e,n,r){return new u(new l.default(t,e,n,r))},u}(r(t("./Texture")).default);n.default=t},{"./BaseRenderTexture":200,"./Texture":204}],203:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=t("../"),o=t("../utils");function h(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=this,i=h;if(!(r instanceof i))throw new TypeError("Cannot call a class as a function");this.baseTexture=t,this.textures={},this.animations={},this.data=e,this.resolution=this._updateResolution(n||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}r(h,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),h.prototype._updateResolution=function(t){var e=this.data.meta.scale,t=(0,o.getResolutionOfUrl)(t,null);return 1!==(t=null===t?void 0!==e?parseFloat(e):1:t)&&(this.baseTexture.resolution=t,this.baseTexture.update()),t},h.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=h.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},h.prototype._processFrames=function(t){for(var e=t,n=h.BATCH_SIZE,r=this.baseTexture.sourceScale;e-t<n&&e<this._frameKeys.length;){var i,o,s,a=this._frameKeys[e],u=this._frames[a],l=u.frame;l&&(i=s=null,o=!1!==u.trimmed&&u.sourceSize?u.sourceSize:u.frame,o=new c.Rectangle(0,0,Math.floor(o.w*r)/this.resolution,Math.floor(o.h*r)/this.resolution),s=u.rotated?new c.Rectangle(Math.floor(l.x*r)/this.resolution,Math.floor(l.y*r)/this.resolution,Math.floor(l.h*r)/this.resolution,Math.floor(l.w*r)/this.resolution):new c.Rectangle(Math.floor(l.x*r)/this.resolution,Math.floor(l.y*r)/this.resolution,Math.floor(l.w*r)/this.resolution,Math.floor(l.h*r)/this.resolution),!1!==u.trimmed&&u.spriteSourceSize&&(i=new c.Rectangle(Math.floor(u.spriteSourceSize.x*r)/this.resolution,Math.floor(u.spriteSourceSize.y*r)/this.resolution,Math.floor(l.w*r)/this.resolution,Math.floor(l.h*r)/this.resolution)),this.textures[a]=new c.Texture(this.baseTexture,s,o,i,u.rotated?2:0,u.anchor),c.Texture.addToCache(this.textures[a],a)),e++}},h.prototype._processAnimations=function(){var t,e=this.data.animations||{};for(t in e){this.animations[t]=[];for(var n,r=e[t],i=Array.isArray(r),o=0,r=i?r:r[Symbol.iterator]();;){if(i){if(o>=r.length)break;n=r[o++]}else{if((o=r.next()).done)break;n=o.value}var s=n;this.animations[t].push(this.textures[s])}}},h.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},h.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*h.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*h.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},h.prototype.destroy=function(){var t,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];for(t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&this.baseTexture.destroy(),this.baseTexture=null},n.default=h},{"../":154,"../utils":214}],204:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=u(t("./BaseTexture")),s=u(t("./VideoBaseTexture")),l=u(t("./TextureUvs")),a=u(t("eventemitter3")),c=t("../math"),h=t("../utils"),p=u(t("../settings"));function u(t){return t&&t.__esModule?t:{default:t}}t=function(a){var t=u,e=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function u(t,e,n,r,i,o){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");var s=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,a.call(this));if(s.noFrame=!1,e||(s.noFrame=!0,e=new c.Rectangle(0,0,1,1)),t instanceof u&&(t=t.baseTexture),s.baseTexture=t,s._frame=e,s.trim=r,s.valid=!1,s.requiresUpdate=!1,s._uvs=null,s.orig=n||e,s._rotate=Number(i||0),!0===i)s._rotate=2;else if(s._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return t.hasLoaded?(s.noFrame&&(e=new c.Rectangle(0,0,t.width,t.height),t.on("update",s.onBaseTextureUpdated,s)),s.frame=e):t.once("loaded",s.onBaseTextureLoaded,s),s.defaultAnchor=o?new c.Point(o.x,o.y):new c.Point(0,0),s._updateID=0,s.transform=null,s.textureCacheIds=[],s}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),u.prototype.update=function(){this.baseTexture.update()},u.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new c.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},u.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},u.prototype.destroy=function(t){this.baseTexture&&(t&&(h.TextureCache[this.baseTexture.imageUrl]&&u.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,u.removeFromCache(this),this.textureCacheIds=null},u.prototype.clone=function(){return new u(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},u.prototype._updateUvs=function(){this._uvs||(this._uvs=new l.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},u.fromImage=function(t,e,n,r){var i=h.TextureCache[t];return i||(i=new u(o.default.fromImage(t,e,n,r)),u.addToCache(i,t)),i},u.fromFrame=function(t){var e=h.TextureCache[t];if(e)return e;throw new Error('The frameId "'+t+'" does not exist in the texture cache')},u.fromCanvas=function(t,e){return new u(o.default.fromCanvas(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas"))},u.fromVideo=function(t,e,n,r){return"string"==typeof t?u.fromVideoUrl(t,e,n,r):new u(s.default.fromVideo(t,e,r))},u.fromVideoUrl=function(t,e,n,r){return new u(s.default.fromUrl(t,e,n,r))},u.from=function(t){return"string"==typeof t?h.TextureCache[t]||(null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?u.fromVideoUrl(t):u.fromImage(t)):t instanceof HTMLImageElement?new u(o.default.from(t)):t instanceof HTMLCanvasElement?u.fromCanvas(t,p.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?u.fromVideo(t):t instanceof o.default?new u(t):t},u.fromLoader=function(t,e,n){var t=new o.default(t,void 0,(0,h.getResolutionOfUrl)(e)),r=new u(t);return t.imageUrl=e,o.default.addToCache(r.baseTexture,n=n||e),u.addToCache(r,n),n!==e&&(o.default.addToCache(r.baseTexture,e),u.addToCache(r,e)),r},u.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),h.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),h.TextureCache[e]=t)},u.removeFromCache=function(t){if("string"==typeof t){var e,n=h.TextureCache[t];if(n)return-1<(e=n.textureCacheIds.indexOf(t))&&n.textureCacheIds.splice(e,1),delete h.TextureCache[t],n}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)h.TextureCache[t.textureCacheIds[r]]===t&&delete h.TextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},r(u,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,n=t.y,r=t.width,i=t.height,o=e+r>this.baseTexture.width,s=n+i>this.baseTexture.height;if(o||s)throw e="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,n="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height,new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(o&&s?"and":"or")+" "+n);this.valid=r&&i&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),u}(a.default);function f(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}(n.default=t).EMPTY=new t(new o.default),f(t.EMPTY),f(t.EMPTY.baseTexture),t.WHITE=((a=document.createElement("canvas")).width=10,a.height=10,(n=a.getContext("2d")).fillStyle="white",n.fillRect(0,0,10,10),new t(new o.default(a))),f(t.WHITE),f(t.WHITE.baseTexture)},{"../math":159,"../settings":190,"../utils":214,"./BaseTexture":201,"./TextureUvs":206,"./VideoBaseTexture":207,eventemitter3:36}],205:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var t=t("../math/Matrix"),o=(t=t)&&t.__esModule?t:{default:t};var s=new o.default;function a(t,e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._texture=t,this.mapCoord=new o.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===e?.5:e}a.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,r=0;r<t.length;r+=2){var i=t[r],o=t[r+1];e[r]=i*n.a+o*n.c+n.tx,e[r+1]=i*n.b+o*n.d+n.ty}return e},a.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var t=e._uvs,t=(this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0),e.orig),n=e.trim,t=(n&&(s.set(t.width/n.width,0,0,t.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(s)),e.baseTexture),n=this.uClampFrame,r=this.clampMargin/t.resolution,i=this.clampOffset;return n[0]=(e._frame.x+r+i)/t.width,n[1]=(e._frame.y+r+i)/t.height,n[2]=(e._frame.x+e._frame.width-r+i)/t.width,n[3]=(e._frame.y+e._frame.height-r+i)/t.height,this.uClampOffset[0]=i/t.realWidth,this.uClampOffset[1]=i/t.realHeight,!0},r(a,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),n.default=a},{"../math/Matrix":156}],206:[function(t,e,n){"use strict";n.__esModule=!0;var t=t("../math/GroupD8"),u=(t=t)&&t.__esModule?t:{default:t};function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}r.prototype.set=function(t,e,n){var r,i,o,s,a=e.width,e=e.height;n?(r=t.width/2/a,i=t.height/2/e,o=t.x/a+r,s=t.y/e+i,n=u.default.add(n,u.default.NW),this.x0=o+r*u.default.uX(n),this.y0=s+i*u.default.uY(n),n=u.default.add(n,2),this.x1=o+r*u.default.uX(n),this.y1=s+i*u.default.uY(n),n=u.default.add(n,2),this.x2=o+r*u.default.uX(n),this.y2=s+i*u.default.uY(n),n=u.default.add(n,2),this.x3=o+r*u.default.uX(n),this.y3=s+i*u.default.uY(n)):(this.x0=t.x/a,this.y0=t.y/e,this.x1=(t.x+t.width)/a,this.y1=t.y/e,this.x2=(t.x+t.width)/a,this.y2=(t.y+t.height)/e,this.x3=t.x/a,this.y3=(t.y+t.height)/e),this.uvsUint32[0]=(65535&Math.round(65535*this.y0))<<16|65535&Math.round(65535*this.x0),this.uvsUint32[1]=(65535&Math.round(65535*this.y1))<<16|65535&Math.round(65535*this.x1),this.uvsUint32[2]=(65535&Math.round(65535*this.y2))<<16|65535&Math.round(65535*this.x2),this.uvsUint32[3]=(65535&Math.round(65535*this.y3))<<16|65535&Math.round(65535*this.x3)},n.default=r},{"../math/GroupD8":155}],207:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=o(t("./BaseTexture")),u=t("../utils"),l=t("../ticker"),c=t("../const"),h=o(t("../utils/determineCrossOrigin"));function o(t){return t&&t.__esModule?t:{default:t}}t=function(o){var t=a,e=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(t,e){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=this,i=a;if(!(r instanceof i))throw new TypeError("Cannot call a class as a function");if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0);r=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,o.call(this,t,e));return r.width=t.videoWidth,r.height=t.videoHeight,r._autoUpdate=!0,r._isAutoUpdating=!1,r.autoPlay=n,r.update=r.update.bind(r),r._onCanPlay=r._onCanPlay.bind(r),t.addEventListener("play",r._onPlayStart.bind(r)),t.addEventListener("pause",r._onPlayStop.bind(r)),r.hasLoaded=!1,r.__loaded=!1,r._isSourceReady()?r._onCanPlay():(t.addEventListener("canplay",r._onCanPlay),t.addEventListener("canplaythrough",r._onCanPlay)),r}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),a.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},a.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},a.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(l.shared.add(this.update,this,c.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},a.prototype._onPlayStop=function(){this._isAutoUpdating&&(l.shared.remove(this.update,this),this._isAutoUpdating=!1)},a.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},a.prototype.destroy=function(){this._isAutoUpdating&&l.shared.remove(this.update,this),this.source&&this.source._pixiId&&(s.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),o.prototype.destroy.call(this)},a.fromVideo=function(t,e,n){t._pixiId||(t._pixiId="video_"+(0,u.uid)());var r=u.BaseTextureCache[t._pixiId];return r||(r=new a(t,e,n),s.default.addToCache(r,t._pixiId)),r},a.fromUrl=function(t,e,n,r){var i=document.createElement("video"),o=(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),Array.isArray(t)?t[0].src||t[0]:t.src||t);if(void 0===n&&0!==o.indexOf("data:")?i.crossOrigin=(0,h.default)(o):n&&(i.crossOrigin="string"==typeof n?n:"anonymous"),Array.isArray(t))for(var s=0;s<t.length;++s)i.appendChild(p(t[s].src||t[s],t[s].mime));else i.appendChild(p(o,t.mime));return i.load(),a.fromVideo(i,e,r)},r(a,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(l.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(l.shared.add(this.update,this,c.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),a}(s.default);function p(t,e){e||(e="video/"+(n=t.split("?").shift().toLowerCase()).substr(n.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=t,n.type=e,n}(n.default=t).fromUrls=t.fromUrl},{"../const":135,"../ticker":210,"../utils":214,"../utils/determineCrossOrigin":213,"./BaseTexture":201}],208:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=u(t("../settings")),s=t("../const"),a=u(t("./TickerListener"));function u(t){return t&&t.__esModule?t:{default:t}}l.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},l.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},l.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},l.prototype.add=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:s.UPDATE_PRIORITY.NORMAL;return this._addListener(new a.default(t,e,n))},l.prototype.addOnce=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:s.UPDATE_PRIORITY.NORMAL;return this._addListener(new a.default(t,e,n,!0))},l.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}e=(n=e).next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},l.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},l.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},l.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},l.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},l.prototype.update=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){(e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*o.default.TARGET_FPMS*this.speed;for(var e=this._head,n=e.next;n;)n=n.emit(this.deltaTime);e.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},r(l,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(Math.max(0,t)/1e3,o.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]);t=l;function l(){var e=this;if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this._head=new a.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/o.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started)&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick))}}n.default=t},{"../const":135,"../settings":190,"./TickerListener":209}],209:[function(t,e,n){"use strict";function s(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=this,o=s;if(!(i instanceof o))throw new TypeError("Cannot call a class as a function");this.fn=t,this.context=e,this.priority=n,this.once=r,this.next=null,this.previous=null,this._destroyed=!1}n.__esModule=!0,s.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},s.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},s.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},s.prototype.destroy=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=(this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous),this.next);return this.next=t?null:e,this.previous=null,e},n.default=s},{}],210:[function(t,e,n){"use strict";n.__esModule=!0,n.Ticker=n.shared=void 0;var t=t("./Ticker"),t=(t=t)&&t.__esModule?t:{default:t};var r=new t.default;r.autoStart=!0,r.destroy=function(){},n.shared=r,n.Ticker=t.default},{"./Ticker":208}],211:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],212:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){for(var e=6*t,n=new Uint16Array(e),r=0,i=0;r<e;r+=6,i+=4)n[r+0]=i+0,n[r+1]=i+1,n[r+2]=i+2,n[r+3]=i+0,n[r+4]=i+2,n[r+5]=i+3;return n}},{}],213:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,i=i||document.createElement("a");i.href=t;var n=!(t=r.default.parse(i.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&n&&t.protocol===e.protocol?"":"anonymous"};var n=t("url"),r=(t=n)&&t.__esModule?t:{default:t};var i=void 0},{url:328}],214:[function(t,e,n){"use strict";n.__esModule=!0,n.premultiplyBlendMode=n.BaseTextureCache=n.TextureCache=n.earcut=n.mixins=n.pluginTarget=n.EventEmitter=n.removeItems=n.isMobile=void 0,n.uid=function(){return++f},n.hex2rgb=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},n.hex2string=function(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)},n.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},n.getResolutionOfUrl=function(t,e){t=i.default.RETINA_PREFIX.exec(t);if(t)return parseFloat(t[1]);return void 0!==e?e:1},n.decomposeDataUri=function(t){t=r.DATA_URI.exec(t);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]};return},n.getUrlFileExtension=function(t){t=r.URL_FILE_EXTENSION.exec(t);if(t)return t[1].toLowerCase();return},n.getSvgSize=function(t){var t=r.SVG_SIZE.exec(t),e={};t&&(e[t[1]]=Math.round(parseFloat(t[3])),e[t[5]]=Math.round(parseFloat(t[7])));return e},n.skipHello=function(){d=!0},n.sayHello=function(t){var e;d||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(e=["\n %c %c %c PixiJS "+r.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"],window.console.log.apply(console,e)):window.console&&window.console.log("PixiJS "+r.VERSION+" - "+t+" - http://www.pixijs.com/"),d=!0)},n.isWebGLSupported=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{var e,n,r,i;return window.WebGLRenderingContext?(e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!n||!n.getContextAttributes().stencil),n&&(i=n.getExtension("WEBGL_lose_context"))&&i.loseContext(),n=null,r):!1}catch(t){return!1}},n.sign=function(t){return 0===t?0:t<0?-1:1},n.destroyTextureCache=function(){var t=void 0;for(t in g)g[t].destroy();for(t in y)y[t].destroy()},n.clearTextureCache=function(){var t=void 0;for(t in g)delete g[t];for(t in y)delete y[t]},n.correctBlendMode=function(t,e){return m[e?1:0][t]},n.premultiplyTint=function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;return(255*e<<24)+(((t>>16&255)*e+.5|0)<<16)+(((t>>8&255)*e+.5|0)<<8)+((255&t)*e+.5|0)},n.premultiplyRgba=function(t,e,n,r){n=n||new Float32Array(4),r||void 0===r?(n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e):(n[0]=t[0],n[1]=t[1],n[2]=t[2]);return n[3]=e,n},n.premultiplyTintToRgba=function(t,e,n,r){(n=n||new Float32Array(4))[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,!r&&void 0!==r||(n[0]*=e,n[1]*=e,n[2]*=e);return n[3]=e,n};var r=t("../const"),i=p(t("../settings")),o=p(t("eventemitter3")),s=p(t("./pluginTarget")),a=h(t("./mixin")),u=h(t("ismobilejs")),l=p(t("remove-array-items")),c=p(t("./mapPremultipliedBlendModes")),t=p(t("earcut"));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}var f=0,d=!1;n.isMobile=u,n.removeItems=l.default,n.EventEmitter=o.default,n.pluginTarget=s.default,n.mixins=a,n.earcut=t.default;var g=n.TextureCache=Object.create(null),y=n.BaseTextureCache=Object.create(null);var m=n.premultiplyBlendMode=(0,c.default)()},{"../const":135,"../settings":190,"./mapPremultipliedBlendModes":215,"./mixin":217,"./pluginTarget":218,earcut:20,eventemitter3:36,ismobilejs:41,"remove-array-items":284}],215:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(){for(var t=[],e=[],n=0;n<32;n++)e[t[n]=n]=n;t[i.BLEND_MODES.NORMAL_NPM]=i.BLEND_MODES.NORMAL,t[i.BLEND_MODES.ADD_NPM]=i.BLEND_MODES.ADD,t[i.BLEND_MODES.SCREEN_NPM]=i.BLEND_MODES.SCREEN,e[i.BLEND_MODES.NORMAL]=i.BLEND_MODES.NORMAL_NPM,e[i.BLEND_MODES.ADD]=i.BLEND_MODES.ADD_NPM,e[i.BLEND_MODES.SCREEN]=i.BLEND_MODES.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r};var i=t("../const")},{"../const":135}],216:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){if(r.default.tablet||r.default.phone)return 4;return t};var n=t("ismobilejs"),r=(t=n)&&t.__esModule?t:{default:t}},{ismobilejs:41}],217:[function(t,e,n){"use strict";function r(t,e){if(t&&e)for(var n=Object.keys(e),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}}n.__esModule=!0,n.mixin=r,n.delayMixin=function(t,e){i.push(t,e)},n.performMixins=function(){for(var t=0;t<i.length;t+=2)r(i[t],i[t+1]);i.length=0};var i=[]},{}],218:[function(t,e,n){"use strict";n.__esModule=!0,n.default={mixin:function(t){var n;(n=t).__plugins={},n.registerPlugin=function(t,e){n.__plugins[t]=e},n.prototype.initPlugins=function(){for(var t in this.plugins=this.plugins||{},n.__plugins)this.plugins[t]=new n.__plugins[t](this)},n.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}}},{}],219:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=t.width,n=t.height,t=t.getContext("2d"),r=t.getImageData(0,0,e,n).data,i=r.length,o={top:null,left:null,right:null,bottom:null},s=null,a=void 0,u=void 0,l=void 0;for(a=0;a<i;a+=4)0!==r[a+3]&&(u=a/4%e,l=~~(a/4/e),null===o.top&&(o.top=l),(null===o.left||u<o.left)&&(o.left=u),(null===o.right||o.right<u)&&(o.right=1+u),null===o.bottom||o.bottom<l)&&(o.bottom=l);null!==o.top&&(e=o.right-o.left,n=o.bottom-o.top+1,s=t.getImageData(o.left,o.top,e,n));return{height:n,width:e,data:s}}},{}],220:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(n){for(var t=n.mesh,e=n.particles,r=n.extras,i=n.filters,o=n.prepare,s=n.loaders,a=n.interaction,u=(Object.defineProperties(n,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return p("You do not need to use a PIXI Stage any more, you can simply render any container."),n.Container}},DisplayObjectContainer:{get:function(){return p("DisplayObjectContainer has been shortened to Container, please use Container from now on."),n.Container}},Strip:{get:function(){return p("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),t.Mesh}},Rope:{get:function(){return p("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),t.Rope}},ParticleContainer:{get:function(){return p("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),e.ParticleContainer}},MovieClip:{get:function(){return p("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),r.AnimatedSprite}},TilingSprite:{get:function(){return p("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),r.TilingSprite}},BitmapText:{get:function(){return p("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),r.BitmapText}},blendModes:{get:function(){return p("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),n.BLEND_MODES}},scaleModes:{get:function(){return p("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),n.SCALE_MODES}},BaseTextureCache:{get:function(){return p("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),n.utils.BaseTextureCache}},TextureCache:{get:function(){return p("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),n.utils.TextureCache}},math:{get:function(){return p("The math namespace is deprecated, please access members already accessible on PIXI."),n}},AbstractFilter:{get:function(){return p("AstractFilter has been renamed to Filter, please use PIXI.Filter"),n.Filter}},TransformManual:{get:function(){return p("TransformManual has been renamed to TransformBase, please update your pixi-spine"),n.TransformBase}},TARGET_FPMS:{get:function(){return p("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),n.settings.TARGET_FPMS},set:function(t){p("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),n.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return p("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),n.settings.FILTER_RESOLUTION},set:function(t){p("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),n.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return p("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),n.settings.RESOLUTION},set:function(t){p("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),n.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return p("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),n.settings.MIPMAP_TEXTURES},set:function(t){p("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),n.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return p("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),n.settings.SPRITE_BATCH_SIZE},set:function(t){p("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),n.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return p("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),n.settings.SPRITE_MAX_TEXTURES},set:function(t){p("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),n.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return p("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),n.settings.RETINA_PREFIX},set:function(t){p("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),n.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return p("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),n.settings.RENDER_OPTIONS}}}),[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}]),l=0;l<u.length;l++)!function(t){var e=u[t];Object.defineProperty(n[e.parent],"DEFAULT",{get:function(){return p("PIXI."+e.parent+".DEFAULT has been deprecated, please use PIXI.settings."+e.target),n.settings[e.target]},set:function(t){p("PIXI."+e.parent+".DEFAULT has been deprecated, please use PIXI.settings."+e.target),n.settings[e.target]=t}})}(l);Object.defineProperties(n.settings,{PRECISION:{get:function(){return p("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),n.settings.PRECISION_FRAGMENT},set:function(t){p("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),n.settings.PRECISION_FRAGMENT=t}}}),r.AnimatedSprite&&Object.defineProperties(r,{MovieClip:{get:function(){return p("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),r.AnimatedSprite}}});r&&Object.defineProperties(r,{TextureTransform:{get:function(){return p("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),n.TextureMatrix}}});n.DisplayObject.prototype.generateTexture=function(t,e,n){return p("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,n)},n.Graphics.prototype.generateTexture=function(t,e){return p("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},n.GroupD8.isSwapWidthHeight=function(t){return p("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),n.GroupD8.isVertical(t)},n.RenderTexture.prototype.render=function(t,e,n,r){this.legacyRenderer.render(t,this,n,e,!r),p("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},n.RenderTexture.prototype.getImage=function(t){return p("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},n.RenderTexture.prototype.getBase64=function(t){return p("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},n.RenderTexture.prototype.getCanvas=function(t){return p("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},n.RenderTexture.prototype.getPixels=function(t){return p("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},n.Sprite.prototype.setTexture=function(t){this.texture=t,p("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},r.BitmapText&&(r.BitmapText.prototype.setText=function(t){this.text=t,p("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")});n.Text.prototype.setText=function(t){this.text=t,p("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},n.Text.calculateFontProperties=function(t){return p("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),n.TextMetrics.measureFont(t)},Object.defineProperties(n.Text,{fontPropertiesCache:{get:function(){return p("Text.fontPropertiesCache is deprecated"),n.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return p("Text.fontPropertiesCanvas is deprecated"),n.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return p("Text.fontPropertiesContext is deprecated"),n.TextMetrics._context}}}),n.Text.prototype.setStyle=function(t){this.style=t,p("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},n.Text.prototype.determineFontProperties=function(t){return p("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),n.TextMetrics.measureFont(t)},n.Text.getFontStyle=function(t){return p("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(t=(t=t||{})instanceof n.TextStyle?t:new n.TextStyle(t)).toFontString()},Object.defineProperties(n.TextStyle.prototype,{font:{get:function(){p("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){p("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),1<t.indexOf("italic")?this._fontStyle="italic":-1<t.indexOf("oblique")?this._fontStyle="oblique":this._fontStyle="normal",-1<t.indexOf("small-caps")?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),n=-1;this._fontSize=26;for(var r=0;r<e.length;++r)if(e[r].match(/(px|pt|em|%)/)){n=r,this._fontSize=e[r];break}this._fontWeight="normal";for(var i=0;i<n;++i)if(e[i].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[i];break}if(-1<n&&n<e.length-1){this._fontFamily="";for(var o=n+1;o<e.length;++o)this._fontFamily+=e[o]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),n.Texture.prototype.setFrame=function(t){this.frame=t,p("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},n.Texture.addTextureToCache=function(t,e){n.Texture.addToCache(t,e),p("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},n.Texture.removeTextureFromCache=function(t){return p("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),n.BaseTexture.removeFromCache(t),n.Texture.removeFromCache(t)},Object.defineProperties(i,{AbstractFilter:{get:function(){return p("AstractFilter has been renamed to Filter, please use PIXI.Filter"),n.AbstractFilter}},SpriteMaskFilter:{get:function(){return p("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),n.SpriteMaskFilter}},VoidFilter:{get:function(){return p("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),i.AlphaFilter}}}),n.utils.uuid=function(){return p("utils.uuid() is deprecated, please use utils.uid() from now on."),n.utils.uid()},n.utils.canUseNewCanvasBlendModes=function(){return p("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),n.CanvasTinter.canUseMultiply};var c=!0;Object.defineProperty(n.utils,"_saidHello",{set:function(t){t&&(p("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),c=t},get:function(){return c}}),o.BasePrepare&&(o.BasePrepare.prototype.register=function(t,e){return p("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this});o.canvas&&Object.defineProperty(o.canvas,"UPLOADS_PER_FRAME",{set:function(){p("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return p("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});o.webgl&&Object.defineProperty(o.webgl,"UPLOADS_PER_FRAME",{set:function(){p("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return p("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});{var h;s.Loader&&(h=s.Resource,o=s.Loader,Object.defineProperties(h.prototype,{isJson:{get:function(){return p("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===h.TYPE.JSON}},isXml:{get:function(){return p("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===h.TYPE.XML}},isImage:{get:function(){return p("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===h.TYPE.IMAGE}},isAudio:{get:function(){return p("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===h.TYPE.AUDIO}},isVideo:{get:function(){return p("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===h.TYPE.VIDEO}}}),Object.defineProperties(o.prototype,{before:{get:function(){return p("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return p("The after() method is deprecated, please use use()."),this.use}}}))}a.interactiveTarget&&Object.defineProperty(a.interactiveTarget,"defaultCursor",{set:function(t){p("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return p("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}});a.InteractionManager&&(Object.defineProperty(a.InteractionManager,"defaultCursorStyle",{set:function(t){p("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return p("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(a.InteractionManager,"currentCursorStyle",{set:function(t){p("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return p("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))};var r={};function p(t){var e;r[t]||(void 0===(e=(new Error).stack)?console.warn("Deprecation Warning: ",t):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",t),console.warn(e))),r[t]=!0)}},{}],221:[function(t,e,n){"use strict";n.__esModule=!0;var s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core"));var a=new s.Rectangle,t=(r.prototype.image=function(t){var e;return(e=new Image).src=this.base64(t),e},r.prototype.base64=function(t){return this.canvas(t).toDataURL()},r.prototype.canvas=function(t){var e=this.renderer,n=void 0,r=void 0,i=void 0,o=void 0,t=((o=t?t instanceof s.RenderTexture?t:e.generateTexture(t):o)?(n=o.baseTexture._canvasRenderTarget.context,r=o.baseTexture._canvasRenderTarget.resolution,i=o.frame):(n=e.rootContext,r=e.resolution,(i=a).width=this.renderer.width,i.height=this.renderer.height),Math.floor(i.width*r+1e-4)),o=Math.floor(i.height*r+1e-4),e=new s.CanvasRenderTarget(t,o,1),n=n.getImageData(i.x*r,i.y*r,t,o);return e.context.putImageData(n,0,0),e.canvas},r.prototype.pixels=function(t){var e=this.renderer,n=void 0,r=void 0,i=void 0,o=void 0;return(o=t?t instanceof s.RenderTexture?t:e.generateTexture(t):o)?(n=o.baseTexture._canvasRenderTarget.context,r=o.baseTexture._canvasRenderTarget.resolution,i=o.frame):(n=e.rootContext,(i=a).width=e.width,i.height=e.height),n.getImageData(0,0,i.width*r,i.height*r).data},r.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},r);function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");(this.renderer=t).extract=this}n.default=t,s.CanvasRenderer.registerPlugin("extract",t)},{"../../core":154}],222:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("./webgl/WebGLExtract"),i=(Object.defineProperty(n,"webgl",{enumerable:!0,get:function(){return o(r).default}}),t("./canvas/CanvasExtract"));function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"canvas",{enumerable:!0,get:function(){return o(i).default}})},{"./canvas/CanvasExtract":221,"./webgl/WebGLExtract":223}],223:[function(t,e,n){"use strict";n.__esModule=!0;var c=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core"));var h=new c.Rectangle,t=(r.prototype.image=function(t){var e;return(e=new Image).src=this.base64(t),e},r.prototype.base64=function(t){return this.canvas(t).toDataURL()},r.prototype.canvas=function(t){var e=this.renderer,n=void 0,r=void 0,i=void 0,o=!1,s=void 0,a=!1,t=(t&&(t instanceof c.RenderTexture?s=t:(s=this.renderer.generateTexture(t),a=!0)),s?(r=(n=s.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,i=s.frame,o=!1):(r=(n=this.renderer.rootRenderTarget).resolution,o=!0,(i=h).width=n.size.width,i.height=n.size.height),Math.floor(i.width*r+1e-4)),u=Math.floor(i.height*r+1e-4),l=new c.CanvasRenderTarget(t,u,1);return n&&(e.bindRenderTarget(n),n=new Uint8Array(4*t*u),(e=e.gl).readPixels(i.x*r,i.y*r,t,u,e.RGBA,e.UNSIGNED_BYTE,n),(i=l.context.getImageData(0,0,t,u)).data.set(n),l.context.putImageData(i,0,0),o)&&(l.context.scale(1,-1),l.context.drawImage(l.canvas,0,-u)),a&&s.destroy(!0),l.canvas},r.prototype.pixels=function(t){var e=this.renderer,n=void 0,r=void 0,i=void 0,o=void 0,s=!1,t=(t&&(t instanceof c.RenderTexture?o=t:(o=this.renderer.generateTexture(t),s=!0)),o?(r=(n=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,i=o.frame):(r=(n=this.renderer.rootRenderTarget).resolution,(i=h).width=n.size.width,i.height=n.size.height),i.width*r),a=i.height*r,u=new Uint8Array(4*t*a);return n&&(e.bindRenderTarget(n),(n=e.gl).readPixels(i.x*r,i.y*r,t,a,n.RGBA,n.UNSIGNED_BYTE,u)),s&&o.destroy(!0),u},r.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},r);function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");(this.renderer=t).extract=this}n.default=t,c.WebGLRenderer.registerPlugin("extract",t)},{"../../core":154}],224:[function(t,e,n){"use strict";n.__esModule=!0;var o=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../core"));t=function(r){var t=i,e=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function i(t,e){var n;if(this instanceof i)return(n=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,r.call(this,t[0]instanceof s.Texture?t[0]:t[0].texture)))._textures=null,n._durations=null,n.textures=t,n._autoUpdate=!1!==e,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n.playing=!1,n;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),i.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate)&&s.ticker.shared.remove(this.update,this)},i.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&s.ticker.shared.add(this.update,this,s.UPDATE_PRIORITY.HIGH))},i.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},i.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},i.prototype.update=function(t){var e=this.animationSpeed*t,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())},i.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.updateAnchor&&this._anchor.copy(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},i.prototype.destroy=function(t){this.stop(),r.prototype.destroy.call(this,t)},i.fromFrames=function(t){for(var e=[],n=0;n<t.length;++n)e.push(s.Texture.fromFrame(t[n]));return new i(e)},i.fromImages=function(t){for(var e=[],n=0;n<t.length;++n)e.push(s.Texture.fromImage(t[n]));return new i(e)},o(i,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof s.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),i}(s.Sprite);n.default=t},{"../core":154}],225:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var O=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../core")),s=o(t("../core/math/ObservablePoint")),w=t("../core/utils"),T=o(t("../core/settings"));function o(t){return t&&t.__esModule?t:{default:t}}t=function(o){var t=M,e=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function M(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this,i=M;if(r instanceof i)return(e=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,o.call(this)))._textWidth=0,e._textHeight=0,e._glyphs=[],e._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||"left",name:null,size:0},e.font=n.font,e._text=t,e._maxWidth=0,e._maxLineHeight=0,e._letterSpacing=0,e._anchor=new s.default(function(){e.dirty=!0},e,0,0),e.dirty=!1,e.updateText(),e;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),M.prototype.updateText=function(){for(var t=M.fonts[this._font.name],e=this._font.size/t.size,n=new O.Point,r=[],i=[],o=this.text.replace(/(?:\r\n|\r)/g,"\n"),s=o.length,a=this._maxWidth*t.size/this._font.size,u=null,l=0,c=0,h=0,p=-1,f=0,d=0,g=0,y=0;y<s;y++){var m=o.charCodeAt(y),v=o.charAt(y);/(?:\s)/.test(v)&&(p=y,f=l),"\r"===v||"\n"===v?(i.push(l),c=Math.max(c,l),++h,++d,n.x=0,n.y+=t.lineHeight,u=null):(v=t.chars[m])&&(u&&v.kerning[u]&&(n.x+=v.kerning[u]),r.push({texture:v.texture,line:h,charCode:m,position:new O.Point(n.x+v.xOffset+this._letterSpacing/2,n.y+v.yOffset)}),n.x+=v.xAdvance+this._letterSpacing,l=n.x,g=Math.max(g,v.yOffset+v.texture.height),u=m,-1!==p)&&0<a&&n.x>a&&(++d,O.utils.removeItems(r,1+p-d,1+y-p),y=p,p=-1,i.push(f),c=Math.max(c,f),h++,n.x=0,n.y+=t.lineHeight,u=null)}for(var _=o.charAt(o.length-1),b=("\r"!==_&&"\n"!==_&&(/(?:\s)/.test(_)&&(l=f),i.push(l),c=Math.max(c,l)),[]),x=0;x<=h;x++){var w=0;"right"===this._font.align?w=c-i[x]:"center"===this._font.align&&(w=(c-i[x])/2),b.push(w)}for(var T=r.length,E=this.tint,S=0;S<T;S++){var C=this._glyphs[S];C?C.texture=r[S].texture:(C=new O.Sprite(r[S].texture),this._glyphs.push(C)),C.position.x=(r[S].position.x+b[r[S].line])*e,C.position.y=r[S].position.y*e,C.scale.x=C.scale.y=e,C.tint=E,C.parent||this.addChild(C)}for(var A=T;A<this._glyphs.length;++A)this.removeChild(this._glyphs[A]);if(this._textWidth=c*e,this._textHeight=(n.y+t.lineHeight)*e,0!==this.anchor.x||0!==this.anchor.y)for(var P=0;P<T;P++)this._glyphs[P].x-=this._textWidth*this.anchor.x,this._glyphs[P].y-=this._textHeight*this.anchor.y;this._maxLineHeight=g*e},M.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},M.prototype.getLocalBounds=function(){return this.validate(),o.prototype.getLocalBounds.call(this)},M.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},M.registerFont=function(t,e){var n={},r=t.getElementsByTagName("info")[0],i=t.getElementsByTagName("common")[0],o=t.getElementsByTagName("page"),s=(0,w.getResolutionOfUrl)(o[0].getAttribute("file"),T.default.RESOLUTION),a={};n.font=r.getAttribute("face"),n.size=parseInt(r.getAttribute("size"),10),n.lineHeight=parseInt(i.getAttribute("lineHeight"),10)/s,n.chars={},e instanceof O.Texture&&(e=[e]);for(var u=0;u<o.length;u++){var l=o[u].getAttribute("id"),c=o[u].getAttribute("file");a[l]=e instanceof Array?e[u]:e[c]}for(var h=t.getElementsByTagName("char"),p=0;p<h.length;p++){var f=h[p],d=parseInt(f.getAttribute("id"),10),g=f.getAttribute("page")||0,y=new O.Rectangle(parseInt(f.getAttribute("x"),10)/s+a[g].frame.x/s,parseInt(f.getAttribute("y"),10)/s+a[g].frame.y/s,parseInt(f.getAttribute("width"),10)/s,parseInt(f.getAttribute("height"),10)/s);n.chars[d]={xOffset:parseInt(f.getAttribute("xoffset"),10)/s,yOffset:parseInt(f.getAttribute("yoffset"),10)/s,xAdvance:parseInt(f.getAttribute("xadvance"),10)/s,kerning:{},texture:new O.Texture(a[g].baseTexture,y),page:g}}for(var m=t.getElementsByTagName("kerning"),v=0;v<m.length;v++){var _=m[v],b=parseInt(_.getAttribute("first"),10)/s,x=parseInt(_.getAttribute("second"),10)/s,_=parseInt(_.getAttribute("amount"),10)/s;n.chars[x]&&(n.chars[x].kerning[b]=_)}return M.fonts[n.font]=n},r(M,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&0<=t?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=2<=t.length?parseInt(t[0],10):M.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),M}(O.Container);(n.default=t).fonts={}},{"../core":154,"../core/math/ObservablePoint":157,"../core/settings":190,"../core/utils":214}],226:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../core")),t=t("../core/sprites/canvas/CanvasTinter"),_=(t=t)&&t.__esModule?t:{default:t};var a=new v.Point,t=function(o){var t=s,e=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function s(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100,r=this,i=s;if(r instanceof i)return(r=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,o.call(this,t))).tileTransform=new v.TransformStatic,r._width=e,r._height=n,r._canvasPattern=null,r.uvTransform=t.transform||new v.TextureMatrix(t),r.pluginName="tilingSprite",r.uvRespectAnchor=!1,r;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),s.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},s.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},s.prototype._renderCanvas=function(t){var e,n,r,i,o,s,a,u,l,c,h,p,f,d,g,y,m=this._texture;m.baseTexture.hasLoaded&&(e=t.context,n=this.worldTransform,r=t.resolution,g=2===m.rotate,i=(y=m.baseTexture).resolution,o=this.tilePosition.x/this.tileScale.x%m.orig.width*i,s=this.tilePosition.y/this.tileScale.y%m.orig.height*i,this._textureID===this._texture._updateID&&this.cachedTint===this.tint||(this._textureID=this._texture._updateID,a=new v.CanvasRenderTarget(m.orig.width,m.orig.height,i),16777215!==this.tint?(this.tintedTexture=_.default.getTintedTexture(this,this.tint),a.context.drawImage(this.tintedTexture,0,0)):(u=m._frame.x*i,l=m._frame.y*i,c=m._frame.width*i,h=m._frame.height*i,p=(m.trim||m.orig).width*i,f=(m.trim||m.orig).height*i,d=(m.trim?m.trim.x:0)*i,m=(m.trim?m.trim.y:0)*i,g?(a.context.rotate(-Math.PI/2),a.context.translate(-f,0),a.context.drawImage(y.source,u,l,c,h,-m,d,f,p)):a.context.drawImage(y.source,u,l,c,h,d,m,p,f)),this.cachedTint=this.tint,this._canvasPattern=a.context.createPattern(a.canvas,"repeat")),e.globalAlpha=this.worldAlpha,e.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t.setBlendMode(this.blendMode),e.fillStyle=this._canvasPattern,e.scale(this.tileScale.x/i,this.tileScale.y/i),g=this.anchor.x*-this._width*i,y=this.anchor.y*-this._height*i,this.uvRespectAnchor?(e.translate(o,s),e.fillRect(g-o,y-s,this._width/this.tileScale.x*i,this._height/this.tileScale.y*i)):(e.translate(o+g,s+y),e.fillRect(-o,-s,this._width/this.tileScale.x*i,this._height/this.tileScale.y*i)))},s.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,n,r)},s.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new v.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):o.prototype.getLocalBounds.call(this,t)},s.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,a);var t=this._width,e=this._height,n=-t*this.anchor._x;if(a.x>=n&&a.x<n+t){n=-e*this.anchor._y;if(a.y>=n&&a.y<n+e)return!0}return!1},s.prototype.destroy=function(t){o.prototype.destroy.call(this,t),this.tileTransform=null,this.uvTransform=null},s.from=function(t,e,n){return new s(v.Texture.from(t),e,n)},s.fromFrame=function(t,e,n){var r=v.utils.TextureCache[t];if(r)return new s(r,e,n);throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this)},s.fromImage=function(t,e,n,r,i){return new s(v.Texture.fromImage(t,r,i),e,n)},r(s,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),s}(v.Sprite);n.default=t},{"../core":154,"../core/sprites/canvas/CanvasTinter":193}],227:[function(t,e,n){"use strict";var a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../core")),u=r(t("../core/textures/Texture")),l=r(t("../core/textures/BaseTexture")),c=t("../core/utils");function r(t){return t&&t.__esModule?t:{default:t}}function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null}var t=a.DisplayObject,h=new a.Matrix;t.prototype._cacheAsBitmap=!1,t.prototype._cacheData=!1;Object.defineProperties(t.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(e=void 0,(this._cacheAsBitmap=t)?(this._cacheData||(this._cacheData=new i),(e=this._cacheData).originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),t.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},t.prototype._initCachedDisplayObject=function(t){var e,n,r,i,o,s;this._cacheData&&this._cacheData.sprite||(e=this.alpha,this.alpha=1,t.currentRenderer.flush(),n=this.getLocalBounds().clone(),this._filters&&this._filters.length&&(r=this._filters[0].padding,n.pad(r)),n.ceil(a.settings.RESOLUTION),r=t._activeRenderTarget,i=t.filterManager.filterStack,o=a.RenderTexture.create(n.width,n.height),s="cacheAsBitmap_"+(0,c.uid)(),this._cacheData.textureCacheId=s,l.default.addToCache(o.baseTexture,s),u.default.addToCache(o,s),(s=h).tx=-n.x,s.ty=-n.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,o,!0,s,!0),t.bindRenderTarget(r),t.filterManager.filterStack=i,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,(s=new a.Sprite(o)).transform.worldTransform=this.transform.worldTransform,s.anchor.x=-(n.x/n.width),s.anchor.y=-(n.y/n.height),s.alpha=e,s._bounds=this._bounds,this._cacheData.sprite=s,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=s.containsPoint.bind(s))},t.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},t.prototype._initCachedDisplayObjectCanvas=function(t){var e,n,r,i,o;this._cacheData&&this._cacheData.sprite||(e=this.getLocalBounds(),n=this.alpha,this.alpha=1,r=t.context,e.ceil(a.settings.RESOLUTION),i=a.RenderTexture.create(e.width,e.height),o="cacheAsBitmap_"+(0,c.uid)(),this._cacheData.textureCacheId=o,l.default.addToCache(i.baseTexture,o),u.default.addToCache(i,o),this.transform.localTransform.copy(o=h),o.invert(),o.tx-=e.x,o.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,i,!0,o,!1),t.context=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,(o=new a.Sprite(i)).transform.worldTransform=this.transform.worldTransform,o.anchor.x=-(e.x/e.width),o.anchor.y=-(e.y/e.height),o.alpha=n,o._bounds=this._bounds,this._cacheData.sprite=o,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=o.containsPoint.bind(o))},t.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},t.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},t.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,l.default.removeFromCache(this._cacheData.textureCacheId),u.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},t.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},{"../core":154,"../core/textures/BaseTexture":201,"../core/textures/Texture":204,"../core/utils":214}],228:[function(t,e,n){"use strict";t=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../core"));t.DisplayObject.prototype.name=null,t.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":154}],229:[function(t,e,n){"use strict";var r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../core"));r.DisplayObject.prototype.getGlobalPosition=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new r.Point;return this.parent?this.parent.toGlobal(this.position,t,1<arguments.length&&void 0!==arguments[1]&&arguments[1]):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":154}],230:[function(t,e,n){"use strict";n.__esModule=!0,n.BitmapText=n.TilingSpriteRenderer=n.TilingSprite=n.AnimatedSprite=void 0;var r=t("./AnimatedSprite"),i=(Object.defineProperty(n,"AnimatedSprite",{enumerable:!0,get:function(){return a(r).default}}),t("./TilingSprite")),o=(Object.defineProperty(n,"TilingSprite",{enumerable:!0,get:function(){return a(i).default}}),t("./webgl/TilingSpriteRenderer")),s=(Object.defineProperty(n,"TilingSpriteRenderer",{enumerable:!0,get:function(){return a(o).default}}),t("./BitmapText"));function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"BitmapText",{enumerable:!0,get:function(){return a(s).default}}),t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition")},{"./AnimatedSprite":224,"./BitmapText":225,"./TilingSprite":226,"./cacheAsBitmap":227,"./getChildByName":228,"./getGlobalPosition":229,"./webgl/TilingSpriteRenderer":231}],231:[function(t,e,n){"use strict";n.__esModule=!0;var f=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core")),d=t("../../core/const");t("path");var g=new f.Matrix,t=function(e){var t=r,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);function r(t){if(this instanceof r)return(t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,e.call(this,t))).shader=null,t.simpleShader=null,t.quad=null,t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n),r.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new f.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new f.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new f.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},r.prototype.render=function(t){var e=this.renderer,n=this.quad,r=(e.bindVao(n.vao),n.vertices),r=(r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((r=n.uvs)[0]=r[6]=-t.anchor.x,r[1]=r[3]=-t.anchor.y,r[2]=r[4]=1-t.anchor.x,r[5]=r[7]=1-t.anchor.y),n.upload(),t._texture),i=r.baseTexture,o=t.tileTransform.localTransform,s=t.uvTransform,a=i.isPowerOfTwo&&r.frame.width===i.width&&r.frame.height===i.height,u=(a&&(i._glTextures[e.CONTEXT_UID]?a=i.wrapMode!==d.WRAP_MODES.CLAMP:i.wrapMode===d.WRAP_MODES.CLAMP&&(i.wrapMode=d.WRAP_MODES.REPEAT)),a?this.simpleShader:this.shader),l=(e.bindShader(u),r.width),c=r.height,h=t._width,p=t._height;g.set(o.a*l/h,o.b*l/p,o.c*c/h,o.d*c/p,o.tx/h,o.ty/p),g.invert(),a?g.prepend(s.mapCoord):(u.uniforms.uMapCoord=s.mapCoord.toArray(!0),u.uniforms.uClampFrame=s.uClampFrame,u.uniforms.uClampOffset=s.uClampOffset),u.uniforms.uTransform=g.toArray(!0),u.uniforms.uColor=f.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,u.uniforms.uColor,i.premultipliedAlpha),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.uSampler=e.bindTexture(r),e.setBlendMode(f.utils.correctBlendMode(t.blendMode,i.premultipliedAlpha)),n.vao.draw(this.renderer.gl.TRIANGLES,6,0)},r}(f.ObjectRenderer);n.default=t,f.WebGLRenderer.registerPlugin("tilingSprite",t)},{"../../core":154,"../../core/const":135,path:321}],232:[function(t,e,n){"use strict";n.__esModule=!0;var o=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core"));t("path");t=function(r){var t=i,e=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=this,n=i;if(e instanceof n)return(e=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,r.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"))).alpha=t,e.glShaderKey="alpha",e;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o(i,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),i}(i.Filter);n.default=t},{"../../core":154,path:321}],233:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core")),u=o(t("./BlurXFilter")),l=o(t("./BlurYFilter"));function o(t){return t&&t.__esModule?t:{default:t}}t=function(o){var t=s,e=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function s(t,e,n,r){var i;if(this instanceof s)return(i=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,o.call(this))).blurXFilter=new u.default(t,e,n,r),i.blurYFilter=new l.default(t,e,n,r),i.padding=0,i.resolution=n||a.settings.RESOLUTION,i.quality=e||4,i.blur=t||8,i;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),s.prototype.apply=function(t,e,n){var r=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,r,!0),this.blurYFilter.apply(t,r,n,!1),t.returnRenderTarget(r)},r(s,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),s}(a.Filter);n.default=t},{"../../core":154,"./BlurXFilter":234,"./BlurYFilter":235}],234:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core")),l=o(t("./generateBlurVertSource")),c=o(t("./generateBlurFragSource")),h=o(t("./getMaxBlurKernelSize"));function o(t){return t&&t.__esModule?t:{default:t}}t=function(o){var t=s,e=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function s(t,e,n,r){var i;if(this instanceof s)return i=(0,l.default)(r=r||5,!0),r=(0,c.default)(r),(i=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,o.call(this,i,r))).resolution=n||a.settings.RESOLUTION,i._quality=0,i.quality=e||4,i.strength=t||8,i.firstRun=!0,i;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),s.prototype.apply=function(t,e,n,r){if(this.firstRun&&(i=t.renderer.gl,i=(0,h.default)(i),this.vertexSrc=(0,l.default)(i,!0),this.fragmentSrc=(0,c.default)(i),this.firstRun=!1),this.uniforms.strength=1/n.size.width*(n.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,r);else{for(var i=t.getRenderTarget(!0),o=e,s=i,a=0;a<this.passes-1;a++){t.applyFilter(this,o,s,!0);var u=s,s=o,o=u}t.applyFilter(this,o,n,r),t.returnRenderTarget(i)}},r(s,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),s}(a.Filter);n.default=t},{"../../core":154,"./generateBlurFragSource":236,"./generateBlurVertSource":237,"./getMaxBlurKernelSize":238}],235:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core")),l=o(t("./generateBlurVertSource")),c=o(t("./generateBlurFragSource")),h=o(t("./getMaxBlurKernelSize"));function o(t){return t&&t.__esModule?t:{default:t}}t=function(o){var t=s,e=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function s(t,e,n,r){var i;if(this instanceof s)return i=(0,l.default)(r=r||5,!1),r=(0,c.default)(r),(i=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,o.call(this,i,r))).resolution=n||a.settings.RESOLUTION,i._quality=0,i.quality=e||4,i.strength=t||8,i.firstRun=!0,i;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),s.prototype.apply=function(t,e,n,r){if(this.firstRun&&(i=t.renderer.gl,i=(0,h.default)(i),this.vertexSrc=(0,l.default)(i,!1),this.fragmentSrc=(0,c.default)(i),this.firstRun=!1),this.uniforms.strength=1/n.size.height*(n.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,r);else{for(var i=t.getRenderTarget(!0),o=e,s=i,a=0;a<this.passes-1;a++){t.applyFilter(this,o,s,!0);var u=s,s=o,o=u}t.applyFilter(this,o,n,r),t.returnRenderTarget(i)}},r(s,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),s}(a.Filter);n.default=t},{"../../core":154,"./generateBlurFragSource":236,"./generateBlurVertSource":237,"./getMaxBlurKernelSize":238}],236:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){for(var e=u[t],n=e.length,r=l,i="",o=void 0,s=0;s<t;s++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s);n<=(o=s)&&(o=t-s-1),a=a.replace("%value%",e[o]),i=i+a+"\n"}return r=(r=r.replace("%blur%",i)).replace("%size%",t)};var u={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},l=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],237:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e){var n=Math.ceil(t/2),r=u,i="",o=void 0;o=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var a=o.replace("%index%",s);a=a.replace("%sampleIndex%",s-(n-1)+".0"),i=i+a+"\n"}return r=(r=r.replace("%blur%",i)).replace("%size%",t)};var u=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],238:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=t.getParameter(t.MAX_VARYING_VECTORS),n=15;for(;e<n;)n-=2;return n}},{}],239:[function(t,e,n){"use strict";n.__esModule=!0;var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core"));t("path");t=function(e){var t=r,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);function r(){var t;if(this instanceof r)return(t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"))).uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],t.alpha=1,t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n),r.prototype._loadMatrix=function(t){var e=t;1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(e,this.uniforms.m,t),e=this._colorMatrix(e)),this.uniforms.m=e},r.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19]+e[4],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19]+e[9],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19]+e[14],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19]+e[19],t},r.prototype._colorMatrix=function(t){t=new Float32Array(t);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},r.prototype.brightness=function(t,e){this._loadMatrix([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0],e)},r.prototype.greyscale=function(t,e){this._loadMatrix([t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0],e)},r.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},r.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),t=Math.sin(t),r=(0,Math.sqrt)(1/3);this._loadMatrix([n+1/3*(1-n),1/3*(1-n)-r*t,1/3*(1-n)+r*t,0,0,1/3*(1-n)+r*t,n+1/3*(1-n),1/3*(1-n)-r*t,0,0,1/3*(1-n)-r*t,1/3*(1-n)+r*t,n+1/3*(1-n),0,0,0,0,0,1,0],e)},r.prototype.contrast=function(t,e){var t=(t||0)+1,n=-.5*(t-1);this._loadMatrix([t,0,0,0,n,0,t,0,0,n,0,0,t,0,n,0,0,0,1,0],e)},r.prototype.saturate=function(){var t=2*(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)/3+1,e=-.5*(t-1);this._loadMatrix([t,e,e,0,0,e,t,e,0,0,e,e,t,0,0,0,0,0,1,0],arguments[1])},r.prototype.desaturate=function(){this.saturate(-1)},r.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},r.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},r.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},r.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},r.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},r.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},r.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},r.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},r.prototype.colorTone=function(t,e,n,r,i){var o=((n=n||16770432)>>16&255)/255,s=(n>>8&255)/255,n=(255&n)/255,a=((r=r||3375104)>>16&255)/255,u=(r>>8&255)/255,r=(255&r)/255;this._loadMatrix([.3,.59,.11,0,0,o,s,n,t=t||.2,0,a,u,r,e=e||.15,0,o-a,s-u,n-r,0,0],i)},r.prototype.night=function(t,e){this._loadMatrix([-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],e)},r.prototype.predator=function(t,e){this._loadMatrix([11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0],e)},r.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},r.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},i(r,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),r}(o.Filter);(n.default=t).prototype.grayscale=t.prototype.greyscale},{"../../core":154,path:321}],240:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core"));t("path");t=function(i){var t=o,e=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function o(t,e){var n,r;if(this instanceof o)return n=new s.Matrix,t.renderable=!1,(r=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"))).maskSprite=t,r.maskMatrix=n,r.uniforms.mapSampler=t._texture,r.uniforms.filterMatrix=n,r.uniforms.scale={x:1,y:1},r.scale=new s.Point(e=null==e?20:e,e),r;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o.prototype.apply=function(t,e,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,n)},r(o,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),o}(s.Filter);n.default=t},{"../../core":154,path:321}],241:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core"));t("path");t=function(n){var t=r,e=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var t=this,e=n.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n');if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r}(r.Filter);n.default=t},{"../../core":154,path:321}],242:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("./fxaa/FXAAFilter"),i=(Object.defineProperty(n,"FXAAFilter",{enumerable:!0,get:function(){return h(r).default}}),t("./noise/NoiseFilter")),o=(Object.defineProperty(n,"NoiseFilter",{enumerable:!0,get:function(){return h(i).default}}),t("./displacement/DisplacementFilter")),s=(Object.defineProperty(n,"DisplacementFilter",{enumerable:!0,get:function(){return h(o).default}}),t("./blur/BlurFilter")),a=(Object.defineProperty(n,"BlurFilter",{enumerable:!0,get:function(){return h(s).default}}),t("./blur/BlurXFilter")),u=(Object.defineProperty(n,"BlurXFilter",{enumerable:!0,get:function(){return h(a).default}}),t("./blur/BlurYFilter")),l=(Object.defineProperty(n,"BlurYFilter",{enumerable:!0,get:function(){return h(u).default}}),t("./colormatrix/ColorMatrixFilter")),c=(Object.defineProperty(n,"ColorMatrixFilter",{enumerable:!0,get:function(){return h(l).default}}),t("./alpha/AlphaFilter"));function h(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"AlphaFilter",{enumerable:!0,get:function(){return h(c).default}})},{"./alpha/AlphaFilter":232,"./blur/BlurFilter":233,"./blur/BlurXFilter":234,"./blur/BlurYFilter":235,"./colormatrix/ColorMatrixFilter":239,"./displacement/DisplacementFilter":240,"./fxaa/FXAAFilter":241,"./noise/NoiseFilter":243}],243:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core"));t("path");t=function(i){var t=o,e=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.random(),n=this,r=o;if(n instanceof r)return(n=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"))).noise=t,n.seed=e,n;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r(o,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),o}(o.Filter);n.default=t},{"../../core":154,path:321}],244:[function(g,t,y){!function(d){!function(){"use strict";y.__esModule=!0,y.loader=y.prepare=y.particles=y.mesh=y.loaders=y.interaction=y.filters=y.extras=y.extract=y.accessibility=void 0;var e=g("./polyfill"),n=(Object.keys(e).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(y,t,{enumerable:!0,get:function(){return e[t]}})}),g("./core")),t=(Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(y,t,{enumerable:!0,get:function(){return n[t]}})}),g("./deprecation")),t=(t=t)&&t.__esModule?t:{default:t},r=p(g("./accessibility")),i=p(g("./extract")),o=p(g("./extras")),s=p(g("./filters")),a=p(g("./interaction")),u=p(g("./loaders")),l=p(g("./mesh")),c=p(g("./particles")),h=p(g("./prepare"));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}n.utils.mixins.performMixins();var f=u.shared||null;y.accessibility=r,y.extract=i,y.extras=o,y.filters=s,y.interaction=a,y.loaders=u,y.mesh=l,y.particles=c,y.prepare=h,y.loader=f,"function"==typeof t.default&&(0,t.default)(y),d.PIXI=y}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":131,"./core":154,"./deprecation":220,"./extract":222,"./extras":230,"./filters":242,"./interaction":249,"./loaders":252,"./mesh":261,"./particles":264,"./polyfill":271,"./prepare":275}],245:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../core"));function s(){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.global=new o.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}s.prototype.getLocalPosition=function(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)},s.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},s.prototype.reset=function(){this.isPrimary=!1},r(s,[{key:"pointerId",get:function(){return this.identifier}}]),n.default=s},{"../core":154}],246:[function(t,e,n){"use strict";function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}n.__esModule=!0,r.prototype.stopPropagation=function(){this.stopped=!0},r.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},n.default=r},{}],247:[function(t,e,n){"use strict";n.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../core")),a=i(t("./InteractionData")),u=i(t("./InteractionEvent")),c=i(t("./InteractionTrackingData")),r=i(t("eventemitter3")),t=i(t("./interactiveTarget"));function i(t){return t&&t.__esModule?t:{default:t}}s.utils.mixins.delayMixin(s.DisplayObject.prototype,t.default);var l={target:null,data:{global:null}},t=function(r){var t=i,e=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function i(t,e){var n;if(this instanceof i)return e=e||{},(n=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,r.call(this))).renderer=t,n.autoPreventDefault=void 0===e.autoPreventDefault||e.autoPreventDefault,n.interactionFrequency=e.interactionFrequency||10,n.mouse=new a.default,n.mouse.identifier=1,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[1]=n.mouse,n.interactionDataPool=[],n.eventData=new u.default,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.mouseOverRenderer=!1,n.supportsTouchEvents="ontouchstart"in window,n.supportsPointerEvents=!!window.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n._tempPoint=new s.Point,n.resolution=1,n.setTargetElement(n.renderer.view,n.renderer.resolution),n;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),i.prototype.hitTest=function(t,e){return l.target=null,l.data.global=t,e=e||this.renderer._lastObjectRendered,this.processInteractive(l,e,null,!0),l.target},i.prototype.setTargetElement=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},i.prototype.addEvents=function(){this.interactionDOMElement&&(s.ticker.shared.add(this.update,this,s.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},i.prototype.removeEvents=function(){this.interactionDOMElement&&(s.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},i.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)this.activeInteractionData.hasOwnProperty(e)&&(e=this.activeInteractionData[e]).originalEvent&&"touch"!==e.pointerType&&(e=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e),this.processInteractive(e,this.renderer._lastObjectRendered,this.processPointerOverOut,!0));this.setCursorMode(this.cursor)}},i.prototype.setCursorMode=function(t){if(this.currentCursorMode!==(t=t||"default")){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":o(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},i.prototype.dispatchEvent=function(t,e,n){n.stopped||(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},i.prototype.mapPositionToPoint=function(t,e,n){var r=void 0,r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0},i=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*i,t.y=(n-r.top)*(this.interactionDOMElement.height/r.height)*i},i.prototype.processInteractive=function(t,e,n,r,i){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=i=e.interactive||i,u=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:u=r=!1),a=!1):e._mask&&r&&!e._mask.containsPoint(o)&&(u=r=!1),u&&e.interactiveChildren&&e.children)for(var l=e.children,c=l.length-1;0<=c;c--){var h=l[c],p=this.processInteractive(t,h,n,r,a);p&&h.parent&&(a=!1,p)&&(t.target&&(r=!1),s=!0)}return i&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive)&&(s&&!t.target&&(t.target=e),n)&&n(t,e,!!s),s},i.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType)for(var e=this.normalizeToPointerData(t),n=(this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault(),e.length),r=0;r<n;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,o);o.data.originalEvent=t,this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===i.pointerType?this.emit("touchstart",o):"mouse"!==i.pointerType&&"pen"!==i.pointerType||(o=2===i.button,this.emit(o?"rightdown":"mousedown",this.eventData))}},i.prototype.processPointerDown=function(t,e,n){var r=t.data,i=t.data.identifier;n&&(e.trackedPointers[i]||(e.trackedPointers[i]=new c.default(i)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType?this.dispatchEvent(e,"touchstart",t):"mouse"!==r.pointerType&&"pen"!==r.pointerType||((n=2===r.button)?e.trackedPointers[i].rightDown=!0:e.trackedPointers[i].leftDown=!0,this.dispatchEvent(e,n?"rightdown":"mousedown",t)))},i.prototype.onPointerComplete=function(t,e,n){for(var r=this.normalizeToPointerData(t),i=r.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<i;s++){var a,u=r[s],l=this.getInteractionDataForPointerId(u),c=this.configureInteractionEventForDOMEvent(this.eventData,u,l);c.data.originalEvent=t,this.processInteractive(c,this.renderer._lastObjectRendered,n,e||!o),this.emit(e?"pointercancel":"pointerup"+o,c),"mouse"===u.pointerType||"pen"===u.pointerType?(a=2===u.button,this.emit(a?"rightup"+o:"mouseup"+o,c)):"touch"===u.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,c),this.releaseInteractionDataForPointerId(u.pointerId,l))}},i.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},i.prototype.processPointerCancel=function(t,e){var n=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===n.pointerType)&&this.dispatchEvent(e,"touchcancel",t)},i.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},i.prototype.processPointerUp=function(t,e,n){var r,i=t.data,o=t.data.identifier,s=e.trackedPointers[o],a="touch"===i.pointerType,u="mouse"===i.pointerType||"pen"===i.pointerType,l=!1;u&&(i=2===i.button,r=c.default.FLAGS,r=i?r.RIGHT_DOWN:r.LEFT_DOWN,r=void 0!==s&&s.flags&r,n?(this.dispatchEvent(e,i?"rightup":"mouseup",t),r&&(this.dispatchEvent(e,i?"rightclick":"click",t),l=!0)):r&&this.dispatchEvent(e,i?"rightupoutside":"mouseupoutside",t),s)&&(i?s.rightDown=!1:s.leftDown=!1),n?(this.dispatchEvent(e,"pointerup",t),a&&this.dispatchEvent(e,"touchend",t),s&&(u&&!l||this.dispatchEvent(e,"pointertap",t),a)&&(this.dispatchEvent(e,"tap",t),s.over=!1)):s&&(this.dispatchEvent(e,"pointerupoutside",t),a)&&this.dispatchEvent(e,"touchendoutside",t),s&&s.none&&delete e.trackedPointers[o]},i.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){for(var e=this.normalizeToPointerData(t),n=("mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null),e.length),r=0;r<n;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,o),s=(o.data.originalEvent=t,"touch"!==i.pointerType||this.moveWhenInside);this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerMove,s),this.emit("pointermove",o),"touch"===i.pointerType&&this.emit("touchmove",o),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",o)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},i.prototype.processPointerMove=function(t,e,n){var r=t.data,i="touch"===r.pointerType,r="mouse"===r.pointerType||"pen"===r.pointerType;r&&this.processPointerOverOut(t,e,n),this.moveWhenInside&&!n||(this.dispatchEvent(e,"pointermove",t),i&&this.dispatchEvent(e,"touchmove",t),r&&this.dispatchEvent(e,"mousemove",t))},i.prototype.onPointerOut=function(t){var e,n;this.supportsTouchEvents&&"touch"===t.pointerType||("mouse"===(t=this.normalizeToPointerData(t)[0]).pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null)),e=this.getInteractionDataForPointerId(t),(n=this.configureInteractionEventForDOMEvent(this.eventData,t,e)).data.originalEvent=t,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===t.pointerType||"pen"===t.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(e.identifier))},i.prototype.processPointerOverOut=function(t,e,n){var r=t.data,i=t.data.identifier,r="mouse"===r.pointerType||"pen"===r.pointerType,o=e.trackedPointers[i];void 0!==(o=n&&!o?e.trackedPointers[i]=new c.default(i):o)&&(n&&this.mouseOverRenderer?(o.over||(o.over=!0,this.dispatchEvent(e,"pointerover",t),r&&this.dispatchEvent(e,"mouseover",t)),r&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),r&&this.dispatchEvent(e,"mouseout",t),o.none)&&delete e.trackedPointers[i])},i.prototype.onPointerOver=function(t){var t=this.normalizeToPointerData(t)[0],e=this.getInteractionDataForPointerId(t),e=this.configureInteractionEventForDOMEvent(this.eventData,t,e);"mouse"===(e.data.originalEvent=t).pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",e),"mouse"!==t.pointerType&&"pen"!==t.pointerType||this.emit("mouseover",e)},i.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,n=void 0;return 1===e||"mouse"===t.pointerType?n=this.mouse:this.activeInteractionData[e]?n=this.activeInteractionData[e]:((n=this.interactionDataPool.pop()||new a.default).identifier=e,this.activeInteractionData[e]=n),n.copyEvent(t),n},i.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},i.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(n.global.x=n.global.x/this.resolution,n.global.y=n.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t.reset(),t},i.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,r=t.changedTouches.length;n<r;n++){var i=t.changedTouches[n];void 0===i.button&&(i.button=t.touches.length?1:0),void 0===i.buttons&&(i.buttons=t.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,e.push(i)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent||(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=1),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0),e.push(t);return e},i.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},i}(r.default);n.default=t,s.WebGLRenderer.registerPlugin("interaction",t),s.CanvasRenderer.registerPlugin("interaction",t)},{"../core":154,"./InteractionData":245,"./InteractionEvent":246,"./InteractionTrackingData":248,"./interactiveTarget":250,eventemitter3:36}],248:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}o.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},r(o,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]);r=o;function o(t){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this._pointerId=t,this._flags=o.FLAGS.NONE}(n.default=r).FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],249:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("./InteractionData"),i=(Object.defineProperty(n,"InteractionData",{enumerable:!0,get:function(){return u(r).default}}),t("./InteractionManager")),o=(Object.defineProperty(n,"InteractionManager",{enumerable:!0,get:function(){return u(i).default}}),t("./interactiveTarget")),s=(Object.defineProperty(n,"interactiveTarget",{enumerable:!0,get:function(){return u(o).default}}),t("./InteractionTrackingData")),a=(Object.defineProperty(n,"InteractionTrackingData",{enumerable:!0,get:function(){return u(s).default}}),t("./InteractionEvent"));function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"InteractionEvent",{enumerable:!0,get:function(){return u(a).default}})},{"./InteractionData":245,"./InteractionEvent":246,"./InteractionManager":247,"./InteractionTrackingData":248,"./interactiveTarget":250}],250:[function(t,e,n){"use strict";n.__esModule=!0,n.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],251:[function(t,e,n){"use strict";n.__esModule=!0,n.parse=g,n.default=function(){return function(e,n){if(e.data&&e.type===d.Resource.TYPE.XML)if(0===e.data.getElementsByTagName("page").length||0===e.data.getElementsByTagName("info").length||null===e.data.getElementsByTagName("info")[0].getAttribute("face"))n();else for(var t=e.isDataUrl?"":f.dirname(e.url),r=(e.isDataUrl&&("."===t&&(t=""),this.baseUrl)&&t&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(t+="/"),(t=t.replace(this.baseUrl,""))&&"/"!==t.charAt(t.length-1)&&(t+="/"),e.data.getElementsByTagName("page")),i={},o=function(t){i[t.metadata.pageFile]=t.texture,Object.keys(i).length===r.length&&(g(e,i),n())},s=0;s<r.length;++s){var a,u,l=r[s].getAttribute("file"),c=t+l,h=!1;for(a in this.resources){var p=this.resources[a];if(p.url===c){p.metadata.pageFile=l,p.texture?o(p):p.onAfterMiddleware.add(o),h=!0;break}}h||(u={crossOrigin:e.crossOrigin,loadType:d.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e},this.add(c,u,o))}else n()}};var f=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("path")),d=t("resource-loader"),r=t("../extras");function g(t,e){t.bitmapFont=r.BitmapText.registerFont(t.data,e)}},{"../extras":230,path:321,"resource-loader":289}],252:[function(t,e,n){"use strict";n.__esModule=!0,n.shared=n.Resource=n.textureParser=n.getResourcePath=n.spritesheetParser=n.parseBitmapFontData=n.bitmapFontParser=n.Loader=void 0;var r=t("./bitmapFontParser"),i=(Object.defineProperty(n,"bitmapFontParser",{enumerable:!0,get:function(){return l(r).default}}),Object.defineProperty(n,"parseBitmapFontData",{enumerable:!0,get:function(){return r.parse}}),t("./spritesheetParser")),o=(Object.defineProperty(n,"spritesheetParser",{enumerable:!0,get:function(){return l(i).default}}),Object.defineProperty(n,"getResourcePath",{enumerable:!0,get:function(){return i.getResourcePath}}),t("./textureParser")),s=(Object.defineProperty(n,"textureParser",{enumerable:!0,get:function(){return l(o).default}}),t("resource-loader"));Object.defineProperty(n,"Resource",{enumerable:!0,get:function(){return s.Resource}});var a=l(t("../core/Application")),u=l(t("./loader"));function l(t){return t&&t.__esModule?t:{default:t}}n.Loader=u.default;var c=new u.default,t=(c.destroy=function(){},n.shared=c,a.default.prototype);t._loader=null,Object.defineProperty(t,"loader",{get:function(){var t;return this._loader||(t=this._options.sharedLoader,this._loader=t?c:new u.default),this._loader}}),t._parentDestroy=t.destroy,t.destroy=function(t,e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t,e)}},{"../core/Application":132,"./bitmapFontParser":251,"./loader":253,"./spritesheetParser":254,"./textureParser":255,"resource-loader":289}],253:[function(t,e,n){"use strict";n.__esModule=!0;var r=u(t("resource-loader")),i=t("resource-loader/lib/middlewares/parsing/blob"),s=u(t("eventemitter3")),o=u(t("./textureParser")),a=u(t("./spritesheetParser")),t=u(t("./bitmapFontParser"));function u(t){return t&&t.__esModule?t:{default:t}}var l,c=function(i){var t=o,e=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function o(t,e){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");var r=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,i.call(this,t,e));s.default.call(r);for(var n=0;n<o._pixiMiddleware.length;++n)r.use(o._pixiMiddleware[n]());return r.onStart.add(function(t){return r.emit("start",t)}),r.onProgress.add(function(t,e){return r.emit("progress",t,e)}),r.onError.add(function(t,e,n){return r.emit("error",t,e,n)}),r.onLoad.add(function(t,e){return r.emit("load",t,e)}),r.onComplete.add(function(t,e){return r.emit("complete",t,e)}),r}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o.addPixiMiddleware=function(t){o._pixiMiddleware.push(t)},o.prototype.destroy=function(){this.removeAllListeners(),this.reset()},o}(r.default);for(l in n.default=c,s.default.prototype)c.prototype[l]=s.default.prototype[l];c._pixiMiddleware=[i.blobMiddlewareFactory,o.default,a.default,t.default];n=r.default.Resource;n.setExtensionXhrType("fnt",n.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":251,"./spritesheetParser":254,"./textureParser":255,eventemitter3:36,"resource-loader":289,"resource-loader/lib/middlewares/parsing/blob":290}],254:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(){return function(n,r){var t,e,i=n.name+"_image";n.data&&n.type===o.Resource.TYPE.JSON&&n.data.frames&&!this.resources[i]?(t={crossOrigin:n.crossOrigin,metadata:n.metadata.imageMetadata,parentResource:n},e=a(n,this.baseUrl),this.add(i,e,t,function(t){var e;t.error?r(t.error):(e=new s.Spritesheet(t.texture.baseTexture,n.data,n.url)).parse(function(){n.spritesheet=e,n.textures=e.textures,r()})})):r()}},n.getResourcePath=a;var o=t("resource-loader"),n=t("url"),r=(n=n)&&n.__esModule?n:{default:n},s=t("../core");function a(t,e){return t.isDataUrl?t.data.meta.image:r.default.resolve(t.url.replace(e,""),t.data.meta.image)}},{"../core":154,"resource-loader":289,url:328}],255:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(){return function(t,e){t.data&&t.type===r.Resource.TYPE.IMAGE&&(t.texture=i.default.fromLoader(t.data,t.url,t.name)),e()}};var r=t("resource-loader"),n=t("../core/textures/Texture"),i=(t=n)&&t.__esModule?t:{default:t}},{"../core/textures/Texture":204,"resource-loader":289}],256:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../core")),t=t("../core/textures/Texture"),u=(t=t)&&t.__esModule?t:{default:t};var h=new a.Point,p=new a.Polygon,t=function(s){var t=c,e=s;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function c(t,e,n,r,i){var o;if(this instanceof c)return(o=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,s.call(this)))._texture=t||u.default.EMPTY,o.uvs=n||new Float32Array([0,0,1,0,1,1,0,1]),o.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]),o.indices=r||new Uint16Array([0,1,3,2]),o.dirty=0,o.indexDirty=0,o.vertexDirty=0,o.autoUpdate=!0,o.blendMode=a.BLEND_MODES.NORMAL,o.canvasPadding=a.settings.MESH_CANVAS_PADDING,o.drawMode=i||c.DRAW_MODES.TRIANGLE_MESH,o.shader=null,o.tintRgb=new Float32Array([1,1,1]),o._glDatas={},o._uvTransform=new a.TextureMatrix(o._texture),o.uploadUvTransform=!1,o.pluginName="mesh",o;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),c.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},c.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},c.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},c.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},c.prototype.refresh=function(t){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(t)&&this._refresh()},c.prototype._refresh=function(){},c.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},c.prototype.containsPoint=function(t){if(this.getBounds().contains(t.x,t.y)){this.worldTransform.applyInverse(t,h);for(var e=this.vertices,n=p.points,r=this.indices,i=this.indices.length,o=this.drawMode===c.DRAW_MODES.TRIANGLES?3:1,s=0;s+2<i;s+=o){var a=2*r[s],u=2*r[s+1],l=2*r[s+2];if(n[0]=e[a],n[1]=e[1+a],n[2]=e[u],n[3]=e[1+u],n[4]=e[l],n[5]=e[1+l],p.contains(h.x,h.y))return!0}}return!1},c.prototype.destroy=function(t){for(var e in this._glDatas){e=this._glDatas[e];e.destroy?e.destroy():(e.vertexBuffer&&(e.vertexBuffer.destroy(),e.vertexBuffer=null),e.indexBuffer&&(e.indexBuffer.destroy(),e.indexBuffer=null),e.uvBuffer&&(e.uvBuffer.destroy(),e.uvBuffer=null),e.vao&&(e.vao.destroy(),e.vao=null))}this._glDatas=null,s.prototype.destroy.call(this,t)},r(c,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t)&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this))}},{key:"tint",get:function(){return a.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=a.utils.hex2rgb(t,this.tintRgb)}}]),c}(a.Container);(n.default=t).DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":154,"../core/textures/Texture":204}],257:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=s(t("./Plane")),b=s(t("../core/sprites/canvas/CanvasTinter"));function s(t){return t&&t.__esModule?t:{default:t}}t=function(s){var t=a,e=s;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(t,e,n,r,i){var o;if(this instanceof a)return(o=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,s.call(this,t,4,4)))._origWidth=t.orig.width,o._origHeight=t.orig.height,o._width=o._origWidth,o._height=o._origHeight,o._leftWidth=void 0!==e?e:10,o._rightWidth=void 0!==r?r:10,o._topHeight=void 0!==n?n:10,o._bottomHeight=void 0!==i?i:10,o._cachedTint=16777215,o._tintedTexture=null,o._canvasUvs=null,o.refresh(!0),o;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),a.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._topHeight+this._bottomHeight,e=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},a.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._leftWidth+this._rightWidth,e=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},a.prototype._renderCanvas=function(t){var e=t.context,n=this.worldTransform,r=t.resolution,i=16777215!==this.tint,o=this._texture,s=(i&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedTexture=b.default.getTintedTexture(this,this.tint)),i?this._tintedTexture:o.baseTexture.source),a=(this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]),this.vertices),u=this._canvasUvs,l=i?0:o.frame.x,i=i?0:o.frame.y,c=l+o.frame.width,h=i+o.frame.height;u[0]=l,u[1]=l+this._leftWidth,u[2]=c-this._rightWidth,u[3]=c,u[4]=i,u[5]=i+this._topHeight,u[6]=h-this._bottomHeight,u[7]=h;for(var p=0;p<8;p++)u[p]*=o.baseTexture.resolution;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),t.roundPixels?e.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r|0,n.ty*r|0):e.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r);for(var f=0;f<3;f++)for(var d=0;d<3;d++){var g=2*d+8*f,y=Math.max(1,u[d+1]-u[d]),m=Math.max(1,u[f+5]-u[f+4]),v=Math.max(1,a[10+g]-a[g]),_=Math.max(1,a[11+g]-a[1+g]);e.drawImage(s,u[d],u[f+4],y,m,a[g],a[1+g],v,_)}},a.prototype._refresh=function(){s.prototype._refresh.call(this);var t=this.uvs,e=this._texture,e=(this._origWidth=e.orig.width,this._origHeight=e.orig.height,1/this._origWidth),n=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=e*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-e*this._rightWidth,t[9]=t[11]=t[13]=t[15]=n*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},r(a,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),a}(o.default);n.default=t},{"../core/sprites/canvas/CanvasTinter":193,"./Plane":258}],258:[function(t,e,n){"use strict";n.__esModule=!0;var t=t("./Mesh"),o=(t=t)&&t.__esModule?t:{default:t};t=function(r){var t=i,e=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function i(t,e,n){if(this instanceof i)return(t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,r.call(this,t)))._ready=!0,t.verticesX=e||10,t.verticesY=n||10,t.drawMode=o.default.DRAW_MODES.TRIANGLES,t.refresh(),t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),i.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,n=[],r=[],i=[],o=this.verticesX-1,s=this.verticesY-1,a=t.width/o,u=t.height/s,l=0;l<e;l++){var c=l%this.verticesX,h=l/this.verticesX|0;n.push(c*a,h*u),r.push(c/o,h/s)}for(var p=o*s,f=0;f<p;f++){var d=f%o,g=f/o|0,y=g*this.verticesX+d,m=g*this.verticesX+d+1,v=(1+g)*this.verticesX+d,g=(1+g)*this.verticesX+d+1;i.push(y,m,v),i.push(m,g,v)}this.vertices=new Float32Array(n),this.uvs=new Float32Array(r),this.colors=new Float32Array([]),this.indices=new Uint16Array(i),this.dirty++,this.indexDirty++,this.multiplyUvs()},i.prototype._onTextureUpdate=function(){o.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},i}(o.default);n.default=t},{"./Mesh":256}],259:[function(t,e,n){"use strict";n.__esModule=!0;var t=t("./Mesh");t=function(n){var t=r,e=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function r(t,e){if(this instanceof r)return(t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,n.call(this,t))).points=e,t.vertices=new Float32Array(4*e.length),t.uvs=new Float32Array(4*e.length),t.colors=new Float32Array(2*e.length),t.indices=new Uint16Array(2*e.length),t.autoUpdate=!0,t.refresh(),t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));for(var e=this.uvs,n=this.indices,r=this.colors,i=(e[0]=0,e[1]=0,e[2]=0,e[3]=1,r[0]=1,r[1]=1,n[0]=0,n[1]=1,t.length),o=1;o<i;o++){var s=4*o,a=o/(i-1);e[s]=a,e[1+s]=0,e[2+s]=a,e[3+s]=1,r[s=2*o]=1,r[1+s]=1,n[s=2*o]=s,n[1+s]=1+s}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},r.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],n=void 0,r=0,i=0,o=this.vertices,s=t.length,a=0;a<s;a++){var u=t[a],l=4*a,i=-((n=a<t.length-1?t[a+1]:u).x-e.x),r=n.y-e.y,c=Math.sqrt(r*r+i*i),h=this._texture.height/2;i=i/c*h,o[l]=u.x+(r=r/c*h),o[1+l]=u.y+i,o[2+l]=u.x-r,o[3+l]=u.y-i,e=u}},r.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},r}(((t=t)&&t.__esModule?t:{default:t}).default);n.default=t},{"./Mesh":256}],260:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core")),t=t("../Mesh"),o=(t=t)&&t.__esModule?t:{default:t};i.prototype.render=function(t){var e=this.renderer,n=e.context,r=t.worldTransform,i=e.resolution;e.roundPixels?n.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i|0,r.ty*i|0):n.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),t.drawMode===o.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},i.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,n=0;n<e-2;n++){var r=2*n;this._renderDrawTriangle(t,r,2+r,4+r)}},i.prototype._renderTriangles=function(t){for(var e=t.indices,n=e.length,r=0;r<n;r+=3){var i=2*e[r],o=2*e[r+1],s=2*e[r+2];this._renderDrawTriangle(t,i,o,s)}},i.prototype._renderDrawTriangle=function(t,e,n,r){var i,o,s,a,u,l,c,h,p,f,d,g,y,m,v,_,b=this.renderer.context,x=t.uvs,w=t.vertices,T=t._texture;T.valid&&(i=(T=T.baseTexture).source,o=T.width,s=T.height,p=h=c=l=u=a=void 0,p=t.uploadUvTransform?(g=t._uvTransform.mapCoord,a=(x[e]*g.a+x[e+1]*g.c+g.tx)*T.width,u=(x[n]*g.a+x[n+1]*g.c+g.tx)*T.width,l=(x[r]*g.a+x[r+1]*g.c+g.tx)*T.width,c=(x[e]*g.b+x[e+1]*g.d+g.ty)*T.height,h=(x[n]*g.b+x[n+1]*g.d+g.ty)*T.height,(x[r]*g.b+x[r+1]*g.d+g.ty)*T.height):(a=x[e]*T.width,u=x[n]*T.width,l=x[r]*T.width,c=x[e+1]*T.height,h=x[n+1]*T.height,x[r+1]*T.height),g=w[e],x=w[n],f=w[r],e=w[e+1],n=w[n+1],w=w[r+1],0<(r=t.canvasPadding/this.renderer.resolution)&&(d=r/Math.abs(t.worldTransform.a),r=r/Math.abs(t.worldTransform.d),m=e-(t=(e+n+w)/3),g=(_=(g+x+f)/3)+(y=g-_)/(v=Math.sqrt(y*y+m*m))*(v+d),e=t+m/v*(v+r),m=n-t,x=_+(y=x-_)/(v=Math.sqrt(y*y+m*m))*(v+d),n=t+m/v*(v+r),m=w-t,f=_+(y=f-_)/(v=Math.sqrt(y*y+m*m))*(v+d),w=t+m/v*(v+r)),b.save(),b.beginPath(),b.moveTo(g,e),b.lineTo(x,n),b.lineTo(f,w),b.closePath(),b.clip(),b.transform((g*h+c*f+x*p-h*f-c*x-g*p)/(_=a*h+c*l+u*p-h*l-c*u-a*p),(e*h+c*w+n*p-h*w-c*n-e*p)/_,(a*x+g*l+u*f-x*l-g*u-a*f)/_,(a*n+e*l+u*w-n*l-e*u-a*w)/_,(a*h*f+c*x*l+g*u*p-g*h*l-c*u*f-a*x*p)/_,(a*h*w+c*n*l+e*u*p-e*h*l-c*u*w-a*n*p)/_),b.drawImage(i,0,0,o*T.resolution,s*T.resolution,0,0,o,s),b.restore(),this.renderer.invalidateBlendMode())},i.prototype.renderMeshFlat=function(t){var e=this.renderer.context,n=t.vertices,r=n.length/2;e.beginPath();for(var i=1;i<r-2;++i){var o=2*i,s=n[o],a=n[1+o],u=n[2+o],l=n[3+o],c=n[4+o],o=n[5+o];e.moveTo(s,a),e.lineTo(u,l),e.lineTo(c,o)}e.fillStyle="#FF0000",e.fill(),e.closePath()},i.prototype.destroy=function(){this.renderer=null};t=i;function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.renderer=t}n.default=t,r.CanvasRenderer.registerPlugin("mesh",t)},{"../../core":154,"../Mesh":256}],261:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("./Mesh"),i=(Object.defineProperty(n,"Mesh",{enumerable:!0,get:function(){return l(r).default}}),t("./webgl/MeshRenderer")),o=(Object.defineProperty(n,"MeshRenderer",{enumerable:!0,get:function(){return l(i).default}}),t("./canvas/CanvasMeshRenderer")),s=(Object.defineProperty(n,"CanvasMeshRenderer",{enumerable:!0,get:function(){return l(o).default}}),t("./Plane")),a=(Object.defineProperty(n,"Plane",{enumerable:!0,get:function(){return l(s).default}}),t("./NineSlicePlane")),u=(Object.defineProperty(n,"NineSlicePlane",{enumerable:!0,get:function(){return l(a).default}}),t("./Rope"));function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"Rope",{enumerable:!0,get:function(){return l(u).default}})},{"./Mesh":256,"./NineSlicePlane":257,"./Plane":258,"./Rope":259,"./canvas/CanvasMeshRenderer":260,"./webgl/MeshRenderer":262}],262:[function(t,e,n){"use strict";n.__esModule=!0;var o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core")),s=r(t("pixi-gl-core")),a=r(t("../Mesh"));t("path");function r(t){return t&&t.__esModule?t:{default:t}}var u=o.Matrix.IDENTITY,t=function(e){var t=r,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);function r(t){if(this instanceof r)return(t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,e.call(this,t))).shader=null,t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n),r.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new o.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},r.prototype.render=function(t){var e,n=this.renderer,r=n.gl,i=t._texture;i.valid&&((e=t._glDatas[n.CONTEXT_UID])||(n.bindVao(null),(e={shader:this.shader,vertexBuffer:s.default.GLBuffer.createVertexBuffer(r,t.vertices,r.STREAM_DRAW),uvBuffer:s.default.GLBuffer.createVertexBuffer(r,t.uvs,r.STREAM_DRAW),indexBuffer:s.default.GLBuffer.createIndexBuffer(r,t.indices,r.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty,vertexDirty:t.vertexDirty}).vao=new s.default.VertexArrayObject(r).addIndex(e.indexBuffer).addAttribute(e.vertexBuffer,e.shader.attributes.aVertexPosition,r.FLOAT,!1,8,0).addAttribute(e.uvBuffer,e.shader.attributes.aTextureCoord,r.FLOAT,!1,8,0),t._glDatas[n.CONTEXT_UID]=e),n.bindVao(e.vao),t.dirty!==e.dirty&&(e.dirty=t.dirty,e.uvBuffer.upload(t.uvs)),t.indexDirty!==e.indexDirty&&(e.indexDirty=t.indexDirty,e.indexBuffer.upload(t.indices)),t.vertexDirty!==e.vertexDirty&&(e.vertexDirty=t.vertexDirty,e.vertexBuffer.upload(t.vertices)),n.bindShader(e.shader),e.shader.uniforms.uSampler=n.bindTexture(i),n.state.setBlendMode(o.utils.correctBlendMode(t.blendMode,i.baseTexture.premultipliedAlpha)),e.shader.uniforms.uTransform&&(t.uploadUvTransform?e.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):e.shader.uniforms.uTransform=u.toArray(!0)),e.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),e.shader.uniforms.uColor=o.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,e.shader.uniforms.uColor,i.baseTexture.premultipliedAlpha),n=t.drawMode===a.default.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES,e.vao.draw(n,t.indices.length,0))},r}(o.ObjectRenderer);n.default=t,o.WebGLRenderer.registerPlugin("mesh",t)},{"../../core":154,"../Mesh":256,path:321,"pixi-gl-core":118}],263:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../core")),o=t("../core/utils");t=function(s){var t=a,e=s;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,e=arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16384,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=this,o=a;if(i instanceof o)return t<(n=16384<n?16384:n)&&(n=t),(i=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,s.call(this)))._properties=[!1,!0,!1,!1,!1],i._maxSize=t,i._batchSize=n,i._glBuffers={},i._bufferUpdateIDs=[],i._updateID=0,i.interactiveChildren=!1,i.blendMode=u.BLEND_MODES.NORMAL,i.autoResize=r,i.roundPixels=!0,i.baseTexture=null,i.setProperties(e),i._tint=0,i.tintRgb=new Float32Array(4),i.tint=16777215,i;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),a.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},a.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},a.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded)||this.baseTexture.once("update",function(){return e.onChildrenChange(0)}),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},a.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},a.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,n=this.worldTransform,r=!0,i=0,o=0,s=0,a=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var l,c,h=this.children[u];h.visible&&(l=h._texture.frame,e.globalAlpha=this.worldAlpha*h.alpha,a=h.rotation%(2*Math.PI)==0?(r&&(e.setTransform(n.a,n.b,n.c,n.d,n.tx*t.resolution,n.ty*t.resolution),r=!1),i=h.anchor.x*(-l.width*h.scale.x)+h.position.x+.5,o=h.anchor.y*(-l.height*h.scale.y)+h.position.y+.5,s=l.width*h.scale.x,l.height*h.scale.y):(r=r||!0,h.displayObjectUpdateTransform(),c=h.worldTransform,t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution|0,c.ty*t.resolution|0):e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution,c.ty*t.resolution),i=h.anchor.x*-l.width+.5,o=h.anchor.y*-l.height+.5,s=l.width,l.height),c=h._texture.baseTexture.resolution,e.drawImage(h._texture.baseTexture.source,l.x*c,l.y*c,l.width*c,l.height*c,i*t.resolution,o*t.resolution,s*t.resolution,a*t.resolution))}}},a.prototype.destroy=function(t){if(s.prototype.destroy.call(this,t),this._buffers)for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},r(a,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,o.hex2rgb)(t,this.tintRgb)}}]),a}(u.Container);n.default=t},{"../core":154,"../core/utils":214}],264:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("./ParticleContainer"),i=(Object.defineProperty(n,"ParticleContainer",{enumerable:!0,get:function(){return o(r).default}}),t("./webgl/ParticleRenderer"));function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"ParticleRenderer",{enumerable:!0,get:function(){return o(i).default}})},{"./ParticleContainer":263,"./webgl/ParticleRenderer":266}],265:[function(t,e,n){"use strict";n.__esModule=!0;var p=r(t("pixi-gl-core")),f=r(t("../../core/utils/createIndicesForQuads"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,r){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.gl=t,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<e.length;++i){var o={attribute:(o=e[i]).attribute,size:o.size,uploadFunction:o.uploadFunction,unsignedByte:o.unsignedByte,offset:o.offset};(n[i]?this.dynamicProperties:this.staticProperties).push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}s.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,f.default)(this.size),this.indexBuffer=p.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW);for(var n=this.dynamicStride=0;n<this.dynamicProperties.length;++n){var r=this.dynamicProperties[n];r.offset=e,e+=r.size,this.dynamicStride+=r.size}for(var i=new ArrayBuffer(this.size*this.dynamicStride*4*4),o=(this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=p.default.GLBuffer.createVertexBuffer(t,i,t.STREAM_DRAW),0),s=this.staticStride=0;s<this.staticProperties.length;++s){var a=this.staticProperties[s];a.offset=o,o+=a.size,this.staticStride+=a.size}i=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(i),this.staticDataUint32=new Uint32Array(i),this.staticBuffer=p.default.GLBuffer.createVertexBuffer(t,i,t.STATIC_DRAW),this.vao=new p.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var u=0;u<this.dynamicProperties.length;++u){var l=this.dynamicProperties[u];l.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,l.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*l.offset):this.vao.addAttribute(this.dynamicBuffer,l.attribute,t.FLOAT,!1,4*this.dynamicStride,4*l.offset)}for(var c=0;c<this.staticProperties.length;++c){var h=this.staticProperties[c];h.unsignedByte?this.vao.addAttribute(this.staticBuffer,h.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*h.offset):this.vao.addAttribute(this.staticBuffer,h.attribute,t.FLOAT,!1,4*this.staticStride,4*h.offset)}},s.prototype.uploadDynamic=function(t,e,n){for(var r=0;r<this.dynamicProperties.length;r++){var i=this.dynamicProperties[r];i.uploadFunction(t,e,n,i.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer.upload()},s.prototype.uploadStatic=function(t,e,n){for(var r=0;r<this.staticProperties.length;r++){var i=this.staticProperties[r];i.uploadFunction(t,e,n,i.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer.upload()},s.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},n.default=s},{"../../core/utils/createIndicesForQuads":212,"pixi-gl-core":118}],266:[function(t,e,n){"use strict";n.__esModule=!0;var g=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core")),i=r(t("./ParticleShader")),a=r(t("./ParticleBuffer")),c=t("../../core/utils");function r(t){return t&&t.__esModule?t:{default:t}}t=function(e){var t=r,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);function r(t){if(this instanceof r)return(t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,e.call(this,t))).shader=null,t.indexBuffer=null,t.properties=null,t.tempMatrix=new g.Matrix,t.CONTEXT_UID=0,t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n),r.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new i.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},r.prototype.start=function(){this.renderer.bindShader(this.shader)},r.prototype.render=function(t){var e=t.children,n=t._maxSize,r=t._batchSize,i=this.renderer,o=e.length;if(0!==o){n<o&&(o=n);for(var s=(s=t._glBuffers[i.CONTEXT_UID])||(t._glBuffers[i.CONTEXT_UID]=this.generateBuffers(t)),n=e[0]._texture.baseTexture,a=(this.renderer.setBlendMode(g.utils.correctBlendMode(t.blendMode,n.premultipliedAlpha)),i.gl),u=t.worldTransform.copy(this.tempMatrix),l=(u.prepend(i._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=u.toArray(!0),this.shader.uniforms.uColor=g.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,n.premultipliedAlpha),this.shader.uniforms.uSampler=i.bindTexture(n),!1),c=0,h=0;c<o;c+=r,h+=1){var p=o-c;if(r<p&&(p=r),h>=s.length){if(!t.autoResize)break;s.push(this._generateOneMoreBuffer(t))}var f=s[h],d=(f.uploadDynamic(e,c,p),t._bufferUpdateIDs[h]||0);(l=l||f._updateID<d)&&(f._updateID=t._updateID,f.uploadStatic(e,c,p)),i.bindVao(f.vao),f.vao.draw(a.TRIANGLES,6*p)}}},r.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,n=[],r=t._maxSize,i=t._batchSize,o=t._properties,s=0;s<r;s+=i)n.push(new a.default(e,this.properties,o,i));return n},r.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,n=t._batchSize,t=t._properties;return new a.default(e,this.properties,t,n)},r.prototype.uploadVertices=function(t,e,n,r,i,o){for(var s=0,a=0,u=0,l=0,c=0;c<n;++c){var h=t[e+c],p=h._texture,f=h.scale.x,d=h.scale.y,g=p.trim,p=p.orig;g?(s=(a=g.x-h.anchor.x*p.width)+g.width,u=(l=g.y-h.anchor.y*p.height)+g.height):(s=p.width*(1-h.anchor.x),a=p.width*-h.anchor.x,u=p.height*(1-h.anchor.y),l=p.height*-h.anchor.y),r[o]=a*f,r[o+1]=l*d,r[o+i]=s*f,r[o+i+1]=l*d,r[o+2*i]=s*f,r[o+2*i+1]=u*d,r[o+3*i]=a*f,r[o+3*i+1]=u*d,o+=4*i}},r.prototype.uploadPosition=function(t,e,n,r,i,o){for(var s=0;s<n;s++){var a=t[e+s].position;r[o]=a.x,r[o+1]=a.y,r[o+i]=a.x,r[o+i+1]=a.y,r[o+2*i]=a.x,r[o+2*i+1]=a.y,r[o+3*i]=a.x,r[o+3*i+1]=a.y,o+=4*i}},r.prototype.uploadRotation=function(t,e,n,r,i,o){for(var s=0;s<n;s++){var a=t[e+s].rotation;r[o]=a,r[o+i]=a,r[o+2*i]=a,r[o+3*i]=a,o+=4*i}},r.prototype.uploadUvs=function(t,e,n,r,i,o){for(var s=0;s<n;++s){var a=t[e+s]._texture._uvs;a?(r[o]=a.x0,r[o+1]=a.y0,r[o+i]=a.x1,r[o+i+1]=a.y1,r[o+2*i]=a.x2,r[o+2*i+1]=a.y2,r[o+3*i]=a.x3,r[o+3*i+1]=a.y3):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0),o+=4*i}},r.prototype.uploadTint=function(t,e,n,r,i,o){for(var s=0;s<n;++s){var a=t[e+s],u=a._texture.baseTexture.premultipliedAlpha,l=a.alpha,u=l<1&&u?(0,c.premultiplyTint)(a._tintRGB,l):a._tintRGB+(255*l<<24);r[o]=u,r[o+i]=u,r[o+2*i]=u,r[o+3*i]=u,o+=4*i}},r.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},r}(g.ObjectRenderer);n.default=t,g.WebGLRenderer.registerPlugin("particle",t)},{"../../core":154,"../../core/utils":214,"./ParticleBuffer":265,"./ParticleShader":267}],267:[function(t,e,n){"use strict";n.__esModule=!0;var t=t("../../core/Shader");t=function(n){var t=r,e=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var e=this,t=n.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n"));if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r}(((t=t)&&t.__esModule?t:{default:t}).default);n.default=t},{"../../core/Shader":133}],268:[function(t,e,n){"use strict";Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:0<t?1:-1})},{}],269:[function(t,e,n){"use strict";Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})},{}],270:[function(t,e,n){"use strict";var t=t("object-assign"),t=(t=t)&&t.__esModule?t:{default:t};Object.assign||(Object.assign=t.default)},{"object-assign":52}],271:[function(t,e,n){"use strict";t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign"),t("./Number.isInteger"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":268,"./Number.isInteger":269,"./Object.assign":270,"./requestAnimationFrame":272}],272:[function(t,e,n){!function(o){!function(){"use strict";Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),o.performance&&o.performance.now||(t=Date.now(),o.performance||(o.performance={}),o.performance.now=function(){return Date.now()-t});for(var t,r=Date.now(),e=["ms","moz","webkit","o"],n=0;n<e.length&&!o.requestAnimationFrame;++n){var i=e[n];o.requestAnimationFrame=o[i+"RequestAnimationFrame"],o.cancelAnimationFrame=o[i+"CancelAnimationFrame"]||o[i+"CancelRequestAnimationFrame"]}o.requestAnimationFrame||(o.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+r-e;return n<0&&(n=0),r=e,setTimeout(function(){r=Date.now(),t(performance.now())},n)}),o.cancelAnimationFrame||(o.cancelAnimationFrame=function(t){return clearTimeout(t)})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],273:[function(t,e,n){"use strict";n.__esModule=!0;var a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../core")),t=t("./limiters/CountLimiter"),r=(t=t)&&t.__esModule?t:{default:t};var u=a.ticker.shared;function i(t){var e=this;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.limiter=new r.default(a.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(p),this.registerFindHook(f),this.registerFindHook(o),this.registerFindHook(s),this.registerFindHook(l),this.registerUploadHook(c),this.registerUploadHook(h)}function o(t,e){var n=!1;if(t&&t._textures&&t._textures.length)for(var r,i=0;i<t._textures.length;i++)t._textures[i]instanceof a.Texture&&(r=t._textures[i].baseTexture,-1===e.indexOf(r))&&(e.push(r),n=!0);return n}function s(t,e){return t instanceof a.BaseTexture&&(-1===e.indexOf(t)&&e.push(t),!0)}function l(t,e){return!!(t._texture&&t._texture instanceof a.Texture)&&(t=t._texture.baseTexture,-1===e.indexOf(t)&&e.push(t),!0)}function c(t,e){return e instanceof a.Text&&(e.updateText(!0),!0)}function h(t,e){return e instanceof a.TextStyle&&(e=e.toFontString(),a.TextMetrics.measureFont(e),!0)}function p(t,e){return t instanceof a.Text&&(-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t),t=t._texture.baseTexture,-1===e.indexOf(t)&&e.push(t),!0)}function f(t,e){return t instanceof a.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}a.settings.UPLOADS_PER_FRAME=4,i.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,u.addOnce(this.tick,this,a.UPDATE_PRIORITY.UTILITY))):e&&e()},i.prototype.tick=function(){setTimeout(this.delayedTick,0)},i.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)u.addOnce(this.tick,this,a.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;for(var i=this.completes.slice(0),o=this.completes.length=0,s=i.length;o<s;o++)i[o]()}},i.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},i.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},i.prototype.add=function(t){for(var e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof a.Container)for(var r=t.children.length-1;0<=r;r--)this.add(t.children[r]);return this},i.prototype.destroy=function(){this.ticking&&u.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},n.default=i},{"../core":154,"./limiters/CountLimiter":276}],274:[function(t,e,n){"use strict";n.__esModule=!0;var i=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core")),t=t("../BasePrepare"),t=(t=t)&&t.__esModule?t:{default:t};t=function(e){var t=r,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);function r(t){if(this instanceof r)return((t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,e.call(this,t))).uploadHookHelper=t).canvas=document.createElement("canvas"),t.canvas.width=16,t.canvas.height=16,t.ctx=t.canvas.getContext("2d"),t.registerUploadHook(o),t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n),r.prototype.destroy=function(){e.prototype.destroy.call(this),this.ctx=null,this.canvas=null},r}(t.default);function o(t,e){var n,r;return e instanceof i.BaseTexture&&(n=0===(e=e.source).width?t.canvas.width:Math.min(t.canvas.width,e.width),r=0===e.height?t.canvas.height:Math.min(t.canvas.height,e.height),t.ctx.drawImage(e,0,0,n,r,0,0,t.canvas.width,t.canvas.height),!0)}n.default=t,i.CanvasRenderer.registerPlugin("prepare",t)},{"../../core":154,"../BasePrepare":273}],275:[function(t,e,n){"use strict";n.__esModule=!0;var r=t("./webgl/WebGLPrepare"),i=(Object.defineProperty(n,"webgl",{enumerable:!0,get:function(){return u(r).default}}),t("./canvas/CanvasPrepare")),o=(Object.defineProperty(n,"canvas",{enumerable:!0,get:function(){return u(i).default}}),t("./BasePrepare")),s=(Object.defineProperty(n,"BasePrepare",{enumerable:!0,get:function(){return u(o).default}}),t("./limiters/CountLimiter")),a=(Object.defineProperty(n,"CountLimiter",{enumerable:!0,get:function(){return u(s).default}}),t("./limiters/TimeLimiter"));function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"TimeLimiter",{enumerable:!0,get:function(){return u(a).default}})},{"./BasePrepare":273,"./canvas/CanvasPrepare":274,"./limiters/CountLimiter":276,"./limiters/TimeLimiter":277,"./webgl/WebGLPrepare":278}],276:[function(t,e,n){"use strict";function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.maxItemsPerFrame=t,this.itemsLeft=0}n.__esModule=!0,r.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},r.prototype.allowedToUpload=function(){return 0<this.itemsLeft--},n.default=r},{}],277:[function(t,e,n){"use strict";function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.maxMilliseconds=t,this.frameStart=0}n.__esModule=!0,r.prototype.beginFrame=function(){this.frameStart=Date.now()},r.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},n.default=r},{}],278:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../../core")),t=t("../BasePrepare");t=function(e){var t=r,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);function r(t){if(this instanceof r)return(t=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,e.call(this,t))).uploadHookHelper=t.renderer,t.registerFindHook(s),t.registerUploadHook(i),t.registerUploadHook(o),t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n),r}(((t=t)&&t.__esModule?t:{default:t}).default);function i(t,e){return e instanceof r.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function o(t,e){return e instanceof r.Graphics&&(!e.dirty&&!e.clearDirty&&e._webGL[t.plugins.graphics.CONTEXT_UID]||t.plugins.graphics.updateGraphics(e),!0)}function s(t,e){return t instanceof r.Graphics&&(e.push(t),!0)}n.default=t,r.WebGLRenderer.registerPlugin("prepare",t)},{"../../core":154,"../BasePrepare":273}],279:[function(t,e,n){var l=t("./Scalar");function r(){}(e.exports=r).lineInt=function(t,e,n){var r=[0,0],i=t[1][1]-t[0][1],o=t[0][0]-t[1][0],t=i*t[0][0]+o*t[0][1],s=e[1][1]-e[0][1],a=e[0][0]-e[1][0],e=s*e[0][0]+a*e[0][1],u=i*a-s*o;return l.eq(u,0,n=n||0)||(r[0]=(a*t-o*e)/u,r[1]=(i*e-s*t)/u),r},r.segmentsIntersect=function(t,e,n,r){var i,o=e[0]-t[0],e=e[1]-t[1],s=r[0]-n[0],r=r[1]-n[1];return s*e-r*o!=0&&(i=(o*(n[1]-t[1])+e*(t[0]-n[0]))/(s*e-r*o),n=(s*(t[1]-n[1])+r*(n[0]-t[0]))/(r*o-s*e),0<=i)&&i<=1&&0<=n&&n<=1}},{"./Scalar":282}],280:[function(t,e,n){function a(){}(e.exports=a).area=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])},a.left=function(t,e,n){return 0<a.area(t,e,n)},a.leftOn=function(t,e,n){return 0<=a.area(t,e,n)},a.right=function(t,e,n){return a.area(t,e,n)<0},a.rightOn=function(t,e,n){return a.area(t,e,n)<=0};var u=[],l=[];a.collinear=function(t,e,n,r){var i,o,s;return r?(s=l,(o=u)[0]=e[0]-t[0],o[1]=e[1]-t[1],s[0]=n[0]-e[0],s[1]=n[1]-e[1],i=o[0]*s[0]+o[1]*s[1],o=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s=Math.sqrt(s[0]*s[0]+s[1]*s[1]),Math.acos(i/(o*s))<r):0==a.area(t,e,n)},a.sqdist=function(t,e){var n=e[0]-t[0],e=e[1]-t[1];return n*n+e*e}},{}],281:[function(t,e,n){var a=t("./Line"),w=t("./Point"),u=t("./Scalar");function T(){this.vertices=[]}(e.exports=T).prototype.at=function(t){var e=this.vertices,n=e.length;return e[t<0?t%n+n:t%n]},T.prototype.first=function(){return this.vertices[0]},T.prototype.last=function(){return this.vertices[this.vertices.length-1]},T.prototype.clear=function(){this.vertices.length=0},T.prototype.append=function(t,e,n){if(void 0===e)throw new Error("From is not given!");if(void 0===n)throw new Error("To is not given!");if(n-1<e)throw new Error("lol1");if(n>t.vertices.length)throw new Error("lol2");if(e<0)throw new Error("lol3");for(var r=e;r<n;r++)this.vertices.push(t.vertices[r])},T.prototype.makeCCW=function(){for(var t=0,e=this.vertices,n=1;n<this.vertices.length;++n)(e[n][1]<e[t][1]||e[n][1]==e[t][1]&&e[n][0]>e[t][0])&&(t=n);w.left(this.at(t-1),this.at(t),this.at(t+1))||this.reverse()},T.prototype.reverse=function(){for(var t=[],e=0,n=this.vertices.length;e!==n;e++)t.push(this.vertices.pop());this.vertices=t},T.prototype.isReflex=function(t){return w.right(this.at(t-1),this.at(t),this.at(t+1))};var l=[],c=[];function E(t,e,n,r,i){var o=e[1]-t[1],e=t[0]-e[0],t=o*t[0]+e*t[1],s=r[1]-n[1],r=n[0]-r[0],n=s*n[0]+r*n[1],a=o*r-s*e;return u.eq(a,0,i=i||0)?[0,0]:[(r*t-e*n)/a,(o*n-s*t)/a]}T.prototype.canSee=function(t,e){var n,r=l,i=c;if(w.leftOn(this.at(t+1),this.at(t),this.at(e))&&w.rightOn(this.at(t-1),this.at(t),this.at(e)))return!1;for(var o=w.sqdist(this.at(t),this.at(e)),s=0;s!==this.vertices.length;++s)if((s+1)%this.vertices.length!==t&&s!==t&&w.leftOn(this.at(t),this.at(e),this.at(s+1))&&w.rightOn(this.at(t),this.at(e),this.at(s))&&(r[0]=this.at(t),r[1]=this.at(e),i[0]=this.at(s),i[1]=this.at(s+1),n=a.lineInt(r,i),w.sqdist(this.at(t),n)<o))return!1;return!0},T.prototype.copy=function(t,e,n){var r=n||new T;if(r.clear(),t<e)for(var i=t;i<=e;i++)r.vertices.push(this.vertices[i]);else{for(i=0;i<=e;i++)r.vertices.push(this.vertices[i]);for(i=t;i<this.vertices.length;i++)r.vertices.push(this.vertices[i])}return r},T.prototype.getCutEdges=function(){for(var t=[],e=[],n=new T,r=Number.MAX_VALUE,i=0;i<this.vertices.length;++i)if(this.isReflex(i))for(var o=0;o<this.vertices.length;++o)if(this.canSee(i,o)){for(var e=this.copy(i,o,n).getCutEdges(),s=this.copy(o,i,n).getCutEdges(),a=0;a<s.length;a++)e.push(s[a]);e.length<r&&(r=(t=e).length,t.push([this.at(i),this.at(o)]))}return t},T.prototype.decomp=function(){var t=this.getCutEdges();return 0<t.length?this.slice(t):[this]},T.prototype.slice=function(t){if(0==t.length)return[this];if(t instanceof Array&&t.length&&t[0]instanceof Array&&2==t[0].length&&t[0][0]instanceof Array){for(var e=[this],n=0;n<t.length;n++)for(var r=t[n],i=0;i<e.length;i++){var o=e[i].slice(r);if(o){e.splice(i,1),e.push(o[0],o[1]);break}}return e}return n=this.vertices.indexOf((r=t)[0]),i=this.vertices.indexOf(r[1]),-1!=n&&-1!=i&&[this.copy(n,i),this.copy(i,n)]},T.prototype.isSimple=function(){for(var t=this.vertices,e=0;e<t.length-1;e++)for(var n=0;n<e-1;n++)if(a.segmentsIntersect(t[e],t[e+1],t[n],t[n+1]))return!1;for(e=1;e<t.length-2;e++)if(a.segmentsIntersect(t[0],t[t.length-1],t[e],t[e+1]))return!1;return!0},T.prototype.quickDecomp=function(t,e,n,r,i,o){i=i||100,o=o||0,r=r||25,t=void 0!==t?t:[],e=e||[],n=n||[];var s=[0,0],a=[0,0],u=[0,0],l=0,c=0,h=0,p=0,f=0,d=0,g=0,y=new T,m=new T,v=this,_=this.vertices;if(!(_.length<3))if(i<++o)console.warn("quickDecomp: max level ("+i+") reached.");else{for(var b=0;b<this.vertices.length;++b)if(v.isReflex(b)){e.push(v.vertices[b]);for(var l=c=Number.MAX_VALUE,x=0;x<this.vertices.length;++x)w.left(v.at(b-1),v.at(b),v.at(x))&&w.rightOn(v.at(b-1),v.at(b),v.at(x-1))&&(u=E(v.at(b-1),v.at(b),v.at(x),v.at(x-1)),w.right(v.at(b+1),v.at(b),u))&&(h=w.sqdist(v.vertices[b],u))<c&&(c=h,a=u,d=x),w.left(v.at(b+1),v.at(b),v.at(x+1))&&w.rightOn(v.at(b+1),v.at(b),v.at(x))&&(u=E(v.at(b+1),v.at(b),v.at(x),v.at(x+1)),w.left(v.at(b-1),v.at(b),u))&&(h=w.sqdist(v.vertices[b],u))<l&&(l=h,s=u,f=x);if(d==(f+1)%this.vertices.length)u[0]=(a[0]+s[0])/2,u[1]=(a[1]+s[1])/2,n.push(u),b<f?(y.append(v,b,f+1),y.vertices.push(u),m.vertices.push(u),0!=d&&m.append(v,d,v.vertices.length),m.append(v,0,b+1)):(0!=b&&y.append(v,b,v.vertices.length),y.append(v,0,f+1),y.vertices.push(u),m.vertices.push(u),m.append(v,d,b+1));else{if(f<d&&(f+=this.vertices.length),p=Number.MAX_VALUE,f<d)return t;for(x=d;x<=f;++x)w.leftOn(v.at(b-1),v.at(b),v.at(x))&&w.rightOn(v.at(b+1),v.at(b),v.at(x))&&(h=w.sqdist(v.at(b),v.at(x)))<p&&(p=h,g=x%this.vertices.length);b<g?(y.append(v,b,g+1),0!=g&&m.append(v,g,_.length),m.append(v,0,b+1)):(0!=b&&y.append(v,b,_.length),y.append(v,0,g+1),m.append(v,g,b+1))}return(y.vertices.length<m.vertices.length?(y.quickDecomp(t,e,n,r,i,o),m):(m.quickDecomp(t,e,n,r,i,o),y)).quickDecomp(t,e,n,r,i,o),t}t.push(this)}return t},T.prototype.removeCollinearPoints=function(t){for(var e=0,n=this.vertices.length-1;3<this.vertices.length&&0<=n;--n)w.collinear(this.at(n-1),this.at(n),this.at(n+1),t)&&(this.vertices.splice(n%this.vertices.length,1),n--,e++);return e}},{"./Line":279,"./Point":280,"./Scalar":282}],282:[function(t,e,n){function r(){}(e.exports=r).eq=function(t,e,n){return n=n||0,Math.abs(t-e)<n}},{}],283:[function(t,e,n){e.exports={Polygon:t("./Polygon"),Point:t("./Point")}},{"./Point":280,"./Polygon":281}],284:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=t.length;if(!(r<=e||0===n)){for(var i=r-(n=r<e+n?r-e:n),o=e;o<i;++o)t[o]=t[o+n];t.length=i}}},{}],285:[function(t,e,n){"use strict";n.__esModule=!0,n.Loader=void 0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=s(t("mini-signals")),o=s(t("parse-uri")),u=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("./async")),h=t("./Resource");function s(t){return t&&t.__esModule?t:{default:t}}var l=/(#[\w-]+)?$/,p=n.Loader=(f.prototype.add=function(t,e,n,r){if(Array.isArray(t))for(var i=0;i<t.length;++i)this.add(t[i]);else{if("object"===(void 0===t?"undefined":c(t))&&(r=e||t.callback||t.onComplete,e=(n=t).url,t=t.name||t.key||t.url),"string"!=typeof e&&(r=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(r=n,n=null),this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new h.Resource(t,e,n),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var o=n.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var u=o.progressChunk*(s.length+1)/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=u;for(var l=0;l<s.length;++l)s[l].progressChunk=u;this.resources[t].progressChunk=u}this._queue.push(this.resources[t])}return this},f.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},f.prototype.use=function(t){return this._afterMiddleware.push(t),this},f.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){t=this.resources[t];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},f.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),!this.loading)if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},f.prototype._prepareUrl=function(t){var e=(0,o.default)(t,{strictMode:!0}),n=void 0;return n=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString&&(e=l.exec(n)[0],-1!==(n=n.substr(0,n.length-e.length)).indexOf("?")?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=e),n},f.prototype._loadResource=function(n,t){var r=this;n._dequeue=t,u.eachSeries(this._beforeMiddleware,function(t,e){t.call(r,n,function(){e(n.isComplete?{}:null)})},function(){n.isComplete?r._onLoad(n):(n._onLoadBinding=n.onComplete.once(r._onLoad,r),n.load())},!0)},f.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},f.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},f.prototype._onLoad=function(n){var r=this;n._onLoadBinding=null,this._resourcesParsing.push(n),n._dequeue(),u.eachSeries(this._afterMiddleware,function(t,e){t.call(r,n,e)},function(){n.onAfterMiddleware.dispatch(n),r.progress=Math.min(100,r.progress+n.progressChunk),r.onProgress.dispatch(r,n),n.error?r.onError.dispatch(n.error,r,n):r.onLoad.dispatch(r,n),r._resourcesParsing.splice(r._resourcesParsing.indexOf(n),1),r._queue.idle()&&0===r._resourcesParsing.length&&r._onComplete()},!0)},r(f,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),f);function f(){var n=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10,r=this,i=f;if(!(r instanceof i))throw new TypeError("Cannot call a class as a function");this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return n._loadResource(t,e)},this._queue=u.queue(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new a.default,this.onError=new a.default,this.onLoad=new a.default,this.onStart=new a.default,this.onComplete=new a.default;for(var o=0;o<f._defaultBeforeMiddleware.length;++o)this.pre(f._defaultBeforeMiddleware[o]);for(var s=0;s<f._defaultAfterMiddleware.length;++s)this.use(f._defaultAfterMiddleware[s])}p._defaultBeforeMiddleware=[],p._defaultAfterMiddleware=[],p.pre=function(t){return p._defaultBeforeMiddleware.push(t),p},p.use=function(t){return p._defaultAfterMiddleware.push(t),p}},{"./Resource":286,"./async":287,"mini-signals":50,"parse-uri":109}],286:[function(t,e,n){"use strict";n.__esModule=!0,n.Resource=void 0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=a(t("parse-uri")),s=a(t("mini-signals"));function a(t){return t&&t.__esModule?t:{default:t}}var u=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null;function c(){}t=n.Resource=(h.setExtensionLoadType=function(t,e){p(h._loadTypeMap,t,e)},h.setExtensionXhrType=function(t,e){p(h._xhrTypeMap,t,e)},h.prototype.complete=function(){this._clearEvents(),this._finish()},h.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=h.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},h.prototype.load=function(t){var e=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout(function(){return t(e)},1);else switch(t&&this.onComplete.once(t),this._setFlag(h.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case h.LOAD_TYPE.IMAGE:this.type=h.TYPE.IMAGE,this._loadElement("image");break;case h.LOAD_TYPE.AUDIO:this.type=h.TYPE.AUDIO,this._loadSourceElement("audio");break;case h.LOAD_TYPE.VIDEO:this.type=h.TYPE.VIDEO,this._loadSourceElement("video");break;default:h.LOAD_TYPE.XHR;u&&this.crossOrigin?this._loadXdr():this._loadXhr()}},h.prototype._hasFlag=function(t){return 0!=(this._flags&t)},h.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},h.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},h.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(h.STATUS_FLAGS.COMPLETE,!0),this._setFlag(h.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},h.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},h.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)this.abort("Unsupported element: "+t);else{if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(e)?e[n]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}},h.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===h.XHR_RESPONSE_TYPE.JSON||this.xhrType===h.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=h.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},h.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},h.prototype._createSource=function(t,e,n){n=n||t+"/"+this._getExtension(e);t=document.createElement("source");return t.src=e,t.type=n,t},h.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},h.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},h.prototype._onTimeout=function(){this.abort("Load timed out.")},h.prototype._xhrOnError=function(){var t=this.xhr;this.abort(f(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},h.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(f(t)+" Request timed out.")},h.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(f(t)+" Request was aborted by the user.")},h.prototype._xhrOnLoad=function(){var t,e,n=this.xhr,r="",i=void 0===n.status?200:n.status;if(""!==n.responseType&&"text"!==n.responseType&&void 0!==n.responseType||(r=n.responseText),0===i&&(0<r.length||n.responseType===h.XHR_RESPONSE_TYPE.BUFFER)?i=200:1223===i&&(i=204),2!=(i/100|0))this.abort("["+n.status+"] "+n.statusText+": "+n.responseURL);else{if(this.xhrType===h.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=h.TYPE.TEXT;else if(this.xhrType===h.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=h.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===h.XHR_RESPONSE_TYPE.DOCUMENT)try{window.DOMParser?(t=new DOMParser,this.data=t.parseFromString(r,"text/xml")):((e=document.createElement("div")).innerHTML=r,this.data=e),this.type=h.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=n.response||r;this.complete()}},h.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,(l=l||document.createElement("a")).href=t;var n=!(t=(0,o.default)(l.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&n&&r===e.protocol?"":"anonymous"},h.prototype._determineXhrType=function(){return h._xhrTypeMap[this.extension]||h.XHR_RESPONSE_TYPE.TEXT},h.prototype._determineLoadType=function(){return h._loadTypeMap[this.extension]||h.LOAD_TYPE.XHR},h.prototype._getExtension=function(){var t,e,n=this.url;return(this.isDataUrl?(e=n.indexOf("/"),n.substring(e+1,n.indexOf(";",e))):(e=n.indexOf("?"),t=n.indexOf("#"),e=Math.min(-1<e?e:n.length,-1<t?t:n.length),(n=n.substring(0,e)).substring(n.lastIndexOf(".")+1))).toLowerCase()},h.prototype._getMimeFromXhrType=function(t){switch(t){case h.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case h.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case h.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case h.XHR_RESPONSE_TYPE.JSON:return"application/json";case h.XHR_RESPONSE_TYPE.DEFAULT:case h.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r(h,[{key:"isDataUrl",get:function(){return this._hasFlag(h.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(h.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(h.STATUS_FLAGS.LOADING)}}]),h);function h(t,e,n){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");if("string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(h.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=h.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=c,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new s.default,this.onProgress=new s.default,this.onComplete=new s.default,this.onAfterMiddleware=new s.default}function p(t,e,n){(e=e&&0===e.indexOf(".")?e.substring(1):e)&&(t[e]=n)}function f(t){return t.toString().replace("object ","")}t.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},t.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},t.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},t.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",void 0!==e&&(e.exports.default=t)},{"mini-signals":50,"parse-uri":109}],287:[function(t,e,n){"use strict";function o(){}n.__esModule=!0,n.eachSeries=function(n,r,i,o){var s=0,a=n.length;!function t(e){e||s===a?i&&i(e):o?setTimeout(function(){r(n[s++],t)},1):r(n[s++],t)}()},n.queue=function(e,t){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var n=0,r={_tasks:[],concurrency:t,saturated:o,unsaturated:o,buffer:t/4,empty:o,drain:o,error:o,started:!1,paused:!1,push:function(t,e){i(t,!1,e)},kill:function(){n=0,r.drain=o,r.started=!1,r._tasks=[]},unshift:function(t,e){i(t,!0,e)},process:function(){for(;!r.paused&&n<r.concurrency&&r._tasks.length;){var t=r._tasks.shift();0===r._tasks.length&&r.empty(),(n+=1)===r.concurrency&&r.saturated(),e(t.data,function(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}(function(t){return function(){--n,t.callback.apply(t,arguments),null!=arguments[0]&&r.error(arguments[0],t.data),n<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}}(t)))}},length:function(){return r._tasks.length},running:function(){return n},idle:function(){return r._tasks.length+n===0},pause:function(){!0!==r.paused&&(r.paused=!0)},resume:function(){if(!1!==r.paused){r.paused=!1;for(var t=1;t<=r.concurrency;t++)r.process()}}};function i(t,e,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");r.started=!0,null==t&&r.idle()?setTimeout(function(){return r.drain()},1):(t={data:t,callback:"function"==typeof n?n:o},e?r._tasks.unshift(t):r._tasks.push(t),setTimeout(function(){return r.process()},1))}return r}},{}],288:[function(t,e,n){"use strict";n.__esModule=!0,n.encodeBinary=r;var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r(t){for(var e="",n=0;n<t.length;){for(var r=[0,0,0],i=[0,0,0,0],o=0;o<r.length;++o)n<t.length?r[o]=255&t.charCodeAt(n++):r[o]=0;switch(i[0]=r[0]>>2,i[1]=(3&r[0])<<4|r[1]>>4,i[2]=(15&r[1])<<2|r[2]>>6,i[3]=63&r[2],n-(t.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(var s=0;s<i.length;++s)e+=a.charAt(i[s])}return e}void 0!==e&&(e.exports.default=r)},{}],289:[function(t,e,n){"use strict";var r=t("./Loader").Loader,i=t("./Resource").Resource,o=t("./async"),t=t("./b64");r.Resource=i,r.async=o,r.encodeBinary=t,r.base64=t,e.exports=r,e.exports.Loader=r,e.exports.default=r},{"./Loader":285,"./Resource":286,"./async":287,"./b64":288}],290:[function(t,e,n){"use strict";n.__esModule=!0,n.blobMiddlewareFactory=function(){return function(t,e){if(t.data&&(t.xhr&&t.xhrType===i.Resource.XHR_RESPONSE_TYPE.BLOB))if(window.Blob&&"string"!=typeof t.data){var n;if(0===t.data.type.indexOf("image"))return n=s.createObjectURL(t.data),t.blob=t.data,t.data=new Image,t.data.src=n,t.type=i.Resource.TYPE.IMAGE,void(t.data.onload=function(){s.revokeObjectURL(n),t.data.onload=null,e()})}else{var r=t.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return t.data=new Image,t.data.src="data:"+r+";base64,"+(0,o.encodeBinary)(t.xhr.responseText),t.type=i.Resource.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}};var i=t("../../Resource"),o=t("../../b64"),s=window.URL||window.webkitURL},{"../../Resource":286,"../../b64":288}],291:[function(t,e,n){var r,i;r=this,i=function(){return n=[function(t,_,b){"use strict";!function(t){function e(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(_,"__esModule",{value:!0}),_.Tweenable=_.composeEasingObject=_.tweenProps=_.clone=_.each=void 0;var n=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}_.tween=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=new m;return(t=e.tween(t)).tweenable=e,t};function o(){}var s=e(b(5)),a=b(1),u=a&&a.__esModule?a:{default:a},a=e(b(7)),h="undefined"!=typeof window?window:t,l=h.cancelAnimationFrame||h.webkitCancelAnimationFrame||h.oCancelAnimationFrame||h.msCancelAnimationFrame||h.mozCancelRequestAnimationFrame||h.clearTimeout,c=h.requestAnimationFrame||h.webkitRequestAnimationFrame||h.oRequestAnimationFrame||h.msRequestAnimationFrame||h.mozCancelRequestAnimationFrame&&h.mozRequestAnimationFrame||setTimeout,p=_.each=function(t,e){return Object.keys(t).forEach(e)},f=_.clone=function(t){return(0,u.default)({},t)},d=f(s),g=_.tweenProps=function(t,r,i,o,e,n,s){var a=t<n?0:(t-n)/e;return p(r,function(t){var e,n=s[t],n="function"==typeof n?n:d[n];r[t]=(e=i[t],t=o[t],e+(t-e)*n(a))}),r},y=_.composeEasingObject=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"linear",n={},r=void 0===e?"undefined":i(e);return p(t,"string"===r||"function"===r?function(t){return n[t]=e}:function(t){return n[t]=n[t]||e[t]||"linear"}),n},m=_.Tweenable=(n(v,[{key:"_applyFilter",value:function(e){var n=this,r=v.filters,i=this._filterArgs;p(r,function(t){t=r[t][e];void 0!==t&&t.apply(n,i)})}},{key:"_timeoutHandler",value:function(t){var e=this,n=arguments,r=this._currentState,i=this._delay,o=this._duration,s=this._step,a=this._targetState,u=this._timestamp,l=u+i+o,t=Math.min(t||v.now(),l),c=l<=t,l=o-(l-t);this.isPlaying()&&(c?(s(a,this._attachment,l),this.stop(!0)):(this._scheduleId=this._scheduleFunction.call(h,function(){return e._timeoutHandler.apply(e,n)},1e3/60),this._applyFilter("beforeTween"),t<u+i?u=o=t=1:u+=i,g(t,r,this._originalState,a,o,u,this._easing),this._applyFilter("afterTween"),s(r,this._attachment,l)))}},{key:"tween",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,e=this._attachment,n=this._configured;return this._isTweening?this:(void 0===t&&n||this.setConfig(t),this._timestamp=v.now(),this._start(this.get(),e),this.resume())}},{key:"setConfig",value:function(){var n=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=(this._configured=!0,this._attachment=t.attachment,(0,u.default)(this,{_pausedAtTime:null,_scheduleId:null,_delay:t.delay||0,_start:t.start||o,_step:t.step||o,_duration:t.duration||500,_currentState:f(t.from||this.get())}),(0,u.default)(this,{_originalState:this.get(),_targetState:f(t.to||this.get())}),this._currentState),e=(this._targetState=(0,u.default)({},e,this._targetState),this._easing=y(e,t.easing),this._filterArgs=[e,this._originalState,this._targetState,this._easing],this._applyFilter("tweenCreated"),t.promise||Promise);return this._promise=new e(function(t,e){n._resolve=t,n._reject=e}),this._promise.catch(o),this}},{key:"get",value:function(){return f(this._currentState)}},{key:"set",value:function(t){this._currentState=t}},{key:"pause",value:function(){return this._pausedAtTime=v.now(),this._isPaused=!0,this}},{key:"resume",value:function(){return this._isPaused&&(this._timestamp+=v.now()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this._promise}},{key:"seek",value:function(t){t=Math.max(t,0);var e=v.now();return this._timestamp+t===0||(this._timestamp=e-t,this.isPlaying())||(this._isTweening=!0,this._isPaused=!1,this._timeoutHandler(e),this.pause()),this}},{key:"stop",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=this._attachment,n=this._currentState,r=this._easing,i=this._originalState,o=this._targetState;return this._isTweening=!1,this._isPaused=!1,l(this._scheduleId),t?(this._applyFilter("beforeTween"),g(1,n,i,o,1,0,r),this._applyFilter("afterTween"),this._applyFilter("afterTweenEnd"),this._resolve(n,e)):this._reject(n,e),this}},{key:"isPlaying",value:function(){return this._isTweening&&!this._isPaused}},{key:"setScheduleFunction",value:function(t){this._scheduleFunction=t}},{key:"dispose",value:function(){var e=this;p(this,function(t){return delete e[t]})}}]),v);function v(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,n=this,r=v;if(!(n instanceof r))throw new TypeError("Cannot call a class as a function");this._currentState=t,this._configured=!1,this._scheduleFunction=c,void 0!==e&&this.setConfig(e)}(0,u.default)(m,{formulas:d,filters:{token:a},now:Date.now||function(t){return+new Date}})}.call(_,b(4))},function(t,e,n){"use strict";var u=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(Object.assign){var t=new String("abc");if(t[5]="de","5"!==Object.getOwnPropertyNames(t)[0]){for(var e,n={},r=0;r<10;r++)n["_"+String.fromCharCode(r)]=r;if("0123456789"===Object.getOwnPropertyNames(n).map(function(t){return n[t]}).join(""))return e={},"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},e)).join("")}}}catch(t){}}()?Object.assign:function(t,e){for(var n,r=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),i=1;i<arguments.length;i++){for(var o in n=Object(arguments[i]))l.call(n,o)&&(r[o]=n[o]);if(u)for(var s=u(n),a=0;a<s.length;a++)c.call(n,s[a])&&(r[s[a]]=n[s[a]])}return r}},function(t,e,n){"use strict";function l(t,e,n,r,i,o){function u(t){return((c*t+h)*t+p)*t}function l(t){return 0<=t?t:0-t}var c=0,h=0,p=0,c=1-(p=3*e)-(h=3*(r-e)-p),i=1-(r=3*n)-(e=3*(i-n)-r);return n=function(t,e){for(var n=void 0,r=void 0,i=void 0,o=void 0,s=void 0,a=void 0,i=t,a=0;a<8;a++){if(o=u(i)-t,l(o)<e)return i;if(l(s=(3*c*i+2*h)*i+p)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if((r=1)<i)return r;for(;n<r;){if(o=u(i),l(o-t)<e)return i;o<t?n=i:r=i,i=.5*(r-n)+n}return i}(t,n=1/(200*o)),((i*n+e)*n+r)*n}Object.defineProperty(e,"__esModule",{value:!0}),e.unsetBezierFunction=e.setBezierFunction=void 0;var c=n(0),n=n(1),h=n&&n.__esModule?n:{default:n};e.setBezierFunction=function(t,e,n,r,i){return c.Tweenable.formulas[t]=(0,h.default)(function(t){return l(t,o,s,a,u,1)},{displayName:t,x1:o=e,y1:s=n,x2:a=r,y2:u=i});var o,s,a,u},e.unsetBezierFunction=function(t){return delete c.Tweenable.formulas[t]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.interpolate=void 0;var s=n(0),a=new s.Tweenable;a._filterArgs=[],e.interpolate=function(t,e,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=(0,s.clone)(t),r=(0,s.composeEasingObject)(t,r),n=(a.set({}),a._filterArgs=[o,t,e,r],a._applyFilter("tweenCreated"),a._applyFilter("beforeTween"),(0,s.tweenProps)(n,o,t,e,1,i,r));return a._applyFilter("afterTween"),n}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(i=window)}t.exports=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.linear=function(t){return t},e.easeInQuad=function(t){return Math.pow(t,2)},e.easeOutQuad=function(t){return-(Math.pow(t-1,2)-1)},e.easeInOutQuad=function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},e.easeInCubic=function(t){return Math.pow(t,3)},e.easeOutCubic=function(t){return Math.pow(t-1,3)+1},e.easeInOutCubic=function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},e.easeInQuart=function(t){return Math.pow(t,4)},e.easeOutQuart=function(t){return-(Math.pow(t-1,4)-1)},e.easeInOutQuart=function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},e.easeInQuint=function(t){return Math.pow(t,5)},e.easeOutQuint=function(t){return Math.pow(t-1,5)+1},e.easeInOutQuint=function(t){return(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)},e.easeInSine=function(t){return 1-Math.cos(t*(Math.PI/2))},e.easeOutSine=function(t){return Math.sin(t*(Math.PI/2))},e.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.easeInExpo=function(t){return 0===t?0:Math.pow(2,10*(t-1))},e.easeOutExpo=function(t){return 1===t?1:1-Math.pow(2,-10*t)},e.easeInOutExpo=function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},e.easeInCirc=function(t){return-(Math.sqrt(1-t*t)-1)},e.easeOutCirc=function(t){return Math.sqrt(1-Math.pow(t-1,2))},e.easeInOutCirc=function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.easeOutBounce=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.easeInBack=function(t){return t*t*(2.70158*t-1.70158)},e.easeOutBack=function(t){return--t*t*(2.70158*t+1.70158)+1},e.easeInOutBack=function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},e.elastic=function(t){return-1*Math.pow(4,-8*t)*Math.sin((6*t-1)*(2*Math.PI)/2)+1},e.swingFromTo=function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},e.swingFrom=function(t){return t*t*(2.70158*t-1.70158)},e.swingTo=function(t){return--t*t*(2.70158*t+1.70158)+1},e.bounce=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.bouncePast=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?2-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},e.easeFromTo=function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},e.easeFrom=function(t){return Math.pow(t,4)},e.easeTo=function(t){return Math.pow(t,.25)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=(Object.defineProperty(e,"Tweenable",{enumerable:!0,get:function(){return r.Tweenable}}),Object.defineProperty(e,"tween",{enumerable:!0,get:function(){return r.tween}}),n(3)),o=(Object.defineProperty(e,"interpolate",{enumerable:!0,get:function(){return i.interpolate}}),n(2));Object.defineProperty(e,"setBezierFunction",{enumerable:!0,get:function(){return o.setBezierFunction}}),Object.defineProperty(e,"unsetBezierFunction",{enumerable:!0,get:function(){return o.unsetBezierFunction}})},function(t,e,n){"use strict";function r(t){return parseInt(t,16)}Object.defineProperty(e,"__esModule",{value:!0}),e.tweenCreated=function(t,e,n){[t,e,n].forEach(s),this._tokenData=u(t)},e.beforeTween=function(t,e,n,r){var i=this._tokenData;g(r,i),[t,e,n].forEach(function(t){return f(t,i)})},e.afterTween=function(t,e,n,r){var i=this._tokenData;[t,e,n].forEach(function(t){return d(t,i)}),y(r,i)};function a(t){return t.match(/[0-9.\-]+/g)}var l=n(0),c=(e=/[0-9.\-]+/g.source,n=/,\s*/.source,new RegExp("rgb\\("+e+n+e+n+e+"\\)","g")),i=/#([0-9]|[a-f]){3,6}/gi,o=function(t){return"rgb("+[r((t=3===(t=(t=t).replace(/#/,"")).length?(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]:t).substr(0,2)),r(t.substr(2,2)),r(t.substr(4,2))].join(",")+")"},h=function(t,e,n){var r=e.match(t),i=e.replace(t,"VAL");return r&&r.forEach(function(t){return i=i.replace("VAL",n(t))}),i},s=function(n){(0,l.each)(n,function(t){var e=n[t];"string"==typeof e&&e.match(i)&&(n[t]=h(i,e,o))})},p=function(t){var e=t.match(/[0-9.\-]+/g).map(Math.floor);return""+t.match(/^.*\(/)[0]+e.join(",")+")"},u=function(o){var s={};return(0,l.each)(o,function(t){var n,e,r,i=o[t];"string"==typeof i&&(s[t]={formatString:((r=(e=i).match(/([^\-0-9\.]+)/g))?1!==r.length&&!e.charAt(0).match(/(\d|\-|\.)/)||r.unshift(""):r=["",""],r.join("VAL")),chunkNames:(e=a(i),n=t,e.map(function(t,e){return"_"+n+"_"+e}))})}),s},f=function(r,i){(0,l.each)(i,function(n){a(r[n]).forEach(function(t,e){return r[i[n].chunkNames[e]]=+t}),delete r[n]})},d=function(a,u){(0,l.each)(u,function(t){var e,n,r,i,o=u[t],s=o.chunkNames,o=o.formatString,o=(e=o,r=a,i={},s.forEach(function(t){i[t]=r[t],delete r[t]}),n=i,s,s.map(function(t){return n[t]}).forEach(function(t){return e=e.replace("VAL",+t.toFixed(4))}),e);a[t]=h(c,o,p)})},g=function(o,s){(0,l.each)(s,function(t){var n,r,e=s[t].chunkNames,i=o[t];"string"==typeof i?(n=i.split(" "),r=n[n.length-1],e.forEach(function(t,e){return o[t]=n[e]||r})):e.forEach(function(t){return o[t]=i}),delete o[t]})},y=function(r,i){(0,l.each)(i,function(t){var e=i[t].chunkNames,n=(e.length,r[e[0]]);r[t]="string"==typeof n?e.map(function(t){var e=r[t];return delete r[t],e}).join(" "):n})}}],i={},r.m=n,r.c=i,r.i=function(t){return t},r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/assets/",r(r.s=6);function r(t){var e;return(i[t]||(e=i[t]={i:t,l:!1,exports:{}},n[t].call(e.exports,e,e.exports,r),e.l=!0,e)).exports}var n,i},"object"==typeof n&&"object"==typeof e?e.exports=i():"function"==typeof define&&define.amd?define("shifty",[],i):"object"==typeof n?n.shifty=i():r.shifty=i()},{}],292:[function(t,e,n){var o=t("./url"),r=t("socket.io-parser"),s=t("./manager"),a=t("debug")("socket.io-client"),u=(e.exports=n=i,n.managers={});function i(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var t=o(t),n=t.source,r=t.id,i=t.path,i=u[r]&&i in u[r].nsps,i=e.forceNew||e["force new connection"]||!1===e.multiplex||i?(a("ignoring socket cache for %s",n),s(n,e)):(u[r]||(a("new io instance for %s",n),u[r]=s(n,e)),u[r]);return t.query&&!e.query&&(e.query=t.query),i.socket(t.path,e)}n.protocol=r.protocol,n.connect=i,n.Manager=t("./manager"),n.Socket=t("./socket")},{"./manager":293,"./socket":295,"./url":296,debug:297,"socket.io-parser":300}],293:[function(t,e,n){var u=t("engine.io-client"),o=t("./socket"),r=t("component-emitter"),i=t("socket.io-parser"),l=t("./on"),s=t("component-bind"),c=t("debug")("socket.io-client:manager"),a=t("indexof"),h=t("backo2"),p=Object.prototype.hasOwnProperty;function f(t,e){if(!(this instanceof f))return new f(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];t=e.parser||i;this.encoder=new t.Encoder,this.decoder=new t.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}(e.exports=f).prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},f.prototype.updateSocketIds=function(){for(var t in this.nsps)p.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},f.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},r(f.prototype),f.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},f.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},f.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},f.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},f.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},f.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},f.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},f.prototype.open=f.prototype.connect=function(n,t){var e,r,i,o,s,a;return c("readyState %s",this.readyState),~this.readyState.indexOf("open")||(c("opening %s",this.uri),this.engine=u(this.uri,this.opts),e=this.engine,(r=this).readyState="opening",this.skipReconnect=!1,i=l(e,"open",function(){r.onopen(),n&&n()}),o=l(e,"error",function(t){var e;c("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),n?((e=new Error("Connection error")).data=t,n(e)):r.maybeReconnectOnOpen()}),!1!==this._timeout&&(s=this._timeout,c("connect attempt will timeout after %d",s),0===s&&i.destroy(),a=setTimeout(function(){c("connect attempt timed out after %d",s),i.destroy(),e.close(),e.emit("error","timeout"),r.emitAll("connect_timeout",s)},s),this.subs.push({destroy:function(){clearTimeout(a)}})),this.subs.push(i),this.subs.push(o)),this},f.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(l(t,"data",s(this,"ondata"))),this.subs.push(l(t,"ping",s(this,"onping"))),this.subs.push(l(t,"pong",s(this,"onpong"))),this.subs.push(l(t,"error",s(this,"onerror"))),this.subs.push(l(t,"close",s(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",s(this,"ondecoded")))},f.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},f.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},f.prototype.ondata=function(t){this.decoder.add(t)},f.prototype.ondecoded=function(t){this.emit("packet",t)},f.prototype.onerror=function(t){c("error",t),this.emitAll("error",t)},f.prototype.socket=function(t,e){var n,r=this.nsps[t];function i(){~a(n.connecting,r)||n.connecting.push(r)}return r||(r=new o(this,t,e),this.nsps[t]=r,n=this,r.on("connecting",i),r.on("connect",function(){r.id=n.generateId(t)}),this.autoConnect&&i()),r},f.prototype.destroy=function(t){t=a(this.connecting,t);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},f.prototype.packet=function(n){c("writing packet %j",n);var r=this;n.query&&0===n.type&&(n.nsp+="?"+n.query),r.encoding?r.packetBuffer.push(n):(r.encoding=!0,this.encoder.encode(n,function(t){for(var e=0;e<t.length;e++)r.engine.write(t[e],n.options);r.encoding=!1,r.processPacketQueue()}))},f.prototype.processPacketQueue=function(){var t;0<this.packetBuffer.length&&!this.encoding&&(t=this.packetBuffer.shift(),this.packet(t))},f.prototype.cleanup=function(){c("cleanup");for(var t=this.subs.length,e=0;e<t;e++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},f.prototype.close=f.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},f.prototype.onclose=function(t){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},f.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t,e,n=this;this.backoff.attempts>=this._reconnectionAttempts?(c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(t=this.backoff.duration(),c("will wait %dms before reconnect attempt",t),this.reconnecting=!0,e=setTimeout(function(){n.skipReconnect||(c("attempting reconnect"),n.emitAll("reconnect_attempt",n.backoff.attempts),n.emitAll("reconnecting",n.backoff.attempts),n.skipReconnect)||n.open(function(t){t?(c("reconnect attempt error"),n.reconnecting=!1,n.reconnect(),n.emitAll("reconnect_error",t.data)):(c("reconnect success"),n.onreconnect())})},t),this.subs.push({destroy:function(){clearTimeout(e)}}))},f.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},{"./on":294,"./socket":295,backo2:13,"component-bind":17,"component-emitter":18,debug:297,"engine.io-client":22,indexof:39,"socket.io-parser":300}],294:[function(t,e,n){e.exports=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}},{}],295:[function(t,e,n){var i=t("socket.io-parser"),r=t("component-emitter"),o=t("to-array"),s=t("./on"),a=t("component-bind"),u=t("debug")("socket.io-client:socket"),l=t("parseqs"),c=t("has-binary2"),h=(e.exports=f,{connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1}),p=r.prototype.emit;function f(t,e,n){this.io=t,this.nsp=e,(this.json=this).ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}r(f.prototype),f.prototype.subEvents=function(){var t;this.subs||(t=this.io,this.subs=[s(t,"open",a(this,"onopen")),s(t,"packet",a(this,"onpacket")),s(t,"close",a(this,"onclose"))])},f.prototype.open=f.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},f.prototype.send=function(){var t=o(arguments);return t.unshift("message"),this.emit.apply(this,t),this},f.prototype.emit=function(t){var e,n;return h.hasOwnProperty(t)?p.apply(this,arguments):(e=o(arguments),(n={type:(void 0!==this.flags.binary?this.flags.binary:c(e))?i.BINARY_EVENT:i.EVENT,data:e,options:{}}).options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={}),this},f.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},f.prototype.onopen=function(){var t;u("transport is open - connecting"),"/"!==this.nsp&&(this.query?(t="object"==typeof this.query?l.encode(this.query):this.query,u("sending connect packet with query %s",t),this.packet({type:i.CONNECT,query:t})):this.packet({type:i.CONNECT}))},f.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},f.prototype.onpacket=function(t){var e=t.nsp===this.nsp,n=t.type===i.ERROR&&"/"===t.nsp;if(e||n)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},f.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?p.apply(this,e):this.receiveBuffer.push(e)},f.prototype.ack=function(e){var n=this,r=!1;return function(){var t;r||(r=!0,t=o(arguments),u("sending ack %j",t),n.packet({type:c(t)?i.BINARY_ACK:i.ACK,id:e,data:t}))}},f.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},f.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emit("connect")},f.prototype.emitBuffered=function(){for(var t=0;t<this.receiveBuffer.length;t++)p.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},f.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},f.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},f.prototype.close=f.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},f.prototype.compress=function(t){return this.flags.compress=t,this},f.prototype.binary=function(t){return this.flags.binary=t,this}},{"./on":294,"component-bind":17,"component-emitter":18,debug:297,"has-binary2":37,parseqs:110,"socket.io-parser":300,"to-array":302}],296:[function(t,e,n){var r=t("parseuri"),i=t("debug")("socket.io-client:url");e.exports=function(t,e){var n=t;e=e||"undefined"!=typeof location&&location,null==t&&(t=e.protocol+"//"+e.host);"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),i("parse %s",t),n=r(t));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";t=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+t+":"+n.port,n.href=n.protocol+"://"+t+(e&&e.port===n.port?"":":"+n.port),n}},{debug:297,parseuri:111}],297:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{"./debug":298,_process:322,dup:31}],298:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32,ms:51}],299:[function(t,e,n){var c=t("isarray"),h=t("./is-buffer"),t=Object.prototype.toString,p="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===t.call(Blob),f="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===t.call(File);n.deconstructPacket=function(t){var e=[],n=t.data;return t.data=function t(e,n){if(!e)return e;{var r;if(h(e))return r={_placeholder:!0,num:n.length},n.push(e),r;if(c(e)){for(var i=new Array(e.length),o=0;o<e.length;o++)i[o]=t(e[o],n);return i}if("object"==typeof e&&!(e instanceof Date)){var s,i={};for(s in e)i[s]=t(e[s],n);return i}}return e}(n,e),t.attachments=e.length,{packet:t,buffers:e}},n.reconstructPacket=function(t,e){return t.data=function t(e,n){if(!e)return e;{if(e&&!0===e._placeholder){var r="number"==typeof e.num&&0<=e.num&&e.num<n.length;if(r)return n[e.num];throw new Error("illegal attachments")}if(c(e))for(var i=0;i<e.length;i++)e[i]=t(e[i],n);else if("object"==typeof e)for(var o in e)e[o]=t(e[o],n)}return e}(t.data,e),t.attachments=void 0,t},n.removeBlobs=function(t,a){var u=0,l=t;!function t(e,n,r){if(e)if(p&&e instanceof Blob||f&&e instanceof File){u++;var i=new FileReader;i.onload=function(){r?r[n]=this.result:l=this.result,--u||a(l)},i.readAsArrayBuffer(e)}else if(c(e))for(var o=0;o<e.length;o++)t(e[o],o,e);else if("object"==typeof e&&!h(e))for(var s in e)t(e[s],s,e)}(l),u||a(l)}},{"./is-buffer":301,isarray:40}],300:[function(t,e,s){var a=t("debug")("socket.io-parser"),n=t("component-emitter"),r=t("./binary"),u=t("isarray"),i=t("./is-buffer");function o(){}s.protocol=4,s.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],s.CONNECT=0,s.DISCONNECT=1,s.EVENT=2,s.ACK=3,s.ERROR=4,s.BINARY_EVENT=5,s.BINARY_ACK=6,s.Encoder=o,s.Decoder=h;var l=s.ERROR+'"encode error"';function c(t){var e=""+t.type;if(s.BINARY_EVENT!==t.type&&s.BINARY_ACK!==t.type||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data){var n=function(t){try{return JSON.stringify(t)}catch(t){return!1}}(t.data);if(!1===n)return l;e+=n}return a("encoded %j as %s",t,e),e}function h(){this.reconstructor=null}function p(t){this.reconPack=t,this.buffers=[]}function f(t){return{type:s.ERROR,data:"parser error: "+t}}o.prototype.encode=function(t,e){var n;a("encoding packet %j",t),s.BINARY_EVENT===t.type||s.BINARY_ACK===t.type?(n=e,r.removeBlobs(t,function(t){var e=c((t=r.deconstructPacket(t)).packet);(t=t.buffers).unshift(e),n(t)})):e([c(t)])},n(h.prototype),h.prototype.add=function(t){var e;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=function(t){var e=0,n={type:Number(t.charAt(0))};if(null==s.types[n.type])return f("unknown packet type "+n.type);if(s.BINARY_EVENT===n.type||s.BINARY_ACK===n.type){for(var r=e+1;"-"!==t.charAt(++e)&&e!=t.length;);var i=t.substring(r,e);if(i!=Number(i)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===t.charAt(e+1)){for(r=e+1;++e;){if(","===(o=t.charAt(e)))break;if(e===t.length)break}n.nsp=t.substring(r,e)}else n.nsp="/";i=t.charAt(e+1);if(""!==i&&Number(i)==i){for(var o,r=e+1;++e;){if(null==(o=t.charAt(e))||Number(o)!=o){--e;break}if(e===t.length)break}n.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){i=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(e));if(!(!1!==i&&(n.type===s.ERROR||u(i))))return f("invalid payload");n.data=i}return a("decoded %s as %j",t,n),n}(t),(s.BINARY_EVENT!==e.type&&s.BINARY_ACK!==e.type||(this.reconstructor=new p(e),0===this.reconstructor.reconPack.attachments))&&this.emit("decoded",e)}else{if(!i(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",e))}},h.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(t){return this.buffers.push(t),this.buffers.length===this.reconPack.attachments?(t=r.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),t):null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":299,"./is-buffer":301,"component-emitter":18,debug:297,isarray:40}],301:[function(t,o,e){!function(i){!function(){o.exports=function(t){return e&&i.isBuffer(t)||n&&(t instanceof ArrayBuffer||r(t))};var e="function"==typeof i&&"function"==typeof i.isBuffer,n="function"==typeof ArrayBuffer,r=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}}.call(this)}.call(this,t("buffer").Buffer)},{buffer:319}],302:[function(t,e,n){e.exports=function(t,e){for(var n=[],r=(e=e||0)||0;r<t.length;r++)n[r-e]=t[r];return n}},{}],303:[function(t,e,n){"use strict";var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,s={},a=0,u=0;function l(t){for(var e="";e=i[t%o]+e,0<(t=Math.floor(t/o)););return e}function c(){var t=l(+new Date);return t!==r?(a=0,r=t):t+"."+l(a++)}for(;u<o;u++)s[i[u]]=u;c.encode=l,c.decode=function(t){var e=0;for(u=0;u<t.length;u++)e=e*o+s[t.charAt(u)];return e},e.exports=c},{}],304:[function(t,e,n){var i=t("p2"),o=new Object;o.online=!0,o.length=function(t,e){return 0==e?t/100:100*t},o.xAxis=function(t,e){return o.length(t,e)},o.yAxis=function(t,e){return-1*o.length(t,e)},o.createWorld=function(){var t=new i.World;return o.attachContactEvents(t),t},o.attachContactEvents=function(t){t.on("beginContact",function(t){void 0!==t.shapeA.onTouchStart&&t.shapeA.onTouchStart(t.shapeB),void 0!==t.shapeB.onTouchStart&&t.shapeB.onTouchStart(t.shapeA)}),t.on("endContact",function(t){void 0!==t.shapeA.onTouchEnd&&t.shapeA.onTouchEnd(t.shapeB),void 0!==t.shapeB.onTouchEnd&&t.shapeB.onTouchEnd(t.shapeA)})},o.createRay=function(){var t=new i.Ray({mode:i.Ray.CLOSEST,callback:function(){}});return t.result=new i.RaycastResult,t},o.createBody=function(t){return new i.Body(t)},o.createShape=function(t){return t.type==i.Shape.BOX?new i.Box(t):t.type==i.Shape.CIRCLE?new i.Circle(t):t.type==i.Shape.CONVEX?new i.Convex(t):void 0},o.updateMass=function(t,e){t.mass=e,t.type=0==e?i.Body.STATIC:i.Body.DYNAMIC,t.updateMassProperties(),0==e&&(t.velocity=[0,0],t.angularVelocity=0)},o.getGlobalPositionOfShape=function(t){var e=Math.atan2(t.position[1],t.position[0]),n=Math.sqrt(Math.pow(t.position[0],2)+Math.pow(t.position[1],2)),e=e+t.body.angle,r=n*Math.cos(e),n=n*Math.sin(e);return{x:t.body.position[0]+r,y:t.body.position[1]+n,angle:t.angle+t.body.angle}},o.getLocalPositionOfShape=function(t,e){var t=o.getGlobalPositionOfShape(t),n=t.x-e.position[0],r=t.y-e.position[1],i=Math.atan2(r,n)-e.angle,n=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));return{x:n*Math.cos(i),y:n*Math.sin(i),angle:t.angle-e.angle}},o.lockTwoBodies=function(t,e,n,r){e=new i.LockConstraint(e,n,{localOffsetB:[0,0],localAngleB:0,maxForce:1/0});return e.collideConnected=!1,t.addConstraint(e),e},o.createCollisionLayers=function(){this.collisionLayers=[];for(var t=0;t<26;t++)collisionLayers[t]=Math.pow(2,t);return this.collisionLayers},e.exports=o},{p2:83}],305:[function(t,e,n){t=t("../modules/remoteFunction");e.exports=new t("clientReady")},{"../modules/remoteFunction":9}],306:[function(t,e,n){t=t("../modules/remoteFunction");e.exports=new t("connect")},{"../modules/remoteFunction":9}],307:[function(t,e,n){t=t("../modules/remoteFunction");e.exports=new t("connect_error")},{"../modules/remoteFunction":9}],308:[function(t,e,n){t=t("../modules/remoteFunction");e.exports=new t("ddos")},{"../modules/remoteFunction":9}],309:[function(t,e,n){t=t("../modules/remoteFunction");e.exports=new t("disconnect")},{"../modules/remoteFunction":9}],310:[function(t,e,n){t=t("../modules/remoteFunction");e.exports=new t("humanVerification")},{"../modules/remoteFunction":9}],311:[function(t,e,n){t=t("../modules/remoteFunction");e.exports=new t("kickPlayer")},{"../modules/remoteFunction":9}],312:[function(t,e,n){t=t("../modules/remoteFunction");e.exports=new t("roomNum")},{"../modules/remoteFunction":9}],313:[function(t,e,n){t=t("../modules/remoteFunction");e.exports=new t("serversInfo")},{"../modules/remoteFunction":9}],314:[function(t,e,n){t=t("../modules/remoteFunction");e.exports=new t("statz")},{"../modules/remoteFunction":9}],315:[function(t,e,n){t=t("../modules/remoteFunction");e.exports=new t("sv")},{"../modules/remoteFunction":9}],316:[function(t,e,n){var r=t("mainloop.js"),i={bgTimeStep:100,init:function(t){this.client=t,document.addEventListener("visibilitychange",function(){"visible"==document.visibilityState?i.switchFG():i.switchBG()},!1)},switchFG:function(){null!=this.worker&&(this.worker.terminate(),this.worker=void 0),r.start()},switchBG:function(){var t=new Blob(["self.onmessage ="+function(t){"startTimer"==t.data?(clearInterval(self._id),self._id=setInterval(function(){self.postMessage("update")},35)):"stopTimer"==t.data&&clearInterval(self._id)}.toString()],{type:"text/javascript"});null!=this.worker&&(this.worker.terminate(),this.worker=void 0),this.worker=new Worker(window.URL.createObjectURL(t)),this.worker.onmessage=function(t){i.client.update(i.bgTimeStep),console.log("updating the game loop")},this.worker.postMessage("startTimer"),r.stop()}};e.exports=i},{"mainloop.js":49}],317:[function(t,e,n){"use strict";n.byteLength=function(t){var t=c(t),e=t[0],t=t[1];return 3*(e+t)/4-t},n.toByteArray=function(t){var e,n,r=c(t),i=r[0],r=r[1],o=new l(function(t,e){return 3*(t+e)/4-e}(i,r)),s=0,a=0<r?i-4:i;for(n=0;n<a;n+=4)e=u[t.charCodeAt(n)]<<18|u[t.charCodeAt(n+1)]<<12|u[t.charCodeAt(n+2)]<<6|u[t.charCodeAt(n+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=255&e;2===r&&(e=u[t.charCodeAt(n)]<<2|u[t.charCodeAt(n+1)]>>4,o[s++]=255&e);1===r&&(e=u[t.charCodeAt(n)]<<10|u[t.charCodeAt(n+1)]<<4|u[t.charCodeAt(n+2)]>>2,o[s++]=e>>8&255,o[s++]=255&e);return o},n.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i=[],o=0,s=n-r;o<s;o+=16383)i.push(function(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(function(t){return a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}(r));return i.join("")}(t,o,s<o+16383?s:o+16383));1==r?(e=t[n-1],i.push(a[e>>2]+a[e<<4&63]+"==")):2==r&&(e=(t[n-2]<<8)+t[n-1],i.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"="));return i.join("")};for(var a=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)a[i]=r[i],u[r.charCodeAt(i)]=i;function c(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");t=t.indexOf("="),e=(t=-1===t?e:t)===e?0:4-t%4;return[t,e]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],318:[function(t,e,n){},{}],319:[function(R,t,I){!function(t){!function(){"use strict";var E=R("base64-js"),o=R("ieee754"),e=(I.Buffer=h,I.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},I.INSPECT_MAX_BYTES=50,2147483647);function u(t){if(e<t)throw new RangeError('The value "'+t+'" is invalid for option "size"');t=new Uint8Array(t);return t.__proto__=h.prototype,t}function h(t,e,n){if("number"!=typeof t)return r(t,e,n);if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return s(t)}function r(t,e,n){if("string"==typeof t){var r=t,i=e;if(h.isEncoding(i="string"==typeof i&&""!==i?i:"utf8"))return o=0|p(r,i),s=u(o),s=(r=s.write(r,i))!==o?s.slice(0,r):s;throw new TypeError("Unknown encoding: "+i)}if(ArrayBuffer.isView(t))return l(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(M(t,ArrayBuffer)||t&&M(t.buffer,ArrayBuffer)){var o=t,r=e,s=n;if(r<0||o.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<r+(s||0))throw new RangeError('"length" is outside of buffer bounds');return(o=void 0===r&&void 0===s?new Uint8Array(o):void 0===s?new Uint8Array(o,r):new Uint8Array(o,r,s)).__proto__=h.prototype,o}if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return h.from(i,e,n);var a=function(t){{var e,n;if(h.isBuffer(t))return e=0|c(t.length),0!==(n=u(e)).length&&t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||O(t.length)?u(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}(t);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function i(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function s(t){return i(t),u(t<0?0:0|c(t))}function l(t){for(var e=t.length<0?0:0|c(t.length),n=u(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function c(t){if(e<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e.toString(16)+" bytes");return 0|t}function p(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||M(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return C(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return A(t).length;default:if(i)return r?-1:C(t).length;e=(""+e).toLowerCase(),i=!0}}function n(t,e,n){var r,i=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":var o=this,s=e,a=n,u=o.length;(!a||a<0||u<a)&&(a=u);for(var l="",c=s=!s||s<0?0:s;c<a;++c)l+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(o[c]);return l;case"utf8":case"utf-8":return S(this,e,n);case"ascii":var h=this,u=e,p=n,f="";p=Math.min(h.length,p);for(var d=u;d<p;++d)f+=String.fromCharCode(127&h[d]);return f;case"latin1":case"binary":var g=this,s=e,y=n,m="";y=Math.min(g.length,y);for(var v=s;v<y;++v)m+=String.fromCharCode(g[v]);return m;case"base64":return _=this,r=n,0===(b=e)&&r===_.length?E.fromByteArray(_):E.fromByteArray(_.slice(b,r));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var _=e,b=n,x=this.slice(_,b),w="",T=0;T<x.length;T+=2)w+=String.fromCharCode(x[T]+256*x[T+1]);return w;default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function a(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function f(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),(n=(n=O(n=+n)?i?0:t.length-1:n)<0?t.length+n:n)>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=h.from(e,r)),h.isBuffer(e))return 0===e.length?-1:d(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,n):d(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function d(t,e,n,r,i){var o=1,s=t.length,a=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s/=o=2,a/=2,n/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i)for(var l=-1,c=n;c<s;c++)if(u(t,c)===u(e,-1===l?0:c-l)){if(c-(l=-1===l?c:l)+1===a)return l*o}else-1!==l&&(c-=c-l),l=-1;else for(c=n=s<n+a?s-a:n;0<=c;c--){for(var h=!0,p=0;p<a;p++)if(u(t,c+p)!==u(e,p)){h=!1;break}if(h)return c}return-1}function y(t,e,n,r){return P(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function m(t,e,n,r){return P(function(t,e){for(var n,r,i=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i.push(n%256),i.push(r);return i}(e,t.length-n),t,n,r)}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,l=t[i],c=null,h=239<l?4:223<l?3:191<l?2:1;if(i+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[i+1]))&&127<(u=(31&l)<<6|63&o)&&(c=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&l)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(c=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(c=u)}null===c?(c=65533,h=1):65535<c&&(r.push((c-=65536)>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}var p=r,f=p.length;if(f<=v)return String.fromCharCode.apply(String,p);for(var d="",g=0;g<f;)d+=String.fromCharCode.apply(String,p.slice(g,g+=v));return d}I.kMaxLength=e,(h.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=r,h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(t,e,n){return e=e,n=n,i(t=t),!(t<=0)&&void 0!==e?"string"==typeof n?u(t).fill(e,n):u(t).fill(e):u(t)},h.allocUnsafe=s,h.allocUnsafeSlow=s,h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(M(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),M(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;for(var n=h.allocUnsafe(e),r=0,i=0;i<t.length;++i){var o=t[i];if(M(o,Uint8Array)&&(o=h.from(o)),!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},h.byteLength=p,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)a(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)a(this,e,e+3),a(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)a(this,e,e+7),a(this,e+1,e+6),a(this,e+2,e+5),a(this,e+3,e+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?S(this,0,t):n.apply(this,arguments)},h.prototype.equals=function(t){if(h.isBuffer(t))return this===t||0===h.compare(this,t);throw new TypeError("Argument must be a Buffer")},h.prototype.inspect=function(){var t="",e=I.INSPECT_MAX_BYTES,t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim();return this.length>e&&(t+=" ... "),"<Buffer "+t+">"},h.prototype.compare=function(t,e,n,r,i){if(M(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),(e=void 0===e?0:e)<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(r,i),l=t.slice(e,n),c=0;c<a;++c)if(u[c]!==l[c]){o=u[c],s=l[c];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},h.prototype.indexOf=function(t,e,n){return f(this,t,e,n,!0)},h.prototype.lastIndexOf=function(t,e,n){return f(this,t,e,n,!1)},h.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||i<n)&&(n=i),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,s,a,u=!1;;)switch(r){case"hex":var l=this,c=t,h=e,p=n,f=(h=Number(h)||0,l.length-h);(!p||f<(p=Number(p)))&&(p=f),(f=c.length)/2<p&&(p=f/2);for(var d=0;d<p;++d){var g=parseInt(c.substr(2*d,2),16);if(O(g))return d;l[h+d]=g}return d;case"utf8":case"utf-8":return f=e,a=n,P(C(t,(s=this).length-f),s,f,a);case"ascii":return y(this,t,e,n);case"latin1":case"binary":return y(this,t,e,n);case"base64":return s=this,a=e,o=n,P(A(t),s,a,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,t,e,n);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function g(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function _(t,e,n,r,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function b(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function x(t,e,n,r,i){return e=+e,n>>>=0,i||b(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function w(t,e,n,r,i){return e=+e,n>>>=0,i||b(t,0,n,8),o.write(t,e,n,r,52,8),n+8}h.prototype.slice=function(t,e){var n=this.length,n=((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),this.subarray(t,e));return n.__proto__=h.prototype,n},h.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||g(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},h.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||g(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},h.prototype.readUInt8=function(t,e){return t>>>=0,e||g(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||g(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||g(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||g(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||g(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||g(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*e)),r},h.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||g(t,e,this.length);for(var r=e,i=1,o=this[t+--r];0<r&&(i*=256);)o+=this[t+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||g(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||g(t,2,this.length);e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},h.prototype.readInt16BE=function(t,e){t>>>=0,e||g(t,2,this.length);e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||g(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||g(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return t>>>=0,e||g(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||g(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||g(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||g(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||_(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},h.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||_(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+n},h.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeIntLE=function(t,e,n,r){t=+t,e>>>=0,r||_(this,t,e,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,s=0;for(this[e]=255&t;++i<n&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},h.prototype.writeIntBE=function(t,e,n,r){t=+t,e>>>=0,r||_(this,t,e,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,s=0;for(this[e+i]=255&t;0<=--i&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},h.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,1,127,-128),this[e]=255&(t=t<0?255+t+1:t),e+1},h.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,4,2147483647,-2147483648),this[e]=(t=t<0?4294967295+t+1:t)>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeFloatLE=function(t,e,n){return x(this,t,e,!0,n)},h.prototype.writeFloatBE=function(t,e,n){return x(this,t,e,!1,n)},h.prototype.writeDoubleLE=function(t,e,n){return w(this,t,e,!0,n)},h.prototype.writeDoubleBE=function(t,e,n){return w(this,t,e,!1,n)},h.prototype.copy=function(t,e,n,r){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var i=(r=t.length-e<r-n?t.length-e+n:r)-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,r);else if(this===t&&n<e&&e<r)for(var o=i-1;0<=o;--o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,r),e);return i},h.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i;1===t.length&&(i=t.charCodeAt(0),"utf8"===r&&i<128||"latin1"===r)&&(t=i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");var o;if(!(n<=e))if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(o=e;o<n;++o)this[o]=t;else{var s=h.isBuffer(t)?t:h.from(t,r),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var T=/[^+/0-9A-Za-z-_]/g;function C(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=t.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,n<128){if(--e<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function A(t){return E.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function P(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function M(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function O(t){return t!=t}}.call(this)}.call(this,R("buffer").Buffer)},{"base64-js":317,buffer:319,ieee754:320}],320:[function(t,e,n){n.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,l=u>>1,c=-7,h=n?i-1:0,p=n?-1:1,i=t[e+h];for(h+=p,o=i&(1<<-c)-1,i>>=-c,c+=a;0<c;o=256*o+t[e+h],h+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;0<c;s=256*s+t[e+h],h+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(i?-1:1);s+=Math.pow(2,r),o-=l}return(i?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var s,a,u=8*o-i-1,l=(1<<u)-1,c=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,o=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(e+=1<=s+c?h/r:h*Math.pow(2,1-c))*r&&(s++,r/=2),l<=s+c?(a=0,s=l):1<=s+c?(a=(e*r-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));8<=i;t[n+p]=255&a,p+=f,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;t[n+p]=255&s,p+=f,s/=256,u-=8);t[n+p-f]|=128*o}},{}],321:[function(t,e,n){!function(s){!function(){"use strict";function p(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function o(t,e){for(var n,r="",i=0,o=-1,s=0,a=0;a<=t.length;++a){if(a<t.length)n=t.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o!==a-1&&1!==s)if(o!==a-1&&2===s){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(2<r.length){var u=r.lastIndexOf("/");if(u!==r.length-1){i=-1===u?(r="",0):(r=r.slice(0,u)).length-1-r.lastIndexOf("/"),o=a,s=0;continue}}else if(2===r.length||1===r.length){r="",o=a,s=i=0;continue}e&&(0<r.length?r+="/..":r="..",i=2)}else 0<r.length?r+="/"+t.slice(o+1,a):r=t.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return r}var f={resolve:function(){for(var t,e="",n=!1,r=arguments.length-1;-1<=r&&!n;r--){var i=0<=r?arguments[r]:t=void 0===t?s.cwd():t;p(i),0!==i.length&&(e=i+"/"+e,n=47===i.charCodeAt(0))}return e=o(e,!n),n?0<e.length?"/"+e:"/":0<e.length?e:"."},normalize:function(t){var e,n;return p(t),0===t.length?".":(e=47===t.charCodeAt(0),n=47===t.charCodeAt(t.length-1),0<(t=0!==(t=o(t,!e)).length||e?t:".").length&&n&&(t+="/"),e?"/"+t:t)},isAbsolute:function(t){return p(t),0<t.length&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,e=0;e<arguments.length;++e){var n=arguments[e];p(n),0<n.length&&(void 0===t?t=n:t+="/"+n)}return void 0===t?".":f.normalize(t)},relative:function(t,e){if(p(t),p(e),t===e)return"";if((t=f.resolve(t))===(e=f.resolve(e)))return"";for(var n=1;n<t.length&&47===t.charCodeAt(n);++n);for(var r=t.length,i=r-n,o=1;o<e.length&&47===e.charCodeAt(o);++o);for(var s=e.length-o,a=i<s?i:s,u=-1,l=0;l<=a;++l){if(l===a){if(a<s){if(47===e.charCodeAt(o+l))return e.slice(o+l+1);if(0===l)return e.slice(o+l)}else a<i&&(47===t.charCodeAt(n+l)?u=l:0===l&&(u=0));break}var c=t.charCodeAt(n+l);if(c!==e.charCodeAt(o+l))break;47===c&&(u=l)}for(var h="",l=n+u+1;l<=r;++l)l!==r&&47!==t.charCodeAt(l)||(0===h.length?h+="..":h+="/..");return 0<h.length?h+e.slice(o+u):(47===e.charCodeAt(o+=u)&&++o,e.slice(o))},_makeLong:function(t){return t},dirname:function(t){if(p(t),0===t.length)return".";for(var e=47===t.charCodeAt(0),n=-1,r=!0,i=t.length-1;1<=i;--i)if(47===t.charCodeAt(i)){if(!r){n=i;break}}else r=!1;return-1===n?e?"/":".":e&&1===n?"//":t.slice(0,n)},basename:function(t,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');p(t);var n=0,r=-1,i=!0;if(void 0!==e&&0<e.length&&e.length<=t.length){if(e.length===t.length&&e===t)return"";for(var o=e.length-1,s=-1,a=t.length-1;0<=a;--a){var u=t.charCodeAt(a);if(47===u){if(!i){n=a+1;break}}else-1===s&&(i=!1,s=a+1),0<=o&&(u===e.charCodeAt(o)?-1==--o&&(r=a):(o=-1,r=s))}return n===r?r=s:-1===r&&(r=t.length),t.slice(n,r)}for(a=t.length-1;0<=a;--a)if(47===t.charCodeAt(a)){if(!i){n=a+1;break}}else-1===r&&(i=!1,r=a+1);return-1===r?"":t.slice(n,r)},extname:function(t){p(t);for(var e=-1,n=0,r=-1,i=!0,o=0,s=t.length-1;0<=s;--s){var a=t.charCodeAt(s);if(47===a){if(i)continue;n=s+1;break}-1===r&&(i=!1,r=s+1),46===a?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1)}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return e="/",n=(t=t).dir||t.root,r=t.base||(t.name||"")+(t.ext||""),n?n===t.root?n+r:n+e+r:r;var e,n,r},parse:function(t){p(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(0!==t.length){for(var n,r=47===t.charCodeAt(0),i=r?(e.root="/",1):0,o=-1,s=0,a=-1,u=!0,l=t.length-1,c=0;i<=l;--l){if(47===(n=t.charCodeAt(l))){if(u)continue;s=l+1;break}-1===a&&(u=!1,a=l+1),46===n?-1===o?o=l:1!==c&&(c=1):-1!==o&&(c=-1)}-1===o||-1===a||0===c||1===c&&o===a-1&&o===s+1?-1!==a&&(e.base=e.name=0===s&&r?t.slice(1,a):t.slice(s,a)):(0===s&&r?(e.name=t.slice(1,o),e.base=t.slice(1,a)):(e.name=t.slice(s,o),e.base=t.slice(s,a)),e.ext=t.slice(o,a)),0<s?e.dir=t.slice(0,s-1):r&&(e.dir="/")}return e},sep:"/",delimiter:":",win32:null,posix:null};f.posix=f,e.exports=f}.call(this)}.call(this,t("_process"))},{_process:322}],322:[function(t,e,n){var r,i,e=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return(r=setTimeout)(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}var u,l=[],c=!1,h=-1;function p(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length)&&f()}function f(){if(!c){for(var t=a(p),e=(c=!0,l.length);e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,!function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return(i=clearTimeout)(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}e.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||c||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=g,e.addListener=g,e.once=g,e.off=g,e.removeListener=g,e.removeAllListeners=g,e.emit=g,e.prependListener=g,e.prependOnceListener=g,e.listeners=function(t){return[]},e.binding=function(t){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(t){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],323:[function(t,P,M){!function(A){!function(){var t=this,e="object"==typeof M&&M&&!M.nodeType&&M,n="object"==typeof P&&P&&!P.nodeType&&P,r="object"==typeof A&&A;r.global!==r&&r.window!==r&&r.self!==r||(t=r);var i,o,y=2147483647,m=36,v=26,s=38,a=700,u=/^xn--/,l=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=m-1,_=Math.floor,b=String.fromCharCode;function x(t){throw new RangeError(h[t])}function f(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function d(t,e){var n=t.split("@"),r="",n=(1<n.length&&(r=n[0]+"@",t=n[1]),(t=t.replace(c,".")).split("."));return r+f(n,e).join(".")}function w(t){for(var e,n,r=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function g(t){return f(t,function(t){var e="";return 65535<t&&(e+=b((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=b(t)}).join("")}function T(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function E(t,e,n){var r=0;for(t=n?_(t/a):t>>1,t+=_(t/e);p*v>>1<t;r+=m)t=_(t/p);return _(r+(p+1)*t/(t+s))}function S(t){var e,n,r,i,o,s,a,u=[],l=t.length,c=0,h=128,p=72,f=t.lastIndexOf("-");for(f<0&&(f=0),n=0;n<f;++n)128<=t.charCodeAt(n)&&x("not-basic"),u.push(t.charCodeAt(n));for(r=0<f?f+1:0;r<l;){for(i=c,o=1,s=m;l<=r&&x("invalid-input"),a=t.charCodeAt(r++),(m<=(a=a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:m)||a>_((y-c)/o))&&x("overflow"),c+=a*o,!(a<(a=s<=p?1:p+v<=s?v:s-p));s+=m)o>_(y/(a=m-a))&&x("overflow"),o*=a;p=E(c-i,e=u.length+1,0==i),_(c/e)>y-h&&x("overflow"),h+=_(c/e),c%=e,u.splice(c++,0,h)}return g(u)}function C(t){for(var e,n,r,i,o,s,a,u,l,c,h=[],p=(t=w(t)).length,f=128,d=72,g=e=0;g<p;++g)(a=t[g])<128&&h.push(b(a));for(n=r=h.length,r&&h.push("-");n<p;){for(i=y,g=0;g<p;++g)f<=(a=t[g])&&a<i&&(i=a);for(i-f>_((y-e)/(u=n+1))&&x("overflow"),e+=(i-f)*u,f=i,g=0;g<p;++g)if((a=t[g])<f&&++e>y&&x("overflow"),a==f){for(o=e,s=m;!(o<(l=s<=d?1:d+v<=s?v:s-d));s+=m)h.push(b(T(l+(c=o-l)%(l=m-l),0))),o=_(c/l);h.push(b(T(o,0))),d=E(e,u,n==r),e=0,++n}++e,++f}return h.join("")}if(i={version:"1.4.1",ucs2:{decode:w,encode:g},decode:S,encode:C,toASCII:function(t){return d(t,function(t){return l.test(t)?"xn--"+C(t):t})},toUnicode:function(t){return d(t,function(t){return u.test(t)?S(t.slice(4).toLowerCase()):t})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return i});else if(e&&n)if(P.exports==e)n.exports=i;else for(o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);else t.punycode=i}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],324:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){e=e||"&",n=n||"=";var i={};if("string"==typeof t&&0!==t.length){var o=/\+/g,e=(t=t.split(e),1e3),s=(r&&"number"==typeof r.maxKeys&&(e=r.maxKeys),t.length);0<e&&e<s&&(s=e);for(var a=0;a<s;++a){var u,l=t[a].replace(o,"%20"),c=l.indexOf(n),c=0<=c?(u=l.substr(0,c),l.substr(c+1)):(u=l,""),l=decodeURIComponent(u),c=decodeURIComponent(c);Object.prototype.hasOwnProperty.call(i,l)?h(i[l])?i[l].push(c):i[l]=[i[l],c]:i[l]=c}}return i};var h=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],325:[function(t,e,n){"use strict";function o(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}e.exports=function(n,r,i,t){return r=r||"&",i=i||"=","object"==typeof(n=null===n?void 0:n)?a(u(n),function(t){var e=encodeURIComponent(o(t))+i;return s(n[t])?a(n[t],function(t){return e+encodeURIComponent(o(t))}).join(r):e+encodeURIComponent(o(n[t]))}).join(r):t?encodeURIComponent(o(t))+i+encodeURIComponent(o(n)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var u=Object.keys||function(t){var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n}},{}],326:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":324,"./encode":325}],327:[function(u,t,l){!function(n,a){!function(){var r=u("process/browser.js").nextTick,t=Function.prototype.apply,i=Array.prototype.slice,o={},s=0;function e(t,e){this._id=t,this._clearFn=e}l.setTimeout=function(){return new e(t.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new e(t.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(t){t.close()},e.prototype.unref=e.prototype.ref=function(){},e.prototype.close=function(){this._clearFn.call(window,this._id)},l.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},l.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},l._unrefActive=l.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},l.setImmediate="function"==typeof n?n:function(t){var e=s++,n=!(arguments.length<2)&&i.call(arguments,1);return o[e]=!0,r(function(){o[e]&&(n?t.apply(null,n):t.call(null),l.clearImmediate(e))}),e},l.clearImmediate="function"==typeof a?a:function(t){delete o[t]}}.call(this)}.call(this,u("timers").setImmediate,u("timers").clearImmediate)},{"process/browser.js":322,timers:327}],328:[function(t,e,n){"use strict";var T=t("punycode"),E=t("./util");function x(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}n.parse=i,n.resolve=function(t,e){return i(t,!1,!0).resolve(e)},n.resolveObject=function(t,e){return t?i(t,!1,!0).resolveObject(e):e},n.format=function(t){E.isString(t)&&(t=i(t));return t instanceof x?t.format():x.prototype.format.call(t)},n.Url=x;var S=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,C=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),A=["'"].concat(n),P=["%","/","?",";","#"].concat(A),M=["/","?","#"],O=/^[+a-z0-9A-Z_-]{0,63}$/,R=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,I={javascript:!0,"javascript:":!0},B={javascript:!0,"javascript:":!0},D={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=t("querystring");function i(t,e,n){var r;return t&&E.isObject(t)&&t instanceof x?t:((r=new x).parse(t,e,n),r)}x.prototype.parse=function(t,e,n){if(!E.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),r=-1!==r&&r<t.indexOf("#")?"?":"#",i=t.split(r);i[0]=i[0].replace(/\\/g,"/");var o=(o=t=i.join(r)).trim();if(!n&&1===t.split("#").length){i=C.exec(o);if(i)return this.path=o,this.href=o,this.pathname=i[1],i[2]?(this.search=i[2],this.query=e?k.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var s,r=S.exec(o);if(r&&(s=(r=r[0]).toLowerCase(),this.protocol=s,o=o.substr(r.length)),!(n||r||o.match(/^\/\/[^@\/]+@[^@\/]+/))||!(b="//"===o.substr(0,2))||r&&B[r]||(o=o.substr(2),this.slashes=!0),!B[r]&&(b||r&&!D[r])){for(var a=-1,u=0;u<M.length;u++)-1!==(l=o.indexOf(M[u]))&&(-1===a||l<a)&&(a=l);-1!==(t=-1===a?o.lastIndexOf("@"):o.lastIndexOf("@",a))&&(i=o.slice(0,t),o=o.slice(t+1),this.auth=decodeURIComponent(i));for(var l,a=-1,u=0;u<P.length;u++)-1!==(l=o.indexOf(P[u]))&&(-1===a||l<a)&&(a=l);-1===a&&(a=o.length),this.host=o.slice(0,a),o=o.slice(a),this.parseHost(),this.hostname=this.hostname||"";n="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!n)for(var c=this.hostname.split(/\./),u=0,h=c.length;u<h;u++){var p=c[u];if(p&&!p.match(O)){for(var f="",d=0,g=p.length;d<g;d++)127<p.charCodeAt(d)?f+="x":f+=p[d];if(!f.match(O)){var y=c.slice(0,u),m=c.slice(u+1),v=p.match(R);v&&(y.push(v[1]),m.unshift(v[2])),m.length&&(o="/"+m.join(".")+o),this.hostname=y.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),n||(this.hostname=T.toASCII(this.hostname));var _=this.port?":"+this.port:"",b=this.hostname||"";this.host=b+_,this.href+=this.host,n&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0])&&(o="/"+o)}if(!I[s])for(u=0,h=A.length;u<h;u++){var x,w=A[u];-1!==o.indexOf(w)&&((x=encodeURIComponent(w))===w&&(x=escape(w)),o=o.split(w).join(x))}r=o.indexOf("#"),-1!==r&&(this.hash=o.substr(r),o=o.slice(0,r)),t=o.indexOf("?");return-1!==t?(this.search=o.substr(t),this.query=o.substr(t+1),e&&(this.query=k.parse(this.query)),o=o.slice(0,t)):e&&(this.search="",this.query={}),o&&(this.pathname=o),D[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(_=this.pathname||"",i=this.search||"",this.path=_+i),this.href=this.format(),this},x.prototype.format=function(){var t=this.auth||"",e=(t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@"),this.protocol||""),n=this.pathname||"",r=this.hash||"",i=!1,o="",t=(this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port)&&(i+=":"+this.port),this.query&&E.isObject(this.query)&&Object.keys(this.query).length&&(o=k.stringify(this.query)),this.search||o&&"?"+o||"");return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||D[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i=i||"",r&&"#"!==r.charAt(0)&&(r="#"+r),t&&"?"!==t.charAt(0)&&(t="?"+t),e+i+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(t=t.replace("#","%23"))+r},x.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},x.prototype.resolveObject=function(t){E.isString(t)&&((p=new x).parse(t,!1,!0),t=p);for(var e=new x,n=Object.keys(this),r=0;r<n.length;r++){var i=n[r];e[i]=this[i]}if(e.hash=t.hash,""!==t.href)if(t.slashes&&!t.protocol){for(var o=Object.keys(t),s=0;s<o.length;s++){var a=o[s];"protocol"!==a&&(e[a]=t[a])}D[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/")}else if(t.protocol&&t.protocol!==e.protocol)if(D[t.protocol]){if(e.protocol=t.protocol,t.host||B[t.protocol])e.pathname=t.pathname;else{for(var u=(t.pathname||"").split("/");u.length&&!(t.host=u.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==u[0]&&u.unshift(""),u.length<2&&u.unshift(""),e.pathname=u.join("/")}e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,(e.pathname||e.search)&&(p=e.pathname||"",f=e.search||"",e.path=p+f),e.slashes=e.slashes||t.slashes}else for(var l=Object.keys(t),c=0;c<l.length;c++){var h=l[c];e[h]=t[h]}else{var p=e.pathname&&"/"===e.pathname.charAt(0),f=t.host||t.pathname&&"/"===t.pathname.charAt(0),p=f||p||e.host&&t.pathname,d=p,g=e.pathname&&e.pathname.split("/")||[],u=t.pathname&&t.pathname.split("/")||[],y=e.protocol&&!D[e.protocol];if(y&&(e.hostname="",e.port=null,e.host&&(""===g[0]?g[0]=e.host:g.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===u[0]?u[0]=t.host:u.unshift(t.host)),t.host=null),p=p&&(""===u[0]||""===g[0])),f)e.host=(t.host||""===t.host?t:e).host,e.hostname=(t.hostname||""===t.hostname?t:e).hostname,e.search=t.search,e.query=t.query,g=u;else if(u.length)(g=g||[]).pop(),g=g.concat(u),e.search=t.search,e.query=t.query;else if(!E.isNullOrUndefined(t.search))return y&&(e.hostname=e.host=g.shift(),b=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=b.shift(),e.host=e.hostname=b.shift()),e.search=t.search,e.query=t.query,E.isNull(e.pathname)&&E.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.href=e.format(),e;if(g.length){for(var m=g.slice(-1)[0],f=(e.host||t.host||1<g.length)&&("."===m||".."===m)||""===m,v=0,_=g.length;0<=_;_--)"."===(m=g[_])?g.splice(_,1):".."===m?(g.splice(_,1),v++):v&&(g.splice(_,1),v--);if(!p&&!d)for(;v--;)g.unshift("..");!p||""===g[0]||g[0]&&"/"===g[0].charAt(0)||g.unshift(""),f&&"/"!==g.join("/").substr(-1)&&g.push("");var b,d=""===g[0]||g[0]&&"/"===g[0].charAt(0);y&&(e.hostname=e.host=!d&&g.length?g.shift():"",b=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=b.shift(),e.host=e.hostname=b.shift()),(p=p||e.host&&g.length)&&!d&&g.unshift(""),g.length?e.pathname=g.join("/"):(e.pathname=null,e.path=null),E.isNull(e.pathname)&&E.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes}else e.pathname=null,e.search?e.path="/"+e.search:e.path=null}return e.href=e.format(),e},x.prototype.parseHost=function(){var t=this.host,e=r.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":329,punycode:323,querystring:326}],329:[function(t,e,n){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}]},{},[1]);